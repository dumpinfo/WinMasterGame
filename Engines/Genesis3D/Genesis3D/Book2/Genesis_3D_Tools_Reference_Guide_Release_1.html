<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1252">
<META NAME="Generator" CONTENT="Microsoft Word 97">
<TITLE>Heading 1</TITLE>
<META NAME="Template" CONTENT="C:\Program Files\Microsoft Office\Templates\Manuscript.dot">
</HEAD>
<BODY LINK="#0000ff" VLINK="#800080">

<B><FONT FACE="Arial Black" SIZE=5><P ALIGN="CENTER">&nbsp;</P>
<P ALIGN="CENTER">&nbsp;</P>
<P ALIGN="CENTER">&nbsp;</P>
<P ALIGN="CENTER">&nbsp;</P>
<P ALIGN="CENTER">&nbsp;</P>
</FONT><FONT FACE="Arial Black" SIZE=6><P ALIGN="CENTER"><A NAME="_Toc446558862">Vol. 2. Genesis 3D Tools</P>
<P ALIGN="CENTER">Reference Guide</P>
<P ALIGN="CENTER">Release 1</A></P>
</B></FONT><FONT FACE="Arial" SIZE=6>
</FONT><FONT FACE="Arial"><P ALIGN="CENTER">by</P>
<P ALIGN="CENTER">David Dougher</P>
<P ALIGN="CENTER">January 25, 1999</P>

<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558863">Table of Contents</A></P>
</FONT><I><P ALIGN="CENTER">Introduction&#9;</B></I><A HREF="#_Toc454156639">*</A>
<B><I><P>GENESIS3D PUBLIC LICENSE&#9;</B></I><A HREF="#_Toc454156640">*</A></P><DIR>

<B><FONT SIZE=3><P>PREAMBLE&#9;</B></FONT><A HREF="#_Toc454156641">*</A></P>
<B><FONT SIZE=3><P>1. DEFINITIONS&#9;</B></FONT><A HREF="#_Toc454156642">*</A></P>
<B><FONT SIZE=3><P>2. SOURCE CODE LICENSE&#9;</B></FONT><A HREF="#_Toc454156643">*</A></P>
<B><FONT SIZE=2><P>2.1. The Eclipse Grant.&#9;</B></FONT><A HREF="#_Toc454156644">*</A></P>
<B><FONT SIZE=2><P>2.2. Contributor Grant.&#9;</B></FONT><A HREF="#_Toc454156645">*</A></P>
<B><FONT SIZE=2><P>2.3. Your Grant.&#9;</B></FONT><A HREF="#_Toc454156646">*</A></P>
<B><FONT SIZE=3><P>3. DISTRIBUTION OBLIGATIONS&#9;</B></FONT><A HREF="#_Toc454156647">*</A></P>
<B><FONT SIZE=2><P>3.1. Application of License to You.&#9;</B></FONT><A HREF="#_Toc454156648">*</A></P>
<B><FONT SIZE=2><P>3.2. Application of License to Eclipse.&#9;</B></FONT><A HREF="#_Toc454156649">*</A></P>
<B><FONT SIZE=2><P>3.3. Availability of Source Code.&#9;</B></FONT><A HREF="#_Toc454156650">*</A></P>
<B><FONT SIZE=2><P>3.4. Description of Modifications.&#9;</B></FONT><A HREF="#_Toc454156651">*</A></P>
<B><FONT SIZE=2><P>3.5. Intellectual Property Matters&#9;</B></FONT><A HREF="#_Toc454156652">*</A></P>
<B><FONT SIZE=2><P>3.6. Required Notices.&#9;</B></FONT><A HREF="#_Toc454156653">*</A></P>
<B><FONT SIZE=2><P>3.7. Distribution of Executable Versions.&#9;</B></FONT><A HREF="#_Toc454156654">*</A></P>
<B><FONT SIZE=2><P>3.8. Larger Works.&#9;</B></FONT><A HREF="#_Toc454156655">*</A></P>
<B><FONT SIZE=3><P>4. RESTRICTIONS&#9;</B></FONT><A HREF="#_Toc454156656">*</A></P>
<B><FONT SIZE=2><P>4.1. You agree to:&#9;</B></FONT><A HREF="#_Toc454156657">*</A></P>
<B><FONT SIZE=2><P>4.2. You may not:&#9;</B></FONT><A HREF="#_Toc454156658">*</A></P>
<B><FONT SIZE=3><P>5. INABILITY TO COMPLY DUE TO STATUTE OR&#9;</B></FONT><A HREF="#_Toc454156659">*</A></P>
<B><FONT SIZE=3><P>REGULATION&#9;</B></FONT><A HREF="#_Toc454156660">*</A></P>
<B><FONT SIZE=3><P>6. APPLICATION OF THIS LICENSE&#9;</B></FONT><A HREF="#_Toc454156661">*</A></P>
<B><FONT SIZE=3><P>7. VERSIONS OF THE LICENSE&#9;</B></FONT><A HREF="#_Toc454156662">*</A></P>
<B><FONT SIZE=2><P>7.1. New Versions.&#9;</B></FONT><A HREF="#_Toc454156663">*</A></P>
<B><FONT SIZE=2><P>7.2. Effect of New Versions.&#9;</B></FONT><A HREF="#_Toc454156664">*</A></P>
<B><FONT SIZE=3><P>8. DISCLAIMER OF WARRANTY&#9;</B></FONT><A HREF="#_Toc454156665">*</A></P>
<B><FONT SIZE=3><P>9. TERMINATION&#9;</B></FONT><A HREF="#_Toc454156666">*</A></P>
<B><FONT SIZE=3><P>10. LIMITATION OF LIABILITY&#9;</B></FONT><A HREF="#_Toc454156667">*</A></P>
<B><FONT SIZE=3><P>11. U.S. GOVERNMENT END USERS&#9;</B></FONT><A HREF="#_Toc454156668">*</A></P>
<B><FONT SIZE=3><P>12. MISCELLANEOUS&#9;</B></FONT><A HREF="#_Toc454156669">*</A></P>
<B><FONT SIZE=3><P>13. RESPONSIBILITY FOR CLAIMS&#9;</B></FONT><A HREF="#_Toc454156670">*</A></P>
<B><FONT SIZE=3><P>EXHIBIT A.&#9;</B></FONT><A HREF="#_Toc454156671">*</A></P>
<B><FONT SIZE=3><P>EXHIBIT B.&#9;</B></FONT><A HREF="#_Toc454156672">*</A></P></DIR>

<B><I><P>Game File Structure Layout&#9;</B></I><A HREF="#_Toc454156673">*</A></P><DIR>

<FONT FACE="Arial" SIZE=3><P>Directory of C:\Genesis3D*</FONT><B><FONT SIZE=3>&#9;</B></FONT><A HREF="#_Toc454156674">*</A></P>
<FONT FACE="Arial" SIZE=2><P>Directory of C:\Genesis3D\Actors*</FONT><B><FONT SIZE=2>&#9;</B></FONT><A HREF="#_Toc454156675">*</A></P>
<FONT FACE="Arial" SIZE=2><P>Directory of C:\Genesis\Bmp*</FONT><B><FONT SIZE=2>&#9;</B></FONT><A HREF="#_Toc454156676">*</A></P><DIR>

<FONT SIZE=2><P>Directory of C:\Genesis\Bmp\Console*&#9;</FONT><A HREF="#_Toc454156677">*</A></P>
<FONT SIZE=2><P>Directory of C:\Genesis3D\bmp\Explode*&#9;</FONT><A HREF="#_Toc454156678">*</A></P>
<FONT SIZE=2><P>Directory of C:\Genesis3D\bmp\Fx*&#9;</FONT><A HREF="#_Toc454156679">*</A></P>
<FONT SIZE=2><P>Directory of C:\Genesis3D\bmp\Menu*&#9;</FONT><A HREF="#_Toc454156680">*</A></P>
<FONT SIZE=2><P>Directory of C:\Genesis3D\bmp\Sbar*&#9;</FONT><A HREF="#_Toc454156681">*</A></P>
<FONT SIZE=2><P>Directory of C:\Genesis3D\bmp\Weapon*&#9;</FONT><A HREF="#_Toc454156682">*</A></P></DIR>

<FONT FACE="Arial" SIZE=2><P>Directory of C:\Genesis3D\doc*</FONT><B><FONT SIZE=2>&#9;</B></FONT><A HREF="#_Toc454156683">*</A></P><DIR>

<FONT SIZE=2><P>Directory of C:\Genesis3D\doc\APIReference*&#9;</FONT><A HREF="#_Toc454156684">*</A></P>
<FONT SIZE=2><P>Directory of C:\Genesis3D\doc\editor*&#9;</FONT><A HREF="#_Toc454156685">*</A></P>
<FONT SIZE=2><P>Directory of C:\Genesis3D\doc\editor*&#9;</FONT><A HREF="#_Toc454156686">*</A></P></DIR>

<FONT FACE="Arial" SIZE=2><P>Directory of C:\Genesis3D\Genesis3D*</FONT><B><FONT SIZE=2>&#9;</B></FONT><A HREF="#_Toc454156687">*</A></P>
<FONT FACE="Arial" SIZE=2><P>Directory of C:\Genesis3D\include</FONT><B><FONT SIZE=2>&#9;</B></FONT><A HREF="#_Toc454156688">*</A></P>
<FONT FACE="Arial" SIZE=2><P>Directory of C:\Genesis3D\levels*</FONT><B><FONT SIZE=2>&#9;</B></FONT><A HREF="#_Toc454156689">*</A></P>
<FONT FACE="Arial" SIZE=2><P>Directory of C:\Genesis3D\lib*</FONT><B><FONT SIZE=2>&#9;</B></FONT><A HREF="#_Toc454156690">*</A></P>
<FONT FACE="Arial" SIZE=2><P>Directory of C:\Genesis3D\Objects*</FONT><B><FONT SIZE=2>&#9;</B></FONT><A HREF="#_Toc454156691">*</A></P>
<FONT FACE="Arial" SIZE=2><P>Directory of C:\Genesis3D\OpenSource*</FONT><B><FONT SIZE=2>&#9;</B></FONT><A HREF="#_Toc454156692">*</A></P><DIR>

<FONT SIZE=2><P>Directory of C:\Genesis3D\OpenSource\masm*&#9;</FONT><A HREF="#_Toc454156693">*</A></P>
<FONT SIZE=2><P>Directory of C:\Genesis3D\OpenSource\msdev60*&#9;</FONT><A HREF="#_Toc454156694">*</A></P>
<FONT SIZE=2><P>Directory of C:\Genesis3D\OpenSource\sdk*&#9;</FONT><A HREF="#_Toc454156695">*</A></P>
<FONT SIZE=2><P>Directory of C:\Genesis3D\OpenSource\Source&#9;</FONT><A HREF="#_Toc454156696">*</A></P></DIR>

<FONT FACE="Arial" SIZE=2><P>Directory of C:\Genesis3D\Redist*</FONT><B><FONT SIZE=2>&#9;</B></FONT><A HREF="#_Toc454156697">*</A></P>
<FONT FACE="Arial" SIZE=2><P>Directory of C:\Genesis3D\src</FONT><B><FONT SIZE=2>&#9;</B></FONT><A HREF="#_Toc454156698">*</A></P><DIR>

<FONT SIZE=2><P>Directory of C:\Genesis3D\src\DrvMenu&#9;</FONT><A HREF="#_Toc454156699">*</A></P>
<FONT SIZE=2><P>Directory of C:\Genesis3D\src\FX&#9;</FONT><A HREF="#_Toc454156700">*</A></P>
<FONT SIZE=2><P>Directory of C:\Genesis3D\src\Game&#9;</FONT><A HREF="#_Toc454156701">*</A></P>
<FONT SIZE=2><P>Directory of C:\Genesis3D\src\Procedurals&#9;</FONT><A HREF="#_Toc454156702">*</A></P></DIR>

<FONT FACE="Arial" SIZE=2><P>Directory of C:\Genesis3D\Tools</FONT><B><FONT SIZE=2>&#9;</B></FONT><A HREF="#_Toc454156703">*</A></P>
<FONT FACE="Arial" SIZE=2><P>Directory of C:\Genesis3D\wav*</FONT><B><FONT SIZE=2>&#9;</B></FONT><A HREF="#_Toc454156704">*</A></P></DIR>

<B><I><P>Genesis3D API Documentation&#9;</B></I><A HREF="#_Toc454156705">*</A></P><DIR>

<B><FONT SIZE=3><P>Genesis3D API and Tools Documentation&#9;</B></FONT><A HREF="#_Toc454156706">*</A></P></DIR>

<B><I><P>Genesis3D Library Header Files&#9;</B></I><A HREF="#_Toc454156707">*</A></P><DIR>

<B><I><FONT SIZE=3><P>Include Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156708">*</A></P>
<B><FONT SIZE=2><P>Actor.h&#9;</B></FONT><A HREF="#_Toc454156709">*</A></P>
<B><FONT SIZE=2><P>Basetype.h&#9;</B></FONT><A HREF="#_Toc454156710">*</A></P>
<B><FONT SIZE=2><P>Bitmap.h&#9;</B></FONT><A HREF="#_Toc454156711">*</A></P>
<B><FONT SIZE=2><P>Body.h&#9;</B></FONT><A HREF="#_Toc454156712">*</A></P>
<B><FONT SIZE=2><P>Errorlog.h&#9;</B></FONT><A HREF="#_Toc454156713">*</A></P>
<B><FONT SIZE=2><P>ExtBox.h&#9;</B></FONT><A HREF="#_Toc454156714">*</A></P>
<B><FONT SIZE=2><P>Font.h&#9;</B></FONT><A HREF="#_Toc454156715">*</A></P>
<B><FONT SIZE=2><P>Genesis.h&#9;</B></FONT><A HREF="#_Toc454156716">*</A></P>
<B><FONT SIZE=2><P>Getypes.h&#9;</B></FONT><A HREF="#_Toc454156717">*</A></P>
<B><FONT SIZE=2><P>Matrix33.h&#9;</B></FONT><A HREF="#_Toc454156718">*</A></P>
<B><FONT SIZE=2><P>Motion.h&#9;</B></FONT><A HREF="#_Toc454156719">*</A></P>
<B><FONT SIZE=2><P>Path.h&#9;</B></FONT><A HREF="#_Toc454156720">*</A></P>
<B><FONT SIZE=2><P>PhysicsJoint.h&#9;</B></FONT><A HREF="#_Toc454156721">*</A></P>
<B><FONT SIZE=2><P>PhysicsObject.h&#9;</B></FONT><A HREF="#_Toc454156722">*</A></P>
<B><FONT SIZE=2><P>PhysicsSystem.h&#9;</B></FONT><A HREF="#_Toc454156723">*</A></P>
<B><FONT SIZE=2><P>Pixelformat.h&#9;</B></FONT><A HREF="#_Toc454156724">*</A></P>
<B><FONT SIZE=2><P>Quatern.h&#9;</B></FONT><A HREF="#_Toc454156725">*</A></P>
<B><FONT SIZE=2><P>Ram.h&#9;</B></FONT><A HREF="#_Toc454156726">*</A></P>
<B><FONT SIZE=2><P>Vec3d.h&#9;</B></FONT><A HREF="#_Toc454156727">*</A></P>
<B><FONT SIZE=2><P>Vfile.h&#9;</B></FONT><A HREF="#_Toc454156728">*</A></P>
<B><FONT SIZE=2><P>Xform3d.h&#9;</B></FONT><A HREF="#_Toc454156729">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156730">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/Actview/GenesisSDK Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156731">*</A></P>
<B><FONT SIZE=2><P>OpenSource/Tools/Actview/Main Subdirectory&#9;</B></FONT><A HREF="#_Toc454156732">*</A></P>
<B><FONT SIZE=2><P>Blender.h&#9;</B></FONT><A HREF="#_Toc454156733">*</A></P>
<B><FONT SIZE=2><P>Resource.h&#9;</B></FONT><A HREF="#_Toc454156734">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/Actview/Util Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156735">*</A></P>
<B><FONT SIZE=2><P>About.h&#9;</B></FONT><A HREF="#_Toc454156736">*</A></P>
<B><FONT SIZE=2><P>Drvlist.h&#9;</B></FONT><A HREF="#_Toc454156737">*</A></P>
<B><FONT SIZE=2><P>FilePath.h&#9;</B></FONT><A HREF="#_Toc454156738">*</A></P>
<B><FONT SIZE=2><P>InstCheck.h&#9;</B></FONT><A HREF="#_Toc454156739">*</A></P>
<B><FONT SIZE=2><P>RCString.h&#9;</B></FONT><A HREF="#_Toc454156740">*</A></P>
<B><FONT SIZE=2><P>Units.h&#9;</B></FONT><A HREF="#_Toc454156741">*</A></P>
<B><FONT SIZE=2><P>WinUtil.h&#9;</B></FONT><A HREF="#_Toc454156742">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/Exporters Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156743">*</A></P>
<B><FONT SIZE=2><P>3dseres.h&#9;</B></FONT><A HREF="#_Toc454156744">*</A></P>
<B><FONT SIZE=2><P>3dsimp.h&#9;</B></FONT><A HREF="#_Toc454156745">*</A></P>
<B><FONT SIZE=2><P>3dsires.h&#9;</B></FONT><A HREF="#_Toc454156746">*</A></P>
<B><FONT SIZE=2><P>Cfile.h&#9;</B></FONT><A HREF="#_Toc454156747">*</A></P>
<B><FONT SIZE=2><P>gexp.h&#9;</B></FONT><A HREF="#_Toc454156748">*</A></P>
<B><FONT SIZE=2><P>Kfio.h&#9;</B></FONT><A HREF="#_Toc454156749">*</A></P>
<B><FONT SIZE=2><P>Mtldef.h&#9;</B></FONT><A HREF="#_Toc454156750">*</A></P>
<B><FONT SIZE=2><P>Ofile.h&#9;</B></FONT><A HREF="#_Toc454156751">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/Fusion2 Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156752">*</A></P>
<B><FONT SIZE=2><P>About.h&#9;</B></FONT><A HREF="#_Toc454156753">*</A></P>
<B><FONT SIZE=2><P>ActivationWatch.h&#9;</B></FONT><A HREF="#_Toc454156754">*</A></P>
<B><FONT SIZE=2><P>array.h&#9;</B></FONT><A HREF="#_Toc454156755">*</A></P>
<B><FONT SIZE=2><P>box3d.h&#9;</B></FONT><A HREF="#_Toc454156756">*</A></P>
<B><FONT SIZE=2><P>brush.h&#9;</B></FONT><A HREF="#_Toc454156757">*</A></P>
<B><FONT SIZE=2><P>BrushAttributesDialog.h&#9;</B></FONT><A HREF="#_Toc454156758">*</A></P>
<B><FONT SIZE=2><P>BrushEntityDialog.h&#9;</B></FONT><A HREF="#_Toc454156759">*</A></P>
<B><FONT SIZE=2><P>BrushGroupDialog.h&#9;</B></FONT><A HREF="#_Toc454156760">*</A></P>
<B><FONT SIZE=2><P>BrushTemplate.h&#9;</B></FONT><A HREF="#_Toc454156761">*</A></P>
<B><FONT SIZE=2><P>ChildFrm.h&#9;</B></FONT><A HREF="#_Toc454156762">*</A></P>
<B><FONT SIZE=2><P>ColorBtn.h&#9;</B></FONT><A HREF="#_Toc454156763">*</A></P>
<B><FONT SIZE=2><P>CompileDialog.h&#9;</B></FONT><A HREF="#_Toc454156764">*</A></P>
<B><FONT SIZE=2><P>Compiler.h&#9;</B></FONT><A HREF="#_Toc454156765">*</A></P>
<B><FONT SIZE=2><P>ConsoleTab.h&#9;</B></FONT><A HREF="#_Toc454156766">*</A></P>
<B><FONT SIZE=2><P>CreateArchDialog.h&#9;</B></FONT><A HREF="#_Toc454156767">*</A></P>
<B><FONT SIZE=2><P>CreateBoxDialog.h&#9;</B></FONT><A HREF="#_Toc454156768">*</A></P>
<B><FONT SIZE=2><P>CreateConeDialog.h&#9;</B></FONT><A HREF="#_Toc454156769">*</A></P>
<B><FONT SIZE=2><P>CreateCylDialog.h&#9;</B></FONT><A HREF="#_Toc454156770">*</A></P>
<B><FONT SIZE=2><P>CreateSphereoidDialog.h&#9;</B></FONT><A HREF="#_Toc454156771">*</A></P>
<B><FONT SIZE=2><P>CreateStaircaseDialog.h&#9;</B></FONT><A HREF="#_Toc454156772">*</A></P>
<B><FONT SIZE=2><P>EntitiesDialog.h&#9;</B></FONT><A HREF="#_Toc454156773">*</A></P>
<B><FONT SIZE=2><P>Entity.h&#9;</B></FONT><A HREF="#_Toc454156774">*</A></P>
<B><FONT SIZE=2><P>EntityTable.h&#9;</B></FONT><A HREF="#_Toc454156775">*</A></P>
<B><FONT SIZE=2><P>EntityVisDialog.h&#9;</B></FONT><A HREF="#_Toc454156776">*</A></P>
<B><FONT SIZE=2><P>EntTypeName.h&#9;</B></FONT><A HREF="#_Toc454156777">*</A></P>
<B><FONT SIZE=2><P>EntView.h&#9;</B></FONT><A HREF="#_Toc454156778">*</A></P>
<B><FONT SIZE=2><P>face.h&#9;</B></FONT><A HREF="#_Toc454156779">*</A></P>
<B><FONT SIZE=2><P>FaceAttributesDialog.h&#9;</B></FONT><A HREF="#_Toc454156780">*</A></P>
<B><FONT SIZE=2><P>facelist.h&#9;</B></FONT><A HREF="#_Toc454156781">*</A></P>
<B><FONT SIZE=2><P>FilePath.h&#9;</B></FONT><A HREF="#_Toc454156782">*</A></P>
<B><FONT SIZE=2><P>Fusion.h&#9;</B></FONT><A HREF="#_Toc454156783">*</A></P>
<B><FONT SIZE=2><P>FusionDoc.h&#9;</B></FONT><A HREF="#_Toc454156784">*</A></P>
<B><FONT SIZE=2><P>FusionTabControls.h&#9;</B></FONT><A HREF="#_Toc454156785">*</A></P>
<B><FONT SIZE=2><P>FusionView.h&#9;</B></FONT><A HREF="#_Toc454156786">*</A></P>
<B><FONT SIZE=2><P>Gbsplib.h&#9;</B></FONT><A HREF="#_Toc454156787">*</A></P>
<B><FONT SIZE=2><P>GridSizeDialog.h&#9;</B></FONT><A HREF="#_Toc454156788">*</A></P>
<B><FONT SIZE=2><P>group.h&#9;</B></FONT><A HREF="#_Toc454156789">*</A></P>
<B><FONT SIZE=2><P>KeyEditDlg.h&#9;</B></FONT><A HREF="#_Toc454156790">*</A></P>
<B><FONT SIZE=2><P>level.h&#9;</B></FONT><A HREF="#_Toc454156791">*</A></P>
<B><FONT SIZE=2><P>LevelOptions.h&#9;</B></FONT><A HREF="#_Toc454156792">*</A></P>
<B><FONT SIZE=2><P>list.h&#9;</B></FONT><A HREF="#_Toc454156793">*</A></P>
<B><FONT SIZE=2><P>MainFrm.h&#9;</B></FONT><A HREF="#_Toc454156794">*</A></P>
<B><FONT SIZE=2><P>Model.h&#9;</B></FONT><A HREF="#_Toc454156795">*</A></P>
<B><FONT SIZE=2><P>ModelDialog.h&#9;</B></FONT><A HREF="#_Toc454156796">*</A></P>
<B><FONT SIZE=2><P>Mydef.h&#9;</B></FONT><A HREF="#_Toc454156797">*</A></P>
<B><FONT SIZE=2><P>node.h&#9;</B></FONT><A HREF="#_Toc454156798">*</A></P>
<B><FONT SIZE=2><P>Parse3dt.h&#9;</B></FONT><A HREF="#_Toc454156799">*</A></P>
<B><FONT SIZE=2><P>PreferencesDialog.h&#9;</B></FONT><A HREF="#_Toc454156800">*</A></P>
<B><FONT SIZE=2><P>prefs.h&#9;</B></FONT><A HREF="#_Toc454156801">*</A></P>
<B><FONT SIZE=2><P>render.h&#9;</B></FONT><A HREF="#_Toc454156802">*</A></P>
<B><FONT SIZE=2><P>resource.h&#9;</B></FONT><A HREF="#_Toc454156803">*</A></P>
<B><FONT SIZE=2><P>SelBrushList.h&#9;</B></FONT><A HREF="#_Toc454156804">*</A></P>
<B><FONT SIZE=2><P>SelFaceList.h&#9;</B></FONT><A HREF="#_Toc454156805">*</A></P>
<B><FONT SIZE=2><P>SkyDialog.h&#9;</B></FONT><A HREF="#_Toc454156806">*</A></P>
<B><FONT SIZE=2><P>stack.h&#9;</B></FONT><A HREF="#_Toc454156807">*</A></P>
<B><FONT SIZE=2><P>StdAfx.h&#9;</B></FONT><A HREF="#_Toc454156808">*</A></P>
<B><FONT SIZE=2><P>TextureDialog.h&#9;</B></FONT><A HREF="#_Toc454156809">*</A></P>
<B><FONT SIZE=2><P>typeio.h&#9;</B></FONT><A HREF="#_Toc454156810">*</A></P>
<B><FONT SIZE=2><P>Undostack.h&#9;</B></FONT><A HREF="#_Toc454156811">*</A></P>
<B><FONT SIZE=2><P>units.h&#9;</B></FONT><A HREF="#_Toc454156812">*</A></P>
<B><FONT SIZE=2><P>util.h&#9;</B></FONT><A HREF="#_Toc454156813">*</A></P>
<B><FONT SIZE=2><P>WadFile.h&#9;</B></FONT><A HREF="#_Toc454156814">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/Fusion2/TypeParser Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156815">*</A></P>
<B><FONT SIZE=2><P>Cparser.h&#9;</B></FONT><A HREF="#_Toc454156816">*</A></P>
<B><FONT SIZE=2><P>cscanner.h&#9;</B></FONT><A HREF="#_Toc454156817">*</A></P>
<B><FONT SIZE=2><P>Hash.h&#9;</B></FONT><A HREF="#_Toc454156818">*</A></P>
<B><FONT SIZE=2><P>iden.h&#9;</B></FONT><A HREF="#_Toc454156819">*</A></P>
<B><FONT SIZE=2><P>scanner.h&#9;</B></FONT><A HREF="#_Toc454156820">*</A></P>
<B><FONT SIZE=2><P>symtab.h&#9;</B></FONT><A HREF="#_Toc454156821">*</A></P>
<B><FONT SIZE=2><P>type.h&#9;</B></FONT><A HREF="#_Toc454156822">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/GBSPLib Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156823">*</A></P>
<B><FONT SIZE=2><P>Brush2.h&#9;</B></FONT><A HREF="#_Toc454156824">*</A></P>
<B><FONT SIZE=2><P>BSP.h&#9;</B></FONT><A HREF="#_Toc454156825">*</A></P>
<B><FONT SIZE=2><P>Fill.h&#9;</B></FONT><A HREF="#_Toc454156826">*</A></P>
<B><FONT SIZE=2><P>GBSPFILE.h&#9;</B></FONT><A HREF="#_Toc454156827">*</A></P>
<B><FONT SIZE=2><P>Gbsplib.h&#9;</B></FONT><A HREF="#_Toc454156828">*</A></P>
<B><FONT SIZE=2><P>GBSPPrep.h&#9;</B></FONT><A HREF="#_Toc454156829">*</A></P>
<B><FONT SIZE=2><P>Leaf.h&#9;</B></FONT><A HREF="#_Toc454156830">*</A></P>
<B><FONT SIZE=2><P>Light.h&#9;</B></FONT><A HREF="#_Toc454156831">*</A></P>
<B><FONT SIZE=2><P>Map.h&#9;</B></FONT><A HREF="#_Toc454156832">*</A></P>
<B><FONT SIZE=2><P>Mathlib.h&#9;</B></FONT><A HREF="#_Toc454156833">*</A></P>
<B><FONT SIZE=2><P>Poly.h&#9;</B></FONT><A HREF="#_Toc454156834">*</A></P>
<B><FONT SIZE=2><P>Portals.h&#9;</B></FONT><A HREF="#_Toc454156835">*</A></P>
<B><FONT SIZE=2><P>Texture.h&#9;</B></FONT><A HREF="#_Toc454156836">*</A></P>
<B><FONT SIZE=2><P>Utils.h&#9;</B></FONT><A HREF="#_Toc454156837">*</A></P>
<B><FONT SIZE=2><P>Vis.h&#9;</B></FONT><A HREF="#_Toc454156838">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/GBSPLib/SDKShare/Include Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156839">*</A></P>
<B><FONT SIZE=2><P>Dcommon.h&#9;</B></FONT><A HREF="#_Toc454156840">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/GPreview/ Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156841">*</A></P>
<B><FONT SIZE=2><P>drvlist.h&#9;</B></FONT><A HREF="#_Toc454156842">*</A></P>
<B><FONT SIZE=2><P>function.h&#9;</B></FONT><A HREF="#_Toc454156843">*</A></P>
<B><FONT SIZE=2><P>resource.h&#9;</B></FONT><A HREF="#_Toc454156844">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/mkactor/ActBuild Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156845">*</A></P>
<B><FONT SIZE=2><P>ActBuild.h&#9;</B></FONT><A HREF="#_Toc454156846">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/mkactor/AStudio Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156847">*</A></P>
<B><FONT SIZE=2><P>AOptions.h&#9;</B></FONT><A HREF="#_Toc454156848">*</A></P>
<B><FONT SIZE=2><P>AProject.h&#9;</B></FONT><A HREF="#_Toc454156849">*</A></P>
<B><FONT SIZE=2><P>AStudio.h&#9;</B></FONT><A HREF="#_Toc454156850">*</A></P>
<B><FONT SIZE=2><P>BodyDlg.h&#9;</B></FONT><A HREF="#_Toc454156851">*</A></P>
<B><FONT SIZE=2><P>LogoPage.h&#9;</B></FONT><A HREF="#_Toc454156852">*</A></P>
<B><FONT SIZE=2><P>make.h&#9;</B></FONT><A HREF="#_Toc454156853">*</A></P>
<B><FONT SIZE=2><P>MakeHelp.h&#9;</B></FONT><A HREF="#_Toc454156854">*</A></P>
<B><FONT SIZE=2><P>MaterialsDlg.h&#9;</B></FONT><A HREF="#_Toc454156855">*</A></P>
<B><FONT SIZE=2><P>MotionsDlg.h&#9;</B></FONT><A HREF="#_Toc454156856">*</A></P>
<B><FONT SIZE=2><P>mxscript.h&#9;</B></FONT><A HREF="#_Toc454156857">*</A></P>
<B><FONT SIZE=2><P>MyFileDlg.h&#9;</B></FONT><A HREF="#_Toc454156858">*</A></P>
<B><FONT SIZE=2><P>NewPrjDlg.h&#9;</B></FONT><A HREF="#_Toc454156859">*</A></P>
<B><FONT SIZE=2><P>PathsDlg.h&#9;</B></FONT><A HREF="#_Toc454156860">*</A></P>
<B><FONT SIZE=2><P>PropPage.h&#9;</B></FONT><A HREF="#_Toc454156861">*</A></P>
<B><FONT SIZE=2><P>PropSheet.h&#9;</B></FONT><A HREF="#_Toc454156862">*</A></P>
<B><FONT SIZE=2><P>resource.h&#9;</B></FONT><A HREF="#_Toc454156863">*</A></P>
<B><FONT SIZE=2><P>SettingsDlg.h&#9;</B></FONT><A HREF="#_Toc454156864">*</A></P>
<B><FONT SIZE=2><P>StdAfx.h&#9;</B></FONT><A HREF="#_Toc454156865">*</A></P>
<B><FONT SIZE=2><P>TargetDlg.h&#9;</B></FONT><A HREF="#_Toc454156866">*</A></P>
<B><FONT SIZE=2><P>TextInputDlg.h&#9;</B></FONT><A HREF="#_Toc454156867">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/mkactor/AStudio/Util Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156868">*</A></P>
<B><FONT SIZE=2><P>Array.h&#9;</B></FONT><A HREF="#_Toc454156869">*</A></P>
<B><FONT SIZE=2><P>FilePath.h&#9;</B></FONT><A HREF="#_Toc454156870">*</A></P>
<B><FONT SIZE=2><P>RcString.h&#9;</B></FONT><A HREF="#_Toc454156871">*</A></P>
<B><FONT SIZE=2><P>Util.h&#9;</B></FONT><A HREF="#_Toc454156872">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/mkactor/common Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156873">*</A></P>
<B><FONT SIZE=2><P>Maxmath.h&#9;</B></FONT><A HREF="#_Toc454156874">*</A></P>
<B><FONT SIZE=2><P>mkutil.h&#9;</B></FONT><A HREF="#_Toc454156875">*</A></P>
<B><FONT SIZE=2><P>TDBody.h&#9;</B></FONT><A HREF="#_Toc454156876">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/mkactor/fmtactor Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156877">*</A></P>
<B><FONT SIZE=2><P>Fmtactor.h&#9;</B></FONT><A HREF="#_Toc454156878">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/mkactor/GenesisSDK Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156879">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/mkactor/GenesisSDK/Include Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156880">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/mkactor/mkactor Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156881">*</A></P>
<B><FONT SIZE=2><P>Mkactor.h&#9;</B></FONT><A HREF="#_Toc454156882">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/mkactor/mkbody Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156883">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/mkactor/mkmotion Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156884">*</A></P>
<B><FONT SIZE=2><P>Mkmotion.h&#9;</B></FONT><A HREF="#_Toc454156885">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/mkactor/mkmop Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156886">*</A></P>
<B><FONT SIZE=2><P>Log.h&#9;</B></FONT><A HREF="#_Toc454156887">*</A></P>
<B><FONT SIZE=2><P>mopshell.h&#9;</B></FONT><A HREF="#_Toc454156888">*</A></P>
<B><FONT SIZE=2><P>pop.h&#9;</B></FONT><A HREF="#_Toc454156889">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/tpack/GenesisSDK/Include Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156890">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/tpack/GenesisSDK Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156891">*</A></P>
<B><I><FONT SIZE=3><P>OpenSource/Tools/tpack/Source Subdirectory</I>&#9;</B></FONT><A HREF="#_Toc454156892">*</A></P>
<B><FONT SIZE=2><P>Resource.h&#9;</B></FONT><A HREF="#_Toc454156893">*</A></P>
<B><FONT FACE="Arial Black" SIZE=5><P ALIGN="CENTER"></P></DIR>
</P>
<P ALIGN="CENTER"><A NAME="_Toc446558899"><A NAME="_Toc452379798"><A NAME="_Toc446558895"><A NAME="_Toc454069773"><A NAME="_Toc454156639">Introduction</A></A></P>
</B></FONT><FONT FACE="Arial">
<P>&#9;Again, as in the first volume, I would like to thank the people at Eclipse Software for their kind permission to incorporate so much of their hard work, dedication and creativity into this book.  As a result, what you are reading is primarily a work of research, not creativity, on my part.  I am indebted to the people at Eclipse for allowing me to incorporate large amounts of their header files and rephrase much of their documentation.  I have attempted to add quite a bit of useful information and my own organizational spin, but wherever possible I have retained the content that Eclipse has presented on the theory that their descriptions often contain subtle nuances which are of importance in understanding the content, direction and focus of the engine component development efforts.</P>
<P>&#9;This reference work is the second in a series of books about the Genesis3D Engine from Eclipse Software.  This book is specifically about the Genesis3D Tools - Release 1.0.  This book describes the layout of the Genesis3D tool files and subdirectories, as well as their contents. It continues with a complete listing of all the C and C++ header files in both the C:\Genesis3d\include subdirectory,  and the OpenSource\Tools subdirectories.  These comprise all the C and C++ header files for the Genesis3D tools for developers who wish to create tools for the Genesis3D engine.</P>
<P>&#9;The first volume of this series contains material on the Genesis 3D engine itself. It contains much of the same material in the opening sections of this book and then goes on to cover the C and C++ header files in the C:\Genesis\OpenSource\Source section.</P>
<P>&#9;The third volume contains a listing of the major function calls contained in the outer include directory - this directory contains all the function calls necessary to use the engine without modification.  Examination of this reference will point developers to functions which contain code they may need to modify for their own application, or for tools they are developing, or it can serve as a reference to those who wish to make a game without modifying the sources.</P>
<P>&#9;The fourth and fifth volumes are an introduction to using the Genesis3D Tools and the construction of a game using the Genesis3D engine.</P>
<P>&#9;This volume can be used both by persons who wish to create new tools for the Genesis3D engine or wish to modify those already done by Eclipse.  Genesis3D is an OpenSource project with unique requirements, so the decision on whether you wish to use the engine as is, or modify it in some fashion should be made after a careful reading of the license agreement. </P>
<P>&#9; In essence the agreement states that if you wish to use the precreated libraries and link using the header files in the include directory there is no obligation on you and you may use the resultant software in any way you wish -- as long as you incorporate the Genesis logo at the beginning of your program to acknowledge Eclipse's contribution. If you wish to modify the source code to the engine you must either contribute the changes you have made to the Genesis community or purchase a $50,000.00 source code license from Eclipse.  I have enclosed a copy of this document so you can make an informed decision.<BR>
</P>
<P>If you have read or browsed Volume 1. you may wish to skip the first 80 pages of material in this work as it is duplicated to allow each book to stand on its own.  As I stated in the first volume I hope that you will find this work useful.  </P>

<P>&#9;D. Dougher</P>
<P>&#9;May 1999</P>
</FONT><B><FONT FACE="Arial Black" SIZE=5><P ALIGN="CENTER">&nbsp;</P>
<P ALIGN="CENTER"><A NAME="_Toc454069774"><A NAME="_Toc454156640">GENESIS3D PUBLIC LICENSE</A></A></P>
</B></FONT><FONT FACE="Arial">
<P ALIGN="CENTER">Version 1.01</P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069775"><A NAME="_Toc454156641">PREAMBLE</A></A></P>
</B></FONT><FONT FACE="Arial">
<P>Please read this license carefully before using Genesis3D. By </P>
<P>downloading and using Genesis3D, you are agreeing to be bound by the </P>
<P>terms of this license. If you do not or cannot agree to the terms of this </P>
<P>License, do not download or use Genesis3D.</P>

<P>This license is intended to make the source code of a state-of-the-art 3D </P>
<P>engine available to everyone who wants the opportunity to use and </P>
<P>contribute to a 3D engine.  Genesis3D is a commercial product.  It is not </P>
<P>in the public domain or "freeware" or "shareware".  By making the source </P>
<P>code available we are not giving it away or abandoning our right of </P>
<P>ownership.  By using Genesis3D you agree to be bound by the spirit and </P>
<P>the terms of this license.</P>

<P>This license permits you to use the Genesis3D SDK to create and sell </P>
<P>products.  You may also redistribute the Genesis3D SDK.  You may also </P>
<P>make modifications to the SDK and distribute them too.</P>

<P>If you modify the Genesis3D engine source, excerpt any portion of it, or if </P>
<P>you use a modified version of the engine source, you must make your </P>
<P>source code available for others to use under the same terms that we have </P>
<P>granted you.  This guarantees that modifications to the engine will be </P>
<P>available to everyone and the best modifications can become part of the </P>
<P>official Genesis3D release.  Your source code must be released </P>
<P>concurrent with releasing any executable built with Genesis3D.  If you do </P>
<P>not wish to make your source code available you must obtain a separate </P>
<P>license from Eclipse.</P>

<P>Gtest, the sample game, is specifically excluded from this requirement.  </P>
<P>Feel free to modify Gtest and use it in any way that benefits you.</P>

<P>If you use the original unmodified Eclipse-built binaries there is no </P>
<P>requirement for you to make your source code available.</P>

<P>You must display the original unmodified Genesis3D animated logo as </P>
<P>the first logo on startup of your product, demo or application.  You must </P>
<P>also prominently display the Genesis3D logo on any marketing materials, </P>
<P>advertising or packaging of your product.</P>

<P>These terms are good for the community because it makes the source of a </P>
<P>high-end 3D engine available to everyone and it encourages sharing of </P>
<P>improvements.  They are good for Eclipse because some companies will </P>
<P>opt to not share their source and will prefer to pay to license the engine </P>
<P>instead. These kinds of licenses will fund future Genesis3D development </P>
<P>and subsidize the free licenses that many people will enjoy.</P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069776"><A NAME="_Toc454156642">1. DEFINITIONS</A></A></P>
</B></FONT><FONT FACE="Arial">
<P>1.1. ``Contributor'' means each entity that creates or contributes to </P>
<P>the creation of Modifications.</P>

<P>1.2. ``Contributor Version'' means the combination of the Original </P>
<P>Code, prior Modifications used by a Contributor, and the </P>
<P>Modifications made by that particular Contributor.</P>

<P>1.3. ``Covered Code'' means the Original Code or Modifications or </P>
<P>the combination of the Original Code and Modifications, in each case </P>
<P>including portions thereof, and any Source Code which duplicates, </P>
<P>enhances, modifies or replaces functionality of the Covered Code as </P>
<P>defined in Exhibit B.</P>
<P> </P>
<P>1.4. ``Electronic Distribution Mechanism'' means a mechanism </P>
<P>generally accepted in the software development community for the </P>
<P>electronic transfer of data.</P>

<P>1.5. ``Eclipse'' means Eclipse Entertainment, L.L.C.</P>

<P>1.6. ``Executable'' means Covered Code in any form other than </P>
<P>Source Code.</P>

<P>1.7. ``Larger Work'' means a work which combines Covered Code </P>
<P>or portions thereof with code not governed by the terms of this </P>
<P>License.</P>

<P>1.8. ``License'' means this document.</P>

<P>1.9. ``Modifications'' means any addition to or deletion from the </P>
<P>substance or structure of either the Original Code or any previous </P>
<P>Modifications. When Covered Code is released as a series of files, a </P>
<P>Modification is:</P>
<P>A. Any addition to or deletion from the contents of a file </P>
<P>containing Original Code or previous Modifications. </P>
<P>B. Any new file that contains any part of the Original Code </P>
<P>or previous Modifications.</P>

<P>1.10. ``Original Code'' means Source Code of computer software </P>
<P>code which is described in the Source Code notice required by </P>
<P>Exhibit A as Original Code, and which, at the time of its release </P>
<P>under this License is not already Covered Code governed by this </P>
<P>License.</P>

<P>1.11. ``Source Code'' means the preferred form of the Covered Code </P>
<P>for making modifications to it, including all modules it contains, plus </P>
<P>any associated interface definition files, scripts used to control </P>
<P>compilation and installation of an Executable, or a list of source code </P>
<P>differential comparisons against either the Original Code or another </P>
<P>well known, available Covered Code of the Contributor's choice. The </P>
<P>Source Code can be in a compressed or archival form, provided the </P>
<P>appropriate decompression or de-archiving software is widely </P>
<P>available for no charge.</P>
<P> </P>
<P>1.12. ``You'' means an individual or a legal entity exercising rights </P>
<P>under, and complying with all of the terms of, this License or a future </P>
<P>version of this License issued under Section 7.1. For legal entities, </P>
<P>``You'' includes any entity which controls, is controlled by, or is </P>
<P>under common control with You. For purposes of this definition, </P>
<P>``control'' means (a) the power, direct or indirect, to cause the </P>
<P>direction or management of such entity, whether by contract or </P>
<P>otherwise, or (b) ownership of fifty percent (50%) or more of the </P>
<P>outstanding shares or beneficial ownership of such entity. </P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069777"><A NAME="_Toc454156643">2. SOURCE CODE LICENSE</A></A></P>
</B></FONT><FONT FACE="Arial"><P> </P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069778"><A NAME="_Toc454156644">2.1. The Eclipse Grant.</A></A> </P>
</B></I></FONT><FONT FACE="Arial"><P>Eclipse hereby grants You a world-wide, fully paid, royalty-free, non-</P>
<P>exclusive license, subject to third party intellectual property claims: </P>
<P>(a) to use, reproduce, modify, display, perform, sublicense and </P>
<P>distribute the Original Code (or portions thereof) with or without </P>
<P>Modifications, or as part of a Larger Work; and </P>
<P>(b) under patents now or hereafter owned or controlled by </P>
<P>Eclipse, to make, have made, use and sell (``Utilize'') the </P>
<P>Original Code (or portions thereof), but solely to the extent that </P>
<P>any such patent is reasonably necessary to enable You to Utilize </P>
<P>the Original Code (or portions thereof) and not to any greater </P>
<P>extent that may be necessary to Utilize further Modifications or </P>
<P>combinations.</P>
<P> </P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069779"><A NAME="_Toc454156645">2.2. Contributor Grant.</A></A> </P>
</B></I></FONT><FONT FACE="Arial"><P>Each Contributor hereby grants You a world-wide, fully paid, </P>
<P>royalty-free, non-exclusive license, subject to third party intellectual </P>
<P>property claims:</P>
<P>(a) to use, reproduce, modify, display, perform, sublicense and </P>
<P>distribute the Modifications created by such Contributor (or </P>
<P>portions thereof) either on an unmodified basis, with other </P>
<P>Modifications, as Covered Code or as part of a Larger Work; and</P>
<P>(b) under patents now or hereafter owned or controlled by </P>
<P>Contributor, to Utilize the Contributor Version (or portions </P>
<P>thereof), but solely to the extent that any such patent is </P>
<P>reasonably necessary to enable You to Utilize the Contributor </P>
<P>Version (or portions thereof), and not to any greater extent that </P>
<P>may be necessary to Utilize further Modifications or </P>
<P>combinations.</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069780"><A NAME="_Toc454156646">2.3. Your Grant.</A></A> </P>
</B></I></FONT><FONT FACE="Arial"><P>You hereby grant to Eclipse a world-wide, fully paid, royalty-free, </P>
<P>non-exclusive license, subject to third party intellectual property </P>
<P>claims:</P>
<P>(a) to use, reproduce, modify, display, perform, sublicense and </P>
<P>distribute the Modifications created by You (or portions thereof) </P>
<P>either on an unmodified basis, with other Modifications, as </P>
<P>Covered Code or as part of a Larger Work; and</P>
<P>(b) under patents now or hereafter owned or controlled by You, </P>
<P>to Utilize the Modifications (or portions thereof), but solely to </P>
<P>the extent that any such patent is reasonably necessary to enable </P>
<P>Eclipse to Utilize the Modifications (or portions thereof), and not </P>
<P>to any greater extent that may be necessary to Utilize further </P>
<P>Modifications or combinations.</P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069781"><A NAME="_Toc454156647">3. DISTRIBUTION OBLIGATIONS</A></A></P>
</B></FONT><FONT FACE="Arial"><P> </P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069782"><A NAME="_Toc454156648">3.1. Application of License to You.</A></A></P>
</B></I></FONT><FONT FACE="Arial"><P>The Modifications which You create or to which You contribute are </P>
<P>governed by the terms of this License, including without limitation </P>
<P>Section 2.2. The Source Code version of Covered Code may be </P>
<P>distributed only under the terms of this License or a future version of </P>
<P>this License released under Section 7.1, and You must include a copy </P>
<P>of this License with every copy of the Source Code You distribute. </P>
<P>You may not offer or impose any terms on any Source Code version </P>
<P>that alters or restricts the applicable version of this License or the </P>
<P>recipients' rights hereunder. However, You may include an additional </P>
<P>document offering the additional rights described in Section 3.6.</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069783"><A NAME="_Toc454156649">3.2. Application of License to Eclipse.</A></A></P>
</B></I></FONT><FONT FACE="Arial"><P>(a) Other Products.</P>
<P>Eclipse may include Covered Code in products other than </P>
<P>Genesis3D without such additional products becoming subject to </P>
<P>the terms of this License, and may license such additional </P>
<P>products on different terms from those contained in this License.</P>
<P>(b) Other Licenses.</P>
<P>Eclipse may license the Source Code including Modifications </P>
<P>incorporated therein, without such additional products becoming </P>
<P>subject to the terms of this License, and may license such </P>
<P>additional products on different terms from those contained in </P>
<P>this License.</P>
<P>(c) Other Releases.</P>
<P>Eclipse may create new releases of Genesis3D without such </P>
<P>releases becoming subject to the terms of this License. </P>
<P> </P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069784"><A NAME="_Toc454156650">3.3. Availability of Source Code.</A></A> </P>
</B></I></FONT><FONT FACE="Arial"><P>Any Modification which You create or to which You contribute must </P>
<P>be made available in Source Code form under the terms of this </P>
<P>License either on the same media as an Executable version or via an </P>
<P>accepted Electronic Distribution Mechanism to anyone to whom you </P>
<P>made an Executable version available; and if made available via </P>
<P>Electronic Distribution Mechanism, must remain available for at least </P>
<P>twelve (12) months after the date it initially became available, or at </P>
<P>least six (6) months after a subsequent version of that particular </P>
<P>Modification has been made available to such recipients. You are </P>
<P>responsible for ensuring that the Source Code version remains </P>
<P>available even if the Electronic Distribution Mechanism is maintained </P>
<P>by a third party.  Furthermore, the Source Code to the Modifications </P>
<P>You create or contribute must be delivered in fully compilable form </P>
<P>using commonly available tools.  If the tools used to compile the </P>
<P>Source Code are not commonly available You must also include the </P>
<P>tools, in Source Code and Executable forms, as part of the </P>
<P>Modifications.  Your Source Code must be delivered unencrypted, </P>
<P>uncloaked, unobscured and in human readable form.</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069785"><A NAME="_Toc454156651">3.4. Description of Modifications.</A></A> </P>
</B></I></FONT><FONT FACE="Arial"><P>You must cause all Covered Code to which you contribute to contain </P>
<P>a file documenting the changes You made to create that Covered </P>
<P>Code and the date of any change. You must include a prominent </P>
<P>statement that the Modification is derived, directly or indirectly, from </P>
<P>Original Code provided by Eclipse in (a) the Source Code, and (b) in </P>
<P>any notice in an Executable version or related documentation in </P>
<P>which You describe the origin or ownership of the Covered Code. </P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069786"><A NAME="_Toc454156652">3.5. Intellectual Property Matters</A></A> </P>
</B></I></FONT><FONT FACE="Arial"><P>(a) Third Party Claims. </P>
<P>If You have knowledge that a party claims an intellectual </P>
<P>property right in particular functionality or code (or its utilization </P>
<P>under this License), you must include a text file with the source </P>
<P>code distribution titled ``LEGAL'' which describes the claim and </P>
<P>the party making the claim in sufficient detail that a recipient will </P>
<P>know whom to contact. If you obtain such knowledge after You </P>
<P>make Your Modification available as described in Section 3.3, </P>
<P>You shall promptly modify the LEGAL file in all copies You </P>
<P>make available thereafter and shall take other steps (such as </P>
<P>notifying appropriate mailing lists or newsgroups) reasonably </P>
<P>calculated to inform those who received the Covered Code that </P>
<P>new knowledge has been obtained. </P>
<P>(b) Contributor APIs. </P>
<P>If Your Modification is an application programming interface </P>
<P>and You own or control patents which are reasonably necessary </P>
<P>to implement that API, you must also include this information in </P>
<P>the LEGAL file. </P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069787"><A NAME="_Toc454156653">3.6. Required Notices.</A></A> </P>
</B></I></FONT><FONT FACE="Arial"><P>You must duplicate the notice in Exhibit A in each file of the Source </P>
<P>Code, and this License in any documentation for the Source Code, </P>
<P>where You describe recipients' rights relating to Covered Code. If </P>
<P>You created one or more Modification(s), You may add your name as </P>
<P>a Contributor to the notice described in Exhibit A. If it is not </P>
<P>possible to put such notice in a particular Source Code file due to its </P>
<P>structure, then you must include such notice in a location (such as a </P>
<P>relevant directory file) where a user would be likely to look for such a </P>
<P>notice. You may choose to offer, and to charge a fee for, warranty, </P>
<P>support, indemnity or liability obligations to one or more recipients </P>
<P>of Covered Code. However, You may do so only on Your own </P>
<P>behalf, and not on behalf of Eclipse or any Contributor. You must </P>
<P>make it absolutely clear that any such warranty, support, indemnity or </P>
<P>liability obligation is offered by You alone, and You hereby agree to </P>
<P>indemnify Eclipse and every Contributor for any liability incurred by </P>
<P>Eclipse or such Contributor as a result of warranty, support, </P>
<P>indemnity or liability terms You offer.</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069788"><A NAME="_Toc454156654">3.7. Distribution of Executable Versions.</A></A> </P>
</B></I></FONT><FONT FACE="Arial"><P>You may distribute Covered Code in Executable form only if the </P>
<P>requirements of Section 3.1-3.6 have been met for that Covered </P>
<P>Code, and if You include a notice stating that the Source Code </P>
<P>version of the Covered Code is available under the terms of this </P>
<P>License, including a description of how and where You have fulfilled </P>
<P>the obligations of Section 3.3. The notice must be conspicuously </P>
<P>included in any notice in an Executable version, related </P>
<P>documentation or collateral in which You describe recipients' rights </P>
<P>relating to the Covered Code. You may distribute the Executable </P>
<P>version of Covered Code under a license of Your choice, which may </P>
<P>contain terms different from this License, provided that You are in </P>
<P>compliance with the terms of this License and that the license for the </P>
<P>Executable version does not attempt to limit or alter the recipient's </P>
<P>rights in the Source Code version from the rights set forth in this </P>
<P>License. If You distribute the Executable version under a different </P>
<P>license You must make it absolutely clear that any terms which differ </P>
<P>from this License are offered by You alone, not by Eclipse or any </P>
<P>Contributor. You hereby agree to indemnify Eclipse and every </P>
<P>Contributor for any liability incurred by Eclipse or such Contributor </P>
<P>as a result of any such terms You offer. </P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069789"><A NAME="_Toc454156655">3.8. Larger Works.</A></A> </P>
</B></I></FONT><FONT FACE="Arial"><P>You may create a Larger Work by combining Covered Code with </P>
<P>other code not governed by the terms of this License and distribute </P>
<P>the Larger Work as a single product. In such a case, You must make </P>
<P>sure the requirements of this License are fulfilled for the Covered </P>
<P>Code. </P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069790"><A NAME="_Toc454156656">4. RESTRICTIONS</A></A></P>
</B></FONT><FONT FACE="Arial"><P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069791"><A NAME="_Toc454156657">4.1. You agree to:</A></A></P>
</B></I></FONT><FONT FACE="Arial"><P>(a) display the original, unmodified Genesis3D animated logo as the </P>
<P>first logo on startup of your product, demo or application;</P>
<P>(b) prominently display the Genesis3D logo on any marketing </P>
<P>materials, advertising or packaging of your product, demo or </P>
<P>application;</P>
<P>(c) distribute the Covered Code to third parties who agree to be </P>
<P>bound by these terms and conditions;</P>
<P>(d) make reasonable efforts to discontinue distribution of the Covered </P>
<P>Code upon Eclipse's release of an update, upgrade or new version of </P>
<P>the Covered Code and to make reasonable efforts to distribute such </P>
<P>updates, upgrades or new versions to your customers who have </P>
<P>received the Covered Code herein;</P>
<P>(e) be solely responsible for any update or support obligation or other </P>
<P>liability which may arise from your distribution of the Covered Code.</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069792"><A NAME="_Toc454156658">4.2. You may not:</A></A></P>
</B></I></FONT><FONT FACE="Arial"><P>(a) remove, alter, obscure, or modify in any way the appearance or </P>
<P>operation of the Genesis3D logo;</P>
<P>(b) copy the Covered Code, in whole or in part, except as provided in </P>
<P>this License;</P>
<P>(c) make any statement that your product is "certified," or that its </P>
<P>performance is guaranteed, by Eclipse.</P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069793"><A NAME="_Toc454156659">5. INABILITY TO COMPLY DUE TO STATUTE OR</A></A> </P>
<P><A NAME="_Toc454069794"><A NAME="_Toc454156660">REGULATION</A></A></P>
</B></FONT><FONT FACE="Arial">
<P>If it is impossible for You to comply with any of the terms of this </P>
<P>License with respect to some or all of the Covered Code due to </P>
<P>statute or regulation then You must: (a) comply with the terms of this </P>
<P>License to the maximum extent possible; and (b) describe the </P>
<P>limitations and the code they affect. Such description must be </P>
<P>included in the LEGAL file described in Section 3.5 and must be </P>
<P>included with all distributions of the Source Code. Except to the </P>
<P>extent prohibited by statute or regulation, such description must be </P>
<P>sufficiently detailed for a recipient of ordinary skill to be able to </P>
<P>understand it. </P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069795"><A NAME="_Toc454156661">6. APPLICATION OF THIS LICENSE</A></A></P>
</B></FONT><FONT FACE="Arial">
<P>This License applies to code to which Eclipse has attached the notice </P>
<P>in Exhibit A, and to related Covered Code.</P>
<P> </P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069796"><A NAME="_Toc454156662">7. VERSIONS OF THE LICENSE</A></A></P>
</B></FONT><FONT FACE="Arial"><P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069797"><A NAME="_Toc454156663">7.1. New Versions.</A></A> </P>
</B></I></FONT><FONT FACE="Arial"><P>Eclipse may publish revised and/or new versions of the License from </P>
<P>time to time. Each version will be given a distinguishing version </P>
<P>number.</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069798"><A NAME="_Toc454156664">7.2. Effect of New Versions.</A></A> </P>
</B></I></FONT><FONT FACE="Arial"><P>Once Covered Code has been published under a particular version of </P>
<P>the License, You may always continue to use it under the terms of </P>
<P>that version. You may also choose to use such Covered Code under </P>
<P>the terms of any subsequent version of the License published by </P>
<P>Eclipse. No one other than Eclipse has the right to modify the terms </P>
<P>applicable to Covered Code created under this License. </P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069799"><A NAME="_Toc454156665">8. DISCLAIMER OF WARRANTY</A></A></P>
</B></FONT><FONT FACE="Arial">
<P>COVERED CODE IS PROVIDED UNDER THIS LICENSE ON </P>
<P>AN ``AS IS'' BASIS, WITHOUT WARRANTY OF ANY KIND, </P>
<P>EITHER EXPRESSED OR IMPLIED, INCLUDING, WITHOUT </P>
<P>LIMITATION, WARRANTIES THAT THE COVERED CODE IS </P>
<P>FREE OF DEFECTS, MERCHANTABLE, FIT FOR A </P>
<P>PARTICULAR PURPOSE OR NON-INFRINGING. THE ENTIRE </P>
<P>RISK AS TO THE QUALITY AND PERFORMANCE OF THE </P>
<P>COVERED CODE IS WITH YOU. SHOULD ANY COVERED </P>
<P>CODE PROVE DEFECTIVE IN ANY RESPECT, YOU (NOT </P>
<P>ECLIPSE OR ANY OTHER CONTRIBUTOR) ASSUME THE </P>
<P>COST OF ANY NECESSARY SERVICING, REPAIR OR </P>
<P>CORRECTION. THIS DISCLAIMER OF WARRANTY </P>
<P>CONSTITUTES AN ESSENTIAL PART OF THIS LICENSE. NO </P>
<P>USE OF ANY COVERED CODE IS AUTHORIZED HEREUNDER </P>
<P>EXCEPT UNDER THIS DISCLAIMER. </P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069800"><A NAME="_Toc454156666">9. TERMINATION</A></A></P>
</B></FONT><FONT FACE="Arial">
<P>This License and the rights granted hereunder will terminate </P>
<P>automatically if You fail to comply with terms herein and fail to cure </P>
<P>such breach within 30 days of becoming aware of the breach. All </P>
<P>sublicenses to the Covered Code which are properly granted shall </P>
<P>survive any termination of this License. Provisions which, by their </P>
<P>nature, must remain in effect beyond the termination of this License </P>
<P>shall survive.</P>
<P> </P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069801"><A NAME="_Toc454156667">10. LIMITATION OF LIABILITY</A></A></P>
</B></FONT><FONT FACE="Arial">
<P>UNDER NO CIRCUMSTANCES AND UNDER NO LEGAL </P>
<P>THEORY, WHETHER TORT (INCLUDING NEGLIGENCE), </P>
<P>CONTRACT, OR OTHERWISE, SHALL ECLIPSE, ANY OTHER </P>
<P>CONTRIBUTOR, OR ANY DISTRIBUTOR OF COVERED </P>
<P>CODE, OR ANY SUPPLIER OF ANY OF SUCH PARTIES, BE </P>
<P>LIABLE TO YOU OR ANY OTHER PERSON FOR ANY </P>
<P>INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL </P>
<P>DAMAGES OF ANY CHARACTER INCLUDING, WITHOUT </P>
<P>LIMITATION, DAMAGES FOR LOSS OF GOODWILL, WORK </P>
<P>STOPPAGE, COMPUTER FAILURE OR MALFUNCTION, OR </P>
<P>ANY AND ALL OTHER COMMERCIAL DAMAGES OR </P>
<P>LOSSES, EVEN IF SUCH PARTY SHALL HAVE BEEN </P>
<P>INFORMED OF THE POSSIBILITY OF SUCH DAMAGES. THIS </P>
<P>LIMITATION OF LIABILITY SHALL NOT APPLY TO </P>
<P>LIABILITY FOR DEATH OR PERSONAL INJURY RESULTING </P>
<P>FROM SUCH PARTY'S NEGLIGENCE TO THE EXTENT </P>
<P>APPLICABLE LAW PROHIBITS SUCH LIMITATION. SOME </P>
<P>JURISDICTIONS DO NOT ALLOW THE EXCLUSION OR </P>
<P>LIMITATION OF INCIDENTAL OR CONSEQUENTIAL </P>
<P>DAMAGES, SO THAT EXCLUSION AND LIMITATION MAY </P>
<P>NOT APPLY TO YOU.</P>

<P>INDEMNIFICATION:  YOU SHALL INDEMNIFY, HOLD </P>
<P>HARMLESS, AND DEFEND ECLIPSE AND IT SUPPLIERS </P>
<P>FROM AND AGAINST ANY CLAIMS OR LAWSUITS, </P>
<P>INCLUDING ATTORNEY'S FEES, THAT ARISE OR RESULT </P>
<P>FROM YOUR USE OR DISTRIBUTION OF ANY PRODUCT </P>
<P>INCORPORATING THE COVERED CODE IN WHOLE OR IN </P>
<P>PART.</P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069802"><A NAME="_Toc454156668">11. U.S. GOVERNMENT END USERS</A></A></P>
</B></FONT><FONT FACE="Arial">
<P>The Covered Code is a ``commercial item,'' as that term is defined in </P>
<P>48 C.F.R. 2.101 (Oct. 1995), consisting of ``commercial computer </P>
<P>software'' and ``commercial computer software documentation,'' as </P>
<P>such terms are used in 48 C.F.R. 12.212 (Sept. 1995). Consistent with </P>
<P>48 C.F.R. 12.212 and 48 C.F.R. 227.7202-1 through 227.7202-4 </P>
<P>(June 1995), all U.S. Government End Users acquire Covered Code </P>
<P>with only those rights set forth herein.</P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069803"><A NAME="_Toc454156669">12. MISCELLANEOUS</A></A></P>
</B></FONT><FONT FACE="Arial">
<P>This License represents the complete agreement concerning subject </P>
<P>matter hereof. If any provision of this License is held to be </P>
<P>unenforceable, such provision shall be reformed only to the extent </P>
<P>necessary to make it enforceable.  This License is governed by the </P>
<P>laws of the State of Texas and the United States, including patent and </P>
<P>copyright laws.  Any claim arising out of this License will be brought </P>
<P>in Travis County, Texas.</P>

<P>The application of the United Nations Convention on Contracts for </P>
<P>the International Sale of Goods is expressly excluded. Any law or </P>
<P>regulation which provides that the language of a contract shall be </P>
<P>construed against the drafter shall not apply to this License. </P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069804"><A NAME="_Toc454156670">13. RESPONSIBILITY FOR CLAIMS</A></A></P>
</B></FONT><FONT FACE="Arial">
<P>Except in cases where another Contributor has failed to comply with </P>
<P>Section 3.5, You are responsible for damages arising, directly or </P>
<P>indirectly, out of Your utilization of rights under this License, based </P>
<P>on the number of copies of Covered Code you made available, the </P>
<P>revenues you received from utilizing such rights, and other relevant </P>
<P>factors. You agree to work with affected parties to distribute </P>
<P>responsibility on an equitable basis.</P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069805"><A NAME="_Toc454156671">EXHIBIT A.</A></A> </P>
</B></FONT><FONT FACE="Arial">
<P>``The contents of this file are subject to the Genesis3D Public </P>
<P>License Version 1.01 (the "License"); you may not use this file </P>
<P>except in compliance with the License. You may obtain a copy of the </P>
<P>License at http://www.genesis3d.com</P>
<P>Software distributed under the License is distributed on an "AS IS" </P>
<P>basis, WITHOUT WARRANTY OF ANY KIND, either express or </P>
<P>implied. See the License for the specific language governing rights </P>
<P>and limitations under the License. </P>
<P>The Original Code is Genesis3D, released March 25, 1999. </P>
<P>Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights </P>
<P>Reserved. </P>
<P>Contributor(s): ______________________________________.'' </P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069806"><A NAME="_Toc454156672">EXHIBIT B.</A></A> </P>
</B></FONT><FONT FACE="Arial">
<P>Functionality of the Covered Code includes:</P>

<P>(a) Representation and rendering of 2D and 3D images, objects, </P>
<P>characters and scenes;</P>
<P>(b) Collision detection;</P>
<P>(c) Artificial Intelligence (AI), including path finding, planning and </P>
<P>movement;</P>
<P>(d) Network and internet communications;</P>
<P>(e) Data compression;</P>
<P>(f) Streaming data over a network, modem, or the internet;</P>
<P>(g) Client/server architecture;</P>
<P>(h) Physics simulation;</P>
<P>(i) Creation and editing of world geometry;</P>
<P>(j) Character animation, including motion interpolation, motion </P>
<P>planning, collision, and inverse kinematics.</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=5><P ALIGN="CENTER"><A NAME="_Toc454069807"><A NAME="_Toc454156673">Game File Structure Layout</A></A></A></P>
</B></FONT><I><FONT FACE="Arial"><P>&nbsp;</P>
</I></FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc446558897"><A NAME="_Toc454069808"><A NAME="_Toc454156674">Directory of C:\Genesis3D*</A></A> </P>
</FONT><FONT FACE="Arial"><P>Below is the basic subdirectory layout for the Genesis3D system as delivered by Eclipse.  The system was unpacked taking all the standard defaults.  As a result there are several subdirectories which are repeated in the Tools section.  This duplication was chosen by Eclipse deliberately in order to shorten compile times and create benchmark milestones more easily.</P>

<P>Each subdirectory is indented in the Table of Contents to give you an idea of its position in the tree.  The full path is shown to give you an idea where it is and a brief explanation of the contents of each subdirectory is also given.  Not all subdirectories have source code files, many contain data, object code or executables.  </P>
<I>
<P>* Subdirectories that do <U>not</U> have header or code files are marked with an asterisk.</I>  </P>

<P>This first directory contains the executable and help files that make up the example game Gtest and the Genesis3D tools (ActBuild, ActView, Astudio, Gedit, and Tpack.  There are also two files, keyexp.dle and nfoexp.dle, which can be plugged into 3D Studio Max to export the .ACT file models used by the Genesis3D engine.</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>Total Files Listed:</P>
<P>            1616 File(s)     73,636,424 bytes</P>
</B></FONT><FONT FACE="Courier New" SIZE=1>
<P>Directory of C:\Genesis3D</P>

<P>05/17/99  06:38p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:38p        &lt;DIR&gt;          ..</P>
<P>03/25/99  01:52p               495,616 ActBuild.exe</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          Actors</P>
<P>09/16/98  11:25a                   663 ActView.cnt</P>
<P>05/11/99  03:01p               548,864 ActView.exe</P>
<P>09/16/98  03:34p                16,112 ActView.hlp</P>
<P>03/25/99  01:55p               667,648 AStudio.exe</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          bmp</P>
<P>05/14/99  09:06p               110,592 D3DDrv.dll</P>
<P>05/11/99  04:58p                    22 demo.ini</P>
<P>05/14/99  10:23p             1,150,475 demo2.dem</P>
<P>05/14/99  11:07p             2,047,123 demo3.dem</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          doc</P>
<P>07/10/98  09:52a                15,252 g3dlogo.gif</P>
<P>05/11/99  01:08a               274,432 GBSPLib.dll</P>
<P>07/03/98  01:28p                 1,292 gedit.cnt</P>
<P>05/12/99  03:22p               901,120 gedit.exe</P>
<P>09/02/98  07:03p                36,528 GEDIT.HLP</P>
<P>01/20/99  10:33p                 1,481 gedit.ini</P>
<P>05/14/99  09:09p               659,456 Genesis.dll</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          Genesis3D</P>
<P>05/14/99  09:05p                73,728 GlideDrv.dll</P>
<P>05/17/99  06:38p                 1,120 GMenu.Dat</P>
<P>05/15/99  12:21a               786,432 GTest.exe</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          include</P>
<P>03/24/99  10:22a                77,824 keyexp.dle</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          levels</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          lib</P>
<P>07/10/98  09:59a                   547 local.html</P>
<P>03/24/99  10:20a                81,920 nfoexp.dle</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          OpenSource</P>
<P>05/10/99  04:59p                   175 readme.txt</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          Redist</P>
<P>05/14/99  09:05p               237,568 SoftDrv.dll</P>
<P>05/14/99  09:07p               167,936 softdrv2.dll</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          src</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          Tools</P>
<P>03/25/99  01:56p               126,976 tpack.exe</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          wav</P>
<P>              40 File(s)      8,480,902 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069809"><A NAME="_Toc454156675">Directory of C:\Genesis3D\Actors*</A></A></P>
</FONT><FONT FACE="Arial"><P>The Actors subdirectory is a repository for ACT files, Genesis3D 's unique file format for animated models.  These .ACT files are used in the example game GTest, and are not essential to the engine itself.</P>
</FONT><FONT FACE="Arial" SIZE=2>
</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\Actors</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>11/11/98  12:09p                23,520 armor.act</P>
<P>11/15/98  07:46p               313,194 dema.act</P>
<P>11/10/98  03:21p                41,824 glaunch.act</P>
<P>11/17/98  01:17a                24,036 grenade.act</P>
<P>11/11/98  12:09p               134,736 medkit.act</P>
<P>11/10/98  03:21p                74,940 rlaunch.act</P>
<P>11/16/98  04:09p                24,452 rocket.act</P>
<P>11/17/98  01:17a                 4,596 sammo.act</P>
<P>11/10/98  03:22p                52,296 shredder.act</P>
<P>11/15/98  08:30p               470,799 turret.act</P>
<P>              12 File(s)      1,164,393 bytes</P>
</FONT><FONT FACE="Arial"><P>&nbsp;</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069810"><A NAME="_Toc454156676">Directory of C:\Genesis\Bmp*</A></A></P>
</FONT><FONT FACE="Arial"><P>The Bmp subdirectory contains several additional subdirectories that hold bitmap graphic files used in the GTest example game.  The graphics are only required for the sample game and are not needed elsewhere.</P>
</FONT><FONT FACE="Arial" SIZE=2>
</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\bmp</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>12/09/98  10:10a                 2,167 BOLT.bmp</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          Console</P>
<P>04/07/99  06:16p                 5,174 CORONA.bmp</P>
<P>04/06/99  04:31p                12,344 CORONA_A.bmp</P>
<P>12/09/98  10:10a                 1,367 CURSOR.bmp</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          Explode</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          Fx</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          Menu</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          SBar</P>
<P>12/09/98  10:10a                40,913 SFONT1.bmp</P>
<P>12/09/98  10:10a                40,913 SFONT2.bmp</P>
<P>12/09/98  10:10a                 5,303 SPOT.bmp</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          Weapon</P>
<P>              15 File(s)        108,181 bytes</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454069811"><A NAME="_Toc454156677">Directory of C:\Genesis\Bmp\Console*</A></A></P>
</B></FONT><FONT FACE="Arial"><P>The Console subdirectory contains a two subdirectories which hold the bmp files for the console display at two different resolutions for the GTest application.  If you create a game and console in a different resolution to expand Gtest, you should follow the pattern and place the textures here in a new subdirectory.  The console subdirectories are not essential to the engine itself.</P>
</FONT><FONT FACE="Courier New" SIZE=2>
</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\bmp\Console</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          320x240</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          640x480</P>
<P>               4 File(s)              0 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069812">Directory of C:\Genesis\Bmp\Console\320x240*</A></P>
</FONT><FONT FACE="Arial"><P>There are two bmp graphic files here.  The first contains the font table used for the console, the second is the background texture.  It is created for a screen size of 320x240.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\bmp\Console\320x240</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>12/10/98  12:31p                17,719 CONSOLE.BMP</P>
<P>12/10/98  12:31p                 5,565 FONT.BMP</P>
<P>               4 File(s)         23,284 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069813">Directory of C:\Genesis\Bmp\Console\640x480*</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the same graphics files as those above but they are intended for a screen resolution of 640x480.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\bmp\Console\640x480</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>12/10/98  12:20p                17,719 CONSOLE.BMP</P>
<P>12/10/98  12:20p                26,703 FONT.BMP</P>
<P>               4 File(s)         44,422 bytes</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069814"><A NAME="_Toc454156678">Directory of C:\Genesis3D\bmp\Explode*</A></A> </P>
</B></FONT><FONT FACE="Arial"><P>This subdirectory contains a series of bmp files that when played rapidly create a colored graphical explosion and a grey smoky background.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\bmp\Explode</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>12/10/98  07:15p                 2,167 1EXP01.BMP</P>
<P>12/10/98  07:15p                 2,167 1EXP02.BMP</P>
<P>12/10/98  07:15p                 2,167 1EXP03.BMP</P>
<P>12/10/98  07:15p                 2,167 1EXP04.BMP</P>
<P>12/10/98  07:15p                 2,167 1EXP05.BMP</P>
<P>12/10/98  07:15p                 2,167 1EXP06.BMP</P>
<P>12/10/98  07:15p                 2,167 A_1EXP01.BMP</P>
<P>12/10/98  07:15p                 2,167 A_1EXP02.BMP</P>
<P>12/10/98  07:15p                 2,167 A_1EXP03.BMP</P>
<P>12/10/98  07:15p                 2,167 A_1EXP04.BMP</P>
<P>12/10/98  07:15p                 2,167 A_1EXP05.BMP</P>
<P>12/10/98  07:15p                 2,167 A_1EXP06.BMP</P>
<P>              14 File(s)         26,004 bytes</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069815"><A NAME="_Toc454156679">Directory of C:\Genesis3D\bmp\Fx*</A></A> </P>
</B></FONT><FONT FACE="Arial"><P>This subdirectory contains three special effects.  The first is a black and white explosion with a gradual smoke dissipation.  The second is a particle explosion.  The third is a colored explosion that expands outward and turns smoky and dissipates.  The texture size for these shots is larger than for those in the previous subdirectory.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\bmp\Fx</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>12/10/98  07:13p                 5,303 A_SMK01.BMP</P>
<P>12/10/98  07:13p                 5,303 A_SMK02.BMP</P>
<P>12/10/98  07:13p                 5,303 A_SMK03.BMP</P>
<P>12/10/98  07:13p                 5,303 A_SMK04.BMP</P>
<P>12/10/98  07:13p                 5,303 a_smk05.bmp</P>
<P>12/10/98  07:13p                 5,303 A_SMK06.BMP</P>
<P>12/10/98  07:13p                 5,303 A_SMK07.BMP</P>
<P>12/10/98  07:13p                 5,303 A_SMK08.BMP</P>
<P>12/10/98  07:13p                 5,303 A_SMK09.BMP</P>
<P>12/10/98  07:13p                 5,303 A_SMK10.BMP</P>
<P>12/10/98  07:13p                 5,303 PARTI1.BMP</P>
<P>12/10/98  07:13p                 5,303 PARTI2.BMP</P>
<P>12/10/98  07:13p                 5,303 PARTI3.BMP</P>
<P>12/10/98  07:13p                 5,303 PARTI4.BMP</P>
<P>12/10/98  07:13p                 5,303 PARTI5.BMP</P>
<P>12/10/98  07:13p                 5,303 PARTI6.BMP</P>
<P>12/10/98  07:13p                 5,303 PARTI7.BMP</P>
<P>12/10/98  07:13p                 5,303 PARTI8.BMP</P>
<P>12/10/98  07:13p                 5,303 SMOKE_01.BMP</P>
<P>12/10/98  07:13p                 5,303 SMOKE_02.BMP</P>
<P>12/10/98  07:13p                 5,303 SMOKE_03.BMP</P>
<P>12/10/98  07:13p                 5,303 SMOKE_04.BMP</P>
<P>12/10/98  07:13p                 5,303 smoke_05.bmp</P>
<P>12/10/98  07:13p                 5,303 SMOKE_06.BMP</P>
<P>12/10/98  07:13p                 5,303 SMOKE_07.BMP</P>
<P>12/10/98  07:13p                 5,303 SMOKE_08.BMP</P>
<P>12/10/98  07:13p                 5,303 SMOKE_09.BMP</P>
<P>12/10/98  07:13p                 5,303 SMOKE_10.BMP</P>
<P>              30 File(s)        148,484 bytes</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069816"><A NAME="_Toc454156680">Directory of C:\Genesis3D\bmp\Menu*</A></A> </P>
</B></FONT><FONT FACE="Arial"><P>There are four graphics in this subdirectory two are the screen credits for the Eclipse development team. The other two are the graphics for a slider bar.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\bmp\Menu</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>12/09/98  10:12a                78,439 CREDITS0.BMP</P>
<P>12/09/98  10:12a               309,399 CREDITS1.BMP</P>
<P>12/09/98  10:12a                 1,333 SLIDERB.BMP</P>
<P>12/09/98  10:12a                 3,013 SLIDERR.BMP</P>
<P>               6 File(s)        392,184 bytes</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454069817"><A NAME="_Toc454156681">Directory of C:\Genesis3D\bmp\Sbar*</A></A> </P>
</B></FONT><FONT FACE="Arial"><P>At the bottom of the demonstration game is a status bar which indicates what weapons you have, and which one is your current selection. The two subdirectories below contain the graphics for this bar and are done in two resolutions depending on which screen size you are using.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\bmp\SBar</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          320x240</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          640x480</P>
<P>               4 File(s)              0 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069818">Directory of C:\Genesis3D\bmp\SBar\320x240*</A></P>
</FONT><FONT FACE="Arial"><P>This is the 320x240 status bar.  It contains three screen shots for each of the demonstration weapons.  One for selected, one for in your possession, and one for not found yet.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\bmp\SBar\320x240</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>12/10/98  12:32p                 2,845 SBAR0-0.BMP</P>
<P>12/10/98  12:32p                 2,845 SBAR0-1.BMP</P>
<P>12/10/98  12:32p                 2,845 SBAR0-2.BMP</P>
<P>12/10/98  12:32p                 2,959 SBAR1-0.BMP</P>
<P>12/10/98  12:32p                 2,845 SBAR1-1.BMP</P>
<P>12/10/98  12:32p                 2,845 SBAR1-2.BMP</P>
<P>12/10/98  12:32p                 2,721 SBAR2-0.BMP</P>
<P>12/10/98  12:32p                 2,721 SBAR2-1.BMP</P>
<P>12/10/98  12:32p                 2,721 SBAR2-2.BMP</P>
<P>12/10/98  12:32p                 2,721 SBAR3-0.BMP</P>
<P>12/10/98  12:32p                 2,721 SBAR3-1.BMP</P>
<P>12/10/98  12:32p                 2,721 SBAR3-2.BMP</P>
<P>12/10/98  12:32p                 2,721 SBAR4-0.BMP</P>
<P>12/10/98  12:32p                 2,845 SBAR4-1.BMP</P>
<P>12/10/98  12:32p                 2,721 SBAR4-2.BMP</P>
<P>12/10/98  12:33p                 2,721 SBAR5-0.BMP</P>
<P>12/10/98  12:33p                 2,721 SBAR5-1.BMP</P>
<P>12/10/98  12:33p                 2,721 SBAR5-2.BMP</P>
<P>              20 File(s)         49,960 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069819">Directory of C:\Genesis3D\bmp\SBar\640x480*</A></P>
</FONT><FONT FACE="Arial"><P>This is the 640x480 status bar.  It contains four screen shots for each of the demonstration weapons.  It has the same three as the subdirectory above and a fourth one in red, ostensibly to indicate that you have the weapon selected but it is out of ammunition or charge.  While it is not used in the demonstration game there is an excellent tutorial in the Genesis Dojo which explains how to add this feature to your game.  </P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\bmp\SBar\640x480</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>12/09/98  04:21p                 7,971 SBAR0-0.BMP</P>
<P>12/09/98  04:21p                 7,971 SBAR0-1.BMP</P>
<P>12/09/98  04:21p                 7,971 SBAR0-2.BMP</P>
<P>12/09/98  04:21p                 7,971 SBAR0-3.BMP</P>
<P>12/09/98  04:21p                 7,971 SBAR1-0.BMP</P>
<P>12/09/98  04:21p                 7,971 SBAR1-1.BMP</P>
<P>12/09/98  04:21p                 7,971 SBAR1-2.BMP</P>
<P>12/09/98  04:21p                 7,971 SBAR1-3.BMP</P>
<P>12/09/98  04:21p                 7,483 SBAR2-0.BMP</P>
<P>12/09/98  04:21p                 7,483 SBAR2-1.BMP</P>
<P>12/09/98  04:21p                 7,483 SBAR2-2.BMP</P>
<P>12/09/98  04:21p                 7,483 SBAR2-3.BMP</P>
<P>12/09/98  04:21p                 7,483 SBAR3-0.BMP</P>
<P>12/09/98  04:21p                 7,483 SBAR3-1.BMP</P>
<P>12/09/98  04:21p                 7,483 SBAR3-2.BMP</P>
<P>12/09/98  04:21p                 7,483 SBAR3-3.BMP</P>
<P>12/09/98  04:21p                 7,483 SBAR4-0.BMP</P>
<P>12/09/98  04:21p                 7,483 SBAR4-1.BMP</P>
<P>12/09/98  04:21p                 7,483 SBAR4-2.BMP</P>
<P>12/09/98  04:21p                 7,483 SBAR4-3.BMP</P>
<P>12/09/98  04:21p                 7,483 SBAR5-0.BMP</P>
<P>12/09/98  04:21p                 7,483 SBAR5-1.BMP</P>
<P>12/09/98  04:21p                 7,483 SBAR5-2.BMP</P>
<P>12/09/98  04:21p                 7,483 SBAR5-3.BMP</P>
<P>              26 File(s)        183,496 bytes</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069820"><A NAME="_Toc454156682">Directory of C:\Genesis3D\bmp\Weapon*</A></A> </P>
</B></FONT><FONT FACE="Arial"><P>There are two bmp files in this subdirectory, one black and white the other colored, which are used for the flash that occurs when a weapon or item materializes in the game.</P>
<I>
</I></FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\bmp\Weapon</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>12/10/98  07:18p                 2,167 A_SPOT.BMP</P>
<P>12/10/98  07:17p                 2,167 SPOT_RED.BMP</P>
<P>               4 File(s)          4,334 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069821"><A NAME="_Toc454156683">Directory of C:\Genesis3D\doc*</A></A> </P>
</FONT><FONT FACE="Arial"><P>This subdirectory and the three below it contain documentation provided by Eclipse on the Demonstration Game, Genesis3D Tools, and the Genesis3D API in HTML format.  The outer layer contains the starting index.html and references the subdirectories below for additional material.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\doc</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>12/16/98  11:08a                   441 3DSMaxGuide.htm</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          APIReference</P>
<P>12/16/98  05:47p                   385 APIReference.htm</P>
<P>12/16/98  05:47p                   357 APISummary.htm</P>
<P>11/15/98  11:53p                34,816 bot.doc</P>
<P>04/30/99  12:32p                 4,121 Drivers.htm</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          editor</P>
<P>02/25/99  11:55p                 5,949 EngineAPIs.htm</P>
<P>12/23/98  01:41p                   326 Features.htm</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          Images</P>
<P>05/10/99  04:15p                   437 index.html</P>
<P>04/30/99  12:34p                 2,133 Introduction.htm</P>
<P>04/30/99  12:36p                13,027 Manifest.htm</P>
<P>12/17/98  05:17p                   287 ReferenceBack.htm</P>
<P>04/29/99  01:05p                24,163 ReferenceIndex.htm</P>
<P>05/10/99  04:13p                 3,254 ReleaseNotes.htm</P>
<P>12/17/98  05:16p                   287 SummaryBack.htm</P>
<P>04/29/99  03:08p                 5,212 SummaryIndex.htm</P>
<P>05/11/99  05:46p                 3,387 toc.htm</P>
<P>04/30/99  11:39a                14,356 Tools.htm</P>
<P>05/10/99  04:13p                   295 TopHeader.htm</P>
<P>              23 File(s)        113,233 bytes</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069822"><A NAME="_Toc454156684">Directory of C:\Genesis3D\doc\APIReference*</A></A></P>
</B></FONT><FONT FACE="Arial"><P>The API reference is placed here, kept in a separate subdirectory broken down into twelve areas.  Within each area the critical function calls are explained, along with the parameters which are necessary to use and what is returned by each call.  There is a brief summary of the section and an overview of purpose for the section at the beginning.  The individual function calls are also referenced in the index allowing the user to go directly to any function call referenced.  At the time of this writing, this is still very much a work in progress, but all of it's major content was incorporated into the functional cross reference section of Volume 3 of this series.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\doc\APIReference</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>02/26/99  10:40a                 9,520 Camera.htm</P>
<P>01/10/99  08:59p                21,679 Engine.htm</P>
<P>12/18/98  10:23a                 3,961 Entity.htm</P>
<P>12/23/98  12:04p                52,120 Motion.htm</P>
<P>12/21/98  09:33a                25,069 Path.htm</P>
<P>12/17/98  08:54a                24,116 Quatern.htm</P>
<P>02/26/99  12:13a                 3,535 Ram.htm</P>
<P>12/16/98  01:37p                 1,803 Sample.htm</P>
<P>12/16/98  05:47p                14,068 Vec3d.htm</P>
<P>04/29/99  12:03p                44,432 VFile.htm</P>
<P>12/21/98  10:16a                22,287 World.htm</P>
<P>12/16/98  05:47p                26,811 XForm3d.htm</P>
<P>              14 File(s)        249,401 bytes</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069823"><A NAME="_Toc454156685">Directory of C:\Genesis3D\doc\editor*</A></A> </P>
</B></FONT><FONT FACE="Arial"><P>The GTest editor documentation is in this subdirectory. It explains how to use the Editor, its functions and capabilities.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\doc\editor</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>07/03/98  02:13p                   180 cnt0.gif</P>
<P>07/03/98  02:13p                   165 cnt1.gif</P>
<P>07/03/98  02:13p                   254 contents.gif</P>
<P>09/03/98  09:45a                 4,077 defaultgedit.html</P>
<P>07/03/98  02:13p                    60 gedit00090000.gif</P>
<P>09/03/98  09:45a                   906 geditAuto_rebuild.html</P>
<P>09/03/98  09:45a                 2,000 geditBasic_Operation.html</P>
<P>09/03/98  09:45a                 2,044 geditBrushes.html</P>
<P>09/03/98  09:45a                 1,520 geditBrush_and_Face_Modes.html</P>
<P>09/03/98  09:45a                 5,055 geditBrush_Attributes_Dialog.html</P>
<P>09/03/98  09:45a                 1,027 geditBSP_Settings.html</P>
<P>09/03/98  09:45a                 3,042 geditCamera_Mode.html</P>
<P>09/03/98  09:45a                 1,709 geditCompiling_and_Viewing_Your_Level.html</P>
<P>09/03/98  09:45a                   861 geditConsole.html</P>
<P>09/03/98  09:45a                 1,226 geditCut_Brushes_and_Brush_Order.html</P>
<P>09/03/98  09:45a                 1,910 geditEntities.html</P>
<P>09/03/98  09:45a                 1,516 geditEntity_Editor.html</P>
<P>09/03/98  09:45a                 1,402 geditEntity_Visibility_Dialog.html</P>
<P>09/03/98  09:45a                 1,259 geditFaces.html</P>
<P>09/03/98  09:45a                 3,882 geditFace_Attributes_Dialog.html</P>
<P>09/03/98  09:45a                 2,303 geditGeneral_Compile_Options.html</P>
<P>09/03/98  09:45a                 2,908 geditGroups.html</P>
<P>09/03/98  09:45a                 6,098 geditindex.html</P>
<P>09/03/98  09:45a                 2,657 geditLight_Settings.html</P>
<P>09/03/98  09:45a                 3,124 geditModels.html</P>
<P>09/03/98  09:45a                 2,245 geditOverview.html</P>
<P>09/03/98  09:45a                 1,902 geditQuick_Compile.html</P>
<P>09/03/98  09:45a                 3,463 geditSelect_Mode.html</P>
<P>09/03/98  09:45a                 4,779 geditShortcut_Keys.html</P>
<P>09/03/98  09:45a                 1,415 geditSky.html</P>
<P>09/03/98  09:45a                 2,732 geditTemplate.html</P>
<P>09/03/98  09:45a                 2,004 geditTemplate_Mode.html</P>
<P>09/03/98  09:45a                   911 geditTextures.html</P>
<P>09/03/98  09:45a                   982 geditThe_Camera_Entity.html</P>
<P>09/03/98  09:45a                 1,045 geditThe_Grid.html</P>
<P>09/03/98  09:45a                 3,271 geditThe_Initialization_File__GEDITIN.html</P>
<P>09/03/98  09:45a                   756 geditThe_Option_Pages.html</P>
<P>09/03/98  09:45a                 1,357 geditThe_Views.html</P>
<P>09/03/98  09:45a                   274 gedituntitled.html</P>
<P>09/03/98  09:45a                 8,509 geditUser_Defined_Entity_Header_Files.html</P>
<P>09/03/98  09:45a                 1,022 geditUser_Interface_Layout.html</P>
<P>09/03/98  09:45a                 1,105 geditVisibility_Settings.html</P>
<P>07/03/98  02:13p                   237 index.gif</P>
<P>07/03/98  02:13p                   162 index_a.gif</P>
<P>07/03/98  02:13p                   162 index_b.gif</P>
<P>07/03/98  02:13p                   163 index_c.gif</P>
<P>07/03/98  02:13p                   163 index_d.gif</P>
<P>07/03/98  02:13p                   159 index_e.gif</P>
<P>07/03/98  02:13p                   159 index_f.gif</P>
<P>07/03/98  02:13p                   165 index_g.gif</P>
<P>07/03/98  02:13p                   161 index_h.gif</P>
<P>07/03/98  02:13p                   162 index_i.gif</P>
<P>07/03/98  02:13p                   162 index_j.gif</P>
<P>07/03/98  02:13p                   162 index_k.gif</P>
<P>07/03/98  02:13p                   160 index_l.gif</P>
<P>07/03/98  02:13p                   162 index_m.gif</P>
<P>07/03/98  02:13p                   163 index_n.gif</P>
<P>07/03/98  02:13p                   162 index_o.gif</P>
<P>07/03/98  02:13p                   161 index_p.gif</P>
<P>07/03/98  02:13p                   164 index_q.gif</P>
<P>07/03/98  02:13p                   161 index_r.gif</P>
<P>07/03/98  02:13p                   164 index_s.gif</P>
<P>07/03/98  02:13p                   160 index_t.gif</P>
<P>07/03/98  02:13p                   163 index_u.gif</P>
<P>07/03/98  02:13p                   162 index_v.gif</P>
<P>07/03/98  02:13p                   163 index_w.gif</P>
<P>07/03/98  02:13p                   164 index_x.gif</P>
<P>07/03/98  02:13p                   161 index_y.gif</P>
<P>07/03/98  02:13p                   161 index_z.gif</P>
<P>09/03/98  09:45a                   145 logfile.html</P>
<P>07/03/98  02:13p                   188 next0.gif</P>
<P>07/03/98  02:13p                   190 next1.gif</P>
<P>07/03/98  02:13p                   186 prev0.gif</P>
<P>07/03/98  02:13p                   189 prev1.gif</P>
<P>              76 File(s)         94,303 bytes</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069824"><A NAME="_Toc454156686">Directory of C:\Genesis3D\doc\editor*</A></A></P>
</B></FONT><FONT FACE="Arial"><P>This subdirectory contains only a single screen shot for the TPack utility and several screenshots of the Astudio interface.  They are referenced in the doc subdirectory in the tools description which is not yet complete.  </P>
<I>
</I></FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\doc\Images</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>04/30/99  10:06a                 4,862 ASBody.GIF</P>
<P>04/30/99  10:13a                 6,286 ASExtraMaterials.GIF</P>
<P>04/30/99  10:28a                 6,714 ASMotions.GIF</P>
<P>04/30/99  11:11a                 5,596 ASPaths.GIF</P>
<P>04/30/99  10:30a                 5,235 ASSettings.GIF</P>
<P>04/30/99  10:01a                 3,855 ASTarget.GIF</P>
<P>04/30/99  11:39a                 4,460 tpack.GIF</P>
<P>               9 File(s)         37,008 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069825"><A NAME="_Toc454156687">Directory of C:\Genesis3D\Genesis3D*</A></A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the uninstall file used to remove the Genesis3D installation from your computer.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\Genesis3D</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>05/17/99  06:35p                85,209 DeIsL1.isu</P>
<P>               3 File(s)         85,209 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069826"><A NAME="_Toc454156688">Directory of C:\Genesis3D\include</A></A> </P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the header files for the Genesis3D API.  It is the core set of functions that persons who wish to develop for Genesis3D need to use if they are not planning on modifying the sources for the engine.  These include files, along with the lib subdirectory below are all the necessary files for use of the Genesis3D graphics engine.  For those who either plan to pay the licensing fee or release their own sources the OpenSource subdirectories will be necessary.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\include</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>05/12/99  02:19p                23,801 actor.h</P>
<P>05/03/99  03:55p                 3,332 BASETYPE.H</P>
<P>05/03/99  04:06p                23,446 bitmap.h</P>
<P>04/26/99  10:53a                 5,570 body.h</P>
<P>04/27/99  11:53p                11,163 Errorlog.h</P>
<P>04/26/99  10:53a                 4,577 ExtBox.h</P>
<P>04/26/99  10:53a                13,334 font.H</P>
<P>05/13/99  08:27p                26,220 GENESIS.H</P>
<P>04/26/99  10:53a                 3,573 getypes.h</P>
<P>04/26/99  04:04p                 2,772 matrix33.h</P>
<P>04/26/99  10:53a                 9,662 motion.h</P>
<P>04/26/99  10:53a                 6,248 path.h</P>
<P>04/26/99  04:05p                 4,093 PhysicsJoint.h</P>
<P>05/13/99  02:08p                 8,618 PhysicsObject.h</P>
<P>04/26/99  04:04p                 3,183 PhysicsSystem.h</P>
<P>05/03/99  03:16p                 6,342 pixelformat.h</P>
<P>04/26/99  10:53a                 9,519 quatern.h</P>
<P>04/26/99  10:53a                 5,195 RAM.H</P>
<P>04/26/99  10:53a                 3,903 VEC3D.H</P>
<P>04/26/99  10:53a                 8,113 vfile.h</P>
<P>04/26/99  10:53a                 8,740 XFORM3D.H</P>
<P>              23 File(s)        191,404 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069827"><A NAME="_Toc454156689">Directory of C:\Genesis3D\levels*</A></A> </P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the level files and BSP files for the demonstration game as well as the .txl file that guides the color choices of each level.  Use of the GEdit program to create a new level will result in your new addition automatically being placed here.  Also, read the Objects subdirectory below.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\levels</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>04/30/99  01:16a             2,427,123 gedit.txl</P>
<P>05/11/99  06:12p             1,516,771 genvs.3dt</P>
<P>05/11/99  01:08p             4,377,430 genvs.bsp</P>
<P>05/11/99  06:14p             1,423,158 genvs2.3dt</P>
<P>05/11/99  04:09a             3,304,276 genvs2.bsp</P>
<P>               7 File(s)     13,048,758 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069828"><A NAME="_Toc454156690">Directory of C:\Genesis3D\lib*</A></A> </P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains both release and debug versions of the core Genesis3D functions for use by individuals who are not altering the Genesis source code.  It is referenced by the demonstration game and, if you decide to create new versions by modifying the OpenSources you should place the new versions here.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\lib</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>05/14/99  09:11p             1,253,774 genesis.lib</P>
<P>05/14/99  09:04p             3,750,244 genesisd.lib</P>
<P>05/14/99  09:09p               126,578 genesisi.lib</P>
<P>               5 File(s)      5,130,596 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069829"><A NAME="_Toc454156691">Directory of C:\Genesis3D\Objects*</A></A></P>
</FONT><I><FONT FACE="Arial"><P>This subdirectory is NOT created when you install the Genesis3D Software.  However, if you wish to create your own objects for later use with GEdit tool you must manually create  a subdirectory named Objects in this place. The GEdit tool looks for objects in this subdirectory  in order to use them.  If you create a 3d object in the GEdit tool it tries to place the new item in this subdirectory when you select Save or Save As.</P>
</I></FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069830"><A NAME="_Toc454156692">Directory of C:\Genesis3D\OpenSource*</A></A></P>
</FONT><FONT FACE="Arial"><P>This is the beginning of the OpenSource subdirectories which contain the sources for both the Genesis3D engine and its supporting tools.  The directory contains 8 text files which describe what additional files must be placed in certain subdirectories in order to exacly mimic the development layout used by Eclipse to build the software.  These files are from software not supplied by Eclipse - like MASM, DirectX, and the Glide SDK.</P>

<P>There is also a readme file which explains the purposes behind the layout and specifically why Eclipse chose to incorporate multiple copies of it's include files in the tools development area (it speeds compile times to make the tools separately.)</P>
</FONT><FONT FACE="Courier New">
</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>03/25/99  12:20p                12,884 Build.txt</P>
<P>04/26/99  11:37a                23,295 license.txt</P>
<P>03/24/99  02:12p                 2,509 ManifestDXSDK.txt</P>
<P>03/24/99  02:13p                 1,529 ManifestGlide.txt</P>
<P>03/24/99  02:11p                 1,080 ManifestMasm.txt</P>
<P>04/26/99  01:06p                 9,192 ManifestMAX.txt</P>
<P>03/24/99  02:07p                13,816 ManifestVC.txt</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          masm</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          msdev60</P>
<P>03/25/99  03:50p                 1,262 readme.txt</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          sdk</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          Source</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          Tools</P>
<P>              15 File(s)         65,567 bytes</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069831"><A NAME="_Toc454156693">Directory of C:\Genesis3D\OpenSource\masm*</A></A></P>
</B></FONT><FONT FACE="Arial"><P>The MASM subdirectory actually contains a single file that directs you to read a document called Build.txt.  This document explains the rationale for the build process and indicates that this is where Eclipse typically installs its own copy of Microsoft Assembler (MASM).</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\masm</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>05/15/99  12:24a                    66 readme.txt</P>
<P>               3 File(s)             66 bytes</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069832"><A NAME="_Toc454156694">Directory of C:\Genesis3D\OpenSource\msdev60*</A></A></P>
</B></FONT><FONT FACE="Arial"><P>The Msdev60 subdirectory is similar to the MASM directory above.  It points to this location as the home for Microsoft Visual Studio 6.0</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\msdev60</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>05/15/99  12:24a                    66 readme.txt</P>
<P>               3 File(s)             66 bytes</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069833"><A NAME="_Toc454156695">Directory of C:\Genesis3D\OpenSource\sdk*</A></A></P>
</B></FONT><FONT FACE="Arial"><P>In the same fashion, the following two directories are the locations where graphical toolkits used by the Genesis engine and the compiler should be placed.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\sdk</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          DX6SDK</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          Glide</P>
<P>               4 File(s)              0 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069834">Directory of C:\Genesis3D\OpenSource\sdk\DX6SDK*</A></P>
</FONT><FONT FACE="Arial"><P>The sample program uses DirectX 6.0.  However, I have successfully compiled it with the newer version, 6.1.  There are features in the newer version which the engine does not yet take advantage of.  In fact, these features are among the possible improvements that could be made to the engine.  However, there will be an issue if the addition of these features will be limited to the DirectX implementation or if similar features would be hand coded for Glide.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\sdk\DX6SDK</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>05/15/99  12:24a                    66 readme.txt</P>
<P>               3 File(s)             66 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069835">Directory of C:\Genesis3D\OpenSource\sdk\Glide*</A></P>
</FONT><FONT FACE="Arial"><P>The Glide SDK is placed here.  Glide drivers are compiled and selected by the user at run time (just as the user can select DirectX drivers or software only drivers).  The Glide drivers do limit the feature set of the engine to those users who have 3DFX chipset cards, so additions here can cause the same issues as adding enhancements to the DirectX drivers.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\sdk\Glide</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>05/15/99  12:24a                    66 readme.txt</P>
<P>               3 File(s)             66 bytes</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069836"><A NAME="_Toc454156696">Directory of C:\Genesis3D\OpenSource\Source</A></A></P>
</B></FONT><FONT FACE="Arial"><P>This is it, the Holy Grail for game engine students.  The Genesis3D engine sources reside in this set of subdirectories.  Code is here for the engine and actors, bitmap graphics and graphics compression, 3D entities and math, fonts and files.  There is also a second, experimental , software-only driver under construction by Eclipse.</P>
<P>The outer subdirectory contains the basic engine source code and a set of make files for creating a debug and release version using Microsoft Visual C++ 6.0.  Additional files in each of the subdirectories are described below.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Source</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          Actor</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          Bitmap</P>
<P>04/26/99  10:52a                24,126 CAMERA.C</P>
<P>04/26/99  10:53a                 5,880 CAMERA.H</P>
<P>05/14/99  08:26p                19,014 CSNetMgr.c</P>
<P>05/13/99  08:27p                 5,104 CSNetMgr.h</P>
<P>03/25/99  12:05p                 1,612 drawbbox.c</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          Engine</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          Entities</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          Font</P>
<P>05/04/99  05:02p                14,268 Ge.c</P>
<P>05/11/99  03:37p                14,971 Genesis.dsp</P>
<P>05/13/99  08:27p                26,220 GENESIS.H</P>
<P>05/11/99  04:28p                22,192 Genesis.mak</P>
<P>03/24/99  08:24a                 2,582 genesis.rc</P>
<P>05/11/99  04:29p                16,739 GenesisDLL.dsp</P>
<P>05/11/99  04:29p                23,750 GenesisDLL.mak</P>
<P>04/26/99  10:53a                 3,573 getypes.h</P>
<P>04/26/99  10:52a                29,282 list.c</P>
<P>04/26/99  10:53a                 9,212 list.h</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          Math</P>
<P>05/15/99  12:22a                   181 mssccprj.scc</P>
<P>05/14/99  08:26p                27,476 NETPLAY.C</P>
<P>05/14/99  02:45a                 3,603 NETPLAY.H</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          Physics</P>
<P>04/26/99  10:53a                 2,645 PTRTYPES.H</P>
<P>12/08/98  09:43a                   411 resource.h</P>
<P>04/26/99  10:52a                27,721 SOUND.C</P>
<P>04/26/99  10:53a                 3,234 SOUND.H</P>
<P>04/26/99  10:52a                 5,602 Sound3d.c</P>
<P>04/26/99  10:53a                 2,303 SOUND3D.H</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          Support</P>
<P>04/26/99  10:52a                16,489 Tclip.c</P>
<P>04/26/99  10:53a                 2,694 tclip.h</P>
<P>04/26/99  10:52a                 2,149 timer.c</P>
<P>04/26/99  10:53a                 3,422 timer.h</P>
<P>04/26/99  10:52a                 3,910 tsc.c</P>
<P>04/26/99  10:53a                 2,665 tsc.h</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          VFile</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          World</P>
<P>              42 File(s)        323,030 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069837">Directory of C:\Genesis3D\OpenSource\Source\Actor</A> </P>
</FONT><FONT FACE="Arial"><P>The code in this section is used to create and move a character along a specified path.  It includes code for the "actor's" movement.  (Actors in this case refer to any model capable of movement - not just animated characters.)</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Source\Actor</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>05/12/99  02:33p                52,195 actor.c</P>
<P>05/12/99  02:19p                23,801 actor.h</P>
<P>04/26/99  10:52a                36,723 body.c</P>
<P>04/26/99  10:53a                 5,570 body.h</P>
<P>04/26/99  11:45a                 3,948 body._h</P>
<P>04/26/99  10:52a                11,155 bodyinst.c</P>
<P>04/26/99  10:53a                 4,254 bodyinst.h</P>
<P>04/26/99  10:52a                56,806 motion.c</P>
<P>04/26/99  10:53a                 9,662 motion.h</P>
<P>05/04/99  05:02p                42,401 path.c</P>
<P>04/26/99  10:53a                 6,248 path.h</P>
<P>04/26/99  10:52a                31,006 pose.c</P>
<P>04/26/99  10:53a                 8,021 pose.h</P>
<P>05/04/99  05:02p                43,043 puppet.c</P>
<P>04/26/99  10:53a                 4,127 puppet.h</P>
<P>04/26/99  10:52a                32,811 QKFrame.c</P>
<P>04/26/99  10:53a                 6,823 QKFrame.h</P>
<P>04/26/99  10:52a                16,010 strblock.c</P>
<P>04/26/99  10:53a                 2,994 strblock.h</P>
<P>04/26/99  10:52a                11,470 tkarray.c</P>
<P>04/26/99  10:53a                 5,188 tkarray.h</P>
<P>04/26/99  10:52a                19,568 tkevents.c</P>
<P>04/26/99  10:53a                 4,705 tkevents.h</P>
<P>04/26/99  10:52a                24,560 vkframe.c</P>
<P>04/26/99  10:53a                 5,937 vkframe.h</P>
<P>04/26/99  10:52a                 3,467 XFArray.c</P>
<P>04/26/99  10:53a                 3,077 xfarray.h</P>
<P>              29 File(s)        475,570 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069838">Directory of C:\Genesis3D\OpenSource\Source\Bitmap</A> </P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains code for creating and moving bitmap texture images.  It also calls the compression subdirectory beneath it to compress and expand bitmap palettes.</P>

</FONT><FONT FACE="Arial" SIZE=2><P>&nbsp;</P>
</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Source\Bitmap</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>05/05/99  11:31a               124,990 bitmap.c</P>
<P>05/03/99  04:06p                23,446 bitmap.h</P>
<P>05/03/99  03:24p                 3,116 bitmap._h</P>
<P>04/26/99  11:46a                 6,134 bitmap.__h</P>
<P>05/05/99  12:01a                42,086 bitmap_blitdata.c</P>
<P>04/26/99  10:53a                 2,320 bitmap_blitdata.h</P>
<P>04/26/99  10:52a                13,801 bitmap_gamma.c</P>
<P>04/26/99  10:53a                 2,175 bitmap_gamma.h</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          Compression</P>
<P>05/04/99  01:23p                25,560 pixelformat.c</P>
<P>05/03/99  03:16p                 6,342 pixelformat.h</P>
<P>              13 File(s)        249,970 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069839">Directory of C:\Genesis3D\OpenSource\Source\Bitmap\Compression</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains code for using and optimizing various palettes (Genesis supports different video resolutions so palette translation is necessary between prerecorded bitmap images and the screens they may be displayed on.)  Genesis also uses 256 color palettes in its saved images and optimizes these, rolling them together,  in displaying the higher 16 bit video color depth of the final product.</P>
</FONT><FONT FACE="Courier New" SIZE=1>
<P>Directory of C:\Genesis3D\OpenSource\Source\Bitmap\Compression</P>

<P>05/17/99  06:32p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:32p        &lt;DIR&gt;          ..</P>
<P>04/26/99  10:52a                22,265 palcreate.c</P>
<P>04/26/99  10:53a                 2,636 palcreate.h</P>
<P>04/26/99  10:52a                14,015 palettize.c</P>
<P>04/26/99  10:53a                 2,586 palettize.h</P>
<P>04/26/99  10:52a                 7,308 paloptimize.c</P>
<P>04/26/99  10:53a                 2,207 paloptimize.h</P>
<P>04/26/99  10:53a                 3,801 utility.h</P>
<P>04/26/99  10:52a                 6,168 yuv.c</P>
<P>04/26/99  10:53a                 4,572 yuv.h</P>
<P>              11 File(s)         65,558 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069840">Directory of C:\Genesis3D\OpenSource\Source\Engine</A> </P>
</FONT><FONT FACE="Arial"><P>This is the outermost subdirectory of the actual engine.  It contains the engine code, code for manipulating the list of bitmap images, font display, and links to the two subdirectories beneath it which control video driver display and the Genesis logo display.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Source\Engine</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>04/28/99  06:34p                 9,690 BitmapList.c</P>
<P>04/26/99  10:53a                 2,861 BitmapList.h</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          Drivers</P>
<P>05/04/99  05:02p                52,372 engine.c</P>
<P>04/26/99  10:53a                 5,335 engine.h</P>
<P>04/26/99  10:52a                63,532 fontbmp.c</P>
<P>04/26/99  10:52a             1,057,891 genesis3d.c</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          Logo</P>
<P>05/10/99  05:28p                14,168 System.c</P>
<P>05/10/99  05:28p                 7,304 System.h</P>
<P>              12 File(s)      1,213,153 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454069841">Directory of C:\Genesis3D\OpenSource\Source\Engine\Drivers</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains common subroutines used by all the Genesis video drivers.  Genesis3D supports DirectX, Glide and a software only video driver.  There are two software video drivers provided.  SoftDrv2 is the latest driver and is used in the Gtest example program.  Beneath this subdirectory are subdirectories containing code for each of the video drivers.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Source\Engine\Drivers</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>04/26/99  10:52a                 4,157 Bmp.c</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          D3DDrv</P>
<P>05/10/99  03:30p                16,061 Dcommon.h</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          GlideDrv</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          SoftDrv</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          SoftDrv2</P>
<P>               8 File(s)         20,218 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069842">Directory of C:\Genesis3D\OpenSource\Source\Engine\Drivers\D3DDrv</A> </P>
</FONT><FONT FACE="Arial"><P>In this subdirectory is the code for the DirectX Direct3D video drivers.  This code acts as a thin wrapper around the Microsoft code and provides consistency of calling convention between the DirectX, Glide and Software only versions of the driver.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Source\Engine\Drivers\D3DDrv</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>05/10/99  10:22p                23,182 D3dcache.cpp</P>
<P>05/10/99  06:41p                 3,877 D3dcache.h</P>
<P>05/08/99  11:06p                 7,360 D3ddrv.cpp</P>
<P>03/04/99  02:17p                 7,231 D3DDrv.dsp</P>
<P>04/26/99  10:53a                 2,100 D3DDRV.H</P>
<P>03/04/99  02:17p                 7,615 D3DDrv.mak</P>
<P>04/26/99  10:52a                15,019 D3D_ERR.CPP</P>
<P>04/26/99  10:53a                 2,179 D3D_ERR.H</P>
<P>05/08/99  11:06p                 8,217 D3d_fx.cpp</P>
<P>05/08/99  11:06p                 2,683 D3D_FX.H</P>
<P>05/10/99  10:21p                87,434 D3d_main.cpp</P>
<P>05/08/99  11:06p                 8,800 D3d_main.h</P>
<P>04/26/99  10:52a                 6,374 DDMemMgr.c</P>
<P>04/26/99  10:53a                 2,736 DDMemMgr.h</P>
<P>04/26/99  10:52a                 7,720 GSPAN.CPP</P>
<P>04/26/99  10:53a                 2,823 GSPAN.H</P>
<P>05/15/99  12:22a                   131 mssccprj.scc</P>
<P>05/09/99  01:28a                37,023 Pcache.cpp</P>
<P>04/26/99  10:53a                 2,286 Pcache.h</P>
<P>05/07/99  02:56p                 7,206 Render.cpp</P>
<P>05/07/99  02:56p                 2,394 RENDER.H</P>
<P>05/09/99  12:54a                 5,313 Scene.cpp</P>
<P>04/26/99  10:53a                 2,368 SCENE.H</P>
<P>05/10/99  10:21p                23,099 THandle.cpp</P>
<P>05/05/99  04:48p                 5,016 THandle.h</P>
<P>04/26/99  10:52a                17,803 tpage.cpp</P>
<P>04/26/99  10:53a                 3,587 TPage.h</P>
<P>              29 File(s)        301,576 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454069843">Directory of C:\Genesis3D\OpenSource\Source\Engine\Drivers\GlideDrv</A> </P>
</FONT><FONT FACE="Arial"><P>In this subdirectory is the code for the Glide video drivers.  This code acts as a thin wrapper around the Glide code and provides consistency of calling convention between the DirectX, Glide and Software only versions of the driver.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Source\Engine\Drivers\GlideDrv</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>04/26/99  10:52a                20,816 GCache.c</P>
<P>04/26/99  10:53a                 3,404 GCache.h</P>
<P>05/11/99  03:35p                 8,858 GlideDrv.c</P>
<P>03/04/99  12:50p                 6,363 GlideDrv.dsp</P>
<P>04/26/99  10:53a                 2,023 GLIDEDRV.H</P>
<P>03/04/99  12:50p                 6,702 GlideDrv.mak</P>
<P>04/26/99  10:52a                11,290 GMain.c</P>
<P>04/26/99  10:53a                 2,839 GMain.h</P>
<P>04/26/99  10:52a                 5,923 GMemMgr.c</P>
<P>04/26/99  10:53a                 2,452 GMemMgr.h</P>
<P>04/26/99  10:52a                 7,767 GSpan.cpp</P>
<P>04/26/99  10:53a                 2,935 GSpan.h</P>
<P>04/26/99  10:52a                23,513 GThandle.c</P>
<P>04/26/99  10:53a                 5,778 GTHandle.h</P>
<P>05/15/99  12:22a                   135 mssccprj.scc</P>
<P>05/08/99  11:27p                29,377 Render.c</P>
<P>04/26/99  10:53a                 4,009 Render.h</P>
<P>              19 File(s)        144,184 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069844">Directory of C:\Genesis3D\OpenSource\Source\Engine\Drivers\SoftDrv</A> </P>
</FONT><FONT FACE="Arial"><P>In this subdirectory is the first of two software only versions of the video drivers.  This code acts as a thin wrapper around the Microsoft code and provides consistency of calling convention between the DirectX, Glide and Software only versions of the driver.</P>
<P>It was used more most of the development of Genesis3D and is highly robust, but it has been superceded by the SoftDrv2 version.  It is included here for completeness and for comparison purposes in case problems arise with the other driver. </P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Source\Engine\Drivers\SoftDrv</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>04/26/99  10:53a                 5,406 3dnowspan.h</P>
<P>04/26/99  10:55a               287,158 amdspan.asm</P>
<P>04/26/99  10:52a                48,025 dmodes.c</P>
<P>04/26/99  10:53a                 3,143 dmodes.h</P>
<P>04/26/99  10:52a                33,163 drawspan.c</P>
<P>04/26/99  10:53a                 3,293 drawspan.h</P>
<P>05/15/99  12:22a                   133 mssccprj.scc</P>
<P>04/26/99  10:52a                10,152 register.c</P>
<P>04/26/99  10:53a                 3,445 REGISTER.H</P>
<P>04/26/99  10:52a                71,866 render.c</P>
<P>04/26/99  10:53a                 4,614 RENDER.H</P>
<P>04/26/99  10:53a                10,329 SAL.H</P>
<P>04/26/99  10:52a                 6,309 scene.c</P>
<P>04/26/99  10:53a                 2,364 SCENE.H</P>
<P>05/12/99  04:23p                21,885 softdrv.c</P>
<P>03/04/99  02:18p                 7,738 SoftDrv.dsp</P>
<P>04/26/99  10:53a                 3,478 SOFTDRV.H</P>
<P>03/04/99  02:18p                 8,266 SoftDrv.mak</P>
<P>04/26/99  10:52a                 4,188 span.c</P>
<P>04/26/99  10:53a                 2,575 SPAN.H</P>
<P>04/26/99  10:52a                 2,642 system.c</P>
<P>04/26/99  10:53a                 1,978 SYSTEM.H</P>
<P>04/26/99  10:52a                58,376 W32SAL.CPP</P>
<P>04/26/99  10:52a               300,289 x86span555.c</P>
<P>04/26/99  10:53a                 4,700 x86span555.h</P>
<P>04/26/99  10:52a               330,685 x86span565.c</P>
<P>04/26/99  10:53a                 4,619 x86span565.h</P>
<P>              29 File(s)      1,240,819 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069845">Directory of C:\Genesis3D\OpenSource\Source\Engine\Drivers\SoftDrv2</A></P>
</FONT><FONT FACE="Arial"><P>In this subdirectory is the second of two software only versions of the video drivers.  This code acts as a thin wrapper around the Microsoft code and provides consistency of calling convention between the DirectX, Glide and Software only versions of the driver.</P>
<P>This is the latest version of the driver and is optimized for better performance and has been tested with a wide range of video cards. </P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Source\Engine\Drivers\SoftDrv2</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>05/12/99  04:25p                 5,487 CPUInfo.c</P>
<P>04/26/99  10:53a                 2,113 CPUInfo.h</P>
<P>04/26/99  10:52a                23,559 DDRAWDisplay.c</P>
<P>04/26/99  10:53a                 3,435 DDRAWDisplay.h</P>
<P>04/26/99  10:52a                21,153 DIBDisplay.c</P>
<P>04/26/99  10:53a                 3,528 DIBDisplay.h</P>
<P>04/26/99  10:52a                 7,801 display.c</P>
<P>04/26/99  10:53a                 3,772 display.h</P>
<P>04/26/99  10:52a                 4,319 DisplayModeInfo.c</P>
<P>04/26/99  10:53a                 3,081 DisplayModeInfo.h</P>
<P>04/26/99  10:52a                 6,356 DrawDecal.c</P>
<P>04/26/99  10:53a                 2,116 DrawDecal.h</P>
<P>05/15/99  12:22a                   135 mssccprj.scc</P>
<P>04/26/99  10:53a                 4,531 rop.h</P>
<P>04/29/99  07:45p                30,906 softdrv.c</P>
<P>04/26/99  10:53a                 2,318 Softdrv.h</P>
<P>04/06/99  06:07p                 7,825 SoftDrv2.dsp</P>
<P>04/06/99  06:07p                 8,149 SoftDrv2.mak</P>
<P>04/26/99  10:52a                19,290 span.c</P>
<P>04/26/99  10:53a                 2,508 Span.h</P>
<P>05/09/99  12:11a                 8,306 SpanBuffer.c</P>
<P>04/26/99  10:53a                 3,048 SpanBuffer.h</P>
<P>04/26/99  10:53a                 7,297 SpanEdges_Factory.h</P>
<P>04/26/99  10:53a                 7,257 Span_AffineLoop.h</P>
<P>05/09/99  12:08a                 8,183 Span_Factory.h</P>
<P>04/26/99  10:52a                13,401 SWTHandle.c</P>
<P>04/26/99  10:53a                 3,599 SWTHandle.h</P>
<P>04/26/99  10:52a                14,348 TRaster.c</P>
<P>04/26/99  10:53a                 3,873 traster.h</P>
<P>04/26/99  10:52a                13,167 Triangle.c</P>
<P>04/26/99  10:53a                14,352 triangle.h</P>
<P>              33 File(s)        259,213 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069846">Directory of C:\Genesis3D\OpenSource\Source\Engine\Logo</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains procedual code for the Genesis3D logo - creating the electrical arc and corona halo effect and the moving gears on the spash screen in the GTest demo program.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Source\Engine\Logo</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>04/26/99  10:52a               106,955 A_CORONA.c</P>
<P>04/26/99  10:52a               107,639 A_STREAK.c</P>
<P>04/26/99  10:52a               107,861 CORONA.c</P>
<P>04/28/99  11:36a                 9,026 electric.c</P>
<P>04/26/99  10:53a                 3,527 electric.h</P>
<P>05/11/99  03:42p                14,866 logo.c</P>
<P>04/26/99  10:52a               852,733 LogoActor.c</P>
<P>04/26/99  10:52a               105,805 streak.c</P>
<P>05/11/99  03:35p               272,444 WebUrl.c</P>
<P>              11 File(s)      1,580,856 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069847">Directory of C:\Genesis3D\OpenSource\Source\Entities</A> </P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the basic entity definitions for objects in the Genesis3D world.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Source\Entities</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>04/26/99  10:52a                29,763 Entities.c</P>
<P>04/26/99  10:53a                 5,894 ENTITIES.H</P>
<P>               4 File(s)         35,657 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069848">Directory of C:\Genesis3D\OpenSource\Source\Font</A> </P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the basic definitions and functions that can be used with text fonts in Genesis3D.  The engine supports the display of various TrueType fonts within a created game.</P>
</FONT><FONT FACE="Arial" SIZE=2>
</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Source\Font</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>04/26/99  10:52a                42,455 font.c</P>
<P>04/26/99  10:53a                13,334 font.H</P>
<P>04/26/99  10:52a                 4,360 wgClip.c</P>
<P>04/26/99  10:53a                 2,421 wgClip.H</P>
<P>               6 File(s)         62,570 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069849">Directory of C:\Genesis3D\OpenSource\Source\Math</A> </P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains code for the basic math routines used throughout the engine.  It includes routines for vector and quaternions</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Source\Math</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>04/26/99  10:52a                 7,101 Box.c</P>
<P>04/26/99  10:53a                 3,027 Box.h</P>
<P>04/26/99  10:52a                 6,524 crc32.c</P>
<P>04/26/99  10:53a                 2,305 crc32.h</P>
<P>04/26/99  10:52a                14,114 ExtBox.c</P>
<P>04/26/99  10:53a                 4,577 ExtBox.h</P>
<P>05/04/99  05:02p                21,587 quatern.c</P>
<P>04/26/99  10:53a                 9,519 quatern.h</P>
<P>04/26/99  10:52a                 8,446 VEC3D.C</P>
<P>04/26/99  10:53a                 3,903 VEC3D.H</P>
<P>05/04/99  05:02p                24,404 Xform3d.c</P>
<P>04/26/99  10:53a                 8,740 XFORM3D.H</P>
<P>              14 File(s)        114,247 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069850">Directory of C:\Genesis3D\OpenSource\Source\Physics</A> </P>
</FONT><FONT FACE="Arial"><P>The contents of this subdirectory are the routines that make up the basic physics library for collision reactions and the fundamental 3D matrix math operations that determine movement in the game world.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Source\Physics</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>04/26/99  04:03p                 5,417 matrix33.c</P>
<P>04/26/99  04:04p                 2,772 matrix33.h</P>
<P>04/26/99  04:05p                 7,722 PhysicsJoint.c</P>
<P>04/26/99  04:05p                 4,093 PhysicsJoint.h</P>
<P>05/11/99  09:45p                27,872 PhysicsObject.c</P>
<P>05/13/99  02:08p                 8,618 PhysicsObject.h</P>
<P>05/11/99  09:47p                24,135 PhysicsSystem.c</P>
<P>04/26/99  04:04p                 3,183 PhysicsSystem.h</P>
<P>              10 File(s)         83,812 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069851">Directory of C:\Genesis3D\OpenSource\Source\Support</A> </P>
</FONT><FONT FACE="Arial"><P>The routines in this subdirectory comprise the memory management routines and error trapping routines used throughout the engine.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Source\Support</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>05/03/99  03:55p                 3,332 BASETYPE.H</P>
<P>04/27/99  11:49p                 5,749 ERRORLOG.C</P>
<P>04/27/99  11:53p                11,163 Errorlog.h</P>
<P>04/26/99  10:52a                 4,629 geAssert.c</P>
<P>04/26/99  10:53a                 2,968 geAssert.h</P>
<P>04/26/99  10:52a                 2,375 log.c</P>
<P>04/26/99  10:53a                 2,218 log.h</P>
<P>04/26/99  10:52a                 8,654 mempool.c</P>
<P>04/26/99  10:53a                 2,491 mempool.h</P>
<P>04/26/99  10:52a                15,407 RAM.C</P>
<P>04/26/99  10:53a                 5,195 RAM.H</P>
<P>04/26/99  10:52a                 1,904 ramdll.c</P>
<P>              14 File(s)         66,085 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069852">Directory of C:\Genesis3D\OpenSource\Source\Vfile</A> </P>
</FONT><FONT FACE="Arial"><P>Basic file handling is accomplished through the routines in this subdirectory including handling the manipulation of memory blocks and virtual files.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Source\VFile</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>05/04/99  05:12p                18,775 dirtree.c</P>
<P>04/26/99  10:53a                 3,764 dirtree.h</P>
<P>04/28/99  11:27a                20,367 fsdos.c</P>
<P>04/26/99  10:53a                 1,946 fsdos.h</P>
<P>04/26/99  10:52a                11,369 FSMEMORY.C</P>
<P>04/26/99  10:53a                 1,956 FSMEMORY.H</P>
<P>04/26/99  10:52a                20,007 fsvfs.c</P>
<P>04/26/99  10:53a                 1,970 fsvfs.h</P>
<P>04/26/99  10:52a                14,333 vfile.c</P>
<P>04/26/99  10:53a                 8,113 vfile.h</P>
<P>04/26/99  11:45a                 5,354 vfile._h</P>
<P>              13 File(s)        107,954 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454069853">Directory of C:\Genesis3D\OpenSource\Source\World</A> </P>
</FONT><FONT FACE="Arial"><P>Code in this subdirectory primarily governs visibility in the game world.  It includes routines for manipulating light, surfaces, planes, fog effects, and the binary space partion tree (BSP tree) which is rapidly searched for objects which may be visible to the player.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Source\World</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>04/26/99  10:52a                 4,254 Fog.c</P>
<P>04/26/99  10:53a                 3,438 Fog.h</P>
<P>05/06/99  08:15p                35,122 Frustum.c</P>
<P>05/06/99  08:15p                 5,377 FRUSTUM.H</P>
<P>04/26/99  10:52a                18,084 Gbspfile.c</P>
<P>04/26/99  10:53a                10,659 GBSPFILE.H</P>
<P>05/12/99  05:16p                53,541 Light.c</P>
<P>05/11/99  10:24p                 4,655 LIGHT.H</P>
<P>05/06/99  07:17p                 7,487 Plane.c</P>
<P>05/06/99  07:17p                 3,067 PLANE.H</P>
<P>05/04/99  04:03p                17,807 Surface.c</P>
<P>04/26/99  10:53a                 4,337 SURFACE.H</P>
<P>05/04/99  05:02p                63,164 Trace.c</P>
<P>04/26/99  10:53a                 6,002 TRACE.H</P>
<P>04/26/99  10:52a                29,317 User.c</P>
<P>04/26/99  10:53a                 4,491 USER.H</P>
<P>05/04/99  05:02p                15,085 Vis.c</P>
<P>04/26/99  10:53a                 2,687 VIS.H</P>
<P>04/29/99  06:59p                15,853 WBitmap.c</P>
<P>04/26/99  10:53a                 4,244 WBitmap.h</P>
<P>05/12/99  12:57a                92,115 World.c</P>
<P>05/05/99  05:36p                 9,314 WORLD.H</P>
<P>              24 File(s)        410,100 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069854">Directory of C:\Genesis3D\OpenSource\Tools*</A></P>
</FONT><FONT FACE="Arial"><P>The Tools subdirectory is a container for individual subdirectories containing sources for all the tools supplied by Eclipse for use with the Genesis3D engine.  There is no source code in the outer directory, in fact, there are no files at all in the outer directory.</P>
<P>Note: As an optimization to reduce the compilation speed the Tools each contain their own copies of the main Genesis3D headers and compiled versions of the resultant libraries to link to.  This code is replicated for each Tool subdirectory and except where noted it should be identical for each tool.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ActView</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          Exporters</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          Fusion2</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          GBSPLib</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          GPreview</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          mkactor</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          TPack</P>
<P>               9 File(s)              0 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069855">Directory of C:\Genesis3D\OpenSource\Tools\ActView*</A> </P>
</FONT><FONT FACE="Arial"><P>This is the outer subdirectory for the ActView tool, which allows you to view, rotate, zoom, and animate ACT files.  It is useful for verifying the smoothness of an animation, but it does not contain functions for changing animations.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\ActView</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>04/28/99  10:50a                 6,625 ActView.dsp</P>
<P>03/24/99  09:31p                 6,830 ActView.mak</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          Doc</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          GenesisSDK</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          Main</P>
<P>05/15/99  12:22a                   117 mssccprj.scc</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          res</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          Util</P>
<P>              10 File(s)         13,572 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069856">Directory of C:\Genesis3D\OpenSource\Tools\ActView\Doc*</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains help files and screen shots on how to use the ActView tool.</P>
</FONT><FONT FACE="Arial" SIZE=2>
</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\ActView\Doc</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>09/16/98  10:25a                   663 ActView.CNT</P>
<P>09/16/98  10:40a                47,616 ActView.doc</P>
<P>09/16/98  10:40a                   475 ActView.err</P>
<P>09/16/98  02:34p                16,112 ACTVIEW.HLP</P>
<P>09/16/98  10:40a                 3,580 ActView.hpj</P>
<P>09/14/98  03:13p                   455 ActView.rbh</P>
<P>09/16/98  10:40a                    59 ActView.rta</P>
<P>09/16/98  10:40a                50,231 ActView.rtf</P>
<P>09/16/98  10:40a                 1,093 ActView.rtk</P>
<P>09/16/98  10:40a                 1,633 ActView.rts</P>
<P>09/14/98  11:36a                   246 ffend.bmp</P>
<P>09/14/98  11:51a                   246 ffframe.bmp</P>
<P>09/14/98  12:36p                   438 frame.bmp</P>
<P>09/14/98  12:40p                   566 move.bmp</P>
<P>09/14/98  11:55a                   246 pan.bmp</P>
<P>09/14/98  11:56a                   246 pause.bmp</P>
<P>09/14/98  11:35a                   246 play.bmp</P>
<P>09/14/98  11:59a                   246 rotate.bmp</P>
<P>09/14/98  12:00p                   246 rrframe.bmp</P>
<P>09/14/98  12:01p                   246 rrstart.bmp</P>
<P>09/14/98  12:03p                   246 stop.bmp</P>
<P>09/14/98  12:04p                   246 zoom.bmp</P>
<P>              24 File(s)        125,381 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069857">Directory of C:\Genesis3D\OpenSource\Tools\ActView\GenesisSDK*</A> </P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the Genesis3D headers and the debug and release libraries.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\ActView\GenesisSDK</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          include</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          lib</P>
<P>               4 File(s)              0 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454069858">Directory of C:\Genesis3D\OpenSource\Tools\ActView\GenesisSDK\include</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains a copy of the header files used by Actview in compilation.  It is the same as those in the outer include directory.  They are included here, separately, to speed compilation times and to separate the compilation of the ActView tool from that of the Genesis3D engine.  In a final release of a newly developed product they should be identical.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\ActView\GenesisSDK\include</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>04/26/99  11:26a                23,693 actor.h</P>
<P>05/04/99  01:20p                 3,332 BASETYPE.H</P>
<P>05/04/99  01:20p                23,446 bitmap.h</P>
<P>04/26/99  11:26a                 5,570 body.h</P>
<P>04/27/99  11:53p                11,163 Errorlog.h</P>
<P>04/26/99  11:26a                 4,577 ExtBox.h</P>
<P>04/26/99  11:26a                13,334 font.H</P>
<P>04/26/99  11:26a                26,019 GENESIS.H</P>
<P>04/26/99  11:26a                 3,573 getypes.h</P>
<P>04/26/99  04:04p                 2,772 matrix33.h</P>
<P>04/26/99  11:26a                 9,662 motion.h</P>
<P>04/26/99  11:26a                 6,248 path.h</P>
<P>04/26/99  04:05p                 4,093 PhysicsJoint.h</P>
<P>04/26/99  04:05p                 8,619 PhysicsObject.h</P>
<P>04/26/99  04:04p                 3,183 PhysicsSystem.h</P>
<P>05/04/99  01:20p                 6,342 pixelformat.h</P>
<P>04/26/99  11:26a                 9,519 quatern.h</P>
<P>04/26/99  11:26a                 5,195 RAM.H</P>
<P>04/26/99  11:26a                 3,903 VEC3D.H</P>
<P>04/26/99  11:26a                 8,113 vfile.h</P>
<P>04/26/99  11:26a                 8,740 XFORM3D.H</P>
<P>              23 File(s)        191,096 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069859">Directory of C:\Genesis3D\OpenSource\Tools\ActView\GenesisSDK\lib*</A> </P>
</FONT><FONT FACE="Arial"><P>The files in this subdirectory are the libraries used by ActView in compilation.  They are the same as those used in the Gtest game and the outer /lib subdirectory.  They are included here, separately, to speed compilation times and to separate the compilation of the ActView tool from that of the Genesis3D engine.  In a final release of a newly developed product they should be identical.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\ActView\GenesisSDK\lib</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>05/10/99  10:57p             1,182,298 genesis.lib</P>
<P>05/10/99  10:50p             3,630,406 genesisd.lib</P>
<P>               4 File(s)      4,812,704 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069860">Directory of C:\Genesis3D\OpenSource\Tools\ActView\Main</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the main code for the ActView tool.  </P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\ActView\Main</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>04/28/99  11:24a                58,315 actview.c</P>
<P>12/22/98  09:04p                13,498 ActView.rc</P>
<P>04/26/99  11:26a                54,837 blender.c</P>
<P>04/26/99  11:26a                 2,537 Blender.h</P>
<P>12/22/98  09:04p                 5,800 resource.h</P>
<P>               7 File(s)        134,987 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069861">Directory of C:\Genesis3D\OpenSource\Tools\ActView\res*</A> </P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the resources which are compiled into the ActView tool.  It is primarily a series of small icon files which are used to decorate the buttons with functional representations. </P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\ActView\res</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>09/15/98  01:20p                19,478 actview.bmp</P>
<P>09/17/98  04:40p                   766 blend.ico</P>
<P>09/09/98  02:16p                 1,078 ffend.ico</P>
<P>09/14/98  12:05p                 1,078 ffframe.ico</P>
<P>09/10/98  05:53p                   766 irotate.ico</P>
<P>09/11/98  04:26p                   766 mainicon.ico</P>
<P>09/10/98  05:34p                   326 pan.cur</P>
<P>09/14/98  12:05p                   766 pan.ico</P>
<P>09/09/98  02:26p                 1,078 pause.ico</P>
<P>09/09/98  02:16p                 1,078 play.ico</P>
<P>09/10/98  05:52p                   326 rotate.cur</P>
<P>09/14/98  11:59a                   766 rotate.ico</P>
<P>09/14/98  12:05p                 1,078 rrframe.ico</P>
<P>09/14/98  12:05p                 1,078 rrstart.ico</P>
<P>09/14/98  12:05p                 1,078 stop.ico</P>
<P>09/10/98  05:57p                   326 zoom.cur</P>
<P>09/10/98  05:04p                   766 zoom.ico</P>
<P>              19 File(s)         32,598 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069862">Directory of C:\Genesis3D\OpenSource\Tools\ActView\Util</A> </P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains a series of basic utilities used by the ActView tools.  </P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\ActView\Util</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>04/26/99  11:26a                 2,606 About.c</P>
<P>04/26/99  11:26a                 2,030 about.h</P>
<P>04/26/99  11:26a                 6,303 drvlist.c</P>
<P>04/26/99  11:26a                 2,028 drvlist.h</P>
<P>04/26/99  11:26a                 6,282 FilePath.c</P>
<P>04/26/99  11:26a                 3,939 FilePath.h</P>
<P>04/26/99  11:26a                 3,953 InstCheck.c</P>
<P>04/26/99  11:26a                 2,262 InstCheck.h</P>
<P>04/26/99  11:26a                 2,800 rcstring.c</P>
<P>04/26/99  11:26a                 2,444 rcstring.h</P>
<P>04/26/99  11:26a                 2,641 units.h</P>
<P>04/26/99  11:26a                 3,114 WinUtil.c</P>
<P>04/26/99  11:26a                 2,551 WinUtil.h</P>
<P>              15 File(s)         42,953 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069863">Directory of C:\Genesis3D\OpenSource\Tools\Exporters</A></P>
</FONT><FONT FACE="Arial"><P>The code in this subdirectory is used for the creation of the two .dle files which are plugged into 3D Studio max to enable it to export .ACT files.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\Exporters</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>03/23/99  05:06p                 2,066 3dseres.h</P>
<P>03/23/99  05:06p                15,087 3dsimp.h</P>
<P>03/23/99  05:06p                 2,342 3dsires.h</P>
<P>04/26/99  12:57p                 5,248 3dsmtl.cpp</P>
<P>03/23/99  05:06p                 8,336 Cfile.h</P>
<P>04/26/99  12:58p                98,710 gexp.cpp</P>
<P>03/23/99  05:06p                   122 gexp.def</P>
<P>03/24/99  09:03a                 9,474 gexp.dsp</P>
<P>03/23/99  05:06p                 3,244 gexp.h</P>
<P>03/24/99  09:03a                 9,427 gexp.mak</P>
<P>03/23/99  05:06p                 5,874 gexp.rc</P>
<P>03/23/99  05:06p                 1,316 Kfio.h</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          max2sdk</P>
<P>05/15/99  12:22a                   116 mssccprj.scc</P>
<P>03/23/99  05:06p                 6,160 Mtldef.h</P>
<P>03/23/99  05:06p                 6,887 Ofile.h</P>
<P>04/26/99  12:59p                14,967 Savemli.cpp</P>
<P>              19 File(s)        189,376 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069864">Directory of C:\Genesis3D\OpenSource\Tools\Exporters\max2sdk*</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains a readme file which directs the developer to another text file. That file explains how to place critical files from the 3D Studio Max Software Development Kit into this subdirectory.  This is done in order to be able to create the exporters that are used by 3D Studio Max to generate ACT files.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\Exporters\max2sdk</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>05/15/99  12:24a                    66 readme.txt</P>
<P>               3 File(s)             66 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069865">Directory of C:\Genesis3D\OpenSource\Tools\Fusion2</A></P>
</FONT><FONT FACE="Arial"><P>This is the outermost level of the Genesis3D editor Gedit.  The name Fusion2 was a code name for the project during development and it remains.  (It probably was not used as the name of the actual editor because the name is trademarked by another software company for a database product.)  This is a large subdirectory containing virtually all the code for the editor.  There is a documentation subdirectory and the common include and library subdirectories beneath it for compilation.  Unlike most of the code, which is in basic C,  this tool is an MFC C++ development effort.  </P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\Fusion2</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>04/26/99  11:27a                 2,266 about.cpp</P>
<P>04/26/99  11:26a                 2,496 about.h</P>
<P>04/26/99  11:27a                 3,723 ActivationWatch.cpp</P>
<P>04/26/99  11:26a                 2,775 ActivationWatch.h</P>
<P>04/26/99  11:26a                11,958 array.c</P>
<P>04/26/99  11:26a                 4,121 array.h</P>
<P>04/26/99  11:26a                 6,930 box3d.c</P>
<P>04/26/99  11:26a                 4,076 box3d.h</P>
<P>04/26/99  11:26a                87,937 brush.c</P>
<P>04/26/99  11:26a                10,584 brush.h</P>
<P>04/26/99  11:27a                13,155 BrushAttributesDialog.cpp</P>
<P>04/26/99  11:26a                 3,712 BrushAttributesDialog.h</P>
<P>04/26/99  11:27a                16,065 BrushEntityDialog.cpp</P>
<P>04/26/99  11:26a                 4,209 BrushEntityDialog.h</P>
<P>04/26/99  11:27a                15,525 BrushGroupDialog.cpp</P>
<P>04/26/99  11:26a                 3,699 BrushGroupDialog.h</P>
<P>04/26/99  11:26a                41,955 BrushTemplate.c</P>
<P>04/26/99  11:26a                 5,914 BrushTemplate.h</P>
<P>04/26/99  11:27a                 6,032 ChildFrm.cpp</P>
<P>04/26/99  11:26a                 3,031 ChildFrm.h</P>
<P>04/26/99  11:27a                 3,933 ColorBtn.cpp</P>
<P>04/26/99  11:26a                 2,506 ColorBtn.h</P>
<P>04/26/99  11:27a                 8,373 CompileDialog.cpp</P>
<P>04/26/99  11:26a                 3,413 CompileDialog.h</P>
<P>04/26/99  11:27a                13,375 Compiler.cpp</P>
<P>04/26/99  11:26a                 3,526 Compiler.h</P>
<P>04/26/99  11:27a                 6,198 ConsoleTab.cpp</P>
<P>04/26/99  11:26a                 3,823 ConsoleTab.h</P>
<P>04/26/99  11:27a                 5,727 CreateArchDialog.cpp</P>
<P>04/26/99  11:26a                 3,079 CreateArchDialog.h</P>
<P>04/26/99  11:27a                 7,211 CreateBoxDialog.cpp</P>
<P>04/26/99  11:26a                 3,320 CreateBoxDialog.h</P>
<P>04/26/99  11:27a                 4,965 CreateConeDialog.cpp</P>
<P>04/26/99  11:26a                 3,077 CreateConeDialog.h</P>
<P>04/26/99  11:27a                 7,854 CreateCylDialog.cpp</P>
<P>04/26/99  11:26a                 3,166 CreateCylDialog.h</P>
<P>04/26/99  11:27a                 5,699 CreateSpheroidDialog.cpp</P>
<P>04/26/99  11:26a                 3,223 CreateSpheroidDialog.h</P>
<P>04/26/99  11:27a                 4,656 CreateStaircaseDialog.cpp</P>
<P>04/26/99  11:26a                 3,013 CreateStaircaseDialog.h</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          Deliver</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          Doc</P>
<P>04/26/99  11:27a                19,344 EntitiesDialog.cpp</P>
<P>04/26/99  11:26a                 3,565 EntitiesDialog.h</P>
<P>04/26/99  11:27a                24,432 Entity.cpp</P>
<P>04/26/99  11:26a                 6,207 Entity.h</P>
<P>05/11/99  12:13p                24,771 EntityTable.cpp</P>
<P>04/26/99  11:26a                 4,842 EntityTable.h</P>
<P>04/26/99  11:27a                 3,837 EntityVisDlg.cpp</P>
<P>04/26/99  11:26a                 3,284 EntityVisDlg.h</P>
<P>04/26/99  11:26a                 3,670 EntTypeName.c</P>
<P>04/26/99  11:26a                 2,261 EntTypeName.h</P>
<P>04/26/99  11:27a                 5,355 EntView.cpp</P>
<P>04/26/99  11:26a                 2,707 EntView.h</P>
<P>04/26/99  11:26a                38,122 face.c</P>
<P>04/26/99  11:26a                 6,714 face.h</P>
<P>04/26/99  11:27a                30,053 FaceAttributesDialog.cpp</P>
<P>04/26/99  11:26a                 5,228 FaceAttributesDialog.h</P>
<P>04/26/99  11:26a                12,519 FaceList.c</P>
<P>04/26/99  11:26a                 3,858 facelist.h</P>
<P>04/26/99  11:26a                 6,411 FilePath.c</P>
<P>04/26/99  11:26a                 3,946 FilePath.h</P>
<P>12/16/97  01:00p                   221 FUSION.CFG</P>
<P>05/11/99  11:55a                17,093 FUSION.cpp</P>
<P>03/24/99  09:51p                16,818 Fusion.dsp</P>
<P>04/26/99  11:26a                 4,440 FUSION.h</P>
<P>03/24/99  09:51p                19,917 Fusion.mak</P>
<P>12/03/97  01:00a                   768 fusion.pal</P>
<P>05/12/99  03:16p                73,799 FUSION.rc</P>
<P>12/03/97  01:00a               810,244 fusion.wad</P>
<P>05/11/99  12:04p               172,156 FUSIONDoc.cpp</P>
<P>04/26/99  11:26a                15,985 FUSIONDoc.h</P>
<P>04/26/99  11:27a                 8,335 FusionTabControls.cpp</P>
<P>04/26/99  11:26a                 3,674 FusionTabControls.h</P>
<P>04/26/99  11:27a                58,724 FUSIONView.cpp</P>
<P>04/26/99  11:26a                 7,895 FUSIONView.h</P>
<P>04/26/99  11:26a                 8,319 Gbsplib.h</P>
<P>12/09/98  09:41a                   140 gedit.ini</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          GenesisSDK</P>
<P>04/26/99  11:27a                 4,618 GridSizeDialog.cpp</P>
<P>04/26/99  11:26a                 2,969 GridSizeDialog.h</P>
<P>04/26/99  11:27a                20,204 group.cpp</P>
<P>04/26/99  11:26a                 5,250 group.h</P>
<P>04/26/99  11:27a                15,701 KeyEditDlg.cpp</P>
<P>04/26/99  11:26a                 7,818 KeyEditDlg.h</P>
<P>04/26/99  11:27a                41,207 level.cpp</P>
<P>04/26/99  11:26a                 8,229 level.h</P>
<P>04/26/99  11:27a                 3,605 LevelOptions.cpp</P>
<P>04/26/99  11:26a                 3,263 LevelOptions.h</P>
<P>04/26/99  11:26a                19,731 List.c</P>
<P>04/26/99  11:26a                 5,390 list.h</P>
<P>04/26/99  11:27a                25,882 MainFrm.cpp</P>
<P>04/26/99  11:26a                 5,100 MainFrm.h</P>
<P>04/26/99  11:26a                41,878 model.c</P>
<P>04/26/99  11:26a                 6,693 model.h</P>
<P>04/26/99  11:27a                45,056 ModelDialog.cpp</P>
<P>04/26/99  11:26a                 5,394 ModelDialog.h</P>
<P>05/15/99  12:23a                   116 mssccprj.scc</P>
<P>04/26/99  11:26a                 2,214 Mydef.h</P>
<P>04/26/99  11:26a                 7,006 node.c</P>
<P>04/26/99  11:26a                 2,343 node.h</P>
<P>04/26/99  11:26a                17,027 Parse3dt.c</P>
<P>04/26/99  11:26a                 3,302 Parse3dt.h</P>
<P>04/26/99  11:27a                 3,581 PreferencesDialog.cpp</P>
<P>04/26/99  11:26a                 3,329 PreferencesDialog.h</P>
<P>04/26/99  11:26a                 9,972 Prefs.c</P>
<P>04/26/99  11:26a                 3,361 prefs.h</P>
<P>04/26/99  11:26a               293,605 render.c</P>
<P>04/26/99  11:26a                 6,211 render.h</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          res</P>
<P>03/24/99  12:07p                23,939 resource.h</P>
<P>09/23/97  12:21p                   141 resource.hm</P>
<P>04/26/99  11:26a                 4,611 SelBrushList.c</P>
<P>04/26/99  11:26a                 2,698 SelBrushList.h</P>
<P>04/26/99  11:26a                 4,381 SelFaceList.c</P>
<P>04/26/99  11:26a                 2,595 SelFaceList.h</P>
<P>04/26/99  11:27a                10,261 SkyDialog.cpp</P>
<P>04/26/99  11:26a                 4,516 SkyDialog.h</P>
<P>04/26/99  11:26a                 3,271 stack.c</P>
<P>04/26/99  11:26a                 2,718 stack.h</P>
<P>04/26/99  11:26a                 2,855 StdAfx.h</P>
<P>04/30/99  04:35p                14,696 TextureDialog.cpp</P>
<P>04/26/99  05:49p                 3,358 TextureDialog.h</P>
<P>04/26/99  11:26a                10,118 typeio.c</P>
<P>04/26/99  11:26a                 5,381 typeio.h</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          TypeParser</P>
<P>04/26/99  11:27a                 6,869 undostack.cpp</P>
<P>04/26/99  11:26a                 2,808 undostack.h</P>
<P>04/26/99  11:26a                 2,913 units.h</P>
<P>04/26/99  11:26a                 5,241 util.c</P>
<P>04/26/99  11:26a                 2,580 util.h</P>
<P>04/26/99  11:27a                 5,147 WadFile.cpp</P>
<P>04/26/99  11:26a                 2,226 WadFile.h</P>
<P>             135 File(s)      2,523,332 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069866">Directory of C:\Genesis3D\OpenSource\Tools\Fusion2\Deliver*</A> </P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains a number of items that are required in order to use the Genesis Editor, including the Texture Packing utility, the gedit.ini file (which establishes the defaults for the program, the txl file for establishing colors, and the font file for creating text.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\Fusion2\Deliver</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>06/14/97  07:12p                15,116 font.gfx</P>
<P>12/09/98  09:41a                   140 gedit.ini</P>
<P>05/29/98  05:16p               872,424 gedit.txl</P>
<P>11/20/97  02:53p                 4,876 spot.gfx</P>
<P>08/21/98  10:43a               305,152 tpack.exe</P>
<P>               7 File(s)      1,197,708 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069867">Directory of C:\Genesis3D\OpenSource\Tools\Fusion2\Doc*</A> </P>
</FONT><FONT FACE="Arial"><P>The doc subdirectory file contains doc, txt and rtf files which document GEdit.  RoboHelp was used to generate the actual Help file and the HTML subdirectory below. </P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\Fusion2\Doc</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>07/26/88  10:00a               132,382 AWK.EXE</P>
<P>09/03/98  09:44a                 3,333 CVT.BAT</P>
<P>06/18/98  11:08a                   962 docco.txt</P>
<P>01/22/98  03:44p                 7,809 entities.txt</P>
<P>09/02/98  07:06p                   100 fixfont.awk</P>
<P>07/03/98  01:28p                 1,292 gedit.cnt</P>
<P>07/03/98  01:32p                19,968 gedit.doc</P>
<P>07/28/98  01:45p                   778 gedit.err</P>
<P>09/02/98  07:03p                36,528 GEDIT.HLP</P>
<P>07/03/98  02:22p                 3,475 gedit.hpj</P>
<P>07/03/98  01:33p                   500 gedit.rbh</P>
<P>07/03/98  01:32p                    59 gedit.rta</P>
<P>07/03/98  01:32p                 7,701 gedit.rtf</P>
<P>07/03/98  01:32p                    59 gedit.rtk</P>
<P>07/03/98  01:32p                   599 gedit.rts</P>
<P>07/28/98  01:40p                93,696 gedit2.doc</P>
<P>07/03/98  01:32p                   202 gedit2.rbh</P>
<P>07/28/98  01:40p                    59 gedit2.rta</P>
<P>07/28/98  01:40p               111,110 gedit2.rtf</P>
<P>07/28/98  01:40p                 2,127 gedit2.rtk</P>
<P>07/28/98  01:40p                 3,184 gedit2.rts</P>
<P>07/02/98  04:34p                19,456 howdoi.doc</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          html</P>
<P>              25 File(s)        445,379 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069868">Directory of C:\Genesis3D\OpenSource\Tools\Fusion2\Doc\html*</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains an HTML version of the Help file generated by RoboHelp.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\Fusion2\Doc\html</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>07/03/98  02:13p                   180 cnt0.gif</P>
<P>07/03/98  02:13p                   165 cnt1.gif</P>
<P>07/03/98  02:13p                   254 contents.gif</P>
<P>09/03/98  09:45a                 4,077 defaultgedit.html</P>
<P>07/03/98  02:13p                    60 gedit00090000.gif</P>
<P>09/03/98  09:45a                   906 geditAuto_rebuild.html</P>
<P>09/03/98  09:45a                 2,000 geditBasic_Operation.html</P>
<P>09/03/98  09:45a                 2,044 geditBrushes.html</P>
<P>09/03/98  09:45a                 1,520 geditBrush_and_Face_Modes.html</P>
<P>09/03/98  09:45a                 5,055 geditBrush_Attributes_Dialog.html</P>
<P>09/03/98  09:45a                 1,027 geditBSP_Settings.html</P>
<P>09/03/98  09:45a                 3,042 geditCamera_Mode.html</P>
<P>09/03/98  09:45a                 1,709 geditCompiling_and_Viewing_Your_Level.html</P>
<P>09/03/98  09:45a                   861 geditConsole.html</P>
<P>09/03/98  09:45a                 1,226 geditCut_Brushes_and_Brush_Order.html</P>
<P>09/03/98  09:45a                 1,910 geditEntities.html</P>
<P>09/03/98  09:45a                 1,516 geditEntity_Editor.html</P>
<P>09/03/98  09:45a                 1,402 geditEntity_Visibility_Dialog.html</P>
<P>09/03/98  09:45a                 1,259 geditFaces.html</P>
<P>09/03/98  09:45a                 3,882 geditFace_Attributes_Dialog.html</P>
<P>09/03/98  09:45a                 2,303 geditGeneral_Compile_Options.html</P>
<P>09/03/98  09:45a                 2,908 geditGroups.html</P>
<P>09/03/98  09:45a                 6,098 geditindex.html</P>
<P>09/03/98  09:45a                 2,657 geditLight_Settings.html</P>
<P>09/03/98  09:45a                 3,124 geditModels.html</P>
<P>09/03/98  09:45a                 2,245 geditOverview.html</P>
<P>09/03/98  09:45a                 1,902 geditQuick_Compile.html</P>
<P>09/03/98  09:45a                 3,463 geditSelect_Mode.html</P>
<P>09/03/98  09:45a                 4,779 geditShortcut_Keys.html</P>
<P>09/03/98  09:45a                 1,415 geditSky.html</P>
<P>09/03/98  09:45a                 2,732 geditTemplate.html</P>
<P>09/03/98  09:45a                 2,004 geditTemplate_Mode.html</P>
<P>09/03/98  09:45a                   911 geditTextures.html</P>
<P>09/03/98  09:45a                   982 geditThe_Camera_Entity.html</P>
<P>09/03/98  09:45a                 1,045 geditThe_Grid.html</P>
<P>09/03/98  09:45a                 3,271 geditThe_Initialization_File__GEDITIN.html</P>
<P>09/03/98  09:45a                   756 geditThe_Option_Pages.html</P>
<P>09/03/98  09:45a                 1,357 geditThe_Views.html</P>
<P>09/03/98  09:45a                   274 gedituntitled.html</P>
<P>09/03/98  09:45a                 8,509 geditUser_Defined_Entity_Header_Files.html</P>
<P>09/03/98  09:45a                 1,022 geditUser_Interface_Layout.html</P>
<P>09/03/98  09:45a                 1,105 geditVisibility_Settings.html</P>
<P>07/03/98  02:13p                   237 index.gif</P>
<P>07/03/98  02:13p                   162 index_a.gif</P>
<P>07/03/98  02:13p                   162 index_b.gif</P>
<P>07/03/98  02:13p                   163 index_c.gif</P>
<P>07/03/98  02:13p                   163 index_d.gif</P>
<P>07/03/98  02:13p                   159 index_e.gif</P>
<P>07/03/98  02:13p                   159 index_f.gif</P>
<P>07/03/98  02:13p                   165 index_g.gif</P>
<P>07/03/98  02:13p                   161 index_h.gif</P>
<P>07/03/98  02:13p                   162 index_i.gif</P>
<P>07/03/98  02:13p                   162 index_j.gif</P>
<P>07/03/98  02:13p                   162 index_k.gif</P>
<P>07/03/98  02:13p                   160 index_l.gif</P>
<P>07/03/98  02:13p                   162 index_m.gif</P>
<P>07/03/98  02:13p                   163 index_n.gif</P>
<P>07/03/98  02:13p                   162 index_o.gif</P>
<P>07/03/98  02:13p                   161 index_p.gif</P>
<P>07/03/98  02:13p                   164 index_q.gif</P>
<P>07/03/98  02:13p                   161 index_r.gif</P>
<P>07/03/98  02:13p                   164 index_s.gif</P>
<P>07/03/98  02:13p                   160 index_t.gif</P>
<P>07/03/98  02:13p                   163 index_u.gif</P>
<P>07/03/98  02:13p                   162 index_v.gif</P>
<P>07/03/98  02:13p                   163 index_w.gif</P>
<P>07/03/98  02:13p                   164 index_x.gif</P>
<P>07/03/98  02:13p                   161 index_y.gif</P>
<P>07/03/98  02:13p                   161 index_z.gif</P>
<P>09/03/98  09:45a                   145 logfile.html</P>
<P>07/03/98  02:13p                   188 next0.gif</P>
<P>07/03/98  02:13p                   190 next1.gif</P>
<P>07/03/98  02:13p                   186 prev0.gif</P>
<P>07/03/98  02:13p                   189 prev1.gif</P>
<P>              76 File(s)         94,303 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069869">Directory of C:\Genesis3D\OpenSource\Tools\Fusion2\GenesisSDK*</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the Genesis3D headers and the debug and release libraries.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\Fusion2\GenesisSDK</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          include</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          lib</P>
<P>               4 File(s)              0 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069870">Directory of C:\Genesis3D\OpenSource\Tools\Fusion2\GenesisSDK\include</A> </P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains a copy of the header files used by GEdit in compilation.  It is the same as those in the outer include directory.  They are included here, separately, to speed compilation times and to separate the compilation of the GEdit tool from that of the Genesis3D engine.  In a final release of a newly developed product they should be identical.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\Fusion2\GenesisSDK\include</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>04/26/99  11:26a                23,693 actor.h</P>
<P>05/03/99  03:55p                 3,332 BASETYPE.H</P>
<P>05/03/99  04:06p                23,446 bitmap.h</P>
<P>04/26/99  11:26a                 5,570 body.h</P>
<P>04/27/99  11:53p                11,163 Errorlog.h</P>
<P>04/26/99  11:26a                 4,577 ExtBox.h</P>
<P>04/26/99  11:26a                13,334 font.H</P>
<P>04/26/99  11:26a                26,019 GENESIS.H</P>
<P>04/26/99  11:26a                 3,573 getypes.h</P>
<P>04/26/99  11:26a                 9,662 motion.h</P>
<P>04/26/99  11:26a                 6,248 path.h</P>
<P>05/03/99  03:16p                 6,342 pixelformat.h</P>
<P>04/26/99  11:26a                 9,519 quatern.h</P>
<P>04/26/99  11:26a                 5,195 RAM.H</P>
<P>04/26/99  11:26a                 3,903 VEC3D.H</P>
<P>04/26/99  11:26a                 8,113 vfile.h</P>
<P>04/26/99  11:26a                 8,740 XFORM3D.H</P>
<P>              19 File(s)        172,429 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069871">Directory of C:\Genesis3D\OpenSource\Tools\Fusion2\GenesisSDK\lib*</A></P>
</FONT><FONT FACE="Arial"><P>The files in this subdirectory are the libraries used by GEdit in compilation.  They are the same as those used in the Gtest game and the outer /lib subdirectory.  They are included here, separately, to speed compilation times and to separate the compilation of the GEdit tool from that of the Genesis3D engine.  In a final release of a newly developed product they should be identical.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\Fusion2\GenesisSDK\lib</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>05/11/99  04:23a             1,182,298 genesis.lib</P>
<P>05/11/99  04:16a             3,630,406 genesisd.lib</P>
<P>               4 File(s)      4,812,704 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069872">Directory of C:\Genesis3D\OpenSource\Tools\Fusion2\res*</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains all the resources used by the GEdit program including buttons, cursors and icons.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\Fusion2\res</P>

<P>05/17/99  06:33p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:33p        &lt;DIR&gt;          ..</P>
<P>09/23/97  12:21p                   766 actor.ico</P>
<P>02/17/98  05:58p                   766 arch.ico</P>
<P>11/07/97  12:57p                   326 arrow.cur</P>
<P>07/22/98  02:11p                 2,102 camera.bmp</P>
<P>02/17/98  05:58p                   766 cone.ico</P>
<P>11/06/97  11:29a                   766 Cross_m.cur</P>
<P>02/17/98  05:58p                   766 cube.ico</P>
<P>09/23/97  12:21p                16,502 cylinder.bmp</P>
<P>02/17/98  05:58p                   766 cylinder.ico</P>
<P>07/23/98  07:25p                 2,102 default.bmp</P>
<P>07/20/98  05:35p                   326 eyedropper.cur</P>
<P>03/17/98  10:10a                 1,078 ffend.ico</P>
<P>03/17/98  10:10a                 1,078 ffframe.ico</P>
<P>09/23/97  12:21p                 1,078 FUSION.ico</P>
<P>09/23/97  12:21p                   398 FUSION.rc2</P>
<P>09/23/97  12:21p                 1,078 FUSIONDoc.ico</P>
<P>04/21/98  05:49p                   958 groupbar.bmp</P>
<P>09/23/97  12:21p                 8,310 hollowbo.bmp</P>
<P>09/23/97  12:21p                 8,310 hollowsp.bmp</P>
<P>03/17/98  09:58a                 1,078 icoPlay.ico</P>
<P>02/17/98  05:58p                   766 libobj.ico</P>
<P>07/30/98  02:13p                 2,102 light.bmp</P>
<P>09/23/97  12:21p                   766 light.ico</P>
<P>07/22/98  02:11p                 2,102 modelorg.bmp</P>
<P>09/23/97  12:21p                   766 playstart.ico</P>
<P>11/06/97  04:15p                   326 pointer.cur</P>
<P>03/17/98  10:10a                 1,078 rrframe.ico</P>
<P>03/17/98  10:11a                 1,078 rrstart.ico</P>
<P>09/23/97  12:21p                 8,310 solidbox.bmp</P>
<P>09/23/97  12:21p                 8,310 solidsph.bmp</P>
<P>02/17/98  05:58p                   766 sphere.ico</P>
<P>07/22/98  02:11p                 2,102 spotlight.bmp</P>
<P>02/17/98  05:58p                   766 stairs.ico</P>
<P>03/17/98  10:10a                 1,078 stop.ico</P>
<P>01/07/99  12:20p                 1,558 Toolbar.bmp</P>
<P>10/13/98  12:52p                 1,318 toolbar1.bmp</P>
<P>11/17/96  12:00a                 1,758 Whoosh.wav</P>
<P>              39 File(s)         84,270 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069873">Directory of C:\Genesis3D\OpenSource\Tools\Fusion2\TypeParser</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains all the header and code files for the Genesis Editor parsing routines. Gedit can read and parse both its own files and Quake style .map files.  It uses the resulting data to build a BSP tree of the walls, floors, ceilings and objects comprising the game level<I>.  </I>This data can be used to display the level in a variety of views and allows the level designer to manipulate the varoius objects in the level. </P>
<I>
</I></FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\Fusion2\TypeParser</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>04/26/99  11:26a                28,444 cparser.c</P>
<P>04/26/99  11:26a                 3,705 cparser.h</P>
<P>04/26/99  11:26a                14,727 cscanner.c</P>
<P>04/26/99  11:26a                 2,338 cscanner.h</P>
<P>04/26/99  11:26a                 2,471 HASH.C</P>
<P>04/26/99  11:26a                 1,950 HASH.H</P>
<P>04/26/99  11:26a                 3,319 iden.C</P>
<P>04/26/99  11:26a                 2,293 iden.H</P>
<P>04/26/99  11:26a                 7,782 scanner.c</P>
<P>04/26/99  11:26a                 3,867 scanner.h</P>
<P>04/26/99  11:26a                 4,125 symtab.c</P>
<P>04/26/99  11:26a                 2,907 symtab.h</P>
<P>04/26/99  11:26a                 7,975 type.c</P>
<P>04/26/99  11:26a                 3,436 type.h</P>
<P>              16 File(s)         89,339 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069874">Directory of C:\Genesis3D\OpenSource\Tools\GBSPLib</A> </P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the code for building the Binary Space Partition tree used by the Genesis3D game engine.  The code in this library takes the layout of the floors, walls, ceilings and objects in the room and uses it to create a binary tree that can be rapidly searched by the Geneis3D engine at game time to determine what objects are visible to the player at any given location.  The Genesis3D engine combines both Binary Space Partitioning and Portal technology to provide very fast search and rendering times.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\GBSPLib</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>05/06/99  04:57p                33,486 Brush2.cpp</P>
<P>04/26/99  11:26a                 3,817 BRUSH2.H</P>
<P>04/26/99  11:27a                12,486 BSP.CPP</P>
<P>04/26/99  11:26a                 7,944 BSP.H</P>
<P>04/26/99  11:27a                37,771 Bsp2.cpp</P>
<P>03/04/98  03:19p                 1,903 build.bat</P>
<P>04/26/99  11:27a                11,681 Fill.Cpp</P>
<P>04/26/99  11:26a                 1,993 Fill.h</P>
<P>04/26/99  11:27a                18,427 GBSPFILE.CPP</P>
<P>04/26/99  11:26a                11,213 GBSPFILE.H</P>
<P>04/26/99  11:27a                 7,622 Gbsplib.cpp</P>
<P>03/24/99  04:14p                 7,680 GBSPLib.dsp</P>
<P>04/26/99  11:26a                 4,143 Gbsplib.h</P>
<P>03/24/99  04:14p                 8,563 GBSPLib.mak</P>
<P>04/26/99  11:27a                30,268 GBSPPREP.CPP</P>
<P>04/26/99  11:26a                 2,132 GBSPPREP.H</P>
<P>04/26/99  11:27a                17,026 Leaf.cpp</P>
<P>04/26/99  11:26a                 2,314 Leaf.h</P>
<P>05/11/99  12:09a                44,204 LIGHT.CPP</P>
<P>05/10/99  09:15p                 6,411 LIGHT.H</P>
<P>04/26/99  11:27a                20,468 MAP.CPP</P>
<P>04/26/99  11:26a                 4,324 MAP.H</P>
<P>04/26/99  11:27a                 4,545 MATHLIB.CPP</P>
<P>04/26/99  11:26a                 2,709 MATHLIB.H</P>
<P>05/15/99  12:23a                   117 mssccprj.scc</P>
<P>05/10/99  09:15p                43,352 POLY.CPP</P>
<P>04/26/99  11:26a                 3,692 POLY.H</P>
<P>04/26/99  11:27a                18,225 PORTALS.CPP</P>
<P>04/26/99  11:26a                 2,379 PORTALS.H</P>
<P>04/26/99  11:27a                12,020 PortFile.cpp</P>
<P>04/26/99  11:27a                46,179 RAD.CPP</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          SDKShare</P>
<P>04/26/99  11:27a                10,298 TEXTURE.CPP</P>
<P>04/26/99  11:26a                 3,240 TEXTURE.H</P>
<P>04/26/99  11:27a                12,534 TJunct.cpp</P>
<P>04/26/99  11:27a                 4,479 Utils.cpp</P>
<P>04/26/99  11:26a                 2,241 Utils.h</P>
<P>04/26/99  11:27a                18,954 VIS.CPP</P>
<P>04/26/99  11:26a                 3,326 VIS.H</P>
<P>04/26/99  11:27a                16,250 VISFLOOD.CPP</P>
<P>              42 File(s)        500,416 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069875">Directory of C:\Genesis3D\OpenSource\Tools\GBSPLib\SDKShare*</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the Genesis3D headers and the debug and release libraries.  The header files in this subdirectory do differ from the other similar tool subdirectories.  The changes are detailed below.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\GBSPLib\SDKShare</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          Include</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          Lib</P>
<P>               4 File(s)              0 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454069876">Directory of C:\Genesis3D\OpenSource\Tools\GBSPLib\SDKShare\Include</A></P>
</FONT><FONT FACE="Arial"><P>Although the include subdirectory is similar to most of the other include subdirectories for the other tools,  this subdirectory lacks the actor.h, body.h, ExtBox.h  and font.h files.  In addition it adds Dcommon.h - a header file of common data routines containing much of the same information found in the previous four files along with special functions for manipulating that data which is only required for this tool.  They are specificially left out of the other tool files and the engine to avoid "code bloat", speed compile times and enhance performance.</P>
</FONT><FONT FACE="Arial" SIZE=2>
</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\GBSPLib\SDKShare\Include</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>05/03/99  03:55p                 3,332 BASETYPE.H</P>
<P>05/03/99  04:06p                23,446 bitmap.h</P>
<P>05/10/99  03:30p                16,061 Dcommon.h</P>
<P>04/27/99  11:53p                11,163 Errorlog.h</P>
<P>05/13/99  08:27p                26,220 GENESIS.H</P>
<P>04/26/99  10:53a                 3,573 getypes.h</P>
<P>04/26/99  10:53a                 9,662 motion.h</P>
<P>04/26/99  10:53a                 6,248 path.h</P>
<P>05/03/99  03:16p                 6,342 pixelformat.h</P>
<P>04/26/99  10:53a                 9,519 quatern.h</P>
<P>04/26/99  10:53a                 5,195 RAM.H</P>
<P>04/26/99  10:53a                 3,903 VEC3D.H</P>
<P>04/26/99  10:53a                 8,113 vfile.h</P>
<P>04/26/99  10:53a                 8,740 XFORM3D.H</P>
<P>              16 File(s)        141,517 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069877">Directory of C:\Genesis3D\OpenSource\Tools\GBSPLib\SDKShare\Lib*</A> </P>
</FONT><FONT FACE="Arial"><P>The files in this subdirectory are the libraries used by GBSPLib portion of GEdit in compilation.  They are the same as those used in the Gtest game and the outer /lib subdirectory.  They are included here, separately, to speed compilation times and to separate the compilation of GBSPLib which is called by the GEdit tool from that of the Gedit itself and the Genesis3D engine.  In a final release of a newly developed product they <U>must</U> be identical.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\GBSPLib\SDKShare\Lib</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>03/25/99  12:47p             1,123,596 genesis.lib</P>
<P>03/25/99  12:40p             3,428,610 genesisd.lib</P>
<P>               4 File(s)      4,552,206 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069878">Directory of C:\Genesis3D\OpenSource\Tools\GPreview</A></P>
</FONT><FONT FACE="Arial"><P>Code in this library is used to create a simple Genesis3D level viewer.  </P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\GPreview</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>01/13/99  02:58p                 1,336 cursor.BMP</P>
<P>04/09/99  02:23p                 5,119 drvlist.c</P>
<P>04/09/99  01:35p                   207 drvlist.h</P>
<P>03/10/99  01:43p                 8,208 function.c</P>
<P>03/16/98  11:55a                 2,145 function.h</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          genesissdk</P>
<P>04/09/99  01:54p                30,474 gpreview.c</P>
<P>04/01/99  04:05p                 4,665 GPreview.dsp</P>
<P>03/17/99  12:57p                 4,995 GPreview.mak</P>
<P>04/09/99  02:19p                 2,302 gpreview.rc</P>
<P>05/15/99  12:23a                   119 mssccprj.scc</P>
<P>03/17/99  12:47p                   627 resource.h</P>
<P>01/13/99  05:32p                 5,303 Spot.bmp</P>
<P>              15 File(s)         65,500 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069879">Directory of C:\Genesis3D\OpenSource\Tools\GPreview\genesissdk*</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the Genesis3D headers and the debug and release libraries.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\GPreview\genesissdk</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          include</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          lib</P>
<P>               4 File(s)              0 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069880">Directory of C:\Genesis3D\OpenSource\Tools\GPreview\genesissdk\include</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains a copy of the header files used by GPreview in compilation.  It is the same as those in the outer include directory.  They are included here, separately, to speed compilation times and to separate the compilation of the GPreview tool from that of the Genesis3D engine.  In a final release of a newly developed product they should be identical.</P>
</FONT><FONT FACE="Arial" SIZE=2>
</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\GPreview\genesissdk\include</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>04/26/99  11:26a                23,693 actor.h</P>
<P>04/26/99  11:26a                 2,685 BASETYPE.H</P>
<P>04/26/99  11:26a                21,977 bitmap.h</P>
<P>04/26/99  11:26a                 5,570 body.h</P>
<P>04/26/99  11:26a                11,081 Errorlog.h</P>
<P>04/26/99  11:26a                 4,577 ExtBox.h</P>
<P>04/26/99  11:26a                13,334 font.H</P>
<P>04/26/99  11:26a                26,019 GENESIS.H</P>
<P>04/26/99  11:26a                 3,573 getypes.h</P>
<P>04/26/99  11:26a                 9,662 motion.h</P>
<P>04/26/99  11:26a                 6,248 path.h</P>
<P>04/26/99  11:26a                 6,424 pixelformat.h</P>
<P>04/26/99  11:26a                 9,519 quatern.h</P>
<P>04/26/99  11:26a                 5,195 RAM.H</P>
<P>04/26/99  11:26a                 3,903 VEC3D.H</P>
<P>04/26/99  11:26a                 8,113 vfile.h</P>
<P>04/26/99  11:26a                 8,740 XFORM3D.H</P>
<P>              19 File(s)        170,313 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069881">Directory of C:\Genesis3D\OpenSource\Tools\GPreview\genesissdk\lib*</A></P>
</FONT><FONT FACE="Arial"><P>The files in this subdirectory are the libraries used by GPreview in compilation.  They are the same as those used in the Gtest game and the outer /lib subdirectory.  They are included here, separately, to speed compilation times and to separate the compilation of the GPreview tool from that of the Genesis3D engine.  In a final release of a newly developed product they should be identical.</P>
</FONT><FONT FACE="Courier New" SIZE=1>
<P>Directory of C:\Genesis3D\OpenSource\Tools\GPreview\genesissdk\lib</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>03/25/99  04:13p             1,123,596 genesis.lib</P>
<P>03/25/99  04:06p             3,428,610 genesisd.lib</P>
<P>               4 File(s)      4,552,206 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069882">Directory of C:\Genesis3D\OpenSource\Tools\mkactor*</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory is used to create the Genesis3D tools, Actor Studio, and ActBuild.  These tools are used to create ACT files from 3D Studio Max files.  Actor Studio is a windows based program for working on a single model.  ActBuild is a batch translation version.</P>

<P>The outer subdirectory contains the Microsoft  "dsp" and "make" files for compiling the programs. It should be noted here that the mkactor subdirectory name here is a bit misleading since there is also a mkactor subdirectory beneath this one which contains code for making and parsing actor scripts.  The subdirectory name here should have probably been something else more informative.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\mkactor</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ActBuild</P>
<P>03/22/99  05:44p                 7,898 ActBuild.dsp</P>
<P>03/22/99  05:44p                 9,171 ActBuild.mak</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          AStudio</P>
<P>03/24/99  09:37p                11,460 AStudio.dsp</P>
<P>03/24/99  09:37p                13,792 AStudio.mak</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          common</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          Debug</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          fmtactor</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          GenesisSDK</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          mkactor</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          mkbody</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          mkmotion</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          mop</P>
<P>05/15/99  12:24a                   193 mssccprj.scc</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          Release</P>
<P>              18 File(s)         42,514 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069883">Directory of C:\Genesis3D\OpenSource\Tools\mkactor\ActBuild</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the header and C source for the ActBuild program.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\mkactor\ActBuild</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>04/26/99  11:26a                 6,270 ActBuild.c</P>
<P>04/26/99  11:26a                 2,405 ActBuild.h</P>
<P>               4 File(s)          8,675 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069884">Directory of C:\Genesis3D\OpenSource\Tools\mkactor\AStudio</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory is the base directory for the Actor Studio application.  Actor Studio is an MFC Windows Application and consists of several header, C and C++ files.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\mkactor\AStudio</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>04/26/99  11:26a                 5,075 AOptions.c</P>
<P>04/26/99  11:26a                 2,786 AOptions.h</P>
<P>04/26/99  11:26a                43,144 AProject.c</P>
<P>04/26/99  11:26a                 7,231 AProject.h</P>
<P>04/26/99  11:27a                 7,747 AStudio.cpp</P>
<P>04/26/99  11:26a                 3,116 AStudio.h</P>
<P>12/16/98  02:57p                19,223 AStudio.rc</P>
<P>04/26/99  11:27a                 7,428 BodyDlg.cpp</P>
<P>04/26/99  11:26a                 3,486 BodyDlg.h</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          HLP</P>
<P>04/26/99  11:27a                 2,791 LogoPage.cpp</P>
<P>04/26/99  11:26a                 3,079 LogoPage.h</P>
<P>04/26/99  11:26a                49,089 make.c</P>
<P>04/26/99  11:26a                 2,447 make.h</P>
<P>10/22/98  06:39p                 1,632 MakeHelp.bat</P>
<P>04/26/99  11:27a                 6,791 MakeHelp.cpp</P>
<P>04/26/99  11:26a                 2,456 MakeHelp.h</P>
<P>04/26/99  11:27a                17,919 MaterialsDlg.cpp</P>
<P>04/26/99  11:26a                 4,085 MaterialsDlg.h</P>
<P>04/26/99  11:27a                20,668 MotionsDlg.cpp</P>
<P>04/26/99  11:26a                 4,269 MotionsDlg.h</P>
<P>04/26/99  11:26a                 8,684 mxscript.c</P>
<P>04/26/99  11:26a                 2,489 mxscript.h</P>
<P>04/26/99  11:27a                 2,674 MyFileDlg.cpp</P>
<P>04/26/99  11:26a                 1,997 MyFileDlg.h</P>
<P>04/26/99  11:27a                 3,134 NewPrjDlg.cpp</P>
<P>04/26/99  11:26a                 2,985 NewPrjDlg.h</P>
<P>04/26/99  11:27a                 4,324 PathsDlg.cpp</P>
<P>04/26/99  11:26a                 3,368 PathsDlg.h</P>
<P>04/26/99  11:27a                 3,195 PropPage.cpp</P>
<P>04/26/99  11:26a                 3,090 PropPage.h</P>
<P>04/26/99  11:27a                27,468 PropSheet.cpp</P>
<P>04/26/99  11:26a                 5,345 PropSheet.h</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          RES</P>
<P>11/04/98  01:26p                 7,741 resource.h</P>
<P>04/26/99  11:27a                 5,712 SettingsDlg.cpp</P>
<P>04/26/99  11:26a                 3,584 SettingsDlg.h</P>
<P>04/26/99  11:27a                 1,951 StdAfx.cpp</P>
<P>04/26/99  11:26a                 2,672 StdAfx.h</P>
<P>04/26/99  11:27a                 5,661 TargetDlg.cpp</P>
<P>04/26/99  11:26a                 3,455 TargetDlg.h</P>
<P>04/26/99  11:27a                 3,057 TextInputDlg.cpp</P>
<P>04/26/99  11:26a                 3,062 TextInputDlg.h</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          Util</P>
<P>              46 File(s)        320,110 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069885">Directory of C:\Genesis3D\OpenSource\Tools\mkactor\AStudio\HLP*</A></P>
</FONT><FONT FACE="Arial"><P>The HLP subdirectory contains the Help files for the Actor Studio Application.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\mkactor\AStudio\HLP</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>10/14/98  04:05p                 3,891 AfxDlg.rtf</P>
<P>10/14/98  04:05p                   121 AStudio.cnt</P>
<P>10/22/98  05:44p                 5,992 ASTUDIO.HLP</P>
<P>10/22/98  05:44p                 1,625 AStudio.hm</P>
<P>10/22/98  06:40p                 2,287 AStudio.hpj</P>
<P>10/22/98  05:44p                 1,023 AStudio.LOG</P>
<P>10/14/98  04:11p                     0 AStudio.ph</P>
<P>               9 File(s)         14,939 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454069886">Directory of C:\Genesis3D\OpenSource\Tools\mkactor\AStudio\RES*</A></P>
</FONT><FONT FACE="Arial"><P>The RES Subdirectory contains the resources - icons and bitmaps - for the Actor Studio Application</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\mkactor\AStudio\RES</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>10/14/98  04:29p                19,478 ACTVIEW.BMP</P>
<P>11/16/98  11:08p                   766 AStudio.ico</P>
<P>10/14/98  04:05p                   399 AStudio.rc2</P>
<P>               5 File(s)         20,643 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069887">Directory of C:\Genesis3D\OpenSource\Tools\mkactor\AStudio\Util</A></P>
</FONT><FONT FACE="Arial"><P>The Util subdirectory contains several general utility routines for use by the Actor Studio application including string routines, and array routines and a file path routine.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\mkactor\AStudio\Util</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>04/26/99  11:26a                12,293 Array.c</P>
<P>04/26/99  11:26a                 4,028 ARRAY.H</P>
<P>04/26/99  11:26a                 6,202 FilePath.c</P>
<P>04/26/99  11:26a                 3,861 FilePath.h</P>
<P>04/26/99  11:26a                 2,806 RCSTRING.C</P>
<P>04/26/99  11:26a                 2,470 RCSTRING.H</P>
<P>04/26/99  11:26a                 5,289 UTIL.C</P>
<P>04/26/99  11:26a                 2,544 UTIL.H</P>
<P>              10 File(s)         39,493 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069888">Directory of C:\Genesis3D\OpenSource\Tools\mkactor\common</A></P>
</FONT><FONT FACE="Arial"><P>The common subdirectory contains routines that are shared by both the Actor Studio and ActBuild programs.  These include matrix math routines, a set of utilities to issue return codes, and routines to create, build, and destroy an animated model.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\mkactor\common</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>04/26/99  11:26a                10,709 maxmath.c</P>
<P>04/26/99  11:26a                 2,287 maxmath.h</P>
<P>04/26/99  11:26a                 8,659 mkutil.c</P>
<P>04/26/99  11:26a                 2,466 mkutil.h</P>
<P>04/26/99  11:26a                 5,313 TDBody.c</P>
<P>04/26/99  11:26a                 2,269 TDBody.h</P>
<P>               8 File(s)         31,703 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069889">Directory of C:\Genesis3D\OpenSource\Tools\mkactor\Debug*</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains a single text file stating that the debug versions of the code will be created here.</P>
</FONT><FONT FACE="Courier New" SIZE=1>
<P>Directory of C:\Genesis3D\OpenSource\Tools\mkactor\Debug</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>03/24/99  09:48p                    40 Debug.txt</P>
<P>               3 File(s)             40 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069890">Directory of C:\Genesis3D\OpenSource\Tools\mkactor\fmtactor</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the header and C code for the functions used by ActBuild and Actor Studio.  It is the basic description of the format of an actor script file and includes routines for creating, destroying and parsing actor script instructions.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\mkactor\fmtactor</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>04/26/99  11:26a                10,630 fmtactor.c</P>
<P>04/26/99  11:26a                 2,229 fmtactor.h</P>
<P>               4 File(s)         12,859 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069891">Directory of C:\Genesis3D\OpenSource\Tools\mkactor\GenesisSDK*</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the Genesis3D headers and the debug and release libraries.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\mkactor\GenesisSDK</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          include</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          lib</P>
<P>               4 File(s)              0 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069892">Directory of C:\Genesis3D\OpenSource\Tools\mkactor\GenesisSDK\include</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains a copy of the header files used by both ActBuild and AStudio in compilation.  It is the same as those in the outer include directory.  They are included here, separately, to speed compilation times and to separate the compilation of the code from that of the Genesis3D engine.  In a final release of a newly developed product they should be identical. </P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\mkactor\GenesisSDK\include</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>04/26/99  11:26a                23,693 actor.h</P>
<P>04/26/99  11:26a                 2,685 BASETYPE.H</P>
<P>04/26/99  11:26a                21,977 bitmap.h</P>
<P>04/26/99  11:26a                 5,570 body.h</P>
<P>04/26/99  11:26a                11,081 Errorlog.h</P>
<P>04/26/99  11:26a                 4,577 ExtBox.h</P>
<P>04/26/99  11:26a                13,334 font.H</P>
<P>04/26/99  11:26a                26,019 GENESIS.H</P>
<P>04/26/99  11:26a                 3,573 getypes.h</P>
<P>04/26/99  11:26a                 9,662 motion.h</P>
<P>04/26/99  11:26a                 6,248 path.h</P>
<P>04/26/99  11:26a                 6,424 pixelformat.h</P>
<P>04/26/99  11:26a                 9,519 quatern.h</P>
<P>04/26/99  11:26a                 5,195 RAM.H</P>
<P>10/28/98  12:53p                 1,232 strblock.h</P>
<P>04/26/99  11:26a                 3,903 VEC3D.H</P>
<P>04/26/99  11:26a                 8,113 VFILE.H</P>
<P>04/26/99  11:26a                 8,740 XFORM3D.H</P>
<P>              20 File(s)        171,545 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454069893">Directory of C:\Genesis3D\OpenSource\Tools\mkactor\GenesisSDK\lib*</A></P>
</FONT><FONT FACE="Arial"><P>The files in this subdirectory are the libraries used by both Astudio and ActBuild in compilation.  They are the same as those used in the Gtest game and the outer /lib subdirectory.  They are included here, separately, to speed compilation times and to separate the compilation of these tools from that of the Genesis3D engine.  In a final release of a newly developed product they should be identical.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\mkactor\GenesisSDK\lib</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>03/25/99  12:47p             1,123,596 genesis.lib</P>
<P>03/25/99  12:40p             3,428,610 genesisd.lib</P>
<P>               4 File(s)      4,552,206 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069894">Directory of C:\Genesis3D\OpenSource\Tools\mkactor\mkactor</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the header and C code for the functions used by ActBuild and Actor Studio to create, destroy and parse actor scripts.</P>
<I>
</I></FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\mkactor\mkactor</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>04/26/99  11:26a                 9,717 mkactor.c</P>
<P>04/26/99  11:26a                 2,452 mkactor.h</P>
<P>               4 File(s)         12,169 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069895">Directory of C:\Genesis3D\OpenSource\Tools\mkactor\mkbody</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the header and C code for the functions used by ActBuild and Actor Studio to parse a 3D Studio Max file and a Physique file with the appropriate textures to create an actor body.</P>
<I>
</I></FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\mkactor\mkbody</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>04/26/99  11:27a                63,821 mkbody.cpp</P>
<P>04/26/99  11:26a                 2,446 mkbody.h</P>
<P>04/26/99  11:26a                12,194 vph.c</P>
<P>04/26/99  11:26a                 1,934 vph.h</P>
<P>               6 File(s)         80,395 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069896">Directory of C:\Genesis3D\OpenSource\Tools\mkactor\mkmotion</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the header and C code for the functions used by ActBuild and Actor Studio to move and 3D Studio generated ACT file.</P>
<I>
</I></FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\mkactor\mkmotion</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>04/26/99  11:26a                30,613 mkmotion.c</P>
<P>04/26/99  11:26a                 2,468 mkmotion.h</P>
<P>               4 File(s)         33,081 bytes</P>
</FONT><I><FONT FACE="Arial"><P>&nbsp;</P>
</I></FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069897">Directory of C:\Genesis3D\OpenSource\Tools\mkactor\mop</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the header and C code for the functions used by ActBuild and Actor Studio to create logs of character motions.</P>
<I>
</I></FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\mkactor\mop</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>04/26/99  11:26a                 7,323 Log.c</P>
<P>04/26/99  11:26a                 2,900 Log.h</P>
<P>04/26/99  11:26a                14,268 mopshell.c</P>
<P>04/26/99  11:26a                 2,452 mopshell.h</P>
<P>04/26/99  11:26a                14,747 pop.c</P>
<P>04/26/99  11:26a                 1,945 pop.h</P>
<P>               8 File(s)         43,635 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069898">Directory of C:\Genesis3D\OpenSource\Tools\mkactor\Release*</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains a single text file stating that Release versions of the code will be created here.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\mkactor\Release</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>03/24/99  09:48p                    42 Release.txt</P>
<P>               3 File(s)             42 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069899">Directory of C:\Genesis3D\OpenSource\Tools\Tpack*</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains compile instructions for the texture packing utility, Tpack,</P>
</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\TPack</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>03/10/99  05:09p                 1,283 build.bat</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          GenesisSDK</P>
<P>05/15/99  12:24a                   113 mssccprj.scc</P>
<P>03/10/99  02:12p                   572 pull.bat</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          res</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          Source</P>
<P>03/05/99  03:56p                 5,321 TPack.dsp</P>
<P>03/10/99  01:55p                 5,265 TPack.mak</P>
<P>              10 File(s)         12,554 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069900">Directory of C:\Genesis3D\OpenSource\Tools\TPack\GenesisSDK*</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the Genesis3D headers and the debug and release libraries.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\TPack\GenesisSDK</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          include</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          lib</P>
<P>               4 File(s)              0 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069901">Directory of C:\Genesis3D\OpenSource\Tools\TPack\GenesisSDK\include</A> </P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains a copy of the header files used by TPack in compilation.  It is the same as those in the outer include directory.  They are included here, separately, to speed compilation times and to separate the compilation of the code from that of the Genesis3D engine.  In a final release of a newly developed product they should be identical. </P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\TPack\GenesisSDK\include</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>04/26/99  11:26a                23,693 actor.h</P>
<P>04/26/99  11:26a                 2,685 BASETYPE.H</P>
<P>04/26/99  11:26a                21,977 bitmap.h</P>
<P>04/26/99  11:26a                 5,570 body.h</P>
<P>04/26/99  11:26a                11,081 Errorlog.h</P>
<P>04/26/99  11:26a                 4,577 ExtBox.h</P>
<P>04/26/99  11:26a                13,334 font.H</P>
<P>04/26/99  11:26a                26,019 GENESIS.H</P>
<P>04/26/99  11:26a                 3,573 getypes.h</P>
<P>04/26/99  11:26a                 9,662 motion.h</P>
<P>04/26/99  11:26a                 6,248 path.h</P>
<P>04/26/99  11:26a                 6,424 pixelformat.h</P>
<P>04/26/99  11:26a                 9,519 quatern.h</P>
<P>04/26/99  11:26a                 5,195 RAM.H</P>
<P>04/26/99  11:26a                 3,903 VEC3D.H</P>
<P>04/26/99  11:26a                 8,113 vfile.h</P>
<P>04/26/99  11:26a                 8,740 XFORM3D.H</P>
<P>              19 File(s)        170,313 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069902">Directory of C:\Genesis3D\OpenSource\Tools\TPack\GenesisSDK\lib*</A></P>
</FONT><FONT FACE="Arial"><P>The files in this subdirectory are the libraries used by TPack in compilation.  They are the same as those used in the Gtest game and the outer /lib subdirectory.  They are included here, separately, to speed compilation times and to separate the compilation of this tool from that of the Genesis3D engine.  In a final release of a newly developed product they should be identical.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\TPack\GenesisSDK\lib</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>03/25/99  12:47p             1,123,596 genesis.lib</P>
<P>03/25/99  12:40p             3,428,610 genesisd.lib</P>
<P>               4 File(s)      4,552,206 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069903">Directory of C:\Genesis3D\OpenSource\Tools\TPack\res<I>*</A></P>
</I></FONT><FONT FACE="Arial"><P>This subdirectory contains a single icon file that is used when the TPack utility is minimized</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\TPack\res</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>03/09/99  09:44a                   766 mainicon.ico</P>
<P>               3 File(s)            766 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069904">Directory of C:\Genesis3D\OpenSource\Tools\TPack\Source</A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains the resource header file and the C code for the TPack program.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\OpenSource\Tools\TPack\Source</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>03/09/99  10:16a                 6,075 resource.h</P>
<P>04/26/99  11:26a                23,165 TPack.c</P>
<P>03/09/99  10:16a                 3,597 TPack.rc</P>
<P>               5 File(s)         32,837 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069905"><A NAME="_Toc454156697">Directory of C:\Genesis3D\Redist*</A></A></P>
</FONT><FONT FACE="Arial"><P>This subdirectory contains a single Microsoft file, CTL3D32.DLL that is necessary for the running of the example program and is not present on all systems in this version.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\Redist</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>10/31/97  11:40a                27,136 CTL3D32.DLL</P>
<P>               3 File(s)         27,136 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069906"><A NAME="_Toc454156698">Directory of C:\Genesis3D\src</A></A></P>
</FONT><FONT FACE="Arial"><P>The src directory contains the entire source in the GTest example program.  It has four subdirectories in addition to the outer directory.  The outer directory contains code for Network management, the console, and video selection.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\src</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>04/29/99  01:02a                 3,949 AutoSelect.c</P>
<P>04/18/99  03:06p                 1,655 AutoSelect.h</P>
<P>07/27/98  07:02p                 2,104 bolt.bmp</P>
<P>05/12/99  02:08p                 7,901 BUFFER.C</P>
<P>05/12/99  02:08p                 3,062 BUFFER.H</P>
<P>07/23/98  09:41p                 2,880 CD.C</P>
<P>08/13/97  08:07p                   517 CD.H</P>
<P>05/14/99  09:14p                96,298 Client.c</P>
<P>05/14/99  08:35p                 8,073 CLIENT.H</P>
<P>05/13/99  02:53p                17,222 CONSOLE.C</P>
<P>05/13/99  12:08p                 3,791 CONSOLE.H</P>
<P>07/30/98  09:57a                 2,104 corona.BMP</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          DrvMenu</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          FX</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          Game</P>
<P>05/13/99  12:55p                41,202 GameMgr.c</P>
<P>05/13/99  12:55p                 6,764 Gamemgr.h</P>
<P>05/14/99  08:05p                31,253 Genvs.c</P>
<P>05/11/99  03:06p                39,973 GMENU.C</P>
<P>04/14/99  01:59p                 3,554 GMENU.H</P>
<P>04/27/99  11:57p                10,621 GTest.dsp</P>
<P>04/27/99  11:57p                13,977 GTest.mak</P>
<P>05/15/99  12:19a                 7,065 GTestd.txt</P>
<P>05/15/99  12:21a                 7,670 GTestr.txt</P>
<P>05/14/99  08:33p                 8,700 Host.c</P>
<P>05/12/99  07:09p                 3,391 HOST.H</P>
<P>04/07/99  12:28a                 2,245 ipaddr.c</P>
<P>04/07/99  12:33a                   169 ipaddr.h</P>
<P>04/14/99  02:33p                34,457 MENU.C</P>
<P>04/14/99  02:33p                 5,086 MENU.H</P>
<P>04/14/99  02:33p                 4,918 MENUITEM.H</P>
<P>05/10/99  12:36p                 7,401 modelist.c</P>
<P>04/23/99  02:57p                 2,220 ModeList.h</P>
<P>05/15/99  12:17a                   105 mssccprj.scc</P>
<P>05/13/99  08:58p                10,096 NetMgr.c</P>
<P>05/13/99  06:03p                 6,399 NetMgr.h</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          Procedurals</P>
<P>05/14/99  11:14p                96,653 Server.c</P>
<P>05/14/99  06:47p                 7,023 Server.h</P>
<P>07/29/98  04:05p                 2,104 Terminus.BMP</P>
<P>04/14/99  12:00a                 8,951 TEXT.C</P>
<P>04/13/99  11:30p                 1,666 TEXT.H</P>
<P>04/16/99  01:48a                 2,033 VidMode.c</P>
<P>04/16/99  01:38a                 1,688 VidMode.h</P>
<P>              46 File(s)        516,940 bytes</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069907"><A NAME="_Toc454156699">Directory of C:\Genesis3D\src\DrvMenu</A></A></P>
</B></FONT><FONT FACE="Arial"><P>When the sample game begins the user selects, which video driver and which video mode they wish to use.  This code is used to implement the user's selections.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\src\DrvMenu</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>04/15/99  05:11p                 6,585 DRVLIST.C</P>
<P>04/15/99  05:11p                 1,566 DRVLIST.H</P>
<P>04/15/99  04:10p                   783 genvs.rc</P>
<P>04/15/99  02:44p                   593 RESOURCE.H</P>
<P>               6 File(s)          9,527 bytes</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069908"><A NAME="_Toc454156700">Directory of C:\Genesis3D\src\FX</A></A></P>
</B></FONT><FONT FACE="Arial"><P>This subdirectory contains various animated lighting effects including coronas, smoke, and particle trails, electric bolts, and dynamic lights.  These effects are used in the first two levels of the sample game.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\src\FX</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>01/13/99  07:05p                 4,992 corona.c</P>
<P>01/05/99  06:56p                 2,242 corona.h</P>
<P>04/28/99  12:12a                 4,838 DynLight.c</P>
<P>01/13/99  07:13p                 1,981 DynLight.h</P>
<P>04/19/99  11:55a                17,198 electric.c</P>
<P>01/05/99  07:09p                 2,628 electric.h</P>
<P>03/18/99  01:31p                21,373 Fx.c</P>
<P>03/18/99  01:31p                 3,736 Fx.h</P>
<P>04/28/99  12:12a                 2,440 ModelCtl.c</P>
<P>01/13/99  07:13p                   614 ModelCtl.h</P>
<P>              12 File(s)         62,042 bytes</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069909"><A NAME="_Toc454156701">Directory of C:\Genesis3D\src\Game</A></A></P>
</B></FONT><FONT FACE="Arial"><P>The game subdirectory contains the main routines for the game as well as the AI code for the "bots" which can be placed into the game, and the code for the individual weapons.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\src\Game</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>05/04/99  04:01p                 8,788 Attacker.c</P>
<P>11/11/98  11:22p                   609 bit.h</P>
<P>05/05/99  02:39p               163,086 bot.c</P>
<P>04/22/99  02:36p                 1,385 bot.h</P>
<P>10/19/98  11:23a                 1,206 botact.h</P>
<P>10/13/98  12:30p                   384 botmatch.h</P>
<P>03/18/99  01:31p                 2,818 Game.h</P>
<P>05/10/99  06:53p                 5,814 Genvs.h</P>
<P>05/04/99  03:17p                15,520 Genvsi.c</P>
<P>05/04/99  03:17p                12,006 Genvsi.h</P>
<P>05/04/99  03:20p                67,674 GMain.c</P>
<P>04/19/99  02:32p                 7,783 GMain.h</P>
<P>04/28/99  12:29a                 7,354 Gplayer.h</P>
<P>05/05/99  02:40p                28,759 Items.c</P>
<P>05/05/99  02:40p                 7,079 Level.c</P>
<P>01/05/99  06:00p                10,951 PathPt.c</P>
<P>01/05/99  01:55p                 1,755 pathpt.h</P>
<P>01/05/99  06:46p                35,630 Track.c</P>
<P>11/15/98  11:13p                 3,825 track.h</P>
<P>03/23/99  02:13p                32,993 Weapons.c</P>
<P>01/05/99  06:31p                 2,719 _bot.c</P>
<P>11/11/98  11:22p                   799 _bot.h</P>
<P>              24 File(s)        418,937 bytes</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069910"><A NAME="_Toc454156702">Directory of C:\Genesis3D\src\Procedurals</A></A></P>
</B></FONT><FONT FACE="Arial"><P>This subdirectory contains code for procedural code for the various special effects, including those in the FX directory.  These effects can be seen in the third demo level of the program.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\src\Procedurals</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>12/22/98  04:36p                 8,676 bumpmap.c</P>
<P>12/04/98  08:22p                   148 bumpmap.h</P>
<P>03/18/99  01:31p                22,772 ElectricFx.c</P>
<P>03/18/99  01:31p                 1,501 ElectricFx.h</P>
<P>12/04/98  06:48p                   116 example.prc</P>
<P>02/14/99  11:29p                 6,717 fire.c</P>
<P>12/04/98  07:09p                   145 fire.h</P>
<P>05/12/99  01:28a                19,420 gebmutil.c</P>
<P>02/22/99  04:19p                 1,820 gebmutil.h</P>
<P>03/22/99  07:31p                20,910 particles.c</P>
<P>12/05/98  03:34p                   160 particles.h</P>
<P>03/10/99  02:16p                14,454 plasma.c</P>
<P>12/06/98  10:41p                   151 plasma.h</P>
<P>12/22/98  10:47a                 1,523 procedural.h</P>
<P>05/12/99  01:28a                15,122 proceng.c</P>
<P>12/10/98  06:13p                 1,035 proceng.h</P>
<P>01/15/99  05:53p                   813 proceng_tables.c</P>
<P>02/15/99  06:22p                 5,917 procutil.c</P>
<P>02/15/99  06:22p                 2,325 procutil.h</P>
<P>01/15/99  06:11p                 1,901 setformat.c</P>
<P>01/15/99  05:53p                   160 setformat.h</P>
<P>03/18/99  01:31p                17,644 smoke.c</P>
<P>03/18/99  01:31p                 1,490 smoke.h</P>
<P>03/18/99  01:31p                12,676 Water.c</P>
<P>03/18/99  01:31p                 1,490 Water.h</P>
<P>              27 File(s)        159,086 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069911"><A NAME="_Toc454156703">Directory of C:\Genesis3D\Tools</A></A></P>
</FONT><FONT FACE="Arial"><P>The Tools subdirectory contains two files, a header and a C source file, which are an example of how to build an "Actor".  The example actor was initially a "drill".  The textures used for this example are created recursively by the drill code and placed in a "maps" subdirectory. Which has not been included for some time in the download, but the code in the example is still a useful example.  You must simply create a maps subdirectory for the code to be written into if you decide to use the code, or change the location.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\Tools</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>11/18/98  01:18p                16,969 drill.c</P>
<P>09/03/98  12:59a                   466 drill.h</P>
<P>               4 File(s)         17,435 bytes</P>
</FONT><FONT FACE="Arial" SIZE=4><P><A NAME="_Toc454069912"><A NAME="_Toc454156704">Directory of C:\Genesis3D\wav*</A></A></P>
</FONT><FONT FACE="Arial"><P>The wav subdirectory contains sound effects used in the demonstration game.</P>

</FONT><FONT FACE="Courier New" SIZE=1><P>Directory of C:\Genesis3D\wav</P>

<P>05/17/99  06:34p        &lt;DIR&gt;          .</P>
<P>05/17/99  06:34p        &lt;DIR&gt;          ..</P>
<P>07/27/98  01:26p                84,060 blaster.WAV</P>
<P>07/28/98  04:20p                26,442 blasterbang.WAV</P>
<P>07/26/98  04:26p                12,232 Bounce.wav</P>
<P>07/03/98  04:06p                58,988 die.wav</P>
<P>07/26/98  04:40p               161,748 DoorOpen.wav</P>
<P>07/28/98  04:16p                31,690 grenade.wav</P>
<P>05/15/99  12:17a                18,732 hurt1.wav</P>
<P>05/15/99  12:17a                16,940 hurt2.wav</P>
<P>05/15/99  12:17a                18,732 hurt3.wav</P>
<P>05/15/99  12:17a                16,940 hurt4.wav</P>
<P>07/26/98  04:49p                50,318 itemspwn.wav</P>
<P>07/03/98  04:39p                14,718 jump.wav</P>
<P>04/16/98  12:02p                   786 KeyPress.wav</P>
<P>07/09/98  11:29a                22,858 lockload.wav</P>
<P>07/28/98  04:22p               132,106 loopbzzt.wav</P>
<P>10/02/96  10:44a                41,416 MImpact.wav</P>
<P>12/30/97  04:09p                26,554 MLaunch.wav</P>
<P>07/26/98  06:00p                26,482 onebzzt.wav</P>
<P>07/03/98  03:11p                29,518 PickupHealth.wav</P>
<P>07/26/98  05:41p                67,338 plyrspwn.wav</P>
<P>07/26/98  07:31p                13,654 shredder.wav</P>
<P>07/03/98  03:15p                60,030 WeaponPickup.wav</P>
<P>              24 File(s)        932,282 bytes</P>
</FONT><B><FONT FACE="Arial Black" SIZE=5><P ALIGN="CENTER">&nbsp;</P>
<P ALIGN="CENTER"><A NAME="_Toc454069913"><A NAME="_Toc454156705">Genesis3D API Documentation</A></A></A></P>
</B></FONT><I><FONT FACE="Arial"><P>&nbsp;</P>
</I></FONT><B><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454069914"><A NAME="_Toc454156706">Genesis3D API and Tools Documentation</A></A></P>
</B></FONT><FONT FACE="Arial">
<I><P>Author's Note: This is one of the earliest of the Genesis3D documents produced by Eclipse.  I have included it here because of the insight it offers into the design process and thinking of the developers when the engine was being created. Readers should view these pages in this light, especially since several of the items mentioned as future efforts are actually completed in the 1.0 release. In the original release a series of tables was included describing the various functions in the Include directory.  I have expanded that original table bringing it up to date and adding any information provided in the 1.0 Release documentation and included it in the third volume of this series. </P>

</I><P>The Genesis3D&nbsp;Engine APIs and tools make up the programmers half of the SDK for game and application development. This document is intended to provide information about the Tools and APIs to people interested in developing their own applications or extending the demo application that we have provided. The documentation here is being updated frequently, so it is a good idea to check our web site frequently to get the latest updates. Also, make sure that you read the readme.txt file in the installation for last minute updates regarding the tools.</P>
<P>Please check our web site often for documentation updates: http://www.Genesis3D.com.</P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P><A NAME="_Toc446558898">Contents</A></P></FONT>
<TABLE BORDER CELLSPACING=1 WIDTH=779>
<TR><TD WIDTH="21%" VALIGN="MIDDLE">
<FONT FACE="Arial"><P>API Overview</FONT></TD>
<TD WIDTH="79%" VALIGN="MIDDLE">
<FONT FACE="Arial"><P>An area by area overview of the engine APIs. Go here to get a description of what we intended for the APIs and to see how they are supposed to fit together.</FONT></TD>
</TR>
<TR><TD WIDTH="21%" VALIGN="MIDDLE">
<FONT FACE="Arial"><P>Engine APIs By Area</FONT></TD>
<TD WIDTH="79%" VALIGN="MIDDLE">
<FONT FACE="Arial"><P>A list of links to the APIs ordered by their areas of functionality. Go here if you want a rapid index into the function reference manual.</FONT></TD>
</TR>
<TR><TD WIDTH="21%" VALIGN="MIDDLE">
<FONT FACE="Arial"><P>Using The Animation Tools</FONT></TD>
<TD WIDTH="79%" VALIGN="MIDDLE">
<FONT FACE="Arial"><P>A guide to how to use our 3DS Max exporters and conversion utilities for building Actors.</FONT></TD>
</TR>
<TR><TD WIDTH="21%" VALIGN="MIDDLE">
<FONT FACE="Arial"><P>Tool Writer Support</FONT></TD>
<TD WIDTH="79%" VALIGN="MIDDLE">
<FONT FACE="Arial"><P>A description of what you need in order to build Actors using the Actor API.</FONT></TD>
</TR>
</TABLE>

<FONT FACE="Arial" COLOR="#ffffff"><P><A NAME="APIOverview"></A>API&nbsp;Overview</P>
</FONT><FONT FACE="Arial">
<P>The Genesis3D APIs area broken into several areas of functionality. Some of the areas are dependent on one another, but we've made strong efforts to ensure that there is as little dependency as possible. In some cases, we've specifically designed the system to be kept separated. For example, the SoundSystem APIs know nothing about the Engine or World except for one non-critical place. This is to enable people to use their own sound system if they decide that ours is not sufficient for their needs.</P>
<P>This overview section is intended to communicate what each set of APIs is both capable of doing, and is <I>supposed</I> to do. APIs live and die by their ease of use and consistency, and we feel that the documentation should provide clear paths for people to follow. It is very difficult to build an API that has only one way to be used and is still powerful. This can lead to confusion in the workplace about what the APIs are supposed to do.</P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P>Basic Data Types</P>
</FONT><FONT FACE="Arial"><P>There are a number of very basic datatypes that Genesis3D defines. These are all implemented in basetype.h, and serve the purpose of clearly defining the size of data fields, and/or isolating machine specific types that might need to change in the future. The types defined there are:</P>
<P>geBoolean </P>
<P>geFloat </P>
<P>int32 </P>
<P>int16 </P>
<P>int8 </P>
<P>uint32 </P>
<P>uint16 </P>
<P>uint8 </P>
<P>These datatypes are used throughout all of the other Genesis3D&nbsp;APIs.</P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P>3D&nbsp;Math (geVec3d, geXForm3d and Quaternion)</P>
</FONT><FONT FACE="Arial"><P>Basic 3D&nbsp;math operations have been provided in the form of support for vectors, 3D&nbsp;transforms and quaternions. These three datatypes constitute the bulk of the coordinate system management APIs. Note that in all of the APIs below, we have designed the implementation so that it is safe to pass the same parameter into a source and destination parameter. For example, if a function is supposed to transform one vector to another, the output vector may be the same as the input vector. &nbsp;It is safe to rely upon this behaviour for all of the APIs.</P>
<P>geVec3d is a simple 3D vector type with normal vector operations. The reference section provides ample documentation on these APIs.</P>
<P>geXForm3d is a transform object designed to convert from one coordinate system to another. Please note that this object is NOT designed to be a generic 4x4 matrix for normal math operations. While it can perform in that capacity, the geXForm3d was designed to manage coordinate system transforms, and hence has some restrictions built into it. Also, the debug versions of the APIs include asserts that enforce these restrictions on the transforms.</P>
<P>The geXForm3d has most of the standard transform APIs, plus a few additional conventions imposed over the transform. The Genesis3D coordinate system is a right handed coordinate system, and there are some features of the transform that are particularly interesting in an application setting. If you take the transpose of the transform, the basis vectors form an orthonormal system with the interesting property that the X vector, when added to a camera position will move the camera subjectively left/right, the Y&nbsp;vector will move up/down, and the Z vector will move in/out. These are completely subjective motions, but they are very useful to applications. Consequently, we have provided APIs to extract from the transforms their 'Left', 'Up' and 'In' vectors. Also, a transform may be built from an orthonormal system of these vectors directly.</P>
<P>Note that the geXForm3d structure is fully defined in the header file. This was done because we felt it critical that developers be able to create the transforms both on the stack, and in arrays. This is something we could not accomplish if we had provided create and destroy APIs for the transforms, and made the data types completely opaque.You MUST&nbsp;NOT&nbsp;use the members of the geXForm3d structure directly. &nbsp;We are likely to change them in the future, and we will not be supporting direct access to them. Also, you should not write the geXForm3d structures directly to disk. Rather, you should extract the basis vectors and translation, and write those to disk. This will save you from potential structure size differences in future versions of Genesis3D.</P>
<P>The Quaternion datatype is a fully featured quaternion. The APIs follow rigidly the mathematical formulations for Quaternions, with the exception of the interpolation and conversion APIs. The interpolation APIs are arbitrary, and have no fixed mathematical definition. The conversion APIs convert back and forth from geXForm3d objects, and there is arbitration in the quaternion code to resolve the ambiguities inherent in converting from 3 dimensional space to 4 dimensional space.</P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P>Engine and Driver Systems</P>
</FONT><FONT FACE="Arial"><P>The baseline rendering support is provided through the Engine and Driver systems. These manage the hardware specific parts of rendering, including driver categories&nbsp;(Glide, D3D and Software). The Engine APIs include directly exposed 2D decal APIs that are intended to be used for UI elements such as menus. No other drawing APIs are directly exposed through the engine or drivers.</P>
<P>The drivers are meta-drivers that are used to encapsulate the 3D&nbsp;drawing support that we are using. Genesis3D currently supports Glide, D3D and software rasterizers. The initialization and functionality of each of these is abstracted into higher levels drivers the Eclipse Entertaiment provides.</P>
<P>Before using any other subsystems (except math), you need to create a geEngine object. Once the engine is created, you can get a driver system from it, and query that system for which drivers are supported. Once you've picked a driver, and mode, and told the engine to use them, you can begin all drawing operations available.</P>
<P>The geEngine API is a frame based API, meaning that you tell the geEngine when to start a render frame, and when to end the frame. In between these calls, you may do all your drawing operations. <B>Note</B>: Texture loading operations, including loading and unloading of Actors, <B>MUST NOT</B>&nbsp;be done in between a BeginFrame/EndFrame pair.</P>
<P>There are currently 3 different main drivers: Glide, D3D and software. Each has its own characteristics that bear some mention.</P>
<P>The Glide driver has support for both Voodoo and Voodoo 2 built into it. The driver detects which support you have and adapts accordingly. If you have a Voodoo 2 card, we will use 2 texture mapping units on the card, rendering the world through one unit, and the light maps through the other. This will give very significant performance benefits. Debugging your applications under the Glide driver is also convenient, as the Glide drivers are enormously forgiving. You can switch from the full screen app back to the debugger at any time with Ctrl-F9, without lockups. A caveat to using the Glide driver: on this driver, all world textures are loaded to the card in 8bit palettized form. They are not cached in system memory. Hence, if your world textures (textures used to texture the static geometry of the world) exceed 1.5 megabytes on a 4MB Voodoo card, your performance may suffer. It is also possible that the level will fail to load for lack of texture memory. We have never seen this happen, but it is possible. The lightmaps are not included in the count for this purpose.</P>
<P>The D3D drivers support the most cards. There are advantages and disadvantages to the D3D drivers. The D3D drivers are slightly slower than the Glide drivers on comparable cards. The D3D drivers are more difficult to debug under, as you tend to lockup when you are in full screen mode. Also, the D3D drivers take longer to initialize for large levels, because of the time involved in creating surfaces for the various textures in the world (lightmap surfaces are numerous). On the plus side, the D3D drivers support many cards, and they do support windowed mode on 3D hardware which supports windowed mode. In addition, we do not load world textures arbitrarily to the video memory; they are cached along with lightmaps, so you do not have the world texture limitation that our Glide driver has.</P>
<P>The software driver works on all known hardware, but has limitations. We do not support alpha blending, and the frame rate is slower than that of native hardware drivers. We do support RGB lighting. The software driver supports both full screen and windowed mode, and some stretch modes which you can use to dramatically improve performance at the cost of some quality. If you have an AMD machine with 3D-Now technology, the driver will take advantage of this for greater performance.</P>
<P>When you load the engine, and query the drivers, each driver present on the machine will attempt to determine if it can run. If it passes the tests, then the driver will appear in the enumeration APIs. Otherwise, the driver will not appear. For both Glide and software, the tests are trivial. For D3D, however, there is much more flexibility in what is supported in a card, and what is not, so there are a number of tests done before we will accept a card. These are the requirements for a D3D driver to be accepted:</P>
<P>[requirements here]</P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P>Cameras</P>
</FONT><FONT FACE="Arial"><P>Cameras define the context from which rendering is done. When you render a world, you must pass in a camera which is the viewpoint from which the world is rendered.</P>
<P>A geCamera is created with a clipping rect on the screen to which it is bound. From then on, most applications will only ever need to set the transform of the camera to yield the desired effect. Therefore, most applications will only ever need the following three APIs:</P>
<P>geCamera_Create </P>
<P>geCamera_Destroy </P>
<P>geCamera_SetXForm </P>
<P>You can render multiple views of the world in a single frame by rendering the world through two different cameras between a geEngine_BeginFrame/geEngine_EndFrame pair. The two cameras need to be using separate clipping rectangles. This can be used to build rearview mirrors, or following cameras.</P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P>The World</P>
</FONT><FONT FACE="Arial"><P>The engine renders a geWorld object, which in turn contains a number of things. First and foremost, the geWorld&nbsp;object contains the static world geometry which has been defined by the editor. Beyond this, the world manages textures, Actors, entities and dynamic lights. Anything that is created with the geWorld_&nbsp;APIs is owned by the world and will be managed by the world, including being destroyed with the world is destroyed.</P>
<P>To best start the discussion about the world, and what a developer can do with it, we need to define a few terms:</P></FONT>
<TABLE BORDER CELLSPACING=1 WIDTH=779>
<TR><TD WIDTH="23%" VALIGN="MIDDLE">
<FONT FACE="Arial"><P>Model</FONT></TD>
<TD WIDTH="77%" VALIGN="MIDDLE">
<FONT FACE="Arial"><P>A collection of geometry which can be manipulated independently of other models. The Editor creates models. Models may have keyframed motions.</FONT></TD>
</TR>
<TR><TD WIDTH="23%" VALIGN="MIDDLE">
<FONT FACE="Arial"><P>Light Style</FONT></TD>
<TD WIDTH="77%" VALIGN="MIDDLE">
<FONT FACE="Arial"><P>A lighting brightness pattern defined by the programmer which is applied to lightmaps tagged with that style.</FONT></TD>
</TR>
<TR><TD WIDTH="23%" VALIGN="MIDDLE">
<FONT FACE="Arial"><P>Entity Set</FONT></TD>
<TD WIDTH="77%" VALIGN="MIDDLE">
<FONT FACE="Arial"><P>A set of entites, grouped by the type of the entity. The types are defined by the developer.</FONT></TD>
</TR>
<TR><TD WIDTH="23%" VALIGN="MIDDLE">
<FONT FACE="Arial"><P>Entity</FONT></TD>
<TD WIDTH="77%" VALIGN="MIDDLE">
<FONT FACE="Arial"><P>A developer defined block of data.</FONT></TD>
</TR>
</TABLE>

<FONT FACE="Arial" COLOR="#ffffff"><P>Static World Data</P>
</FONT><FONT FACE="Arial"><P>The base of the world is the world model. This is static geometry, which has been prelit. This geometry never moves with relation to itself once it has been created. The level designer may build additional models which are prelit, which may or may not have keyframe data. These serve most commonly for doors, and the like. These pieces of geometry can move with respect to each other, and the world model. In general, we refer to these models as models, and to the world model as the world, when we are talking about geometry.</P>
<P>The world, as edited by the level designer, also contains application specific data. This is data the format of which has been determined by the developer. The editor understands certain keywords in header files, and parses C&nbsp;header files to provide templates for that data in the world editor. Thus the level designer can place entities into the world which match the structures in the header files. The developer can then retrieve those entities at runtime through a set of APIs. Treat the data that is in the entities as streamed data. The data can contain pointers to other entities, so the programmer can use the resulting data directly at runtime. The editor and engine handle the streaming of the data so that the data structures are consitent when the world is loaded. See the editor documentation for a detailed description of the syntax for defining entity types in header files.</P>
<P>When you load a world with geWorld_Create, you get a bunch of geometry, plus lighting information, visibility information and entities. The geometry and lighting information are managed almost exclusively be the engine, with the optional exception of geWorld_Model objects and lighting styles.</P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P>Dynamic World Data</P>
</FONT><FONT FACE="Arial"><P>Once loaded in the application, the world becomes a repository for a number of runtime data. Amoung these, are dynamic lights, fog lights, user polygons and actors. These items are all owned by a world, and when the world is destroyed, the items are destroyed. These items are also added to the world only at runtime, through the geWorld_ APIs.</P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P>Dynamic Lights</P>
</FONT><FONT FACE="Arial"><P>Dynamic lights are an additional lighting pass which is done at runtime. The developer can create up to 32 dynamic lights, and control the position, radius and color of the light, on a frame by frame basis. The engine updates all of the lightmaps for the world with the dynamic lights, each frame. Dynamic lights are always omni lights.</P>
<P>Dynamic lights may optionally cast shadows. The shadows currently are cast only off of static world geometry. Models and actors are not taken into account when casting shadows with dynamic lights.</P>
<P>Dynamic lights have a computational cost associated with them that should not be ignored. The larger the light, the more lightmaps need to be updated each frame, so increasing the size of a light affects performance on an n-squared basis. In addition, shadows are quite expensive to calculate. If you have enabled shadow casting for a dynamic light, you should take additional care about the size of the dynamic light.</P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P>Fog</P>
</FONT><FONT FACE="Arial"><P>Fog lights are similar to dynamic lights in terms of control. They have color, size and position, which can be updated on a frame by frame basis. Fog lights are always spherical. Fog lights are an additional update of the lightmaps, with a slight difference: the lightmaps that are updated are affected by your camera position. The engine fogs the lightmaps that are behind the influence of the fog, based on the radius and falloff of the fog light, resulting in the texture being obscured. The result is a good local fog effect. Note that performance of the fog light is n-squared in terms of the size of the fog light. Be careful to keep your fog lights of reasonable radius. If you need to cover a wide area, it is better to use several small fog lights, than one large one.</P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P>User Polygons</P>
</FONT><FONT FACE="Arial"><P>In addition to the higher level rendering support that the engine provides (world and actors), there are APIs to allow the developer to add arbitrary polygons to a scene. There are two types of polygons that the developer may add: textured points, and arbitrary. See the Engine section for a note about decals.</P>
<P>Textured points can also be considered sprites. The API takes a texture, and a 3D&nbsp;location, and ensures that the texture is drawn to face the camera that is being used to render the world. This is basically a convenience API for something that most applications want to do.</P>
<P>You may add arbitrary polygons to the world's rendering queue. In this case, you specify a list of vertices in 3D space, along with RGB values and texture coordinates. The APIs let you specify whether or not the polygon should be textured, or gouraud shaded, and whether there should be transparency. The engine handles projection and clipping into the camera that is being used to render the scene.</P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P>Textures</P>
</FONT><FONT FACE="Arial"><P>There is support for loading your own individual textures for drawing with the user polygon APIs. The APIs currently support loading an Eclipse specific format. See the documentation on the BMP2GFX tool for conversion. This support will eventually be replaced with more cohesive texture or material library support, at which point the GFX format will be retired.</P>
<P>Textures are loaded into a world, and then drawn with separate APIs. Textures must be 8bit palettized bitmaps for conversion. Palette index 255 is reserved for transparency. &nbsp;Any pixels that are that index will be masked out. Internally the textures are converted to 16bit, depending on the hardware that you are running. Textures must be square, with dimensions being powers of 2.</P>
<P>Alpha masks are supported for textures. When loading a texture, you can provide an additional mask texture which is a grey scale mask which will be combined with the texture to form an alpha channel. Hardware which supports alpha blending will support this natively. In the software rasterizer, the alpha mask is processed to convert pixels within the low range of transparency to completely transparent, while the other pixels become completely opaque. &nbsp;In otherwords, in the software rasterizer, the alpha mask becomes a ranged transparency mask.</P>
<B><P>Note</B>: Textures <B>must not</B> be loaded in between calls to geEngine_BeginFrame and geEngine_EndFrame.</P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P>Sound and 3D&nbsp;Sound</P>
</FONT><FONT FACE="Arial"><P>We have included support for sound in the engine APIs, though we have made an attempt to keep these APIs separated from the world APIs so that you can install your own sound system if you so choose. The sound system provided uses Direct Sound for mixing, and provides a simple interface to hide the more bulky DSound interfaces. Currently, only WAV files are supported.</P>
<P>The APIs provide for loading WAV files as sound definitions, and then playing multiple instances of those sounds efficiently. The sounds can be parameterized at play time with regard to their volume, frequency and panning, and whether or not they should loop.</P>
<P>There is separate support for determining the volume, frequency and panning of a sound based upon its location in the world with respect to a camera. We have kept this support distinct from the sound system proper so that if you wish you may override the sound system implementation and use our sound positioning API. In the future, we will be adding support to modify a sound's parameters based upon not just position in the world, but the shape of the surrounding geometry (echo).</P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P>Paths and Motions</P>
</FONT><FONT FACE="Arial"><P>Paths and motions are used internally by two systems:&nbsp;Actors and Model keyframing. The Path and Motion APIs allow you to build individual keyframed and blended keyframed sequences, respectively.</P>
<P>The Path is an object which contains key-frames keyed to time. You have complete freedom to manipulate the key-frames. Two channels are supported: rotation and translation. Several interpolation modes are provided for blending between keys. You can blend with linear interpolation, hermite or SQUAD. Internally, Paths use quaternion operations, so there are no problems with singularities.</P>
<P>The Motion object is a collection of Paths, Events and sub-motions. Events are just string tags that are assigned to a particular time. They are used to annotate Paths so that you can trigger arbitrary events from a motion at a given time, which may be a design dependent time. There are APIs for extracting the event tags at a particular time. The Motion object includes the ability to blend multiple sub-motions together to get a hierarchical motion. This aspect of the Motion is used to drive the animation system in the Actors.</P>
<P>The models in the World Editor are key-framed and stored in Motions. This is done for two reasons: we wanted to have support for Events in the model animations, and at some point in time, we anticipate adding hierarchical animation to world geometry in the editor. Hence Paths were not the correct choice for the animation of world models.</P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P>Actors</P>
</FONT><FONT FACE="Arial"><P>Actors are skeletal animated meshes. The Actor APIs allow for loading an Actor into the world, cueing motions within an Actor, and doing collision detection against Actors.</P>
<P>Actors that are rendered in the world have support for various lighting forms. There is floor lighting, which is taken directly off the floor point immediately below the actor, and used as an ambient light. There is an arbitrary ambient light, and there is support for taking the light from the nearest dynamic lights in the world. The dynamic lights light the Actors directionally, which can be used to great effect.</P>
<P>Actors have a range of APIs to be used for animation. At the simplest, you can cue a simple motion, and set the Actor to different poses within that animation. This can be used to make simple Quake-like animation sequences. At the other end of the spectrum, you can cue multiple motions within an Actor, and blend them together to get entirely new motions. This can be used to create very organic looking characters with a nearly infinite variety of motions. The second method is hard to control in your application, but the results are worth it.</P>
<P>The complete Actor API supports construction of Actors from the ground up. These APIs can be used by tool makers to build exporters for Actors. A section in this document is dedicated to this purpose, and includes sample code for the Actor APIs to do exactly this.<A NAME="geCamera_Create"><A NAME="AnimationTools"></A></A></P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P> Animation Tools</P>
</FONT><FONT FACE="Arial"><P>Included in the SDK are tools for exporting geometry and animation from 3DS&nbsp;Max version 2.x and converting the results to animation data for the engine to consume in the form of Actors. The tools and process are documented here.</P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P>Preparing A Mesh For Exporting</P>
</FONT><FONT FACE="Arial"><P>In order to build a mesh for exporting, you must have the following:</P>
<P>3DS&nbsp;Max version 2.x </P>
<P>Character Studio 2.0 (Physique/Biped) </P>
<P>Install our plugins for 3DS&nbsp;Max. There are two plugins: <B>keyexp.dle</B> and <B>nfoexp.dle</B>. They have to be placed in the plugins directory for Max.</P>
<P>Once you have built your mesh, follow these steps:</P>
<P>Build bones (either Max bones or Biped bones) for your mesh</P>
<P>Physique the mesh to the bones using rigid vertices. If you don't use rigid attachments, the tools will fail on your model. You must physique the entire mesh.</P>
<P>Animate the bones</P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P>Exporting Your Animations</P>
</FONT><FONT FACE="Arial"><P>Export a single frame as a reference frame, using the NFO exporter. We recommend a DaVinci pose. This will yield an NFO file.</P>
<P>Export each motion individually, using the KEY exporter. This will yield a set of KEY files.</P>
<P>Run <B>mkbody.exe</B> to convert the NFO file to a BDY file.</P>
<P>Run <B>mkmotion.exe</B> on each KEY file to convert them to MOT files. Mkmotion requires you to pass in the BDY file that you created with the last step as a parameter.</P>
<P>Optionally, run <B>mop.exe</B> on your MOT files to optimize them. &nbsp;This will radically reduce their size.</P>
<P>Run <B>mkactor.exe</B> with the BDY&nbsp;file and any set of the MOT files. This will build your Actor file (ACT). The resulting ACT file is a text format file, and is rather bulky, and slow to load.</P>
<P>Create a binary version of the ACT file using <B>fmtactor.exe</B>.</P>
<P>The textures for Actors are not packed into the actor file. Instead, the materials that you have referenced in 3DS&nbsp;Max in the materials editor are the names of the bitmaps that will be loaded by the Actor when it loads. The bitmap files must be 8bit palettized, and converted to GFX files with BMP2GFX.EXE. See the discussion about textures in the engine API documentation for clarification about the tools, and transparent colors in textures.</P>
<P>Motions can be flagged with events. Events are taken from the note track in 3DS&nbsp;Max. You can attach a note track to any bone. The text of the note is inserted directly into the motion as the event. It should be a single line of text only. Do not put in any empty line of text as this will confuse the current tools.</P>
<P>Smoothing groups are supported in the renderer for Actors, so use them freely to improve the appearance of your models.</P>
</FONT><FONT FACE="Arial" COLOR="#ffffff"><P><A NAME="Tool_WriterSupport"></A>Tool Writer Support</P>
</FONT><FONT FACE="Arial"><P>This section is intended to provide a very basic overview of what is required to build Actors from the ground up. This is so that 3rd party tool makers can build exporters for their tools to output Actors for Genesis3D to consume.</P>
<P>Included in the SDK are the complete Actor APIs, over and above what are found in Genesis.h. The APIs in Genesis.h are intended to be used to manipulate Actors that have already been constructed, and are being used in an application. The complete Actor APIs include the APIs for adding elements to the Actors, and writing those Actors to disk.</P>
<P>To use the full Actor API, you need to use the following include files:</P>
<P>path.h </P>
<P>motion.h </P>
<P>body.h </P>
<P>actor.h </P>
<P>The Path, Motion and Actor headers are more complete versions of those APIs found in Genesis.h, while body.h is a support file needed only to support Actors that are being rendered or constructed.</P>
<P>We are not exposing or supporting the internal rendering mechanisms or APIs in the Actor subsystem. These headers have been provided for the express purpose of generating Actors.</P>
<P>Included in the SDK is a code fragment that demonstrates how to use the Actor APIs to build an ACT file from the ground up. See the files Tools\drill.h and Tools\drill.c in the distribution.</P>

<P>&nbsp;</P>
</FONT><P ALIGN="CENTER">&nbsp;</P>
<B><FONT FACE="Arial Black" SIZE=5><P ALIGN="CENTER"><A NAME="_Toc454156707">Genesis3D Library Header Files</A></A></A></P>
</B></FONT><FONT FACE="Arial"><P>The header files here are broken up alphabetically within the subdirectories in which they are found. The purpose of each subdirectory is covered in the Game File Structure Layout section above.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc452379799"><A NAME="_Toc454156708">Include Subdirectory</A></A></P>
</B></I></FONT><FONT FACE="Arial"><P>The header files in this subdirectory comprise the links necessary to create applications using the Genesis3D engine with the pre-created libraries provided by Eclipse.  These are the only include files you need in order to create an application with Genesis3D if you are not going to attempt to modify the game engine.</P>

<P>This subdirectory is repeated several times in the individual Tools subdirectories as an aid to speeding the compilation process and to separate the compilation of the Tools from that of the engine and the demonstration game.</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558900"><A NAME="_Toc452379800"><A NAME="_Toc454156709">Actor.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  ACTOR.H                                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Mike Sandige&#9;                                                            */</P>
<P>/*  Description:  Actor interface&#9;&#9;                                                */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>/*   Actor</P>
<P>&#9;</P>
<P>&#9;This object is designed to support character animation.</P>
<P>&#9;There are two basic objects to deal with.  </P>
<P>&#9;</P>
<P>&#9;Actor Definition (geActor_Def)</P>
<P>&#9;&#9;A geActor_Def embodies the geometry (polygon, and bone information), </P>
<P>&#9;&#9;and a library of motions that can be applied to that geometry.</P>

<P>&#9;Actor</P>
<P>&#9;&#9;A geActor is an instance of an actor definition.  The definition is used for </P>
<P>&#9;&#9;the geometry, but all additional settings, such as the bone pose, lighting information,</P>
<P>&#9;&#9;and cuing information is unique for a geActor.</P>
<P>// GENESIS_PRIVATE_API</P>
<P>&#9;An Actor Definition is created either from an existing Actor Definition file, or from scratch by </P>
<P>&#9;first creating a geBody and geMotions and selecting these into an Actor.  If the Actor Definition</P>
<P>&#9;is constructed from scratch, the objects selected into it (via SetBody and AddMotion) are</P>
<P>&#9;then 'owned' by the actor and will be destroyed along with the Actor when it is destroyed.</P>
<P>    Of course, when the Actor is loaded from a file, the Body and Motion it creates as it is</P>
<P>&#9;loaded are cleaned up when the Actor is destroyed.</P>

<P>&#9;Once an Actor is created, prepare it for rendering and animating by calling </P>
<P>&#9;Actor_RenderPrep().  This must be called (and it must succeed) before any render or</P>
<P>&#9;pose setting functions can be called.</P>
<P>// GENESIS_PUBLIC_API</P>

<P>&#9;There are two ways to use an Actor.</P>
<P>&#9;Direct Control</P>
<P>&#9;&#9;One method is to directly control the skeleton configuration.  Use _SetPose() to set its </P>
<P>&#9;&#9;skeleton using a geMotion animation.  The pose is positioned in world space relative to the </P>
<P>&#9;&#9;transform given in SetPose().  Whenever a new skeleton pose is required, call _SetPose() </P>
<P>&#9;&#9;to reposition the skeleton for a new point in time. </P>

<P>&#9;&#9;More complex positioning can be achieved by blending more than one animation.  Use</P>
<P>&#9;&#9;_BlendPose() after a _SetPose() to blend the second geMotion into the first.  Additional</P>
<P>&#9;&#9;blends can be applied by additional _BlendPose() calls.  Each blend is performed on the</P>
<P>&#9;&#9;the existing skeleton (the results of any previous blends).</P>
<P>&#9;Cuing</P>
<P>&#9;&#9;Another method is to 'cue' up motions that are applied with parameterized blending over time.</P>
<P>&#9;&#9;A cued motion takes effect 'now' in time.  The Actor advances in time and repositions itself</P>
<P>&#9;&#9;according to its currently cued motions with a call to _AnimationStep().  AnimationStep() </P>
<P>&#9;&#9;redefines what the actor thinks 'now' is.  This causes historical cues to be forgotten, and </P>
<P>&#9;&#9;motions that are no longer valid are cleaned up.  AnimationTestStep() can be used to position </P>
<P>&#9;&#9;the actor for potential queries with its currently cued motions at some arbitrary future time </P>
<P>&#9;&#9;- relative to the last AnimationTestStep() call.  AnimationNudge() applies a given transform </P>
<P>&#9;&#9;'instantly' to the current actor's cue list.  This is usefull for moving the actor as a </P>
<P>&#9;&#9;result of a collision with another object.</P>

<P>&#9;If a motion contains joint information that does not exactly match the Actor's skeleton </P>
<P>&#9;joints, only the joints that match by name are applied.  So a geMotion can be applied to</P>
<P>&#9;a portion of the Actor, or a geMotion that has more joint information than the skeleton can</P>
<P>&#9;be applied and the extra joint information is ignored.  </P>
<P>&#9; </P>
<P>&#9;Examples of this:  If the Actor is a biped and has no tail, but the motion is for a </P>
<P>&#9;biped with a tail, the geMotion can be applied, but the tail information will be ignored.</P>
<P>&#9;Also if there is a geMotion for only a left arm, it can be applied and it will only affect</P>
<P>&#9;the left arm of the Actor, and consequently its left hand and fingers, but no other </P>
<P>&#9;bones that are not children of the affected bones will be changed.</P>

<P>&#9; &#9;</P>
<P>*/</P>
<P>#ifndef GE_ACTOR_H</P>
<P>#define GE_ACTOR_H</P>

<P>#include "genesis.h"&#9;&#9;&#9;&#9;</P>
<P>#include "basetype.h"</P>
<P>#include "extbox.h"</P>
<P>#include "bitmap.h"</P>

<P>#include "Motion.h"</P>

<P>#ifdef GE_WORLD_H</P>
<P>#include "camera.h"</P>
<P>#include "Frustum.h"</P>
<P>#endif</P>

<P>#include "Body.h"</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>// GENESIS_PUBLIC_APIS</P>

<P>#ifndef GE_ACTOR_ENUMS</P>
<P>#define GE_ACTOR_ENUMS</P>
<P>typedef enum </P>
<P>{</P>
<P>&#9;&#9;GE_ACTOR_BLEND_LINEAR,&#9;&#9;// Treats the blending amount as a linear value</P>
<P>&#9;&#9;GE_ACTOR_BLEND_HERMITE&#9;&#9;// Applies a parametric smoothing curve to the blending amount</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;//  so that a linear change in BlendAmount parameters will</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;//  result in a smooth (non-linear) change in blending.</P>
<P>} geActor_BlendingType;</P>

<P>#endif</P>

<P>typedef struct geActor geActor;&#9;&#9;&#9;// an instance of an actor</P>
<P>typedef struct geActor_Def geActor_Def;&#9;&#9;// the deinition of an actor's geometry/bone structure</P>

<P>&nbsp;</P>
<P>// GENESIS_PRIVATE_APIS</P>

<P>//---------------------------------------------------------------------------------</P>
<P>//   Creation/Destruction functions</P>
<P>//---------------------------------------------------------------------------------</P>
<P>&#9;// Create an 'empty' Actor Definition.</P>
<P>GENESISAPI geActor_Def *GENESISCC geActor_DefCreate(void);</P>

<P>&#9;// Create an Actor Definition from a file image.</P>
<P>GENESISAPI geActor_Def *GENESISCC geActor_DefCreateFromFile(geVFile *pFile);</P>

<P>&#9;// Create an additional reference (owner) for the Actor_Definition</P>
<P>GENESISAPI void GENESISCC geActor_DefCreateRef(geActor_Def *pActorDefinition);</P>

<P>&#9;// Destroy a geActor_Def (its geBody and its geMotions)  Actors that rely on this definition become invalid.</P>
<P>&#9;// can fail if there are actors still referencing this definition.</P>
<P>GENESISAPI geBoolean GENESISCC geActor_DefDestroy(geActor_Def **pActorDefinition);</P>

<P>&#9;// Create an Actor instance associated with the given Actor Definition </P>
<P>GENESISAPI geActor *GENESISCC geActor_Create(geActor_Def *ActorDefinition);</P>

<P>&#9;// Create an additional reference (owner) for the Actor</P>
<P>GENESISAPI void GENESISCC geActor_CreateRef(geActor *Actor);</P>

<P>&#9;// Give the Actor Definition a Body.  geActor becomes responsible for its destruction.</P>
<P>&#9;// sets up default materials as referenced by the Body.</P>
<P>GENESISAPI geBoolean GENESISCC geActor_SetBody( geActor_Def *ActorDefinition, geBody *geBodyGeometry);</P>

<P>&#9;// Adds a geMotion to the Actor Definition's library.  The ActorDefinition becomes responsible for its destruction.</P>
<P>&#9;// returns the library index to the new geMotion.</P>
<P>GENESISAPI geBoolean GENESISCC geActor_AddMotion(geActor_Def *ActorDefinition, geMotion *M, int *Index);</P>

<P>&#9;// Destroy an Actor.  </P>
<P>GENESISAPI void GENESISCC geActor_Destroy(geActor **pA);</P>

<P>GENESISAPI geBoolean GENESISCC geActor_DefIsValid(const geActor_Def *A);</P>
<P>GENESISAPI geBoolean GENESISCC geActor_IsValid(const geActor *A);</P>

<P>// GENESIS_PUBLIC_APIS</P>
<P>//---------------------------------------------------------------------------------</P>
<P>//   Queries </P>
<P>//---------------------------------------------------------------------------------</P>
<P>// GENESIS_PRIVATE_APIS</P>

<P>&#9;// In general: Objects retuned from Get functions should not not be destroyed. </P>
<P>&#9;// if ownership is desired, call the objects _CreateRef() function to create another owner. </P>
<P>&#9;// (An 'owner' has access to the object regardless of the number of other owners, and </P>
<P>&#9;// an owner must call the object's _Destroy() function to relinquish ownership )</P>

<P>&#9;// Returns the Actor Definition associated with Actor A</P>
<P>GENESISAPI geActor_Def *GENESISCC geActor_GetActorDef(const geActor *A);</P>

<P>&#9;// Writes an existing geActor to a file image.  Returns GE_TRUE on success, GE_FALSE on failure.</P>
<P>GENESISAPI geBoolean GENESISCC geActor_DefWriteToFile(const geActor_Def *A, geVFile *pFile);</P>
<P>&#9;</P>
<P>&#9;// Returns a geBody pointer from the geActor </P>
<P>GENESISAPI geBody *GENESISCC geActor_GetBody(const geActor_Def *ActorDefinition);</P>

<P>&#9;// Returns GE_TRUE if the actor definition has a bone named 'Name'</P>
<P>GENESISAPI geBoolean GENESISCC geActor_DefHasBoneNamed(const geActor_Def *Ad, const char *Name );</P>

<P>&#9;// Selects a blending type.  BlendingType only affects the meaning of the </P>
<P>&#9;// BlendAmount parameter for the blend functions.  Can be changed anytime.</P>
<P>GENESISAPI void GENESISCC geActor_SetBlendingType( geActor *A, geActor_BlendingType BlendingType );</P>

<P>// GENESIS_PUBLIC_APIS</P>

<P>&#9;// Returns the number of geMotions in the geActors geMotion library.</P>
<P>GENESISAPI int GENESISCC geActor_GetMotionCount(const geActor_Def *ActorDefinition);</P>

<P>&#9;// Returns a geMotion pointer from the geActors geMotion library</P>
<P>&#9;//   This is an aliased pointer - Not a copy.  Changes to this motion will be reflected</P>
<P>&#9;//   in the actor.  Destroying this return motion will confuse the actor.</P>
<P>&#9;// Index must be in range [0..geActor_GetMotionCount-1]</P>
<P>GENESISAPI geMotion *GENESISCC geActor_GetMotionByIndex(const geActor_Def *ActorDefinition, int Index );</P>

<P>&#9;// Returns a geMotion pointer from the geActors geMotion library</P>
<P>&#9;//   This is an aliased pointer - Not a copy.  Changes to this motion will be reflected</P>
<P>&#9;//   in the actor.  Destroying this return motion will confuse the actor.</P>
<P>&#9;// if there is no motion that matches the given name, the return value will be NULL</P>
<P>GENESISAPI geMotion *GENESISCC geActor_GetMotionByName(const geActor_Def *ActorDefinition, const char *Name );</P>

<P>&#9;// Returns a motion name given an ActorDef and a motion index.</P>
<P>GENESISAPI const char *GENESISCC geActor_GetMotionName(const geActor_Def *ActorDefinition, int Index );</P>

<P>&#9;// Returns the number of materials for an instance of an actor.</P>
<P>GENESISAPI int GENESISCC geActor_GetMaterialCount(const geActor *A);</P>

<P>&#9;// Returns the current material for an instance of an actor</P>
<P>GENESISAPI geBoolean GENESISCC geActor_GetMaterial(const geActor *Actor, int MaterialIndex,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geBitmap **Bitmap, geFloat *Red, geFloat *Green, geFloat *Blue);</P>

<P>&#9;// Allows a material to be overriden in an actor instance</P>
<P>GENESISAPI geBoolean GENESISCC geActor_SetMaterial(geActor *Actor, int MaterialIndex,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geBitmap *Bitmap,  geFloat Red,  geFloat Green,  geFloat Blue);</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&#9;// Gets the current transform for a single bone in A.  (actor space-&gt;world space transform)</P>
<P>&#9;// with a NULL BoneName, this returns the current 'root' transform</P>
<P>GENESISAPI geBoolean GENESISCC geActor_GetBoneTransform(const geActor *A, const char *BoneName, geXForm3d *Transform);</P>
<P>&#9;</P>
<P>&#9;// Gets the extent box (axial-aligned bounding box) for a given bone (for the current pose)</P>
<P>&#9;// if BoneName is NULL, gets the a general bounding box from the body of the actor if it has been set.</P>
<P>GENESISAPI geBoolean GENESISCC geActor_GetBoneExtBox(const geActor *A,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9; const char *BoneName,geExtBox *ExtBox);</P>

<P>&#9;// Gets the non-axial-aligned bounding box for a given bone (for the current pose)</P>
<P>&#9;//  The box is specified by a corner, and</P>
<P>&#9;//  a non-normalized orientation transform.  Add DX,DY,DZ components </P>
<P>&#9;//  of the orientation to get other corners of the box</P>
<P>&#9;// if BoneName is NULL, gets the a general bounding box from the body of the actor if it has been set.</P>
<P>GENESISAPI geBoolean GENESISCC geActor_GetBoneBoundingBox(const geActor *A,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9; const char *BoneName,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9; geVec3d *Corner,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9; geVec3d *DX,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9; geVec3d *DY,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9; geVec3d *DZ);</P>

<P>&#9;// Gets the current axial-aligned bounding box for an actor's bone configuration</P>
<P>&#9;// takes all bones into account</P>
<P>GENESISAPI geBoolean GENESISCC geActor_GetDynamicExtBox( const geActor *A, geExtBox *ExtBox);</P>
<P>&#9;</P>
<P>&#9;// Gets an assigned general non changing bounding box from the actor</P>
<P>GENESISAPI geBoolean GENESISCC geActor_GetExtBox(const geActor *A, geExtBox *ExtBox);</P>

<P>&#9;// Sets an assigned general non changing bounding box from the actor</P>
<P>GENESISAPI geBoolean GENESISCC geActor_SetExtBox(geActor *A, const geExtBox *ExtBox,</P>
<P>&#9;&#9;&#9;&#9;&#9;const char *CenterBoxOnThisNamedBone);&#9;&#9;// NULL uses root position of actor</P>

<P>&#9;// Gets the rendering hint bounding box from the actor</P>
<P>&#9;//   if the RenderHintExtBox is disabled, Enabled is GE_FALSE, and the box returned has zero dimensions, </P>
<P>&#9;//   centered at the root position of the actor.  If the RenderHintExtBox is enabled, Enabled is</P>
<P>&#9;//   GE_TRUE, and the box returned is the one set with _SetRenderHintExtBox, offset by the </P>
<P>&#9;//   bone position of the bone named in _SetRenderHintExtBox().</P>
<P>GENESISAPI geBoolean GENESISCC geActor_GetRenderHintExtBox(const geActor *A, geExtBox *Box, geBoolean *Enabled);</P>

<P>&#9;// Sets a rendering hint bounding box from the actor.  Increases performance by </P>
<P>&#9;//   enabling the rendering of the actor to occur only if the box is visible.</P>
<P>&#9;//   If the box is not visible, a detailed analysis of the actor's current geometry is avoided.</P>
<P>&#9;//   This does allow errors to occur: </P>
<P>&#9;//   If the actor has a bit of geometry that extends outside this box for some</P>
<P>&#9;//   animation, that extended geometry may not be drawn, if the box if off-screen.   </P>
<P>&#9;//   If the render hint box is not set, the engine will make no conservative assumptions </P>
<P>&#9;//   about the visibility of an actor - it will always be drawn if any portion of it is</P>
<P>&#9;//   visible.</P>
<P>&#9;//   To attach the box to the 'root' bone, pass NULL for CenterBoxOnThisNamedBone</P>
<P>&#9;//   For disabling the hint box: (disabled is default) pass Box with zero mins and maxs</P>
<P>GENESISAPI geBoolean GENESISCC geActor_SetRenderHintExtBox(geActor *A, const geExtBox *Box,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const char *CenterBoxOnThisNamedBone );</P>

<P>&nbsp;</P>
<P>&#9;// Returns the pointer which was set with geActor_SetUserData.  NULL if not set.</P>
<P>GENESISAPI void *GENESISCC geActor_GetUserData(const geActor *A);</P>

<P>&#9;// Sets the actors user data pointer to the given value.  For clients only.</P>
<P>GENESISAPI void GENESISCC geActor_SetUserData(geActor *A, void *UserData);</P>

<P>&nbsp;</P>
<P>//--------------------------------------------------------------------------------</P>
<P>//   Posing and Rendering</P>
<P>//--------------------------------------------------------------------------------</P>

<P>// GENESIS_PRIVATE_APIS</P>

<P>#ifdef GE_WORLD_H</P>
<P>&#9;// Prepares the geActor for rendering and posing.  Call Once once the actor is fully created.</P>
<P>&#9;// Must be called prior to render/pose/setworldtransform </P>
<P>geBoolean GENESISCC geActor_RenderPrep( geActor *A, geWorld *World);</P>

<P>&#9;// Draws the geActor.  (RenderPrep must be called first)</P>
<P>geBoolean GENESISCC geActor_RenderThroughFrustum(const geActor *A, geEngine *Engine, geWorld *World, geCamera *Camera, Frustum_Info *FInfo);</P>
<P>geBoolean GENESISCC geActor_Render(const geActor *A, geEngine *Engine, geWorld *World, geCamera *Camera);</P>
<P>#endif</P>

<P>// GENESIS_PUBLIC_APIS</P>

<P>&#9;// Poses the actor in its default pose</P>
<P>&#9;// Transform is where to position the root for this pose.</P>
<P>&#9;//  if Transform is NULL, the root for the pose is assumed to be the root of the actor.</P>
<P>GENESISAPI void GENESISCC geActor_ClearPose(geActor *A, const geXForm3d *Transform);</P>

<P>&#9;// Poses the actor using given motion M at a time offset of Time</P>
<P>&#9;// Transform is where to position the root for this pose.</P>
<P>&#9;//  if Transform is NULL, the root for the pose is assumed to be the root of the actor.</P>
<P>GENESISAPI void GENESISCC geActor_SetPose(geActor *A, const geMotion *Motion, geFloat Time, const geXForm3d *Transform);</P>

<P>&#9;// Blends the current pose of the geActor with </P>
<P>&#9;//  a new pose using motion M at a time offset of Time</P>
<P>&#9;// A BlendAmount of 0 will result in the existing pose, A BlendAmount of 1 will</P>
<P>&#9;// result in the new pose from M.  The BlendingType set by _SetBlendingType() determines</P>
<P>&#9;// the blending function between 0 and 1</P>
<P>&#9;// Transform is where to position the root for this pose.</P>
<P>&#9;//  if Transform is NULL, the root for the pose is assumed to be the root of the actor.</P>
<P>GENESISAPI void GENESISCC geActor_BlendPose(geActor *A, const geMotion *Motion, geFloat Time,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;const geXForm3d *Transform, geFloat BlendAmount);</P>

<P>&nbsp;</P>
<P>GENESISAPI geBoolean GENESISCC geActor_GetBoneAttachment(const geActor *A, const char *BoneName, geXForm3d *Transform);</P>
<P>GENESISAPI geBoolean GENESISCC geActor_SetBoneAttachment(geActor *A, const char *BoneName, geXForm3d *Transform);</P>

<P>// GENESIS_PRIVATE_APIS</P>

<P>GENESISAPI geBoolean GENESISCC geActor_Attach( geActor *Slave,  const char *SlaveBoneName,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;const geActor *Master, const char *MasterBoneName, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;const geXForm3d *Attachment);</P>

<P>GENESISAPI void GENESISCC geActor_Detach(geActor *Slave);</P>

<P>&nbsp;</P>
<P>// GENESIS_PUBLIC_APIS</P>
<P>GENESISAPI geBoolean GENESISCC geActor_SetLightingOptions(geActor *A,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geBoolean UseFillLight,&#9;&#9;&#9;&#9;// GE_TRUE or GE_FALSE</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d *FillLightNormal,&#9;&#9;// normalized vector</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat FillLightRed,&#9;&#9;&#9;&#9;// 0 .. 255</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat FillLightGreen,&#9;&#9;&#9;&#9;// 0 .. 255</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat FillLightBlue,&#9;&#9;&#9;&#9;// 0 .. 255</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat AmbientLightRed,&#9;&#9;&#9;// 0 .. 255</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat AmbientLightGreen,&#9;&#9;&#9;// 0 .. 255</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat AmbientLightBlue,&#9;&#9;&#9;// 0 .. 255</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geBoolean AmbientLightFromFloor,&#9;// GE_TRUE or GE_FALSE</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;int MaximumDynamicLightsToUse,&#9;&#9;// 0 for none</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const char *LightReferenceBoneName, //NULL for root</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geBoolean PerBoneLighting);&#9;&#9;&#9;</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// if GE_TRUE, then dynamic lighting attenuation and direction is computed</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// for each bone.  if GE_FALSE, then the computations are relative to the </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// single bone named by the LightReferenceBoneName</P>

<P>GENESISAPI geBoolean GENESISCC geActor_GetLightingOptions(const geActor *A,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geBoolean *UseFillLight,&#9;&#9;&#9;// GE_TRUE or GE_FALSE</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geVec3d *FillLightNormal,&#9;&#9;&#9;// normalized vector</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat *FillLightRed,&#9;&#9;&#9;&#9;// 0 .. 255</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat *FillLightGreen,&#9;&#9;&#9;// 0 .. 255</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat *FillLightBlue,&#9;&#9;&#9;&#9;// 0 .. 255</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat *AmbientLightRed,&#9;&#9;&#9;// 0 .. 255</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat *AmbientLightGreen,&#9;&#9;&#9;// 0 .. 255</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat *AmbientLightBlue,&#9;&#9;&#9;// 0 .. 255</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geBoolean *UseAmbientLightFromFloor,// GE_TRUE or GE_FALSE</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;int *MaximumDynamicLightsToUse,&#9;&#9;</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const char **LightReferenceBoneName,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geBoolean *PerBoneLighting);&#9;&#9;// NULL for root</P>

<P>&nbsp;</P>
<P>GENESISAPI void GENESISCC geActor_SetScale(geActor *A, geFloat ScaleX,geFloat ScaleY,geFloat ScaleZ);</P>

<P>GENESISAPI geBoolean GENESISCC geActor_SetShadow(geActor *A, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;geBoolean DoShadow, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;geFloat Radius,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;const geBitmap *ShadowMap,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;const char * BoneName);</P>

<P>//  Animation Cuing API:</P>
<P>// high level Actor animation:  The principle is that motions can be applied to an actor</P>
<P>// and the actor will keep track of which motions are currently appropriate.  Call </P>
<P>//&#9;_AnimationStep() to compute a new pose for an elapsed time interval.  The new pose</P>
<P>//  will take into account all motions that are 'currently' cued up to be set or blended.</P>

<P>&nbsp;</P>
<P>&#9;// cue up a new motion.  The motion begins at the current time.  The motion can be </P>
<P>&#9;// blended in or out over time and time scaled.  If the return value is GE_FALSE, the </P>
<P>&#9;// animation was not cued up (failure implies Actor is incompletely initialized).</P>
<P>GENESISAPI geBoolean GENESISCC geActor_AnimationCue( </P>
<P>&#9;&#9;geActor *A,&#9;&#9;&#9;&#9;&#9;&#9;// actor to apply animation to</P>
<P>&#9;&#9;geMotion *Motion,&#9;&#9;&#9;&#9;// motion to Cue</P>
<P>&#9;&#9;geFloat TimeScaleFactor,&#9;&#9;// time scale to apply to cued motion</P>
<P>&#9;&#9;geFloat TimeIntoMotion,&#9;&#9;&#9;// time offset to begin motion with (Not TimeScaled)</P>
<P>&#9;&#9;geFloat BlendTime,&#9;&#9;&#9;&#9;// time to apply a blend. </P>
<P>&#9;&#9;geFloat BlendFromAmount,&#9;&#9;// blend value at current time</P>
<P>&#9;&#9;geFloat BlendToAmount,&#9;&#9;&#9;// blend value after BlendTime time has elapsed</P>
<P>&#9;&#9;const geXForm3d *MotionTransform);&#9;// local transform to adjust motion by (NULL implies NO transform)</P>

<P>&#9;// removes the last animation cue that was cued up.  Can be called repeatedly to successively</P>
<P>&#9;// remove older and older cues.  Returns GE_TRUE when a cue was removed, GE_FALSE if there </P>
<P>&#9;// are no cues to remove.</P>
<P>GENESISAPI geBoolean GENESISCC geActor_AnimationRemoveLastCue( geActor *A );</P>

<P>&#9;// applies a time step to actor A.  re-poses the actor according to all currently applicable</P>
<P>&#9;// Animation Cues. (failure implies Actor is incompletely initialized)</P>
<P>GENESISAPI geBoolean GENESISCC geActor_AnimationStep(geActor *A, geFloat DeltaTime );</P>

<P>&#9;// applies a 'temporary' time step to actor A.  re-poses the actor according to all </P>
<P>&#9;// currently appliciable cues.  (failure implies Actor is incompletely initialized)</P>
<P>&#9;// DeltaTime is always relative to the the last AnimationStep()</P>
<P>GENESISAPI geBoolean GENESISCC geActor_AnimationTestStep(geActor *A, geFloat DeltaTime);</P>

<P>&#9;// optimized version of geActor_AnimationStep.  Limits calculations to the bone named BoneName, and it's </P>
<P>&#9;// parents.  BoneName will be correctly computed, but the other bones will be wrong.  This is usefull for </P>
<P>&#9;// moving and animating an actor that is not actually visible.  Rendering and queries will be 'optimized'</P>
<P>&#9;// until the actor is given any pose or animation that doesn't go through geActor_AnimationStepBoneOptimized() or </P>
<P>&#9;//  geActor_AnimationTestStepBoneOptimized().  BoneName can be NULL to compute only 'root' bone.</P>
<P>GENESISAPI geBoolean GENESISCC geActor_AnimationStepBoneOptimized(geActor *A, geFloat DeltaTime, const char *BoneName );</P>

<P>&#9;// optimized version of geActor_AnimationTestStep.  Limits calculations to the bone named BoneName, and it's </P>
<P>&#9;// parents.  BoneName will be correctly computed, but the other bones will be wrong.  This is usefull for </P>
<P>&#9;// moving and animating an actor that is not actually visible.  Rendering and queries will be 'optimized'</P>
<P>&#9;// until the actor is given any pose or animation that doesn't go through geActor_AnimationStepBoneOptimized() or </P>
<P>&#9;//  geActor_AnimationTestStepBoneOptimized().  BoneName can be NULL to compute only 'root' bone.</P>
<P>GENESISAPI geBoolean GENESISCC geActor_AnimationTestStepBoneOptimized(geActor *A, geFloat DeltaTime, const char *BoneName);</P>

<P>&nbsp;</P>
<P>&#9;// applies an 'immediate' offset to the animated actor</P>
<P>GENESISAPI geBoolean GENESISCC geActor_AnimationNudge(geActor *A, geXForm3d *Offset);</P>

<P>&nbsp;</P>
<P>GENESISAPI geBoolean GENESISCC geActor_GetAnimationEvent(geActor *A,&#9;&#9;&#9;&#9;&#9;&#9;</P>
<P>&#9;const char **ppEventString);&#9;&#9;// Return data, if return value is GE_TRUE</P>

<P>&#9;// returns number of actors that are currently created.</P>
<P>GENESISAPI int GENESISCC geActor_GetCount(void);</P>

<P>// GENESIS_PRIVATE_APIS</P>
<P>&#9;// call setscale and setshadow after preparing the actor for rendering (renderprep)</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558901"><A NAME="_Toc452379801"><A NAME="_Toc454156710">Basetype.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  BASETYPE.H                                                                          */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:                                                                             */</P>
<P>/*  Description: Basic type definitions and calling convention defines                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GE_BASETYPE_H</P>
<P>#define GE_BASETYPE_H</P>
<P> </P>
<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>/******** The Genesis Calling Conventions ***********/ </P>

<P>#define&#9;GENESISCC&#9;_fastcall</P>

<P>#if&#9;defined(BUILDGENESIS) &amp;&amp; defined(GENESISDLLVERSION)</P>
<P>  #define GENESISAPI&#9;_declspec(dllexport)</P>
<P>#else</P>
<P>  #if&#9;defined(GENESISDLLVERSION)</P>
<P>    #define GENESISAPI&#9;_declspec(dllimport)</P>
<P>  #else</P>
<P>    #define GENESISAPI</P>
<P>  #endif</P>
<P>#endif</P>

<P>/******** The Basic Types ****************************/</P>

<P>typedef signed int geBoolean;</P>
<P>#define GE_FALSE&#9;(0)</P>
<P>#define GE_TRUE&#9;&#9;(1)</P>

<P>typedef float geFloat;</P>

<P>#ifndef NULL</P>
<P>#define NULL&#9;((void *)0)</P>
<P>#endif</P>

<P>typedef signed long     int32;</P>
<P>typedef signed short    int16;</P>
<P>typedef signed char     int8 ;</P>
<P>typedef unsigned long  uint32;</P>
<P>typedef unsigned short uint16;</P>
<P>typedef unsigned char  uint8 ;</P>

<P>/******** Macros on Genesis basic types *************/</P>

<P>#define GE_ABS(x)&#9;&#9;&#9;&#9;( (x) &lt; 0 ? (-(x)) : (x) )</P>
<P>#define GE_CLAMP(x,lo,hi)&#9;&#9;( (x) &lt; (lo) ? (lo) : ( (x) &gt; (hi) ? (hi) : (x) ) )</P>
<P>#define GE_CLAMP8(x)&#9;&#9;&#9;GE_CLAMP(x,0,255)</P>
<P>#define GE_CLAMP16(x)&#9;&#9;&#9;GE_CLAMP(x,0,65536)</P>
<P>#define GE_BOOLSAME(x,y)&#9;&#9;( ( (x) &amp;&amp; (y) ) || ( !(x) &amp;&amp; !(y) ) )</P>

<P>#define GE_EPSILON&#9;&#9;&#9;&#9;((geFloat)0.000797f)</P>
<P>#define GE_FLOATS_EQUAL(x,y)&#9;( GE_ABS((x) - (y)) &lt; GE_EPSILON )</P>
<P>#define GE_FLOAT_ISZERO(x)&#9;&#9;GE_FLOATS_EQUAL(x,0.0f)</P>

<P>#define&#9;GE_PI&#9;&#9;&#9;&#9;&#9;((geFloat)3.14159265358979323846f)</P>

<P>/****************************************************/</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
<P> </P>
</FONT><FONT FACE="Arial" SIZE=1><P> </P>
</FONT><FONT FACE="Arial" SIZE=2><P> </P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558902"><A NAME="_Toc452379802"><A NAME="_Toc454156711">Bitmap.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>#ifndef BITMAP_H</P>
<P>#define BITMAP_H</P>

<P>/****************************************************************************************/</P>
<P>/*  Bitmap.h                                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Charles Bloom                                                               */</P>
<P>/*  Description:  Abstract Bitmap system                                                */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>

<P>#include "basetype.h"</P>
<P>#include "pixelformat.h"</P>
<P>#include "vfile.h"</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>/***********************************************************************************/</P>

<P>typedef struct geBitmap&#9;&#9;&#9;geBitmap;</P>
<P>typedef struct geBitmap_Palette&#9;geBitmap_Palette;</P>

<P>typedef struct geBitmap_Info</P>
<P>{</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;&#9;Width;</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;&#9;Height;</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;&#9;Stride;&#9;&#9;// stride is in *pixels* ; it is the step to the next line : Stride &gt;= Width</P>
<P>&#9;gePixelFormat&#9;&#9;&#9;Format;</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;&#9;MinimumMip;&#9;//*including* minimumMip == 0 often</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;&#9;MaximumMip;&#9;//*including* maximumMip == nummips-1</P>
<P>&#9;geBoolean&#9;&#9;&#9;&#9;HasColorKey;</P>
<P>&#9;uint32&#9;&#9;&#9;&#9;&#9;ColorKey;&#9;// meaningless unless HasColorKey ; the ColorKey is a Pixel in Format</P>
<P>&#9;geBitmap_Palette *&#9;&#9;Palette;</P>
<P>} geBitmap_Info;</P>

<P>/***********************************************************************************/&#9;&#9;</P>
<P>// Bitmap methods</P>

<P>// see a big comment at the end of this file</P>

<P>/************************************************************************/</P>

<P>GENESISAPI geBitmap *&#9;GENESISCC&#9;geBitmap_Create(int Width, int Height, int MipCount, gePixelFormat Format ); </P>
<P>GENESISAPI void&#9;&#9;&#9;GENESISCC&#9;geBitmap_CreateRef(geBitmap *Bmp);</P>

<P>GENESISAPI geBitmap *&#9;GENESISCC&#9;geBitmap_CreateFromInfo(const geBitmap_Info * pInfo);</P>

<P>GENESISAPI geBitmap *&#9;GENESISCC&#9;geBitmap_CreateFromFile( geVFile *F );</P>
<P>GENESISAPI geBitmap *&#9;GENESISCC&#9;geBitmap_CreateFromFileName(const geVFile *BaseFS,const char *Name);</P>
<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_WriteToFile( const geBitmap *Bmp, geVFile *F );</P>
<P>GENESISAPI geBoolean&#9;GENESISCC&#9;geBitmap_WriteToFileName(const geBitmap * Bmp,const geVFile *BaseFS,const char *Name);</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// BaseFS is not really const if it is a virtual file;</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;//  it *is* const if it is a dos directory</P>

<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_Destroy(geBitmap **Bmp);</P>
<P>&#9;// returns whether Bmp was actually destroyed : not success/failure</P>

<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_GetInfo(const geBitmap *Bmp, geBitmap_Info *Info, geBitmap_Info *SecondaryInfo);</P>
<P>&#9;//LockForWrite returns data in Info's format</P>

<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_Blit(const&#9;geBitmap *Src, int SrcPositionX, int SrcPositionY,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geBitmap *Dst, int DstPositionX, int DstPositionY,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;int SizeX, int SizeY );</P>

<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_BlitMip(const geBitmap * Src, int SrcMip, geBitmap * Dst, int DstMip );</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// don't use this with Src == Dst, use UpdateMips instead !</P>

<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_BlitBitmap(const geBitmap * Src, geBitmap * Dst);</P>

<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_BlitBestMip(const geBitmap * Src, geBitmap * Dst);</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// blits the largest mip from Src that fits in Dst</P>

<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_LockForRead(&#9;&#9;// a non-exclusive lock</P>
<P>&#9;const geBitmap *&#9;Bmp,</P>
<P>&#9;geBitmap **&#9;&#9;&#9;Target,</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;MinimumMip,</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;MaximumMip,</P>
<P>&#9;gePixelFormat &#9;&#9;Format,</P>
<P>&#9;geBoolean&#9;&#9;&#9;RespectColorKey,</P>
<P>&#9;uint32&#9;&#9;&#9;&#9;ColorKey);</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// not really const, stores lock-count, but *data* is const</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// will do a format conversion!</P>

<P>GENESISAPI geBoolean&#9;GENESISCC&#9;geBitmap_LockForReadNative(</P>
<P>&#9;const geBitmap *&#9;Bmp,</P>
<P>&#9;geBitmap **&#9;&#9;&#9;Target,</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;MinimumMip,</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;MaximumMip);</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// lock for read in a format that gaurantee no conversions</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// then do GetInfo on the locks to see what you have!</P>

<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_LockForWrite(&#9;// an exclusive lock</P>
<P>&#9;geBitmap *&#9;&#9;&#9;Bmp,</P>
<P>&#9;geBitmap **&#9;&#9;&#9;Target,</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;MinimumMip,</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;MaximumMip);</P>

<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_LockForWriteFormat(</P>
<P>&#9;geBitmap *&#9;&#9;&#9;Bmp,</P>
<P>&#9;geBitmap **&#9;&#9;&#9;Target,</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;MinimumMip,</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;MaximumMip,</P>
<P>&#9;gePixelFormat &#9;&#9;Format);</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Format must be one of the two returned in GetInfo !!</P>

<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_UnLock(geBitmap *Bmp);&#9;// must be done on All locked mips</P>
<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_UnLockArray(geBitmap **Locks,int Size);</P>

<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_SetFormat(geBitmap *Bmp, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;gePixelFormat NewFormat, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;geBoolean RespectColorKey, uint32 ColorKey,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geBitmap_Palette * Palette);</P>
<P>&#9;// _SetFormat may cause you to lose color information!</P>
<P>&#9;// SetFormat does a conversion!</P>
<P>&#9;// if NewFormat is palettized and Palette is NULL, we create a palette for the bitmap!</P>

<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_SetFormatMin(geBitmap *Bmp,gePixelFormat NewFormat);</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// the Min version keeps colorkey &amp; palette from the old format</P>

<P>GENESISAPI geBoolean&#9;GENESISCC&#9;geBitmap_SetColorKey(geBitmap *Bmp, geBoolean HasColorKey, uint32 ColorKey, geBoolean Smart);</P>
<P>&#9;// SetColorKey discards old colorkey information!</P>
<P>&#9;//&#9;does not do a conversion (changes the colorkey in the current data</P>
<P>&#9;// if 'Smart' is on, we don't set HasColorKey to true unless it is actually used!</P>

<P>GENESISAPI geBoolean&#9;GENESISCC&#9;geBitmap_GetAverageColor(const geBitmap *Bmp,int *pR,int *pG,int *pB);</P>
<P>&#9;// tells you the average color; computes it and caches it out</P>

<P>GENESISAPI geBitmap_Palette * &#9;GENESISCC&#9;geBitmap_GetPalette(const geBitmap *Bmp);</P>
<P>GENESISAPI geBoolean&#9;&#9;&#9;GENESISCC&#9;geBitmap_SetPalette(geBitmap *Bmp, const geBitmap_Palette *Palette);</P>
<P>&#9;// _SetPal tries to _CreateRef your Palette, so no copy occurs &amp; palettes may be shared</P>
<P>&#9;// you may _Destroy() palette after using it to set (though its bits may not be freed)</P>
<P>&#9;//&#9;(hence Palette is *not* const)</P>
<P>&#9;// Warning : SetPalette on any mip changes the palette of ALL mips !</P>
<P>&#9;// see Palette note at _UnLock</P>
<P>&#9;// _SetPal destroys the bitmap's original palette and refs the new one, </P>
<P>&#9;//&#9;&#9;so if you setpal with the bitmap's palette, there is no net change in ref counts (good!)</P>

<P>GENESISAPI geBoolean&#9;GENESISCC&#9;geBitmap_HasAlpha(const geBitmap * Bmp);</P>
<P>&#9;// returns true if bitmap has *any* type of alpha</P>

<P>GENESISAPI geBitmap *&#9;GENESISCC&#9;geBitmap_GetAlpha(const geBitmap *Bmp);</P>
<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_SetAlpha(geBitmap *Bmp, const geBitmap *AlphaBmp);</P>
<P>&#9;// we Ref the AlphaBmp, so you may destroy it after calling Set()</P>
<P>&#9;// it may be NULL</P>
<P>&#9;// there's only one Alpha per bitmap (for the top Mip) right now</P>

<P>GENESISAPI geBoolean&#9;GENESISCC&#9;geBitmap_SetGammaCorrection(geBitmap *Bmp,geFloat Gamma,geBoolean Apply);</P>
<P>&#9;// this Gamma does not change the *original* (system/secondary) bits</P>
<P>&#9;//&#9;it only affects the appearance when drawn</P>
<P>&#9;// note : if you write to the gamma corrected bits, you must gamma correct manually if you</P>
<P>&#9;//&#9;wish to fit in smoothly with the previous data</P>
<P>&#9;// warning : if you use this function with many different gammas, performance will suffer!</P>
<P>&#9;//&#9;use one global gamma for all bitmaps!  try to let the engine manage gamma for you,</P>
<P>&#9;//&#9;via geEngine_SetGamma !</P>

<P>GENESISAPI geBoolean&#9;&#9;GENESISCC&#9;geBitmap_SetPreferredFormat(geBitmap *Bmp,gePixelFormat Format);</P>
<P>GENESISAPI gePixelFormat&#9;GENESISCC&#9;geBitmap_GetPreferredFormat(const geBitmap *Bmp);</P>

<P>GENESISAPI void *&#9;&#9;GENESISCC&#9;geBitmap_GetBits(geBitmap *Bmp);&#9;// works only on a Lock()</P>

<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_RefreshMips(geBitmap *Bmp);&#9;// rebuilds mips; *tries* to be smart &amp; not overwrite manually-fixed mips</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// RefreshMips does *not* build mips that don't exist</P>
<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_UpdateMips(geBitmap *Bmp,int SourceMip,int TargetMip);&#9;</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// will create the target if it doesn't exist;</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// will overwrite manually-fixed mips!</P>
<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_SetMipCount(geBitmap *Bmp,int Count);</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// creates or destroys to match the new count</P>

<P>GENESISAPI geBoolean &#9;GENESISCC&#9;geBitmap_ClearMips(geBitmap *Bmp);&#9;// Destroy all mips (except the first) !</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// use with care! this is not polite!</P>

<P>// Shortcuts</P>
<P>GENESISAPI int&#9;&#9;&#9;GENESISCC&#9;geBitmap_Width(const geBitmap *Bitmap);</P>
<P>GENESISAPI int&#9;&#9;&#9;GENESISCC&#9;geBitmap_Height(const geBitmap *Bitmap);</P>
<P>GENESISAPI uint32&#9;&#9;GENESISCC&#9;geBitmap_MipBytes(const geBitmap * Bitmap,int mip);</P>

<P>/**</P>
<P>*</P>
<P>* if Bitmap is a lock for read, functions that modify it return failure</P>
<P>* if Bitmap is a lock for write, functions that modify it attempt to</P>
<P>*&#9;modify the owner of the lock</P>
<P>*</P>
<P>* warning : if you lock multiple mips for write, and then modify one of the mips</P>
<P>*&#9;&#9;(such as via SetPalette) it may affect the owner and all sibling mips!</P>
<P>*&#9;&#9;doing different SetPalettes with different palettes on different locked mips </P>
<P>*&#9;&#9;has undefined behavior!</P>
<P>*</P>
<P>**/</P>

<P>#ifdef _DEBUG</P>
<P>GENESISAPI uint32&#9;&#9;GENESISCC&#9;geBitmap_Debug_GetCount(void);</P>

<P>&#9;// assert this is zero before you shutdown !</P>

<P>#endif</P>

<P>/***********************************************************************************/</P>

<P>typedef enum</P>
<P>{</P>
<P>&#9;GE_BITMAP_STREAMING_ERROR=0,</P>
<P>&#9;GE_BITMAP_STREAMING_NOT,</P>
<P>&#9;GE_BITMAP_STREAMING_STARTED,</P>
<P>&#9;GE_BITMAP_STREAMING_IDLE,</P>
<P>&#9;GE_BITMAP_STREAMING_CHANGED,</P>
<P>&#9;GE_BITMAP_STREAMING_DATADONE,</P>
<P>&#9;GE_BITMAP_STREAMING_DONE,</P>
<P>} geBitmap_StreamingStatus;</P>

<P>GENESISAPI geBitmap_StreamingStatus GENESISCC geBitmap_GetStreamingStatus(const geBitmap *Bmp);</P>

<P>&#9;&#9;/** on a file which is streaming, the sequence of returns looks like :</P>

<P>&#9;&#9;&#9;GE_BITMAP_STREAMING_IDLE</P>
<P>&#9;&#9;&#9;GE_BITMAP_STREAMING_CHANGED</P>
<P>&#9;&#9;&#9;GE_BITMAP_STREAMING_IDLE</P>
<P>&#9;&#9;&#9;GE_BITMAP_STREAMING_IDLE</P>
<P>&#9;&#9;&#9;GE_BITMAP_STREAMING_CHANGED</P>
<P>&#9;&#9;&#9;...</P>
<P>&#9;&#9;&#9;GE_BITMAP_STREAMING_DONE</P>
<P>&#9;&#9;&#9;GE_BITMAP_STREAMING_NOT</P>
<P>&#9;&#9;&#9;GE_BITMAP_STREAMING_NOT</P>
<P>&#9;&#9;&#9;GE_BITMAP_STREAMING_NOT</P>
<P>&#9;&#9;&#9;...</P>

<P>&#9;&#9;Status &gt;= GE_BITMAP_STREAMING_STARTED means streaming has started &amp; is in progress</P>

<P>&#9;&#9;the user should never see _STARTED or _DATADONE</P>

<P>&#9;&#9;***/</P>

<P>/***********************************************************************************/</P>

<P>// palette methods :</P>

<P>GENESISAPI geBitmap_Palette * &#9;GENESISCC&#9;geBitmap_Palette_Create(gePixelFormat Format,int Size);</P>

<P>GENESISAPI geBitmap_Palette * &#9;GENESISCC&#9;geBitmap_Palette_CreateCopy(const geBitmap_Palette *Palette);</P>

<P>GENESISAPI geBitmap_Palette *&#9;GENESISCC&#9;geBitmap_Palette_CreateFromFile(geVFile *F);</P>

<P>GENESISAPI geBitmap_Palette *&#9;GENESISCC&#9;geBitmap_Palette_CreateFromBitmap(geBitmap * Bmp,geBoolean Slow);</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// does GetPalette, and if NULL, then</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// it create an optimal palette for a</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;//&#9;non-palettized bitmap</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;//&#9;(this is a create, you must destroy later!)</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// put Slow == TRUE for higher quality &amp; slower</P>

<P>GENESISAPI geBoolean&#9;&#9;GENESISCC&#9;geBitmap_Palette_SortColors(geBitmap_Palette * P,geBoolean Slower);</P>

<P>GENESISAPI geBoolean&#9;&#9;GENESISCC&#9;geBitmap_Palette_CreateRef(geBitmap_Palette *Palette);</P>

<P>GENESISAPI geBoolean&#9;&#9;GENESISCC&#9;geBitmap_Palette_Destroy(geBitmap_Palette ** ppPalette);</P>

<P>GENESISAPI geBoolean&#9;&#9;GENESISCC&#9;geBitmap_Palette_WriteToFile(const geBitmap_Palette *Palette,geVFile *F);</P>

<P>GENESISAPI geBoolean&#9;&#9;GENESISCC&#9;geBitmap_Palette_SetFormat(geBitmap_Palette * Palette,gePixelFormat Format);</P>

<P>GENESISAPI geBoolean&#9;&#9;GENESISCC&#9;geBitmap_Palette_Copy(const geBitmap_Palette * Src,geBitmap_Palette * Target);</P>

<P>GENESISAPI geBoolean&#9;&#9;GENESISCC&#9;geBitmap_Palette_GetInfo(const&#9;geBitmap_Palette *P,geBitmap_Info *Into);</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// get the info as if it were a bitmap; Into-&gt;Height == 1</P>

<P>GENESISAPI geBoolean&#9;&#9;GENESISCC&#9;geBitmap_Palette_Lock(geBitmap_Palette *Palette, void **pBits, gePixelFormat *pFormat,int *pSize);</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// pFormat &amp; pSize are optional</P>

<P>GENESISAPI geBoolean&#9;&#9;GENESISCC&#9;geBitmap_Palette_UnLock(geBitmap_Palette *Palette);</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// palette unlock does NOT notify the bitmap that the palette has changed.</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// call Bitmap_SetPalette() with the same palette pointer </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// &#9;to tell the bitmap that it must to some processing</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// (don't worry, it won't duplicate it or copy it onto itself)</P>

<P>GENESISAPI geBoolean&#9;&#9;GENESISCC&#9;geBitmap_Palette_GetData(const geBitmap_Palette *P,      void *Into,gePixelFormat Format,int Colors);</P>
<P>GENESISAPI geBoolean&#9;&#9;GENESISCC&#9;geBitmap_Palette_SetData(      geBitmap_Palette *P,const void *From,gePixelFormat Format,int Colors);</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// does Lock/UnLock for you</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// From and Into are arrays of Colors*gePixelFormat_BytesPerPel bytes</P>

<P>GENESISAPI geBoolean&#9;&#9;GENESISCC&#9;geBitmap_Palette_SetEntryColor(      geBitmap_Palette *P,int Color,int R,int G,int B,int A);</P>
<P>GENESISAPI geBoolean&#9;&#9;GENESISCC&#9;geBitmap_Palette_GetEntryColor(const geBitmap_Palette *P,int Color,int *R,int *G,int *B,int *A);</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Set/Get does Lock/Unlock for you ; these are slow! do not use these to work on all the colors!</P>

<P>GENESISAPI geBoolean&#9;&#9;GENESISCC&#9;geBitmap_Palette_SetEntry(      geBitmap_Palette *P,int Color,uint32 Pixel);</P>
<P>GENESISAPI geBoolean&#9;&#9;GENESISCC&#9;geBitmap_Palette_GetEntry(const geBitmap_Palette *P,int Color,uint32 *Pixel);</P>

<P>/***********************************************************************************/</P>

<P>/************************************************************************</P>

<P>A brief tutorial on the Bitmap system, by Charles Bloom, cbloom@eclipsegames.com</P>

<P>The Bitmap is a smart wrapper for complex functionality.  You give it hints to</P>
<P>the opaque Bitmap object, and it tries its best to follow those hints, but it</P>
<P>may not always do so.  The Bitmap is the owner of its bits; you must Lock the</P>
<P>bitmap to get permission to touch those bits, and UnLock to tell the bitmap</P>
<P>you are done.  The format may change between two Locks.  Bitmaps can also be</P>
<P>multiply owned, so you should account for the fact that others may touch your</P>
<P>bitmap between your uses.</P>

<P>The Bitmap contains one or two pixel-sets representing an image.  The "primary" is</P>
<P>a fast-blitting version of the image, and the "secondary" is a storage version</P>
<P>(eventually wavelet compressed) which can be used to rebuild the primary if it is</P>
<P>freed or damaged.  Both cary a generalized format.</P>

<P>Let's do an example.  I want to load a bitmap, set it up for drawing with the</P>
<P>genesis Engine, and then blit some interactive stuff into it.</P>

<P>************************************************************************/</P>

<P>#if 0</P>
<P>// {</P>
<P>//-----------------------------------------------------------------------------</P>

<P>void Init(geEngine * Engine);</P>
<P>void Shutdown(void);</P>
<P>void Draw(void);</P>
<P>void DrawPolite(void);</P>

<P>static geBitmap * myBM = NULL;</P>
<P>static geEngine * myEngine = NULL;</P>

<P>void Init(geEngine * Engine)</P>
<P>{</P>
<P>geBoolean success;</P>
<P>geBitmap_Info Info;</P>

<P>&#9;myEngine = Engine;&#9;// this is not looked well upon; for ease of demonstration only!</P>
<P>&#9;assert(Engine);</P>

<P>&#9;myBM = geBitmap_CreateFromFileName(NULL,"mybitmap.bmp");</P>

<P>&#9;// CreateFromFile can load windows BMP files, or custom GeBm files.</P>

<P>&#9;assert(myBM);</P>

<P>&#9;// get the main info; I don't care about the secondary, so leave it NULL</P>

<P>&#9;success = geBitmap_GetInfo(myBM,&amp;Info,NULL);</P>
<P>&#9;assert(success);</P>

<P>&#9;// make sure I loaded a bitmap in the format I understand !</P>

<P>&#9;if ( Info.Format == GE_PIXELFORMAT_8BIT_PAL )</P>
<P>&#9;{</P>
<P>&#9;&#9;// I want palette index 255 to act as transparency, so I must use SetColorKey</P>

<P>&#9;&#9;success = geBitmap_SetColorKey(myBM,GE_TRUE,255);</P>
<P>&#9;&#9;assert(success);</P>

<P>&#9;&#9;// just for fun, let's modify the palette:</P>
<P>&#9;&#9;if (1)</P>
<P>&#9;&#9;{</P>
<P>&#9;&#9;geBitmap_Palette * Pal;</P>

<P>&#9;&#9;&#9;// get the palette ; I don't care if its primary or secondary, so</P>
<P>&#9;&#9;&#9;/// I don't use the Info.Palette field</P>

<P>&#9;&#9;&#9;Pal = geBitmap_GetPalette(myBM);</P>
<P>&#9;&#9;&#9;assert(Pal);</P>

<P>&#9;&#9;&#9;// I'm only fiddling one entry, so don't bother with a full Lock() UnLock()</P>
<P>&#9;&#9;&#9;//  sequence on the palette</P>

<P>&#9;&#9;&#9;// make palette index zero bright red; we use alpha = 255 for opaque</P>

<P>&#9;&#9;&#9;success = geBitmap_Palette_SetEntryColor(Pal,0,255,0,0,255);</P>
<P>&#9;&#9;&#9;assert(success);</P>

<P>&#9;&#9;&#9;// tell the bitmap system you've changed the palette; this function</P>
<P>&#9;&#9;&#9;//  is smart enough to not do unecessary copies or whatever.</P>

<P>&#9;&#9;&#9;success = geBitmap_SetPalette(myBM,Pal);</P>
<P>&#9;&#9;&#9;assert(success);</P>
<P>&#9;&#9;}</P>

<P>&#9;}</P>
<P>&#9;else</P>
<P>&#9;{</P>
<P>&#9;&#9;// otherwise, treat black as transparent, in whatever format I have</P>

<P>&#9;&#9;success = geBitmap_SetColorKey(myBM,GE_TRUE,gePixelFormat_ComposePixel(Info.Format,0,0,0,0));</P>
<P>&#9;&#9;assert(success);</P>
<P>&#9;}&#9;</P>

<P>&#9;// note that I did NOT use SetFormat.  SetFormat may do a conversion, and since the original</P>
<P>&#9;//&#9;bitmap was created without colorkey, it would have been converted to a new format but</P>
<P>&#9;//&#9;kept its property of having no colorkey!</P>
<P>&#9;// (SetFormat will fiddle the bits and whatever way necessary to keep bitmaps as visually similar</P>
<P>&#9;//&#9;&#9;as possible)</P>

<P>&#9;// I want to fiddle the fast format in 565 later, so cue the bitmap to try to give me that format.</P>

<P>&#9;success = geBitmap_SetPreferredFormat(myBM,GE_PIXELFORMAT_16BIT_565_RGB);</P>
<P>&#9;assert(success);</P>

<P>&#9;// Add it to the engine so it can be used for drawing.</P>

<P>&#9;success = geEngine_AddBitmap(myEngine,myBM);</P>
<P>&#9;assert(success);</P>
<P>}</P>

<P>void Shutdown(void)</P>
<P>{</P>
<P>geBoolean WasDestroyed;</P>

<P>&#9;assert(myBM);</P>
<P>&#9;</P>
<P>&#9;// clean up</P>

<P>&#9;geEngine_RemoveBitmap(myEngine,myBM);</P>

<P>&#9;WasDestroyed = geBitmap_Destroy(&amp;myBM);</P>

<P>&#9;// someone else might have done _CreateRef on our bitmap,</P>
<P>&#9;//  so we can't be sure it's actually destroyed.</P>
<P>&#9;// this code is still ready to be run again with a new call to Init()</P>

<P>&#9;//assert(WasDestroyed);</P>

<P>&#9;myBM = NULL;</P>
<P>&#9;myEngine = NULL;</P>
<P>}</P>

<P>void Draw(void)</P>
<P>{</P>
<P>geBitmap * Lock;</P>
<P>geBoolean success;</P>
<P>geBitmap_Info Info;</P>
<P>uint16 *bits,*bptr;</P>
<P>int x,y;</P>

<P>&#9;// lets fiddle the bits.</P>
<P>&#9;// we need to lock the bitmap for write.</P>
<P>&#9;//&#9;LockForWrite is an exclusive lock, unlike LockForRead which is non-blocking</P>
<P>&#9;// request our favorite format, and only lock Mip 0 (the full size bitmap)</P>

<P>&#9;success = geBitmap_LockForWriteFormat(myBM,&amp;Lock,0,0,GE_PIXELFORMAT_16BIT_565_RGB);</P>
<P>&#9;if ( ! success )</P>
<P>&#9;{</P>
<P>&#9;&#9;// well, we tried to be nice; if we were very polite, we would do a LockForWrite</P>
<P>&#9;&#9;// here, and try to fiddle the bits in whatever format we got; However, we aren't</P>
<P>&#9;&#9;// that polite, so we just do a _SetFormat</P>
<P>&#9;&#9;//</P>
<P>&#9;&#9;// note that we are destroying the original bitmap by changing its format</P>
<P>&#9;&#9;// we should only do this if we are going to draw into the bitmap</P>

<P>&#9;&#9;success = geBitmap_SetFormat(myBM,GE_PIXELFORMAT_16BIT_565_RGB,GE_TRUE,0,NULL);</P>
<P>&#9;&#9;assert(success);</P>

<P>&#9;&#9;// now we should be able to get the bits we want, *but* they may not be the</P>
<P>&#9;&#9;// primary (fast) format; oh well, it's the best we can do...</P>
<P>&#9;&#9;// (if you must have the fastest bits, then use only _LockForWrite, never LockForWriteFormat,</P>
<P>&#9;&#9;// which might have to do a conversion)</P>

<P>&#9;&#9;success = geBitmap_LockForWriteFormat(myBM,&amp;Lock,0,0,GE_PIXELFORMAT_16BIT_565_RGB);</P>
<P>&#9;&#9;assert(success);</P>
<P>&#9;}</P>

<P>&#9;// now Lock is our bitmap in 565</P>
<P>&#9;// we do a GetInfo because the Lock's info could be different than</P>
<P>&#9;//&#9;the original bitmap's (particularly the Palette &amp; the Stride)</P>

<P>&#9;success = geBitmap_GetInfo(Lock,&amp;Info,NULL);</P>
<P>&#9;assert(success);</P>

<P>&#9;// you can only call _GetBits on a locked bitmap</P>

<P>&#9;bits = geBitmap_GetBits(Lock);</P>
<P>&#9;assert( bits );</P>

<P>&#9;bptr = bits;</P>
<P>&#9;for(y=0; y &lt; Info.Height; y++)</P>
<P>&#9;{</P>
<P>&#9;&#9;for(x=0; x &lt; Info.Width; x++)</P>
<P>&#9;&#9;{</P>
<P>&#9;&#9;uint16 R,G,B;</P>
<P>&#9;&#9;&#9;// make a silly 565 gradient</P>
<P>&#9;&#9;&#9;R = x &amp; 0x1F;</P>
<P>&#9;&#9;&#9;G = x &amp; 0x3F;</P>
<P>&#9;&#9;&#9;B = y &amp; 0x1F;</P>

<P>&#9;&#9;&#9;*bptr++ = (R&lt;&lt;11) + (G&lt;&lt;5) + B;</P>
<P>&#9;&#9;}</P>

<P>&#9;&#9;// note that bptr is a word pointer, and Stride is in pixels :</P>

<P>&#9;&#9;bptr += Info.Stride -  Info.Width;</P>
<P>&#9;}</P>
<P>&#9;bits = bptr = NULL;</P>

<P>&#9;// you call Unlock on all the mips you locked - not on the original bitmap!</P>

<P>&#9;success = geBitmap_UnLock(Lock);</P>
<P>&#9;assert(success);</P>

<P>&#9;// now, we only fiddled the full-size Mip, and there might be more,</P>
<P>&#9;//  so lets percolate the changes into the smaller mips:</P>

<P>&#9;success = geBitmap_RefreshMips(myBM);</P>
<P>&#9;assert(success);</P>

<P>&#9;// a null rect means use the whole bitmap;</P>
<P>&#9;// Engine_DrawBitmap blits a 2d decal to the framebuffer (fast)</P>

<P>&#9;success = geEngine_DrawBitmap(myEngine,myBM,NULL,0,0);</P>
<P>&#9;assert(success);</P>

<P>}</P>

<P>void DrawPolite(void)</P>
<P>{</P>
<P>geBitmap * Lock;</P>
<P>geBoolean success;</P>
<P>geBitmap_Info Info;</P>
<P>void *bits;</P>
<P>int x,y;</P>

<P>&#9;// this function does the same thing as Draw() , but is more polite</P>
<P>&#9;// lock in the fastest format (whatever it is)</P>
<P>&#9;// because we did SetPreferred, this should be 565_RGB, but might not be</P>

<P>&#9;success = geBitmap_LockForWrite(myBM,&amp;Lock,0,0);</P>
<P>&#9;assert(success);</P>

<P>&#9;success = geBitmap_GetInfo(Lock,&amp;Info,NULL);</P>
<P>&#9;assert(success);</P>

<P>&#9;bits = geBitmap_GetBits(Lock);</P>
<P>&#9;assert( bits );</P>

<P>&#9;if ( Info.Format == GE_PIXELFORMAT_16BIT_565_RGB )</P>
<P>&#9;{</P>
<P>&#9;uint16 *wptr;</P>

<P>&#9;&#9;// our favorite format</P>

<P>&#9;&#9;wptr = bits;</P>
<P>&#9;&#9;for(y=0; y &lt; Info.Height; y++)</P>
<P>&#9;&#9;{</P>
<P>&#9;&#9;&#9;for(x=0; x &lt; Info.Width; x++)</P>
<P>&#9;&#9;&#9;{</P>
<P>&#9;&#9;&#9;uint16 R,G,B;</P>
<P>&#9;&#9;&#9;&#9;// make a silly 565 gradient</P>
<P>&#9;&#9;&#9;&#9;R = x &amp; 0x1F;</P>
<P>&#9;&#9;&#9;&#9;G = x &amp; 0x3F;</P>
<P>&#9;&#9;&#9;&#9;B = y &amp; 0x1F;</P>

<P>&#9;&#9;&#9;&#9;*wptr++ = (R&lt;&lt;11) + (G&lt;&lt;5) + B;</P>
<P>&#9;&#9;&#9;}</P>
<P>&#9;&#9;&#9;wptr += Info.Stride -  Info.Width;</P>
<P>&#9;&#9;}</P>
<P>&#9;}</P>
<P>&#9;else</P>
<P>&#9;{</P>
<P>&#9;uint8 * bptr;</P>

<P>&#9;&#9;// oh well, do our best</P>
<P>&#9;&#9;// bitmaps must have had a good reason to not give us the format we preferred,</P>

<P>&#9;&#9;bptr = bits;</P>
<P>&#9;&#9;for(y=0; y &lt; Info.Height; y++)</P>
<P>&#9;&#9;{</P>
<P>&#9;&#9;&#9;for(x=0; x &lt; Info.Width; x++)</P>
<P>&#9;&#9;&#9;{</P>
<P>&#9;&#9;&#9;uint32 R,G,B;</P>

<P>&#9;&#9;&#9;&#9;// put a color in any format</P>

<P>&#9;&#9;&#9;&#9;R = (x &amp; 0x1F)&lt;&lt;3;</P>
<P>&#9;&#9;&#9;&#9;G = (x &amp; 0x3F)&lt;&lt;2;</P>
<P>&#9;&#9;&#9;&#9;B = (y &amp; 0x1F)&lt;&lt;3;</P>

<P>&#9;&#9;&#9;&#9;// we use alpha of 255 for opaque</P>

<P>&#9;&#9;&#9;&#9;gePixelFormat_PutColor(Info.Format,&amp;bptr,R,G,B,255);</P>
<P>&#9;&#9;&#9;}</P>

<P>&#9;&#9;&#9;bptr += (Info.Stride -  Info.Width) * gePixelFormat_BytesPerPel(Info.Format);</P>
<P>&#9;&#9;}</P>
<P>&#9;}</P>
<P>&#9;bits = NULL;</P>

<P>&#9;// same as before:</P>

<P>&#9;success = geBitmap_UnLock(Lock);</P>
<P>&#9;assert(success);</P>

<P>&#9;success = geBitmap_RefreshMips(myBM);</P>
<P>&#9;assert(success);</P>

<P>&#9;success = geEngine_DrawBitmap(myEngine,myBM,NULL,0,0);</P>
<P>&#9;assert(success);</P>

<P>}</P>

<P>// end tutorial on the Bitmap system</P>
<P>//-----------------------------------------------------------------------------</P>
<P>// }</P>

<P>/***********************************************************************************/</P>

<P>#endif</P>
<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>

</FONT><FONT FACE="Arial" SIZE=1><P>&nbsp;</P>
<P>&nbsp;</P>
</FONT><FONT FACE="Arial" SIZE=2><P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558903"><A NAME="_Toc452379803"><A NAME="_Toc454156712">Body.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  BODY.H                                                                              */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Mike Sandige&#9;                                                            */</P>
<P>/*  Description: Actor body interface.&#9;&#9;                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GE_BODY_H</P>
<P>#define GE_BODY_H </P>

<P>/* This object is for managing the data associated with a skeletal-based mesh, </P>
<P>   a 'body'.</P>
<P>   This object holds the geometry for the body and the list of materials needed.</P>
<P>*/</P>

<P>#include "basetype.h"</P>
<P>#include "xform3d.h"</P>
<P>#include "vfile.h"</P>
<P>#include "bitmap.h"</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>#define GE_BODY_NUMBER_OF_LOD&#9;&#9;&#9;(4)&#9;&#9;// 0 is highest detail</P>
<P>#define GE_BODY_NO_PARENT_BONE         (-1)   </P>
<P>#define GE_BODY_HIGHEST_LOD            (0)</P>

<P>#define GE_BODY_ROOT&#9;&#9;&#9;&#9;&#9;(-1)&#9;// for specifying 'root' bounding box.</P>

<P>typedef struct geBody geBody;</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>geBody *GENESISCC geBody_Create(void);</P>

<P>void GENESISCC geBody_Destroy(geBody **B);</P>

<P>geBoolean GENESISCC geBody_IsValid(const geBody *B);</P>

<P>&nbsp;</P>
<P>geBoolean GENESISCC geBody_GetGeometryStats(const geBody *B, int lod, int *Vertices, int *Faces, int *Normals);</P>

<P>geBoolean GENESISCC geBody_AddFace(&#9;geBody *B,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d *Vertex1, const geVec3d *Normal1, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat U1, geFloat V1, int BoneIndex1,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d *Vertex2, const geVec3d *Normal2, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat U2, geFloat V2, int BoneIndex2,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d *Vertex3, const geVec3d *Normal3, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat U3, geFloat V3, int BoneIndex3,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;int MaterialIndex);</P>

<P>&#9;&#9;&#9;// Bitmap is added to body.  It's reference count is increased.  Caller still owns a pointer</P>
<P>&#9;&#9;&#9;// to the bitmap, and is responsible for destroying it.</P>
<P>geBoolean GENESISCC geBody_AddMaterial( geBody *B, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const char *MaterialName, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geBitmap *Bitmap,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat Red, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat Green, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat Blue,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;int *MaterialIndex);</P>

<P>&#9;&#9;&#9;// returned bitmap is a pointer to the bitmap in the body's list.  It may not be destroyed.</P>
<P>&#9;&#9;&#9;// if caller would like to 'own' a copy of that bitmap pointer, it should call geBitmap_CreateRef()</P>
<P>geBoolean GENESISCC geBody_GetMaterial(const geBody *Body, int MaterialIndex,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const char **MaterialName,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geBitmap **Bitmap, geFloat *Red, geFloat *Green, geFloat *Blue);</P>

<P>&#9;&#9;&#9;// Bitmap is set into the body.  It's reference count is increased.  Caller still owns a pointer</P>
<P>&#9;&#9;&#9;// to the bitmap, and is responsible for destroying it.</P>
<P>geBoolean GENESISCC geBody_SetMaterial(geBody *Body, int MaterialIndex,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geBitmap *Bitmap,  geFloat Red,  geFloat Green,  geFloat Blue);</P>

<P>int GENESISCC geBody_GetMaterialCount(const geBody *B);</P>

<P>geBoolean GENESISCC geBody_AddBone( geBody *B, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;int ParentBoneIndex,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;const char *BoneName, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geXForm3d *AttachmentMatrix,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;int *BoneIndex);</P>

<P>geBoolean GENESISCC geBody_ComputeLevelsOfDetail( geBody *B ,int Levels);</P>

<P>int GENESISCC geBody_GetBoneCount(const geBody *B);</P>

<P>void GENESISCC geBody_GetBone(&#9;const geBody *B, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;int BoneIndex, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;const char **BoneName,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;geXForm3d *Attachment, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;int *ParentBoneIndex);</P>

<P>int32 GENESISCC geBody_GetBoneNameChecksum(const geBody *B);</P>

<P>void GENESISCC geBody_SetBoundingBox( geBody *B,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;int BoneIndex,&#9;&#9;// GE_BODY_ROOT for specifing 'root' bounding box.</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d *MinimumBoxCorner,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d *MaximumBoxCorner);</P>
<P> </P>

<P>geBoolean GENESISCC geBody_GetBoundingBox( const geBody *B, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;int BoneIndex,&#9;&#9;// GE_BODY_ROOT for specifing 'root' bounding box.</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;geVec3d *MinimumBoxCorner,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;geVec3d *MaximumBoxCorner);</P>

<P>geBoolean GENESISCC geBody_GetBoneByName(const geBody* B,</P>
<P>&#9;const char* BoneName,</P>
<P>&#9;int* pBoneIndex,</P>
<P>&#9;geXForm3d* Attachment,</P>
<P>&#9;int* pParentBoneIndex);</P>

<P>geBoolean GENESISCC geBody_WriteToFile(const geBody *B, geVFile *pFile);</P>
<P>geBody  *GENESISCC  geBody_CreateFromFile(geVFile *pFile);</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
<P>&#9;&#9;&#9;&#9;&#9;</P>
</FONT><FONT FACE="Arial" SIZE=1><P>&#9;&#9;&#9;&#9;&#9;</P>
</FONT><FONT FACE="Arial" SIZE=2><P>&#9;&#9;&#9;&#9;&#9;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558904"><A NAME="_Toc452379804"><A NAME="_Toc454156713">Errorlog.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  ERRORLOG.H                                                                          */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Mike Sandige                                                                */</P>
<P>/*  Description: Generic error logging system interface                                 */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GE_ERRORLOG_H</P>
<P>#define GE_ERRORLOG_H</P>

<P>#include "basetype.h"</P>

<P>#ifndef NDEBUG </P>
<P>&#9;#define ERRORLOG_FULL_REPORTING</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>typedef enum</P>
<P>{</P>
<P>&#9;GE_ERR_INVALID_DRIVER_HANDLE,&#9;&#9;&#9;// Driver not supported</P>
<P>&#9;GE_ERR_INVALID_MODE_HANDLE,&#9;&#9;&#9;&#9;// Mode not supported</P>
<P>&#9;GE_ERR_DRIVER_INIT_FAILED,&#9;&#9;&#9;&#9;// Could not init Driver</P>
<P>&#9;GE_ERR_DRIVER_ALLREADY_INITIALIZED,&#9;&#9;// Driver init failure</P>
<P>&#9;GE_ERR_DRIVER_NOT_FOUND,&#9;&#9;&#9;&#9;// File open error for driver</P>
<P>&#9;GE_ERR_DRIVER_NOT_INITIALIZED,&#9;&#9;&#9;// Driver shutdown failure</P>
<P>&#9;GE_ERR_INVALID_DRIVER,&#9;&#9;&#9;&#9;&#9;// Wrong driver version, or bad driver</P>
<P>&#9;GE_ERR_DRIVER_BEGIN_SCENE_FAILED,</P>
<P>&#9;GE_ERR_DRIVER_END_SCENE_FAILED,</P>
<P>&#9;GE_ERR_CREATE_SOUND_MANAGER_FAILED,</P>
<P>&#9;GE_ERR_CREATE_SOUND_BUFFER_FAILED,</P>
<P>&#9;GE_ERR_DS_ERROR,</P>
<P>&#9;GE_ERR_INVALID_WAV,</P>
<P>&#9;GE_ERR_NO_PERF_FREQ,</P>
<P>&#9;GE_ERR_FILE_OPEN_ERROR,</P>
<P>&#9;GE_ERR_FILE_READ_ERROR,</P>
<P>&#9;GE_ERR_FILE_WRITE_ERROR,</P>
<P>&#9;GE_ERR_PALETTE_LOAD_FAILURE,</P>
<P>&#9;GE_ERR_GBSP_LOAD_FAILURE,</P>
<P>&#9;GE_ERR_INVALID_PARMS,</P>
<P>&#9;GE_ERR_INVALID_CAMERA,</P>
<P>&#9;GE_ERR_RENDER_WORLD_FAILED,</P>
<P>&#9;GE_ERR_BEGIN_WORLD_FAILED,</P>
<P>&#9;GE_ERR_END_WORLD_FAILED,</P>
<P>&#9;GE_ERR_BEGIN_MODELS_FAILED,</P>
<P>&#9;GE_ERR_END_MODELS_FAILED,</P>
<P>&#9;GE_ERR_BEGIN_MESHES_FAILED,</P>
<P>&#9;GE_ERR_END_MESHES_FAILED,</P>
<P>&#9;GE_ERR_RENDER_MESH_FAILED,</P>
<P>&#9;GE_ERR_BAD_LMAP_EXTENTS,</P>
<P>&#9;GE_ERR_INVALID_TEXTURE,</P>
<P>&#9;GE_ERR_REGISTER_WORLD_TEXTURE_FAILED,</P>
<P>&#9;GE_ERR_REGISTER_LIGHTMAPS_FAILED,</P>
<P>&#9;GE_ERR_REGISTER_WORLD_PALETTE_FAILED,</P>
<P>&#9;GE_ERR_REGISTER_MISC_TEXTURE_FAILED,</P>
<P>&#9;GE_ERR_INVALID_MESH_FILE,</P>
<P>&#9;GE_ERR_LOAD_BITMAP_FAILED,</P>
<P>&#9;GE_ERR_MAX_MESH_DEFS,</P>
<P>&#9;GE_ERR_MESH_MAX_NODES,</P>
<P>&#9;GE_ERR_INVALID_MESH_MATERIAL,</P>
<P>&#9;GE_ERR_MAX_MESH_MATERIALS,</P>
<P>&#9;GE_ERR_MAX_MESH_CLIP_PLANES,</P>
<P>&#9;GE_ERR_RENDERQ_OVERFLOW,</P>
<P>&#9;GE_ERR_INVALID_LTYPE,</P>
<P>&#9;GE_ERR_MAX_ENTITIES,</P>
<P>&#9;GE_ERR_GET_ENTITY_DATA_ERROR,</P>
<P>&#9;GE_ERR_INVALID_ENTITY_FIELD_TYPE,</P>
<P>&#9;GE_ERR_MODEL_NOT_FOUND,</P>
<P>&#9;GE_ERR_MODEL_NOT_IN_ENTITY,</P>
<P>&#9;GE_ERR_MAX_TEXTURES,</P>
<P>&#9;GE_ERR_MAX_DECALS,</P>
<P>&#9;GE_ERR_MAX_VERTS,</P>
<P>&#9;GE_ERR_OUT_OF_MEMORY,</P>
<P>&#9;GE_ERR_INVALID_BSP_TAG,</P>
<P>&#9;GE_ERR_INVALID_BSP_VERSION,</P>
<P>&#9;GE_ERR_ERROR_READING_BSP_CHUNK,</P>
<P>&#9;ERR_PATH_CREATE_ENOMEM,&#9;&#9;&#9;&#9;// failure to create a path (memory allocation failed)</P>
<P>&#9;ERR_PATH_INSERT_R_KEYFRAME,&#9;&#9;&#9;// failure to insert a rotation keyframe</P>
<P>&#9;ERR_PATH_INSERT_T_KEYFRAME,&#9;&#9;&#9;// failure to insert a translation keyframe</P>
<P>&#9;ERR_PATH_DELETE_R_KEYFRAME,&#9;&#9;&#9;// failure to delete a rotation keyframe</P>
<P>&#9;ERR_PATH_DELETE_T_KEYFRAME,&#9;&#9;&#9;// failure to delete a translation keyframe</P>
<P>&#9;ERR_PATH_FILE_READ,&#9;&#9;&#9;&#9;&#9;// failure to read from file</P>
<P>&#9;ERR_PATH_FILE_VERSION,&#9;&#9;&#9;&#9;// tried to create path from file with wrong/bad version</P>
<P>&#9;ERR_PATH_FILE_PARSE,&#9;&#9;&#9;&#9;// failure to parse file (unexpected format problem)</P>
<P>&#9;ERR_PATH_FILE_WRITE,&#9;&#9;&#9;&#9;// failure to read from file</P>
<P>&#9;ERR_MOTION_CREATE_ENOMEM,&#9;&#9;&#9;// failure to create (memory allocation failed)</P>
<P>&#9;ERR_MOTION_ADDPATH_ENOMEM,&#9;&#9;&#9;// failure to add path into motion (memory allocation failed)</P>
<P>&#9;ERR_MOTION_ADDPATH_PATH,&#9;&#9;&#9;// failure to add path into motion (path creation failed)</P>
<P>&#9;ERR_MOTION_ADDPATH_BAD_NAME,&#9;&#9;// failure to add path into motion due to name conflict</P>
<P>&#9;ERR_MOTION_INSERT_EVENT,&#9;&#9;&#9;// failure to insert event (memory allocation failed or duplicate key)</P>
<P>&#9;ERR_MOTION_DELETE_EVENT,&#9;&#9;&#9;// failure to insert event</P>
<P>&#9;ERR_MOTION_FILE_READ,&#9;&#9;&#9;&#9;// failure to read from file</P>
<P>&#9;ERR_MOTION_FILE_WRITE,&#9;&#9;&#9;&#9;// failure to write to file</P>
<P>&#9;ERR_MOTION_FILE_PARSE,&#9;&#9;&#9;&#9;// failure to parse file (unexpected format problem)</P>
<P>&#9;ERR_TKARRAY_INSERT_IDENTICAL,&#9;&#9;// failure to insert into list because of existing identical key</P>
<P>&#9;ERR_TKARRAY_INSERT_ENOMEM,&#9;&#9;&#9;// failure to insert into list because of memory allocation failure</P>
<P>&#9;ERR_TKARRAY_DELETE_NOT_FOUND,&#9;&#9;// failure to delete from list because key was not found</P>
<P>&#9;ERR_TKARRAY_CREATE,&#9;&#9;&#9;&#9;&#9;// failure to create TKArray object (out of memroy)</P>
<P>&#9;ERR_TKARRAY_TOO_BIG,&#9;&#9;&#9;&#9;// TKArray object can't be added to - it's list is as big as it can get</P>
<P>&#9;ERR_VKARRAY_INSERT,&#9;&#9;&#9;&#9;&#9;// insertion to VKArray failed</P>
<P>&#9;ERR_QKARRAY_INSERT,&#9;&#9;&#9;&#9;&#9;// insertion to QKArray failed</P>
<P>&#9;ERR_POSE_CREATE_ENOMEM,&#9;&#9;&#9;&#9;// Motion object failed to create (memory allocation failed)</P>
<P>&#9;ERR_POSE_ADDJOINT_ENOMEM,&#9;&#9;&#9;// Motion_AddJoint failed to allocate/reallocate memory for new joint</P>
<P>&#9;ERR_TKEVENTS_CREATE_ENOMEM,&#9;&#9;&#9;// failure to create TKEvents object (memory allocation failed)</P>
<P>&#9;ERR_TKEVENTS_DELETE_NOT_FOUND,&#9;&#9;// failure to delete from list because key was not found</P>
<P>&#9;ERR_TKEVENTS_INSERT_ENOMEM,&#9;&#9;&#9;// failure to insert into list because of memory allocation failure</P>
<P>&#9;ERR_TKEVENTS_INSERT,&#9;&#9;&#9;&#9;// failure to insert into list </P>
<P>&#9;ERR_TKEVENTS_FILE_READ,&#9;&#9;&#9;&#9;// failure to read from data file</P>
<P>&#9;ERR_TKEVENTS_FILE_WRITE,&#9;&#9;&#9;// failure to write to data file</P>
<P>&#9;ERR_TKEVENTS_FILE_VERSION,&#9;&#9;&#9;// failure to read tkevents object: file has wrong version</P>
<P>&#9;ERR_TKEVENTS_FILE_PARSE,&#9;&#9;&#9;// failure to parse file (unexpected format problem)</P>
<P>&#9;ERR_STRBLOCK_ENOMEM,&#9;&#9;&#9;&#9;// failure to create, insert, or append (memory allocation failed)</P>
<P>&#9;ERR_STRBLOCK_STRLEN,&#9;&#9;&#9;&#9;// string too long to insert or append</P>
<P>&#9;ERR_STRBLOCK_FILE_READ,&#9;&#9;&#9;&#9;// failure to read from data file</P>
<P>&#9;ERR_STRBLOCK_FILE_WRITE,&#9;&#9;&#9;// failure to write to data file</P>
<P>&#9;ERR_STRBLOCK_FILE_PARSE,&#9;&#9;&#9;// failure to parse reading from input file (unexpected format problem)</P>
<P>&#9;ERR_BODY_ENOMEM,&#9;&#9;&#9;&#9;&#9;// failure to create, or add (memory allocation failed)</P>
<P>&#9;ERR_BODY_FILE_PARSE,&#9;&#9;&#9;&#9;// failure to parse reading from input file (unexpected format problem)</P>
<P>&#9;ERR_BODY_FILE_READ,&#9;&#9;&#9;&#9;&#9;// failure to read from data file</P>
<P>&#9;ERR_BODY_FILE_WRITE,&#9;&#9;&#9;&#9;// failure to write to data file</P>
<P>&#9;ERR_BODY_BONEXFARRAY,&#9;&#9;&#9;&#9;// XFArray object failed to return array, or array size doesn't match bone count</P>
<P>&#9;ERR_XFARRAY_ENOMEM,&#9;&#9;&#9;&#9;&#9;// failure to create. (memory allocation failure)</P>
<P>&#9;ERR_PUPPET_ENOMEM,&#9;&#9;&#9;&#9;&#9;// failure to create. (memory allocation failure)</P>
<P>&#9;ERR_PUPPET_RENDER,&#9;&#9;&#9;&#9;&#9;// failure to render. </P>
<P>&#9;ERR_PUPPET_NO_MATERIALS,&#9;&#9;&#9;// failure to create: associated body has no materials.</P>
<P>&#9;ERR_PUPPET_LOAD_TEXTURE,&#9;&#9;&#9;// failure to load texture </P>
<P>&#9;ERR_TEXPOOL_ENOMEM,&#9;&#9;&#9;&#9;&#9;// failure to create or add to. (memory allocation/reallocation failure)</P>
<P>&#9;ERR_TEXPOOL_TOO_BIG,&#9;&#9;&#9;&#9;// failure to add to pool, pool is too large.</P>
<P>&#9;ERR_TEXPOOL_LOAD_TEXTURE,&#9;&#9;&#9;// failure to load texture into pool</P>
<P>&#9;ERR_TEXPOOL_TEXTURE_NOT_FREE,&#9;&#9;// texture pool destroyed without first freeing all it's shared textures</P>
<P>&#9;ERR_ACTOR_ENOMEM,&#9;&#9;&#9;&#9;&#9;// failure to create. (memory allocation failure)</P>
<P>&#9;ERR_ACTOR_RENDER_PREP,&#9;&#9;&#9;&#9;// failure to prepare actor for rendering (bad Body or allocation failure)</P>
<P>&#9;ERR_ACTOR_RENDER_FAILED,&#9;&#9;&#9;// failure to render.  failure to get geometry from Body </P>
<P>&#9;ERR_ACTOR_TOO_MANY_MOTIONS,&#9;&#9;&#9;// failure to add motion. too many.</P>
<P>&#9;ERR_ACTOR_FILE_READ,&#9;&#9;&#9;&#9;// failure to read from data file.</P>
<P>&#9;ERR_ACTOR_FILE_PARSE,&#9;&#9;&#9;&#9;// failure to parse reading from input file(unexpected format problem)</P>
<P>&#9;ERR_ACTOR_FILE_WRITE,&#9;&#9;&#9;&#9;// failure to write to data file.</P>
<P>&#9;GE_ERR_INVALID_MODEL_MOTION_FILE,&#9;// Bad model motion file (for bsp files)</P>
<P>&#9;GE_ERR_BAD_BSP_FILE_CHUNK_SIZE,&#9;&#9;// Chunk size does not match structure size of kind</P>
<P>} geErrorLog_ErrorIDEnumType;</P>

<P>&nbsp;</P>
<P>typedef enum </P>
<P>{</P>
<P>&#9;GE_ERR_MEMORY_RESOURCE,</P>
<P>&#9;GE_ERR_DISPLAY_RESOURCE,</P>
<P>&#9;GE_ERR_SOUND_RESOURCE,</P>
<P>&#9;GE_ERR_SYSTEM_RESOURCE,</P>
<P>&#9;GE_ERR_INTERNAL_RESOURCE,</P>
<P>&#9;</P>
<P>&#9;GE_ERR_FILEIO_OPEN,</P>
<P>&#9;GE_ERR_FILEIO_CLOSE,</P>
<P>&#9;GE_ERR_FILEIO_READ,</P>
<P>&#9;GE_ERR_FILEIO_WRITE,</P>
<P>&#9;GE_ERR_FILEIO_FORMAT,</P>
<P>&#9;GE_ERR_FILEIO_VERSION,</P>
<P>&#9;</P>
<P>&#9;GE_ERR_LIST_FULL,</P>
<P>&#9;GE_ERR_DATA_FORMAT,</P>
<P>&#9;GE_ERR_SEARCH_FAILURE,</P>
<P>} geErrorLog_ErrorClassType;</P>

<P>GENESISAPI void geErrorLog_Clear(void);</P>
<P>&#9;// clears error history</P>

<P>GENESISAPI int  geErrorLog_Count(void);</P>
<P>&#9;// reports size of current error log</P>

<P>GENESISAPI void geErrorLog_AddExplicit(geErrorLog_ErrorClassType,</P>
<P>&#9;const char *ErrorIDString,</P>
<P>&#9;const char *ErrorFileString,</P>
<P>&#9;int LineNumber,</P>
<P>&#9;const char *UserString,</P>
<P>&#9;const char *Context);</P>
<P>&#9;// not intended to be used directly: use ErrorLog_Add or ErrorLog_AddString</P>

<P>&nbsp;</P>
<P>#ifdef ERRORLOG_FULL_REPORTING</P>
<P>&#9;// 'Debug' version includes a textual error id, and the user string</P>

<P>&#9;#define geErrorLog_Add(Error, Context) geErrorLog_AddExplicit(Error, #Error, __FILE__, __LINE__,"", Context)</P>
<P>&#9;&#9;// logs an error.  </P>

<P>&#9;#define geErrorLog_AddString(Error,String, Context) geErrorLog_AddExplicit(Error, #Error, __FILE__,__LINE__, String, Context)</P>
<P>&#9;&#9;// logs an error with additional identifing string.  </P>
<P>&#9;</P>
<P>GENESISAPI&#9;geBoolean geErrorLog_AppendStringToLastError(const char *String);// use geErrorLog_AppendString</P>

<P>&#9;#define geErrorLog_AppendString(XXX) geErrorLog_AppendStringToLastError(XXX)</P>
<P>&#9;&#9;// adds text to the previous logged error</P>

<P>#else</P>
<P>&#9;// 'Release' version does not include the textual error id, or the user string</P>

<P>&#9;#define geErrorLog_Add(Error, Context) geErrorLog_AddExplicit(Error, "", __FILE__, __LINE__,"", Context)</P>
<P>&#9;&#9;// logs an error.  </P>

<P>&#9;#define geErrorLog_AddString(Error,String, Context) geErrorLog_AddExplicit(Error, "", __FILE__,__LINE__, "", Context)</P>
<P>&#9;&#9;// logs an error with additional identifing string.  </P>
<P>&#9;</P>
<P>&#9;#define geErrorLog_AppendString(XXX)</P>
<P>&#9;&#9;// adds text to the previous logged error</P>

<P>#endif</P>

<P>GENESISAPI geBoolean geErrorLog_Report(int History, geErrorLog_ErrorClassType *Error, const char **UserString);</P>
<P>&#9;// reports from the error log.  </P>
<P>&#9;// history is 0 for most recent,  1.. for second most recent etc.</P>
<P>&#9;// returns GE_TRUE if report succeeded.  GE_FALSE if it failed.</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558905"><A NAME="_Toc452379805"><A NAME="_Toc454156714">ExtBox.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  EXTBOX.H                                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:                                                                             */</P>
<P>/*  Description: Axial aligned bounding box (extent box) support                        */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GE_EXTBOX_H</P>
<P>#define GE_EXTBOX_H</P>

<P>#include "basetype.h"</P>
<P>#include "vec3d.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>typedef struct geExtBox</P>
<P>{</P>
<P>&#9;geVec3d Min;</P>
<P>&#9;geVec3d Max;</P>
<P>} geExtBox;</P>

<P>// Set the values in a box</P>
<P>void GENESISCC geExtBox_Set (  geExtBox *B,</P>
<P>&#9;&#9;&#9;&#9;  geFloat X1,&#9;  geFloat Y1,&#9;  geFloat Z1,</P>
<P>&#9;&#9;&#9;&#9;  geFloat X2,&#9;  geFloat Y2,&#9;  geFloat Z2 );</P>

<P>// Test a box for validity ( non NULL and max &gt;= min )</P>
<P>geBoolean GENESISCC geExtBox_IsValid(  const geExtBox *B );</P>

<P>// Set box Min and Max to the passed point</P>
<P>void GENESISCC geExtBox_SetToPoint ( geExtBox *B, const geVec3d *Point );</P>

<P>// Extend a box to encompass the passed point</P>
<P>void GENESISCC geExtBox_ExtendToEnclose( geExtBox *B, const geVec3d *Point );</P>

<P>// Return result of box intersection.</P>
<P>// If no intersection, returns GE_FALSE and bResult is not modified.</P>
<P>// If intersection, returns GE_TRUE and fills bResult (if not NULL)</P>
<P>// with the intersected box,</P>
<P>// bResult may be one of b1 or b2.</P>
<P>// </P>
<P>geBoolean GENESISCC geExtBox_Intersection ( const geExtBox *B1, const geExtBox *B2, geExtBox *Result&#9;);</P>

<P>// computes union of b1 and b2 and returns in bResult.</P>
<P>void GENESISCC geExtBox_Union ( const geExtBox *B1, const geExtBox *B2, geExtBox *Result );</P>

<P>geBoolean GENESISCC geExtBox_ContainsPoint ( const geExtBox *B, const geVec3d  *Point );</P>

<P>void GENESISCC geExtBox_GetTranslation ( const geExtBox *B,       geVec3d *pCenter );</P>
<P>void GENESISCC geExtBox_SetTranslation (       geExtBox *B, const geVec3d *pCenter );</P>
<P>void GENESISCC geExtBox_Translate      (       geExtBox *B, geFloat DX, geFloat DY, geFloat DZ );</P>

<P>void GENESISCC geExtBox_GetScaling     ( const geExtBox *B,       geVec3d *pScale );</P>
<P>void GENESISCC geExtBox_SetScaling     (       geExtBox *B, const geVec3d *pScale );</P>
<P>void GENESISCC geExtBox_Scale          (       geExtBox *B, geFloat DX, geFloat DY,geFloat DZ );</P>

<P>//  Creates a box that encloses the entire area of a box that moves along linear path</P>
<P>void GENESISCC geExtBox_LinearSweep(&#9;const geExtBox *BoxToSweep, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d *StartPoint, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d *EndPoint, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;geExtBox *EnclosingBox );</P>

<P>// Collides a ray with box B.  The ray is directed, from Start to End.  </P>
<P>//   Only returns a ray hitting the outside of the box.  </P>
<P>//     on success, GE_TRUE is returned, and </P>
<P>//       if T is non-NULL, T is returned as 0..1 where 0 is a collision at Start, and 1 is a collision at End</P>
<P>//       if Normal is non-NULL, Normal is the surface normal of the box where the collision occured.</P>
<P>geBoolean GENESISCC geExtBox_RayCollision( const geExtBox *B, const geVec3d *Start, const geVec3d *End, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat *T, geVec3d *Normal );</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558906"><A NAME="_Toc452379806"><A NAME="_Toc454156715">Font.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  FONT.H                                                                              */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Thom Robertson                                                              */</P>
<P>/*  Description: Bitmapped font support interface                                       */</P>
<P>/*               This implementation supports any TrueType fonts provided by Windows    */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GE_FONT_H</P>
<P>#define GE_FONT_H</P>

<P>// includes</P>
<P>#include "genesis.h"</P>
<P>#include "basetype.h"</P>
<P>#include "bitmap.h"</P>
<P>// **************************</P>
<P>// to use this API:</P>

<P>// 2.  geFont_CreateFont().</P>

<P>// 3.  (Optionally) geFont_AddCharacters().</P>
<P>// 3A. Otherwise, IF you intend to use geFont_DrawText(), call geFont_AddBitmapBuffer().</P>

<P>// 4.  Between geEngine_BeginFrame() and geEngine_EndFrame(), and after geEngine_RenderWorld(),</P>
<P>//       geFont_DrawText(). You may call geFont_DrawTextToBitmap() anytime, though.</P>

<P>// 5.  When finished, geFont_Destroy().</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>//*************************************************************************************** </P>
<P>// these are bit flags for _DrawText(). Currently only _WORDWRAP is implemented, and without</P>
<P>// it, the function will still wrap, just not on word boundaries.</P>
<P>// Note that these will fail for non ascii fonts.</P>
<P>#define GE_FONT_WRAP                0x00000001  // wrap to fit inside the drawing rect</P>
<P>#define GE_FONT_WORDWRAP            0x00000002  // wrap on word boundaries</P>
<P>#define GE_FONT_JUST_RETURN_FIT     0x00000004  // returns number of characters that fit in drawing rectangle, WITHOUT drawing anything.</P>
<P>#define GE_FONT_JUSTIFY_RIGHT       0x00000008</P>
<P>#define GE_FONT_JUSTIFY_CENTER      0x00000010</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>// opaque structure headers.</P>
<P>typedef struct geFont geFont;&#9;&#9;&#9;// an instance of a font</P>

<P>&nbsp;</P>
<P>//*************************************************************************************** </P>
<P>GENESISAPI geFont *GENESISCC geFont_Create(const geEngine *Engine, const char *fontNameString, </P>
<P>                                               const int fontSize,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;   const int fontWeight , const geBoolean antialiased) ;</P>
<P>   // Creates a font, and returns a pointer to it.</P>
<P>   // Pass in the string name of the TrueType font (case sensitive), and the height in pixels.</P>
<P>   </P>
<P>   // ARGUMENTS:</P>
<P>   // fontNameString - char pointer to a string containing the case sensitive name of the font.</P>
<P>   // fontSize - the pixel height of the requested font.</P>

<P>   // RETURNS:</P>
<P>   // success: pointer to the newly created font.</P>
<P>   // failure: NULL.</P>

<P>   // NOTE: the new font set has NO actual characters in it at first.  You must add characters</P>
<P>   // to it with the _AddCharacters() function before you can use the font.</P>
<P>   // NOTE: all fonts start out with a grayscale palette, with the range 0 to 128.</P>

<P>//*************************************************************************************** </P>
<P>GENESISAPI void GENESISCC geFont_CreateRef(geFont *font);</P>

<P>&nbsp;</P>
<P>//*************************************************************************************** </P>
<P>GENESISAPI void GENESISCC geFont_Destroy(geFont **font);</P>
<P>   // destroys a font.</P>

<P>   // ARGUMENTS:</P>
<P>   // font - pointer to the font to be destroyed.</P>

<P>   // RETURNS:</P>
<P>   // nothing.</P>

<P>//*************************************************************************************** </P>
<P>GENESISAPI geBoolean GENESISCC geFont_AddCharacters(geFont *font, </P>
<P>                                                  unsigned char leastIndex, </P>
<P>                                                  unsigned char mostIndex</P>
<P>                                                  );</P>
<P>   // Adds a set of characters to the font defined by the ascii range passed in </P>
<P>   // (leastIndex and mostIndex, inclusive).</P>

<P>   // ARGUMENTS:</P>
<P>   // font - pointer to the font to add characters to.</P>
<P>   // e - pointer to a valid geEngine.</P>
<P>   // leastIndex and mostIndex - the ASCII range of characters to add.</P>
<P>   // cellBuffer - an allocated hunk of ram to temproarily store the character image</P>
<P>   // bufferSize - length of the above buffer</P>

<P>   // RETURNS:</P>
<P>   // success: GE_TRUE.</P>
<P>   // failure: GE_FALSE.</P>

<P>   // NOTES:</P>
<P>   // This is the function that actually uses the</P>
<P>   // Win32 GetGlyphOutline() function to draw the character onto a geBitmap, which can be</P>
<P>   // blitted to the screen.</P>

<P>&nbsp;</P>
<P>//*******************************************************************************</P>
<P>GENESISAPI void GENESISCC geFont_DestroyBitmapBuffer( geFont *font );</P>
<P>   // destroys any valid "scratch-pad" buffer attached to the geFont.</P>
<P>   // ARGUMENTS:</P>
<P>   // font - pointer to the geFont.</P>
<P>   //</P>
<P>   // NOTES:</P>
<P>   // you'll rarely need to call this function; it's called by geFont_Destroy() anyway.</P>
<P>   // Calling this function with a geFont that has no initialized buffer doesn't</P>
<P>   // hurt anything.</P>

<P>//*******************************************************************************</P>
<P>GENESISAPI geBoolean GENESISCC geFont_AddBitmapBuffer(</P>
<P>                                  geFont *font, const uint32 width, const uint32 height);</P>
<P>   // Adds a geBitmap to the geFont, to be used as a temporary "scratch-pad".  This is</P>
<P>   // required for using geFont_DrawText() when no characters have been added.</P>

<P>   // ARGUMENTS:</P>
<P>   // font - pointer to the geFont to add a buffer to.</P>
<P>   // width and height - the size of the buffer to create.  Make sure this size is &gt;=</P>
<P>   // the biggest rectagle of text you'll want to write to the screen using this geFont</P>
<P>   // and DrawText().</P>

<P>   // RETURNS:</P>
<P>   // success: GE_TRUE.</P>
<P>   // failure: GE_FALSE.</P>

<P>   // NOTES:</P>
<P>   // You don't need to call this function IF you _AddCharacters() to this geFont.</P>
<P>   // You call this function for each geFont you need to use.  geFont's don't share buffers.</P>
<P>   // if you call this function on a geFont that already has a valid buffer, the buffer is</P>
<P>   // destroyed, and replaced by the new one.</P>

<P>//*************************************************************************************** </P>
<P>GENESISAPI geBoolean GENESISCC geFont_DrawText(geFont *font, const char *textString, </P>
<P>                                           const GE_Rect *Rect, const GE_RGBA *Color, </P>
<P>                                           uint32 flags, const GE_Rect *clipRect);</P>
<P>   // This is the function you put between geEngine_BeginFrame() and _EndFrame(), the function</P>
<P>   // that draws text to the screen.</P>

<P>   // ARGUMENTS:</P>
<P>   // font - pointer to the font to draw with.  IF the font has NO characters in it</P>
<P>   //  (added by geFont_AddCharacters() ) then a different, more windows-intensive way is</P>
<P>   //  used to draw out the characters.</P>
<P>   // textString - pointer to the text string to output to the screen.</P>
<P>   // Rect - screen rectangle to place the text within.</P>
<P>   // Color - RGB color the text should be.</P>
<P>   // flags - a bitfield of GE_FONT_ values.</P>
<P>   // clipRect - pointer to a screen rectangle to clip the text to.  MAY BE NULL, in which</P>
<P>   // case the text is only clipped by the boundaries of the screen.</P>

<P>   // RETURNS:</P>
<P>   // success: GE_TRUE.</P>
<P>   // failure: GE_FALSE.</P>

<P>   // NOTES:</P>
<P>   // Assuming you've added characters to the font, characters which have NOT been added</P>
<P>   // WILL cause an assert if you try to draw them.  </P>
<P>   // Only GE_FONTSET_WORDWRAP is meaningfull right now.  Using any other flags will cause</P>
<P>   // an assert.</P>
<P>   // As stated above, you can use an entirely different way of creating a string, by</P>
<P>   // making a font with no characters in it.  This</P>
<P>   // jumps through Windows DIB hoops, and draws the text in a non-anti-aliased, but</P>
<P>   // (hopefully) more unicode-tolerant way (DrawText() ).</P>

<P>&nbsp;</P>
<P>//*************************************************************************************** </P>
<P>GENESISAPI geBoolean GENESISCC geFont_DrawTextToBitmap(geFont *font, const char *textString, </P>
<P>                                           const GE_Rect *Rect, const GE_RGBA *Color, </P>
<P>                                           uint32 flags, const GE_Rect *clipRect,</P>
<P>                                           geBitmap *targetBitmap);</P>
<P>   // This is the function you put between geEngine_BeginFrame() and _EndFrame(), the function</P>
<P>   // that draws text to the screen.</P>

<P>   // ARGUMENTS:</P>
<P>   // font - pointer to the font to draw with.  IF the font has NO characters in it</P>
<P>   //  (added by geFont_AddCharacters() ) then a different, more windows-intensive way is</P>
<P>   //  used to draw out the characters.</P>
<P>   // textString - pointer to the text string to output to the screen.</P>
<P>   // Rect - screen rectangle to place the text within.</P>
<P>   // Color - RGB color the text should be.</P>
<P>   // flags - a bitfield of GE_FONT_ values.</P>
<P>   // clipRect - pointer to a screen rectangle to clip the text to.  MAY BE NULL, in which</P>
<P>   // case the text is only clipped by the boundaries of the screen.</P>
<P>   // targetBitmap - pointer to a target bitmap to draw the text into.  MAY NOT BE NULL,</P>
<P>   // and MUST BE GE_PIXELFORMAT_8BIT.</P>

<P>   // RETURNS:</P>
<P>   // success: GE_TRUE.</P>
<P>   // failure: GE_FALSE.</P>

<P>   // NOTES:</P>
<P>   // Assuming you've added characters to the font, characters which have NOT been added</P>
<P>   // WILL cause an assert if you try to draw them.  </P>
<P>   // Only GE_FONTSET_WORDWRAP is meaningfull right now.  Using any other flags will cause</P>
<P>   // an assert.</P>
<P>   // As stated above, you can use an entirely different way of creating a string, by</P>
<P>   // making a font with no characters in it.  This</P>
<P>   // jumps through Windows DIB hoops, and draws the text in a non-anti-aliased, but</P>
<P>   // (hopefully) more unicode-tolerant way (DrawText() ).</P>
<P>   // The Color argument is will be used to modify the existing palette of the targetBitmap</P>
<P>   // passed in.  Therefore, you won't be able to _DrawTextToBitmap() a red piece of text,</P>
<P>   // then a green piece, then a blue piece.  You'll end up with three lines of blue text.</P>

<P>&nbsp;</P>
<P>//*************************************************************************************** </P>
<P>GENESISAPI int32 GENESISCC geFont_GetStringPixelWidth (geFont *font, const char *textString);</P>
<P>GENESISAPI int32 GENESISCC geFont_GetStringPixelHeight(geFont *font, const char *textString);</P>
<P>   // These two functions return the pixel width and height of the string passed in.</P>

<P>   // ARGUMENTS:</P>
<P>   // font - pointer to the font to draw with.</P>
<P>   // textString - pointer to the text string to output to the screen.</P>

<P>   // RETURNS:</P>
<P>   // success: a positive value in pixels.  IF the text passed in contains characters</P>
<P>   //          which haven't been added to the font yet, BUT other characters HAVE</P>
<P>   //          been added, the function asserts.</P>
<P>   // failure: -1.</P>
<P>   // NOTES:</P>
<P>   // these two functions assume no text wrapping!</P>

<P>//*************************************************************************************** </P>
<P>GENESISAPI geBitmap* GENESISCC geFont_GetBuffer(geFont *font);</P>
<P>   // This function returns a pointer to the drawing buffer contained by the font.</P>

<P>   // ARGUMENTS:</P>
<P>   // font - pointer to the font.</P>

<P>   // RETURNS:</P>
<P>   // a valid pointer to a geBitmap, OR NULL, signifying that the buffer wasn't initialized.</P>

<P>&nbsp;</P>
<P>//*************************************************************************************** </P>
<P>GENESISAPI geBoolean GENESISCC geFont_GetCharMap(geFont *font, uint8 character, GE_Rect *Rect, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9; geBitmap **targetBitmap, int32 *fullWidth, int32 *fullHeight, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9; int32 *offsetX, int32 *offsetY);</P>

<P>//*************************************************************************************** </P>
<P>GENESISAPI void GENESISCC geFont_EnableAntialiasing(geFont *font, const geBoolean anti);</P>
<P>//*************************************************************************************** </P>
<P>GENESISAPI geBoolean GENESISCC geFont_IsAntialiased(geFont *font);</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558907"><A NAME="_Toc452379807"><A NAME="_Toc454156716">Genesis.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  Genesis.h                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Description: The master header for Genesis                                          */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GENESIS_H</P>
<P>#define GENESIS_H</P>

<P>#include "BaseType.h"</P>
<P>#include "Vec3d.h"</P>
<P>#include "XForm3d.h"</P>
<P>#include "GETypes.h"</P>
<P>#include "ExtBox.h"</P>
<P>#include "vfile.h"</P>
<P>#include "Bitmap.h"</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>//================================================================================</P>
<P>//&#9;Constants / Defines / TypDefs</P>
<P>//================================================================================</P>

<P>typedef struct&#9;&#9;geEngine&#9;&#9;&#9;geEngine;</P>

<P>typedef struct&#9;&#9;geDriver_System&#9;&#9;geDriver_System;</P>
<P>typedef struct&#9;&#9;geDriver&#9;&#9;&#9;geDriver;</P>
<P>typedef struct&#9;&#9;geDriver_Mode&#9;&#9;geDriver_Mode;</P>

<P>typedef struct&#9;&#9;geSound_System&#9;&#9;geSound_System;</P>
<P>typedef struct&#9;&#9;geSound_Cfg&#9;&#9;&#9;geSound_Cfg;</P>
<P>typedef struct&#9;&#9;geSound_Def&#9;&#9;&#9;geSound_Def;</P>
<P>typedef struct&#9;&#9;geSound&#9;&#9;&#9;&#9;geSound;</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;</P>
<P>typedef struct&#9;&#9;geActor&#9;&#9;&#9;&#9;geActor;</P>
<P>typedef struct&#9;&#9;geActor_Def&#9;&#9;&#9;geActor_Def;&#9;&#9;// the definition of an actor's geometry/bone structure</P>

<P>typedef struct&#9;&#9;geWorld&#9;&#9;&#9;&#9;geWorld;</P>

<P>typedef struct&#9;&#9;geWorld_Model&#9;&#9;geWorld_Model;</P>

<P>typedef struct&#9;&#9;geEntity&#9;&#9;&#9;geEntity;</P>
<P>typedef struct&#9;&#9;geEntity_EntitySet&#9;geEntity_EntitySet;</P>

<P>typedef struct&#9;&#9;geCamera&#9;&#9;&#9;geCamera;</P>

<P>typedef struct&#9;&#9;geCSNetMgr&#9;&#9;&#9;geCSNetMgr;</P>

<P>typedef struct&#9;&#9;gePoly&#9;&#9;&#9;&#9;gePoly;</P>

<P>typedef struct&#9;&#9;geLight&#9;&#9;&#9;&#9;geLight;&#9;&#9;&#9;</P>

<P>typedef struct&#9;&#9;geFog&#9;&#9;&#9;&#9;geFog;</P>

<P>typedef struct&#9;&#9;geMesh_Def&#9;&#9;&#9;geMesh_Def;&#9;&#9;&#9;// Mesh def</P>
<P>typedef struct&#9;&#9;geMesh&#9;&#9;&#9;&#9;geMesh;&#9;&#9;&#9;&#9;</P>

<P>#define GE_VERSION_MAJOR&#9;&#9;(1UL)</P>
<P>#define GE_VERSION_MINOR&#9;&#9;(3UL)</P>
<P>#define GE_VERSION_MINOR_MIN&#9;(3UL)</P>

<P>#define GE_VERSION_MAJOR_SHIFT&#9;(16)</P>
<P>#define GE_VERSION_MAJOR_MASK&#9;((uint32)0xFFFF0000)</P>

<P>#define GE_VERSION&#9;&#9;&#9;&#9;( (GE_VERSION_MAJOR &lt;&lt; GE_VERSION_MAJOR_SHIFT) + GE_VERSION_MINOR )</P>

<P>// From here down, still needs to be fixed up for July4</P>
<P>typedef&#9;struct&#9;&#9;GE_ModelMotion&#9;&#9;GE_ModelMotion;</P>
<P>typedef float&#9;&#9;GE_TimeType;</P>

<P>// Polys</P>
<P>typedef enum</P>
<P>{</P>
<P>&#9;GE_TEXTURED_POLY,</P>
<P>&#9;GE_GOURAUD_POLY,</P>
<P>&#9;GE_TEXTURED_POINT&#9;&#9;&#9;&#9;&#9;</P>
<P>} gePoly_Type;</P>

<P>// Poly Fx flags</P>
<P>#define&#9;GE_RENDER_DO_NOT_OCCLUDE_OTHERS&#9;(1&lt;&lt;0)&#9;&#9;&#9;// Poly will not occlude others</P>
<P>#define GE_RENDER_DO_NOT_OCCLUDE_SELF&#9;(1&lt;&lt;1)&#9;&#9;&#9;// Renders under any condition.  Useful for halos, etc...</P>
<P>#define&#9;GE_RENDER_BACKFACED&#9;&#9;&#9;&#9;(1&lt;&lt;2)&#9;&#9;&#9;// Poly should be backfaced from the Camera's Pov</P>
<P>#define GE_RENDER_DEPTH_SORT_BF&#9;&#9;&#9;(1&lt;&lt;3)&#9;&#9;&#9;// Sorts relative to camera position, from back to front</P>
<P>#define GE_RENDER_CLAMP_UV&#9;&#9;&#9;&#9;(1&lt;&lt;4)&#9;&#9;&#9;// Clamp UV's in both directions</P>

<P>// World Add flags</P>
<P>#define GE_WORLD_RENDER&#9;&#9;&#9;&#9;(1&lt;&lt;0)</P>
<P>#define GE_WORLD_COLLIDE&#9;&#9;&#9;(1&lt;&lt;1)</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>#ifndef GE_CONTENTS_TYPES</P>
<P>#define GE_CONTENTS_TYPES</P>

<P>//</P>
<P>// Content types in GE_Contents structure (multiple contents can be mixed...)</P>
<P>//</P>
<P>//*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=</P>
<P>//&#9;IF THESE FLAGS CHANGE, THEY MUST CHANGE IN GBSPFILE.H in Genesis AND GBSPLIB, and Genesis.H!!!!!</P>
<P>//*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=</P>
<P>#define GE_CONTENTS_SOLID&#9;&#9;&#9;(1&lt;&lt;0)&#9;&#9;// Solid (Visible)</P>
<P>#define GE_CONTENTS_WINDOW&#9;&#9;&#9;(1&lt;&lt;1)&#9;&#9;// Window (Visible)</P>
<P>#define GE_CONTENTS_EMPTY&#9;&#9;&#9;(1&lt;&lt;2)&#9;&#9;// Empty but Visible (water, lava, etc...)</P>

<P>#define GE_CONTENTS_TRANSLUCENT&#9;&#9;(1&lt;&lt;3)&#9;&#9;// Vis will see through it</P>
<P>#define GE_CONTENTS_WAVY&#9;&#9;&#9;(1&lt;&lt;4)&#9;&#9;// Wavy (Visible)</P>
<P>#define GE_CONTENTS_DETAIL&#9;&#9;&#9;(1&lt;&lt;5)&#9;&#9;// Won't be included in vis oclusion</P>

<P>#define GE_CONTENTS_CLIP&#9;&#9;&#9;(1&lt;&lt;6)&#9;&#9;// Structural but not visible</P>
<P>#define GE_CONTENTS_HINT&#9;&#9;&#9;(1&lt;&lt;7)&#9;&#9;// Primary splitter (Non-Visible)</P>
<P>#define GE_CONTENTS_AREA&#9;&#9;&#9;(1&lt;&lt;8)&#9;&#9;// Area seperator leaf (Non-Visible)</P>

<P>#define GE_CONTENTS_FLOCKING&#9;&#9;(1&lt;&lt;9)</P>
<P>#define GE_CONTENTS_SHEET&#9;&#9;&#9;(1&lt;&lt;10)</P>
<P>#define GE_CONTENTS_AIR&#9;&#9;&#9;&#9;(1&lt;&lt;11)&#9;&#9;// No brush lives in this leaf</P>
<P>#define GE_RESERVED4&#9;&#9;&#9;&#9;(1&lt;&lt;12)</P>
<P>#define GE_RESERVED5&#9;&#9;&#9;&#9;(1&lt;&lt;13)</P>
<P>#define GE_RESERVED6&#9;&#9;&#9;&#9;(1&lt;&lt;14)</P>
<P>#define GE_RESERVED7&#9;&#9;&#9;&#9;(1&lt;&lt;15)</P>

<P>// 16-31 reserved for user contents</P>
<P>#define GE_CONTENTS_USER1&#9;&#9;&#9;(1&lt;&lt;16)</P>
<P>#define GE_CONTENTS_USER2&#9;&#9;&#9;(1&lt;&lt;17)</P>
<P>#define GE_CONTENTS_USER3&#9;&#9;&#9;(1&lt;&lt;18)</P>
<P>#define GE_CONTENTS_USER4&#9;&#9;&#9;(1&lt;&lt;19)</P>
<P>#define GE_CONTENTS_USER5&#9;&#9;&#9;(1&lt;&lt;20)</P>
<P>#define GE_CONTENTS_USER6&#9;&#9;&#9;(1&lt;&lt;21)</P>
<P>#define GE_CONTENTS_USER7&#9;&#9;&#9;(1&lt;&lt;22)</P>
<P>#define GE_CONTENTS_USER8&#9;&#9;&#9;(1&lt;&lt;23)</P>
<P>#define GE_CONTENTS_USER9&#9;&#9;&#9;(1&lt;&lt;24)</P>
<P>#define GE_CONTENTS_USER10&#9;&#9;&#9;(1&lt;&lt;25)</P>
<P>#define GE_CONTENTS_USER11&#9;&#9;&#9;(1&lt;&lt;26)</P>
<P>#define GE_CONTENTS_USER12&#9;&#9;&#9;(1&lt;&lt;27)</P>
<P>#define GE_CONTENTS_USER13&#9;&#9;&#9;(1&lt;&lt;28)</P>
<P>#define GE_CONTENTS_USER14&#9;&#9;&#9;(1&lt;&lt;29)</P>
<P>#define GE_CONTENTS_USER15&#9;&#9;&#9;(1&lt;&lt;30)</P>
<P>#define GE_CONTENTS_USER16&#9;&#9;&#9;(1&lt;&lt;31)</P>
<P>// 16-31 reserved for user contents</P>

<P>&nbsp;</P>
<P>// These contents are all solid types</P>
<P>#define GE_CONTENTS_SOLID_CLIP&#9;&#9;(GE_CONTENTS_SOLID | GE_CONTENTS_WINDOW | GE_CONTENTS_CLIP)</P>
<P>#define GE_CONTENTS_CANNOT_OCCUPY&#9;GE_CONTENTS_SOLID_CLIP</P>

<P>// These contents are all visible types</P>
<P>#define GE_VISIBLE_CONTENTS&#9;&#9;&#9;(&#9;GE_CONTENTS_SOLID | \</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;GE_CONTENTS_EMPTY | \</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;GE_CONTENTS_WINDOW | \</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;GE_CONTENTS_WAVY)</P>

<P>#endif</P>
<P>//*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=</P>
<P>//*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=</P>

<P>// NOTES - Fills in first Model/Mesh hit</P>
<P>// Exceptions:</P>
<P>//&#9;&#9;Returns the last solid model hit...</P>
<P>typedef struct</P>
<P>{</P>
<P>&#9;geMesh&#9;&#9;&#9;*Mesh;</P>
<P>&#9;geWorld_Model&#9;*Model;</P>
<P>&#9;geActor&#9;&#9;&#9;*Actor;</P>
<P>&#9;int32&#9;&#9;&#9;Contents;</P>
<P>} GE_Contents;</P>

<P>typedef geBoolean GE_CollisionCB(geWorld_Model *Model, geActor *Actor, void *Context);</P>

<P>// Collision</P>
<P>typedef struct</P>
<P>{</P>
<P>&#9;geVec3d&#9;Normal;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Orientation of plane</P>
<P>&#9;float&#9;Dist;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Distance from origin</P>
<P>} GE_Plane;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;geWorld_Model&#9;*Model;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Pointer to what model was hit (if any)</P>
<P>&#9;geMesh&#9;&#9;&#9;*Mesh;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Pointer to what mesh was hit (if any)</P>
<P>&#9;geActor&#9;&#9;&#9;*Actor;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Pointer to what actor was hit (if any)&#9;</P>
<P>&#9;geVec3d&#9;&#9;&#9;Impact;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Impact Point</P>
<P>&#9;float&#9;&#9;&#9;Ratio;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Percent from 0 to 1.0, how far along the line for the impact point</P>
<P>&#9;GE_Plane&#9;&#9;Plane;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Impact Plane</P>
<P>} GE_Collision;</P>

<P>// If these render states change, they must change in DCommon.h too!!!</P>
<P>// These are still under construction, and are for debug purposes only.</P>
<P>// They are merely means of overriding ways the engine normally renders primitives, etc...</P>
<P>//</P>
<P>//&#9;RenderState States</P>
<P>//</P>
<P>#define GE_RENDERSTATE_ZWRITE&#9;&#9;0&#9;&#9;// Z Writes</P>
<P>#define GE_RENDERSTATE_ZCMP&#9;&#9;&#9;1&#9;&#9;// Z Compares</P>
<P>#define GE_RENDERSTATE_BILINEAR&#9;&#9;2&#9;&#9;// Bilinear filtering</P>
<P>#define&#9;GE_RENDERSTATE_ANTI_ALIAS&#9;3&#9;&#9;// Anti-Aliasing</P>
<P>#define GE_RENDERSTATE_POLYMODE&#9;&#9;4&#9;&#9;// Normal, Gouraud only, Lines only, etc</P>

<P>//</P>
<P>//&#9;RenderState Flags</P>
<P>//</P>
<P>#define GE_RENDERFLAG_OFF&#9;&#9;0</P>
<P>#define GE_RENDERFLAG_ON&#9;&#9;1</P>

<P>//</P>
<P>//  PolyMode flags&#9;(A method to override how polys are drawn for debugging purposes...)</P>
<P>//</P>
<P>#define GE_POLYMODE_NORMAL&#9;&#9;1&#9;&#9;&#9;// Draw as is</P>
<P>#define GE_POLYMODE_GOURAUD&#9;&#9;2&#9;&#9;&#9;// Gouraud only</P>
<P>#define GE_POLYMODE_LINES&#9;&#9;3&#9;&#9;&#9;// Outlines only</P>

<P>//================================================================================</P>
<P>//&#9;Engine Management functions</P>
<P>//================================================================================</P>

<P>&nbsp;</P>
<P>#ifdef _INC_WINDOWS&#9;</P>
<P>&#9;// Windows.h must be included before genesis.h for this api to be exposed.</P>
<P>&#9;</P>

<P>GENESISAPI&#9;geEngine&#9;*geEngine_CreateWithVersion(HWND hWnd, const char *AppName, const char *DriverDirectory, uint32 Version);</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;// use geEngine_Create, rather than calling this directly.</P>

<P>#define geEngine_Create( hWnd, AppName, DriverDirectory)   geEngine_CreateWithVersion(hWnd,AppName,DriverDirectory,GE_VERSION)</P>

<P>#endif</P>

<P>GENESISAPI void&#9;&#9;&#9;geEngine_Free(geEngine *Engine);</P>

<P>GENESISAPI geBoolean&#9;geEngine_AddWorld(geEngine *Engine, geWorld *World);</P>
<P>GENESISAPI geBoolean&#9;geEngine_RemoveWorld(geEngine *Engine, geWorld *World);</P>

<P>GENESISAPI geBoolean&#9;geEngine_AddBitmap(geEngine *Engine, geBitmap *Bitmap);</P>
<P>GENESISAPI geBoolean&#9;geEngine_RemoveBitmap(geEngine *Engine, geBitmap *Bitmap);</P>

<P>GENESISAPI geDriver_System *geEngine_GetDriverSystem(geEngine *Engine);</P>

<P>GENESISAPI geBoolean&#9;geEngine_SetDriverAndMode(&#9;geEngine *Engine, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geDriver *Driver, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geDriver_Mode *DriverMode);</P>

<P>GENESISAPI geBoolean&#9;geEngine_ShutdownDriver(geEngine *Engine);</P>

<P>GENESISAPI geBoolean&#9;geEngine_BeginFrame(geEngine *Engine, geCamera *Camera, geBoolean ClearScreen);</P>
<P>GENESISAPI geBoolean&#9;geEngine_EndFrame(geEngine *Engine);</P>

<P>GENESISAPI geBoolean&#9;geEngine_RenderWorld(geEngine *Engine, geWorld *World, geCamera *Camera, geFloat Time);</P>
<P>GENESISAPI geBoolean&#9;geEngine_Printf(geEngine *Engine, int32 x, int32 y, const char *String, ...);</P>

<P>GENESISAPI void&#9;&#9;&#9;GENESISCC geEngine_RenderPoly(const geEngine *Engine, const GE_TLVertex *Points, int NumPoints, const geBitmap *Texture, uint32 Flags);</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;//RenderPoly : if Texture is null, we Gouraud shade</P>

<P>GENESISAPI void&#9;&#9;&#9;GENESISCC geEngine_RenderPolyArray(const geEngine *Engine, const GE_TLVertex ** pPoints, int * pNumPoints, int NumPolys, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geBitmap *Texture, uint32 Flags);</P>

<P>GENESISAPI geBoolean&#9;GENESISCC geEngine_DrawBitmap(const geEngine *Engine,const geBitmap *Bitmap,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geRect * Source, uint32 x, uint32 y);</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;//DrawBitmap &amp; RenderPoly : must Engine_AddBitmap first!</P>

<P>&nbsp;</P>
<P>GENESISAPI void&#9;&#9;&#9;geEngine_FillRect(geEngine *Engine, const GE_Rect *Rect, const GE_RGBA *Color);</P>

<P>GENESISAPI geBoolean&#9;geEngine_SetGamma(geEngine *Engine, float Gamma);</P>
<P>GENESISAPI geBoolean&#9;geEngine_GetGamma(geEngine *Engine, float *Gamma);</P>

<P>GENESISAPI geBoolean&#9;geEngine_ScreenShot(geEngine *Engine, const char *FileName);</P>

<P>GENESISAPI void&#9;&#9;&#9;geEngine_EnableFrameRateCounter(geEngine *Engine, geBoolean Enabled);</P>

<P>GENESISAPI geBoolean&#9;geEngine_Activate(geEngine *Engine, geBoolean bActive);</P>

<P>#ifdef _INC_WINDOWS</P>
<P>&#9;// Windows.h must be included before genesis.h for this api to be exposed.</P>
<P>GENESISAPI geBoolean&#9;geEngine_UpdateWindow(geEngine *Engine);</P>
<P>#endif</P>

<P>// geDriver</P>
<P>GENESISAPI geDriver&#9;&#9;*geDriver_SystemGetNextDriver(geDriver_System *DriverSystem, geDriver *Start);</P>
<P>GENESISAPI geDriver_Mode *geDriver_GetNextMode(geDriver *Driver, geDriver_Mode *Start);</P>
<P>GENESISAPI geBoolean&#9;geDriver_GetName(geDriver *Driver, const char **Name);</P>
<P>GENESISAPI geBoolean&#9;geDriver_ModeGetName(geDriver_Mode *Mode, const char **Name);</P>
<P>GENESISAPI geBoolean&#9;geDriver_ModeGetWidthHeight(geDriver_Mode *Mode, int32 *Width, int32 *Height);</P>

<P>//================================================================================</P>
<P>//&#9;Sound Management functions</P>
<P>//================================================================================</P>
<P>#ifdef _INC_WINDOWS</P>
<P>&#9;// Windows.h must be included before genesis.h for this api to be exposed.</P>
<P>GENESISAPI &#9;geSound_System *geSound_CreateSoundSystem(HWND hWnd);</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>GENESISAPI void&#9;&#9;&#9;geSound_DestroySoundSystem(geSound_System *Sound);</P>

<P>&nbsp;</P>
<P>GENESISAPI geSound_Def&#9;   *geSound_LoadSoundDef(geSound_System *SoundS, geVFile *File);</P>
<P>GENESISAPI void&#9;&#9;&#9;&#9;geSound_FreeSoundDef(geSound_System *SoundS, geSound_Def *SoundDef);</P>

<P>GENESISAPI geSound&#9;&#9;   *geSound_PlaySoundDef(geSound_System *SoundS, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geSound_Def *SoundDef, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat Volume, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat Pan, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat Frequency, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geBoolean Loop);</P>
<P>GENESISAPI geBoolean&#9;&#9;geSound_StopSound(geSound_System *SoundS, geSound *Sound);</P>
<P>GENESISAPI geBoolean&#9;&#9;geSound_ModifySound(geSound_System *SoundS, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geSound *Sound, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat Volume, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat Pan, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat Frequency);</P>
<P>GENESISAPI geBoolean&#9;&#9;geSound_SoundIsPlaying(geSound_System *SoundS, geSound *Sound);</P>
<P>GENESISAPI geBoolean&#9;&#9;geSound_SetMasterVolume( geSound_System *SoundS, geFloat Volume );</P>

<P>GENESISAPI void geSound3D_GetConfig(</P>
<P>&#9;&#9;&#9;const geWorld *World, </P>
<P>&#9;&#9;&#9;const geXForm3d *CameraTransform, </P>
<P>&#9;&#9;&#9;const geVec3d *SoundPos, </P>
<P>&#9;&#9;&#9;geFloat Min, </P>
<P>&#9;&#9;&#9;geFloat Ds,</P>
<P>&#9;&#9;&#9;geFloat *Volume,</P>
<P>&#9;&#9;&#9;geFloat *Pan,</P>
<P>&#9;&#9;&#9;geFloat *Frequency);</P>

<P>//================================================================================</P>
<P>//  Path Support</P>
<P>//================================================================================</P>
<P>#include "Path.h"</P>
<P>//================================================================================</P>
<P>//  Motion Support</P>
<P>//================================================================================</P>
<P>#include "Motion.h"</P>
<P>//================================================================================</P>
<P>//  Actor Support</P>
<P>//================================================================================</P>
<P>#include "Actor.h"</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>//================================================================================</P>
<P>//&#9;World Management functions</P>
<P>//================================================================================</P>
<P>GENESISAPI geWorld&#9;&#9;*geWorld_Create(geVFile *File);</P>
<P>GENESISAPI void&#9;&#9;&#9;geWorld_Free(geWorld *World);</P>

<P>// World Actors</P>
<P>GENESISAPI geBoolean&#9;geWorld_RemoveActor    (geWorld *World, geActor *Actor);</P>
<P>GENESISAPI geBoolean    geWorld_AddActor       (geWorld *World, geActor *Actor, uint32 Flags, uint32 UserFlags);</P>
<P>GENESISAPI geBoolean&#9;geWorld_SetActorFlags  (geWorld *World, geActor *Actor, uint32 Flags);</P>

<P>// World Bitmaps</P>
<P>GENESISAPI geBoolean&#9;geWorld_AddBitmap(&#9;&#9;geWorld *World, geBitmap *Bitmap);</P>
<P>GENESISAPI geBoolean&#9;geWorld_RemoveBitmap(&#9;geWorld *World, geBitmap *Bitmap);</P>
<P>GENESISAPI geBoolean&#9;geWorld_HasBitmap(const geWorld *World, const geBitmap *Bitmap);</P>
<P>GENESISAPI geBitmap&#9;&#9;*geWorld_GetBitmapByName(geWorld *World, const char *BitmapName);</P>
<P>GENESISAPI geBoolean&#9;geWorld_BitmapIsVisible(geWorld *World, const geBitmap *Bitmap);</P>

<P>// World BModels</P>
<P>GENESISAPI geWorld_Model&#9;*geWorld_GetNextModel(geWorld *World, geWorld_Model *Start);</P>
<P>GENESISAPI geBoolean&#9;&#9;geWorld_SetModelXForm(geWorld *World, geWorld_Model *Model, const geXForm3d *XForm);</P>
<P>GENESISAPI geBoolean&#9;&#9;geWorld_GetModelXForm(const geWorld *World, const geWorld_Model *Model, geXForm3d *XForm);</P>
<P>GENESISAPI geBoolean&#9;&#9;geWorld_OpenModel(geWorld *World, geWorld_Model *Model, geBoolean Open);</P>
<P>GENESISAPI geBoolean&#9;&#9;geWorld_GetModelRotationalCenter(const geWorld *World, const geWorld_Model *Model, geVec3d *Center);</P>
<P>GENESISAPI geBoolean&#9;&#9;geWorld_ModelGetBBox(const geWorld *World, const geWorld_Model *Model, geVec3d *Mins, geVec3d *Maxs);</P>
<P>GENESISAPI geMotion *&#9;&#9;geWorld_ModelGetMotion(geWorld_Model *Model);</P>

<P>GENESISAPI void&#9;&#9;&#9;*geWorld_ModelGetUserData(const geWorld_Model *Model);</P>
<P>GENESISAPI void&#9;&#9;&#9;geWorld_ModelSetUserData(geWorld_Model *Model, void *UserData);</P>
<P>GENESISAPI void&#9;&#9;&#9;geWorld_ModelSetFlags(geWorld_Model *Model, uint32 ModelFlags);</P>
<P>GENESISAPI uint32&#9;&#9;geWorld_ModelGetFlags(geWorld_Model *Model);</P>

<P>// World Lights</P>
<P>GENESISAPI geLight&#9;&#9;*geWorld_AddLight(geWorld *World);</P>
<P>GENESISAPI void&#9;&#9;&#9;geWorld_RemoveLight(geWorld *World, geLight *Light);</P>
<P>GENESISAPI geBoolean&#9;geWorld_SetLightAttributes(&#9;geWorld *World,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geLight&#9;&#9;*Light, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const&#9;&#9;geVec3d *Pos, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const&#9;&#9;GE_RGBA *RGBA, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;float&#9;&#9;Radius,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geBoolean&#9;CastShadow);</P>
<P>GENESISAPI geBoolean&#9;geWorld_SetLTypeTable(geWorld *World, int32 LType, const char *Table);</P>

<P>// World fog</P>
<P>GENESISAPI geFog&#9;&#9;*geWorld_AddFog(geWorld *World);</P>
<P>GENESISAPI geBoolean&#9;geWorld_RemoveFog(geWorld *World, geFog *Fog);</P>

<P>GENESISAPI geBoolean geFog_SetAttributes(&#9;geFog&#9;&#9;&#9;*Fog, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d&#9;*Pos, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;GE_RGBA&#9;&#9;&#9;*Color,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;float&#9;&#9;&#9;LightBrightness, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;float&#9;&#9;&#9;VolumeBrightness, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;float&#9;&#9;&#9;VolumeRadius);</P>

<P>// World Classes/Entities</P>
<P>GENESISAPI geEntity_EntitySet *geWorld_GetEntitySet(geWorld *World, const char *ClassName);</P>
<P>GENESISAPI geEntity&#9;&#9;*geEntity_EntitySetGetNextEntity(geEntity_EntitySet *EntitySet, geEntity *Entity);</P>
<P>GENESISAPI void&#9;&#9;&#9;*geEntity_GetUserData(geEntity *Entity);</P>
<P>GENESISAPI void&#9;&#9;&#9;geEntity_GetName(const geEntity *Entity, char *Buff, int MaxLen);</P>

<P>// World collision</P>
<P>GENESISAPI geBoolean&#9;geWorld_ModelCollision(&#9;geWorld&#9;&#9;&#9;*World, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geWorld_Model&#9;*Model, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geXForm3d&#9;*DXForm, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;GE_Collision&#9;*Collision);</P>
<P>GENESISAPI geBoolean geWorld_TestModelMove(&#9;geWorld&#9;&#9;&#9;*World, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geWorld_Model&#9;*Model, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geXForm3d&#9;*DXForm, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d&#9;*Mins, const geVec3d *Maxs,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d&#9;*In, geVec3d *Out);</P>

<P>GENESISAPI geBoolean geWorld_Collision(&#9;geWorld *World,&#9;&#9;&#9;&#9;// World to collide with</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d *Mins,&#9;&#9;// Mins of object (in object-space).  This CAN be NULL</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d *Maxs,&#9;&#9;// Maxs of object (in object-space).  This CAN be NULL</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d *Front,&#9;&#9;// Front of line (in world-space)</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d *Back,&#9;&#9;// Back of line (in world-space)</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;uint32 Contents,&#9;&#9;&#9;// Contents to collide with (use GE_CONTENTS_SOLID_CLIP for default)</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;uint32 CollideFlags,&#9;&#9;// To mask out certain object types (GE_COLLIDE_ALL, etc...)</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;uint32 UserFlags,&#9;&#9;&#9;// To mask out actors (refer to geActor_SetUserFlags)</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;GE_CollisionCB *CollisionCB, // A callback to allow user to reject collisions with certain objects)</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;void *Context,&#9;&#9;&#9;&#9;// User data passed through above callback</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;GE_Collision *Col);&#9;&#9;&#9;// Structure filled with info about what was collided with</P>
<P>&#9;// NOTE - Mins/Maxs CAN be NULL.  If you are just testing a point, then use NULL (it's faster!!!).</P>

<P>GENESISAPI geBoolean geWorld_GetContents(geWorld *World, const geVec3d *Pos, const geVec3d *Mins, const geVec3d *Maxs, uint32 Flags, uint32 UserFlags, GE_CollisionCB *CollisionCB, void *Context, GE_Contents *Contents);</P>

<P>// World Polys</P>
<P>GENESISAPI&#9;gePoly *geWorld_AddPolyOnce(geWorld *World, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;GE_LVertex *Verts, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;int32 NumVerts, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geBitmap *Bitmap,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;gePoly_Type Type, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;uint32 RenderFlags,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;float Scale);</P>
<P>GENESISAPI&#9;gePoly *geWorld_AddPoly(geWorld *World, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;GE_LVertex *Verts, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;int32 NumVerts, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geBitmap *Bitmap,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;gePoly_Type Type,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;uint32 RenderFlags,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;float Scale);</P>

<P>GENESISAPI&#9;void geWorld_RemovePoly(geWorld *World, gePoly *Poly);</P>
<P>GENESISAPI&#9;geBoolean gePoly_GetLVertex(gePoly *Poly, int32 Index, GE_LVertex *LVert);</P>
<P>GENESISAPI&#9;geBoolean gePoly_SetLVertex(gePoly *Poly, int32 Index, const GE_LVertex *LVert);</P>

<P>// World visibility</P>
<P>GENESISAPI geBoolean&#9;geWorld_GetLeaf(const geWorld *World, const geVec3d *Pos, int32 *Leaf);</P>
<P>GENESISAPI geBoolean&#9;geWorld_MightSeeLeaf(const geWorld *World, int32 Leaf);</P>

<P>GENESISAPI geBoolean&#9;geWorld_LeafMightSeeLeaf(const geWorld *World, int32 Leaf1, int32 Leaf2, uint32 VisFlags);</P>
<P>&#9;// Checks to see if Leaf1 can see Leaf2</P>
<P>&#9;// Currently VisFlags is not used yet.  It could be used for checking against areas, etc...</P>
<P>&#9;// Eventually you could also pass in a VisObject, that is manipulated with a camera...</P>

<P>GENESISAPI geBoolean GENESISCC geWorld_IsActorPotentiallyVisible(const geWorld *World, const geActor *Actor, const geCamera *Camera);</P>

<P>&nbsp;</P>
<P>//================================================================================</P>
<P>//&#9;Camera Management functions</P>
<P>//================================================================================</P>

<P>GENESISAPI geCamera&#9;&#9;&#9;*GENESISCC geCamera_Create(geFloat Fov, const geRect *Rect);</P>
<P>GENESISAPI void&#9;&#9;&#9;&#9;GENESISCC geCamera_Destroy(geCamera **pCamera);</P>
<P>GENESISAPI void&#9;&#9;&#9;&#9;GENESISCC geCamera_SetZScale(geCamera *Camera, geFloat ZScale);</P>
<P>GENESISAPI geFloat&#9;&#9;&#9;GENESISCC geCamera_GetZScale(const geCamera *Camera);</P>
<P>GENESISAPI void&#9;&#9;&#9;&#9;GENESISCC geCamera_SetAttributes(geCamera *Camera,geFloat Fov, const geRect *Rect);</P>
<P>GENESISAPI void&#9;&#9;&#9;&#9;GENESISCC geCamera_GetClippingRect(const geCamera *Camera, geRect *Rect);</P>

<P>GENESISAPI void&#9;&#9;&#9;&#9;GENESISCC geCamera_ScreenPointToWorld(const geCamera&#9;*Camera,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;int32&#9;&#9;&#9; ScreenX,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;int32&#9;&#9;&#9; ScreenY,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geVec3d&#9;&#9;&#9;*Vector&#9;);</P>
<P>GENESISAPI void&#9;GENESISCC geCamera_Project(const geCamera&#9;*Camera, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d&#9;*PointInCameraSpace, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geVec3d&#9;&#9;&#9;*ProjectedPoint);</P>
<P>GENESISAPI void GENESISCC geCamera_Transform(const geCamera *Camera, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d *WorldSpacePoint, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;  geVec3d *CameraSpacePoint);</P>

<P>GENESISAPI void GENESISCC geCamera_TransformArray(const geCamera *Camera, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d *WorldSpacePointPtr, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;      geVec3d *CameraSpacePointPtr,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;int count);</P>

<P>GENESISAPI void GENESISCC geCamera_TransformAndProject(const geCamera *Camera,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const&#9;geVec3d *Point, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geVec3d *ProjectedPoint);</P>

<P>GENESISAPI void GENESISCC geCamera_TransformAndProjectArray(const geCamera *Camera, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d *WorldSpacePointPtr, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;      geVec3d *ProjectedSpacePointPtr,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;int count);</P>
<P>&#9;</P>
<P>GENESISAPI void GENESISCC geCamera_TransformAndProjectL(const geCamera *Camera,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const GE_LVertex *Point, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;GE_TLVertex *ProjectedPoint);</P>
<P>&#9;&#9;</P>
<P>GENESISAPI void GENESISCC geCamera_TransformAndProjectLArray(const geCamera *Camera, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const GE_LVertex *WorldSpacePointPtr, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;      GE_TLVertex *ProjectedSpacePointPtr,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;int count);</P>

<P>&nbsp;</P>
<P>GENESISAPI geBoolean&#9;&#9;GENESISCC geCamera_SetWorldSpaceXForm(geCamera *Camera, const geXForm3d *XForm);</P>
<P>GENESISAPI geBoolean&#9;&#9;GENESISCC geCamera_SetWorldSpaceVisXForm(geCamera *Camera, const geXForm3d *XForm);</P>
<P>GENESISAPI const geXForm3d&#9;*GENESISCC geCamera_GetWorldSpaceXForm( const geCamera *Camera);</P>
<P>GENESISAPI const geXForm3d * GENESISCC geCamera_GetWorldSpaceVisXForm( const geCamera *Camera);</P>
<P>GENESISAPI geBoolean GENESISCC geCamera_ConvertWorldSpaceToCameraSpace(const geXForm3d *WXForm, geXForm3d *CXForm);</P>

<P>&nbsp;</P>
<P>//================================================================================</P>
<P>// NetPlay Management functions</P>
<P>//================================================================================</P>

<P>typedef uint32&#9;&#9;&#9;&#9;geCSNetMgr_NetID;</P>
<P>#define&#9;MAX_CLIENT_NAME&#9;&#9;256</P>

<P>// Types for messages received from GE_ReceiveSystemMessage</P>
<P>typedef enum </P>
<P>{</P>
<P>&#9;NET_MSG_NONE,&#9;&#9;&#9;&#9;&#9;// No msg</P>
<P>&#9;NET_MSG_USER,&#9;&#9;&#9;&#9;&#9;// User message</P>
<P>&#9;NET_MSG_CREATE_CLIENT,&#9;&#9;&#9;// A new client has joined in</P>
<P>&#9;NET_MSG_DESTROY_CLIENT,&#9;&#9;&#9;// An existing client has left</P>
<P>&#9;NET_MSG_HOST,&#9;&#9;&#9;&#9;&#9;// We are the server now</P>
<P>&#9;NET_MSG_SESSIONLOST,&#9;&#9;&#9;// Connection was lost</P>
<P>&#9;NET_MSG_SERVER_ID,&#9;&#9;&#9;&#9;// Internal, for hand shaking process</P>
<P>} geCSNetMgr_NetMsgType;</P>

<P>&nbsp;</P>
<P>typedef struct</P>
<P>{</P>
<P>&#9;char&#9;&#9;&#9;&#9;Name[MAX_CLIENT_NAME];</P>
<P>&#9;geCSNetMgr_NetID&#9;Id;</P>
<P>} geCSNetMgr_NetClient;</P>

<P>#ifdef _INC_WINDOWS</P>
<P>&#9;// Windows.h must be included before genesis.h for this api to be exposed.</P>
<P>&#9;typedef struct geCSNetMgr_NetSession</P>
<P>&#9;{</P>
<P>&#9;&#9;char&#9;&#9;SessionName[200];&#9;&#9;&#9;&#9;&#9;// Description of Service provider</P>
<P>&#9;&#9;GUID&#9;&#9;Guid;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Service Provider GUID</P>
<P>&#9;} geCSNetMgr_NetSession;</P>
<P>GENESISAPI &#9;geBoolean&#9;&#9;GENESISCC geCSNetMgr_FindSession(geCSNetMgr *M, const char *IPAdress, geCSNetMgr_NetSession **SessionList, int32 *SessionNum );</P>
<P>GENESISAPI &#9;geBoolean&#9;&#9;GENESISCC geCSNetMgr_JoinSession(geCSNetMgr *M, const char *Name, const geCSNetMgr_NetSession* Session);</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>GENESISAPI geCSNetMgr&#9;*&#9;GENESISCC geCSNetMgr_Create(void);</P>
<P>GENESISAPI void&#9;&#9;&#9;&#9;GENESISCC geCSNetMgr_Destroy(geCSNetMgr **ppM);</P>
<P>GENESISAPI geBoolean&#9;&#9;GENESISCC geCSNetMgr_ReceiveFromServer(geCSNetMgr *M, geCSNetMgr_NetMsgType *Type, int32 *Size, uint8 **Data);</P>
<P>GENESISAPI geBoolean&#9;&#9;GENESISCC geCSNetMgr_ReceiveFromClient(geCSNetMgr *M, geCSNetMgr_NetMsgType *Type, geCSNetMgr_NetID *IdClient, int32 *Size, uint8 **Data);</P>
<P>GENESISAPI geBoolean&#9;&#9;GENESISCC geCSNetMgr_ReceiveSystemMessage(geCSNetMgr *M, geCSNetMgr_NetID IdFor, geCSNetMgr_NetMsgType *Type, geCSNetMgr_NetClient *Client);</P>
<P>GENESISAPI geBoolean&#9;&#9;GENESISCC geCSNetMgr_ReceiveAllMessages(geCSNetMgr *M, geCSNetMgr_NetID *IdFrom, geCSNetMgr_NetID *IdTo, geCSNetMgr_NetMsgType *Type, int32 *Size, uint8 **Data);</P>
<P>GENESISAPI geCSNetMgr_NetID&#9;GENESISCC geCSNetMgr_GetServerID(geCSNetMgr *M);</P>
<P>GENESISAPI geCSNetMgr_NetID&#9;GENESISCC geCSNetMgr_GetOurID(geCSNetMgr *M);</P>
<P>GENESISAPI geCSNetMgr_NetID&#9;GENESISCC geCSNetMgr_GetAllPlayerID(geCSNetMgr *M);</P>
<P>GENESISAPI geBoolean&#9;&#9;GENESISCC geCSNetMgr_WeAreTheServer(geCSNetMgr *M);</P>
<P>GENESISAPI geBoolean&#9;&#9;GENESISCC geCSNetMgr_StartSession(geCSNetMgr *M, const char *SessionName, const char *PlayerName );</P>
<P>GENESISAPI geBoolean&#9;&#9;GENESISCC geCSNetMgr_StopSession(geCSNetMgr *M);</P>
<P>GENESISAPI geBoolean&#9;&#9;GENESISCC geCSNetMgr_SendToServer(geCSNetMgr *M, geBoolean Guaranteed, uint8 *Data, int32 DataSize);</P>
<P>GENESISAPI geBoolean&#9;&#9;GENESISCC geCSNetMgr_SendToClient(geCSNetMgr *M, geCSNetMgr_NetID To, geBoolean Guaranteed, uint8 *Data, int32 DataSize);</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558908"><A NAME="_Toc452379808"><A NAME="_Toc454156717">Getypes.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  GeTypes.h                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Description: Genesis Types (not primitive enough for basetype)                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GE_TYPES_H</P>
<P>#define GE_TYPES_H</P>

<P>#include "BaseType.h"</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>//</P>
<P>//&#9;Collision defines (for geWorld_Collision)</P>
<P>//</P>
<P>#define GE_COLLIDE_MESHES&#9;&#9;&#9;(1&lt;&lt;0)</P>
<P>#define GE_COLLIDE_MODELS&#9;&#9;&#9;(1&lt;&lt;1)</P>
<P>#define GE_COLLIDE_ACTORS&#9;&#9;&#9;(1&lt;&lt;2)</P>
<P>#define GE_COLLIDE_NO_SUB_MODELS&#9;(1&lt;&lt;3)</P>
<P>#define GE_COLLIDE_ALL&#9;&#9;&#9;&#9;(GE_COLLIDE_MESHES | GE_COLLIDE_MODELS | GE_COLLIDE_ACTORS)</P>

<P>//</P>
<P>// Actor flags (geWorld_AddActor)</P>
<P>//</P>
<P>#define GE_ACTOR_RENDER_NORMAL&#9;&#9;&#9;(1&lt;&lt;0)&#9;&#9;// Render in normal views</P>
<P>#define GE_ACTOR_RENDER_MIRRORS&#9;&#9;&#9;(1&lt;&lt;1)&#9;&#9;// Render in mirror views</P>
<P>#define GE_ACTOR_RENDER_ALWAYS&#9;&#9;&#9;(1&lt;&lt;2)&#9;&#9;// Render always, skipping all visibility tests</P>
<P>#define GE_ACTOR_COLLIDE&#9;&#9;&#9;&#9;(1&lt;&lt;3)&#9;&#9;// Collide when calling geWorld_Collision</P>

<P>//</P>
<P>//&#9;Model flags (geWorld_ModelSetFlags)</P>
<P>//</P>
<P>#define GE_MODEL_RENDER_NORMAL&#9;&#9;&#9;(1&lt;&lt;0)&#9;&#9;// Render in normal views</P>
<P>#define GE_MODEL_RENDER_MIRRORS&#9;&#9;&#9;(1&lt;&lt;1)&#9;&#9;// Render in mirror views</P>
<P>#define GE_MODEL_RENDER_ALWAYS&#9;&#9;&#9;(1&lt;&lt;2)&#9;&#9;// Render always, skipping all visibility tests</P>
<P>#define GE_MODEL_COLLIDE&#9;&#9;&#9;&#9;(1&lt;&lt;3)&#9;&#9;// Collide when calling geWorld_Collision</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;float r, g, b, a;</P>
<P>} GE_RGBA;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;Left;</P>
<P>&#9;int32&#9;Right;</P>
<P>&#9;int32&#9;Top;</P>
<P>&#9;int32&#9;Bottom;</P>
<P>} GE_Rect;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;geFloat MinX,MaxX;</P>
<P>&#9;geFloat MinY,MaxY;</P>
<P>} geFloatRect;</P>

<P>// Lit vertex</P>
<P>typedef struct</P>
<P>{</P>
<P>&#9;// FIXME:  Convert 3d X,Y,Z to geVec3d</P>
<P>&#9;float X, Y, Z;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// 3d vertex</P>
<P>&#9;float u, v;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Uv's</P>
<P>&#9;// FIXME:  Convert r,g,b,a to GE_RGBA</P>
<P>&#9;float r, g, b, a;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// color</P>
<P>} GE_LVertex;</P>

<P>// Transformed Lit vertex</P>
<P>typedef struct</P>
<P>{</P>
<P>&#9;float x, y, z;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// screen points</P>
<P>&#9;float u, v;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Uv's</P>
<P>&#9;float r, g, b, a;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// color</P>
<P>} GE_TLVertex;</P>

<P>typedef GE_Rect geRect;</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif GETYPES_H</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558909"><A NAME="_Toc452379809"><A NAME="_Toc454156718">Matrix33.h</A></A></A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  MATRIX33.H                                                                          */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jason Wood                                                                  */</P>
<P>/*  Description: Pure 3x3 matrix                                                        */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef&#9;MATRIX33_H</P>
<P>#define MATRIX33_H</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;float x[3][3];</P>
<P>}&#9;Matrix33;</P>

<P>void Matrix33_Copy(const Matrix33* m, Matrix33* c);</P>
<P>void Matrix33_SetIdentity(Matrix33* m);</P>
<P>void Matrix33_Add(const Matrix33* m1, const Matrix33* m2, Matrix33* res);</P>
<P>void Matrix33_Subtract(const Matrix33* m1, const Matrix33* m2, Matrix33* res);</P>
<P>void Matrix33_MultiplyVec3d(const Matrix33* m, const geVec3d* v, geVec3d* res);</P>
<P>void Matrix33_Multiply(const Matrix33* m1, const Matrix33* m2, Matrix33* res);</P>
<P>void Matrix33_MultiplyScalar(float s, const Matrix33* m, Matrix33* res);</P>
<P>void Matrix33_GetTranspose(const Matrix33* m, Matrix33* t);</P>
<P>void Matrix33_GetInverse(const Matrix33* m, Matrix33* inv);</P>
<P>void Matrix33_MakeCrossProductMatrix33(const geVec3d* v, Matrix33* m);</P>
<P>void Matrix33_ExtractFromXForm3d(const geXForm3d* xform, Matrix33* m);</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558910"><A NAME="_Toc452379810"><A NAME="_Toc454156719">Motion.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  MOTION.H&#9;                                                                        */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Mike Sandige&#9;                                                            */</P>
<P>/*  Description: Motion interface.&#9;&#9;&#9;&#9;&#9;                                    */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GE_MOTION_H</P>
<P>#define GE_MOTION_H</P>

<P>/*&#9;motion</P>

<P>&#9;This object is a list of named Path objects</P>

<P>*/</P>

<P>#include &lt;stdio.h&gt;</P>
<P>#include "basetype.h"</P>
<P>#include "path.h"</P>
<P>#include "vfile.h"</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>// GENESIS_PUBLIC_APIS</P>
<P>typedef struct geMotion geMotion;</P>

<P>GENESISAPI geMotion *GENESISCC geMotion_Create(geBoolean ManageNames);</P>

<P>GENESISAPI void GENESISCC geMotion_Destroy(geMotion **PM);</P>

<P>// GENESIS_PRIVATE_APIS</P>

<P>GENESISAPI geBoolean GENESISCC geMotion_IsValid(const geMotion *M);</P>

<P>&#9;// AddPath adds a reference of P to the motion M.  Ownership is shared - The caller must destroy P.</P>
<P>GENESISAPI geBoolean GENESISCC geMotion_AddPath(geMotion *M, gePath *P,const char *Name,int *Index);</P>

<P>GENESISAPI geBoolean GENESISCC geMotion_HasNames(const geMotion *M);</P>
<P>GENESISAPI int32 GENESISCC geMotion_GetNameChecksum(const geMotion *M);</P>

<P>GENESISAPI geBoolean GENESISCC geMotion_RemoveNames(geMotion *M);</P>

<P>GENESISAPI void GENESISCC geMotion_SampleChannels(const geMotion *M, int PathIndex, geFloat Time, geQuaternion *Rotation, geVec3d *Translation);</P>
<P>GENESISAPI geBoolean GENESISCC geMotion_SampleChannelsNamed(const geMotion *M, const char *PathName, geFloat Time, geQuaternion *Rotation, geVec3d *Translation);</P>

<P>GENESISAPI void GENESISCC geMotion_Sample(const geMotion *M, int PathIndex, geFloat Time, geXForm3d *Transform);</P>
<P>GENESISAPI geBoolean GENESISCC geMotion_SampleNamed(const geMotion *M, const char *PathName, geFloat Time, geXForm3d *Transform);</P>

<P>&#9;// the returned Paths from _Get functions should not be destroyed.  </P>
<P>&#9;// if ownership is desired, call gePath_CreateRef() to create another owner. </P>
<P>&#9;// an 'owner' has access to the object regardless of the number of other owners, and </P>
<P>&#9;// an owner must call the object's destroy method to relinquish ownership</P>
<P>GENESISAPI gePath *GENESISCC geMotion_GetPathNamed(const geMotion *M,const char *Name);</P>
<P>GENESISAPI const char *GENESISCC geMotion_GetNameOfPath(const geMotion *M, int Index);</P>

<P>// GENESIS_PUBLIC_APIS</P>
<P>GENESISAPI gePath *GENESISCC geMotion_GetPath(const geMotion *M,int Index);</P>
<P>GENESISAPI int GENESISCC geMotion_GetPathCount(const geMotion *M);</P>

<P>&nbsp;</P>
<P>GENESISAPI geBoolean GENESISCC geMotion_SetName(geMotion *M, const char * Name);</P>
<P>GENESISAPI const char *GENESISCC geMotion_GetName(const geMotion *M);</P>

<P>// GENESIS_PRIVATE_APIS</P>

<P>&#9;// support for compound motions.  A motion can either have sub-motions, or be single motion.</P>
<P>&#9;// these functions support motions that have sub-motions.</P>
<P>GENESISAPI int GENESISCC geMotion_GetSubMotionCount(const geMotion*M);</P>

<P>&#9;// the returned motions from these _Get functions should not be destroyed.  </P>
<P>&#9;// if ownership is desired, call geMotion_CreateRef() to create another owner. </P>
<P>&#9;// an 'owner' has access to the object regardless of the number of other owners, and </P>
<P>&#9;// an owner must call the object's destroy method to relinquish ownership</P>
<P>GENESISAPI geMotion *GENESISCC geMotion_GetSubMotion(const geMotion *M,int Index);</P>
<P>GENESISAPI geMotion *GENESISCC geMotion_GetSubMotionNamed(const geMotion *M,const char *Name);</P>
<P>GENESISAPI geBoolean GENESISCC geMotion_AddSubMotion(</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geMotion *ParentMotion,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat TimeScale,&#9;&#9;&#9;// Scale factor for this submotion</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat TimeOffset,&#9;&#9;&#9;// Time in parent motion when submotion should start</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geMotion *SubMotion,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat StartTime,&#9;&#9;&#9;// Blend start time (relative to submotion)</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat StartMagnitude,&#9;&#9;// Blend start magnitude (0..1)</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat EndTime,&#9;&#9;&#9;// Blend ending time (relative to submotion)</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geFloat EndMagnitude,&#9;&#9;// Blend ending magnitude (0..1)</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geXForm3d *Transform,&#9;// Base transform to apply to this submotion</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;int *Index);&#9;&#9;&#9;&#9;// returned motion index</P>

<P>GENESISAPI geMotion *GENESISCC  geMotion_RemoveSubMotion(geMotion *ParentMotion, int SubMotionIndex);</P>

<P>// Get/Set submotion time offset.  The time offset is the offset into the </P>
<P>// compound (parent) motion at which the submotion should start.</P>
<P>GENESISAPI geFloat   GENESISCC  geMotion_GetTimeOffset( const geMotion *M,int SubMotionIndex );</P>
<P>GENESISAPI geBoolean  GENESISCC geMotion_SetTimeOffset( geMotion *M,int SubMotionIndex,geFloat TimeOffset );</P>

<P>// Get/Set submotion time scale.  Time scaling is applied to the submotion after the TimeOffset</P>
<P>// is applied.  The formula is:  (CurrentTime - TimeOffset) * TimeScale</P>
<P>GENESISAPI geFloat   GENESISCC  geMotion_GetTimeScale( const geMotion *M,int SubMotionIndex );</P>
<P>GENESISAPI geBoolean  GENESISCC geMotion_SetTimeScale( geMotion *M,int SubMotionIndex,geFloat TimeScale );</P>

<P>// Get blending amount for a particular submotion.  The Time parameter is parent-relative.</P>
<P>GENESISAPI geFloat    GENESISCC geMotion_GetBlendAmount( const geMotion *M, int SubMotionIndex, geFloat Time);</P>

<P>// Get/Set blending path.  The keyframe times in the blend path are relative to the submotion.</P>
<P>GENESISAPI gePath    *GENESISCC geMotion_GetBlendPath( const geMotion *M,int SubMotionIndex );</P>
<P>GENESISAPI geBoolean  GENESISCC geMotion_SetBlendPath( geMotion *M,int SubMotionIndex, gePath *Blend );</P>

<P>GENESISAPI const geXForm3d *GENESISCC geMotion_GetBaseTransform( const geMotion *M,int SubMotionIndex );</P>
<P>GENESISAPI geBoolean  GENESISCC geMotion_SetBaseTransform( geMotion *M,int SubMotionIndex, geXForm3d *BaseTransform );</P>
<P>GENESISAPI geBoolean  GENESISCC geMotion_GetTransform(const geMotion *M, geFloat Time, geXForm3d *Transform);</P>
<P>// GENESIS_PUBLIC_APIS</P>

<P>&#9;// gets time of first key and time of last key (as if motion did not loop)</P>
<P>&#9;// if there are no paths in the motion: returns GE_FALSE and times are not set</P>
<P>&#9;// otherwise returns GE_TRUE</P>
<P>&#9;//</P>
<P>&#9;// For a compound motion, GetTimeExtents will return the extents of the scaled submotions.</P>
<P>&#9;// For a single motion, no scaling is applied.</P>
<P>GENESISAPI geBoolean GENESISCC geMotion_GetTimeExtents(const geMotion *M,geFloat *StartTime,geFloat *EndTime);</P>

<P>// Only one event is allowed per time key.</P>

<P>GENESISAPI geBoolean GENESISCC geMotion_InsertEvent(geMotion *M, geFloat tKey, const char* String);</P>
<P>&#9;// Inserts the new event and corresponding string.</P>

<P>GENESISAPI geBoolean GENESISCC geMotion_DeleteEvent(geMotion *M, geFloat tKey);</P>
<P>&#9;// Deletes the event</P>

<P>GENESISAPI void GENESISCC geMotion_SetupEventIterator(</P>
<P>&#9;geMotion *M,</P>
<P>&#9;geFloat StartTime,&#9;&#9;&#9;&#9;// Inclusive search start</P>
<P>&#9;geFloat EndTime);&#9;&#9;&#9;&#9;// Non-inclusive search stop</P>
<P>&#9;// For searching or querying the array for events between two times</P>
<P>&#9;// times are compaired [StartTime,EndTime), '[' is inclusive, ')' is </P>
<P>&#9;// non-inclusive.  This prepares the geMotion_GetNextEvent() function.</P>

<P>GENESISAPI geBoolean GENESISCC geMotion_GetNextEvent(</P>
<P>&#9;geMotion *M,&#9;&#9;&#9;&#9;&#9;&#9;// Event list to iterate</P>
<P>&#9;geFloat *pTime,&#9;&#9;&#9;&#9;// Return time, if found</P>
<P>&#9;const char **ppEventString);&#9;// Return data, if found</P>
<P>&#9;// Iterates from StartTime to EndTime as setup in geMotion_SetupEventIterator()</P>
<P>&#9;// and for each event between these times [StartTime,EndTime)</P>
<P>&#9;// this function will return Time and EventString returned for that event</P>
<P>&#9;// and the iterator will be positioned for the next search.  When there </P>
<P>&#9;// are no more events in the range, this function will return GE_FALSE (Time</P>
<P>&#9;// will be 0 and ppEventString will be empty).</P>

<P>GENESISAPI geBoolean GENESISCC geMotion_GetEventExtents(const geMotion *M,</P>
<P>&#9;&#9;&#9;geFloat *FirstEventTime,</P>
<P>&#9;&#9;&#9;geFloat *LastEventTime);</P>
<P>&#9;// returns the time associated with the first and last events </P>
<P>&#9;// returns GE_FALSE if there are no events (and Times are not set)</P>

<P>&nbsp;</P>
<P>// GENESIS_PRIVATE_APIS</P>
<P>GENESISAPI geMotion *GENESISCC geMotion_CreateFromFile(geVFile *f);</P>
<P>GENESISAPI geBoolean GENESISCC geMotion_WriteToFile(const geMotion *M, geVFile *f);</P>
<P>GENESISAPI geBoolean GENESISCC geMotion_WriteToBinaryFile(const geMotion *M,geVFile *pFile);</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><FONT FACE="Arial" SIZE=1><P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558911"><A NAME="_Toc452379811"><A NAME="_Toc454156720">Path.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  PATH.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Mike Sandige&#9;                                                            */</P>
<P>/*  Description: Time-indexed keyframe creation, maintenance, and sampling.&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GE_PATH_H</P>
<P>#define GE_PATH_H</P>

<P>#include "basetype.h"</P>
<P>#include "xform3d.h"</P>
<P>#include "quatern.h"</P>
<P>#include "vfile.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>// GENESIS_PUBLIC_APIS</P>
<P>typedef struct _gePath gePath;</P>

<P>#define GE_PATH_ROTATION_CHANNEL    1</P>
<P>#define GE_PATH_TRANSLATION_CHANNEL 2</P>

<P>#define GE_PATH_ALL_CHANNELS (GE_PATH_ROTATION_CHANNEL | GE_PATH_TRANSLATION_CHANNEL)</P>

<P>#ifndef GE_PATH_ENUMS</P>
<P>&#9;#define GE_PATH_ENUMS</P>
<P>&#9;typedef enum </P>
<P>&#9;{</P>
<P>&#9;&#9;GE_PATH_INTERPOLATE_LINEAR  = 0,&#9;// linear blend for translation or rotation channel</P>
<P>&#9;&#9;GE_PATH_INTERPOLATE_HERMITE,&#9;&#9;// hermite cubic spline for translation channel</P>
<P>&#9;&#9;GE_PATH_INTERPOLATE_SLERP,&#9;&#9;&#9;// spherical-linear blend for rotation channel</P>
<P>&#9;&#9;GE_PATH_INTERPOLATE_SQUAD,&#9;&#9;&#9;// higher order blend for rotation channel 'G1' continuity</P>
<P>&#9;&#9;//GE_PATH_INTEROPLATE_TRIPOD,&#9;&#9; // not supported yet.</P>
<P>&#9;&#9;GE_PATH_INTERPOLATE_HERMITE_ZERO_DERIV = 7&#9;// hermite cubic with zero derivative at keyframes ('easing' curve)</P>
<P>&#9;}gePath_Interpolator;</P>
<P>#endif</P>

<P>GENESISAPI void GENESISCC gePath_CreateRef( gePath *P );</P>

<P>GENESISAPI gePath *GENESISCC gePath_Create(</P>
<P>&#9;gePath_Interpolator TranslationInterpolation,&#9;// type of interpolation for translation channel</P>
<P>&#9;gePath_Interpolator RotationInterpolation,&#9;// type of interpolation for rotation channel</P>
<P>&#9;geBoolean Looped);&#9;&#9;&#9;&#9;// True if end of path is connected to head</P>
<P>&#9;// creates new gePath</P>
<P>&#9;//  A looping path should have the same first &amp; last point.  The path</P>
<P>&#9;//  generator will choose arbitrarily between these points for a </P>
<P>&#9;//  sample exactly at the end of the loop.</P>

<P>GENESISAPI gePath *GENESISCC gePath_CreateCopy( const gePath *P );</P>
<P>&#9;</P>
<P>GENESISAPI void GENESISCC gePath_Destroy(gePath **PP);&#9;&#9;</P>
<P>&#9;// destroys path *PP</P>

<P>//------------------ time based keyframe operations</P>
<P>GENESISAPI geBoolean GENESISCC gePath_InsertKeyframe(</P>
<P>&#9;gePath *P, </P>
<P>&#9;int ChannelMask, </P>
<P>&#9;geFloat Time, </P>
<P>&#9;const geXForm3d *Matrix); </P>
<P>&#9;// inserts a keyframe at a specific time.</P>
<P>&#9;</P>
<P>GENESISAPI geBoolean GENESISCC gePath_DeleteKeyframe(</P>
<P>&#9;gePath *P,</P>
<P>&#9;int Index,</P>
<P>&#9;int ChannelMask); </P>
<P>&#9;// deletes the nth keyframe</P>

<P>GENESISAPI geBoolean GENESISCC gePath_GetTimeExtents(</P>
<P>&#9;const gePath *P,</P>
<P>&#9;geFloat *StartTime, </P>
<P>&#9;geFloat *EndTime);</P>
<P>&#9;// gets the time for the first and last keys in the path (ignoring looping)</P>
<P>&#9;// if there are no keys, return GE_FALSE and times are not set.</P>
<P>&#9;// returns GE_TRUE if there are keys.</P>

<P>//----------------- index based keyframe operations</P>
<P>GENESISAPI void GENESISCC gePath_GetKeyframe(</P>
<P>&#9;const gePath *P, </P>
<P>&#9;int Index,&#9;&#9;&#9;&#9;// gets keyframe[index]</P>
<P>&#9;int Channel,&#9;&#9;&#9;// for this channel</P>
<P>&#9;geFloat *Time,&#9;&#9;&#9;// returns the time of the keyframe</P>
<P>&#9;geXForm3d *Matrix);&#9;&#9;// returns the matrix of the keyframe</P>
<P>&#9;// retrieves keyframe[index], and it's time</P>

<P>GENESISAPI int GENESISCC gePath_GetKeyframeCount(const gePath *P,int Channel);</P>
<P>&#9;// retrieves count of keyframes for a specific channel</P>

<P>GENESISAPI int GENESISCC gePath_GetKeyframeIndex(const gePath *P, int Channel, geFloat Time);</P>
<P>&#9;// retrieves the index of the keyframe at a specific time for a specific channel</P>

<P>//----------------- sampling a path  (time based)</P>
<P>GENESISAPI void GENESISCC gePath_Sample(const gePath *P, geFloat Time,geXForm3d *Matrix);</P>
<P>&#9;// returns a transform matrix sampled at 'Time'.</P>
<P>&#9;// p is not const because information is cached in p for next sample</P>

<P>// GENESIS_PRIVATE_APIS</P>
<P>void GENESISCC gePath_SampleChannels(</P>
<P>&#9;const gePath *P, </P>
<P>&#9;geFloat Time, </P>
<P>&#9;geQuaternion *Rotation, </P>
<P>&#9;geVec3d *Translation);</P>
<P>&#9;// returns a rotation and a translation for the path at 'Time'</P>
<P>&#9;// p is not const because information is cached in p for next sample</P>

<P>GENESISAPI geBoolean GENESISCC gePath_OffsetTimes(gePath *P, </P>
<P>&#9;int StartingIndex, int ChannelMask, geFloat TimeOffset );</P>
<P>&#9;&#9;// slides all samples in path starting with StartingIndex down by TimeOffset</P>

<P>GENESISAPI geBoolean GENESISCC gePath_ModifyKeyframe(</P>
<P>&#9;gePath *P,</P>
<P>&#9;int Index,</P>
<P>&#9;int ChannelMask,</P>
<P>&#9;const geXForm3d *Matrix);</P>
<P>&#9;</P>

<P>// GENESIS_PUBLIC_APIS</P>

<P>//------------------ saving/loading a path</P>
<P>GENESISAPI gePath* GENESISCC gePath_CreateFromFile(geVFile *F);</P>
<P>&#9;// loads a file  (binary or ascii)</P>

<P>GENESISAPI geBoolean GENESISCC gePath_WriteToFile(const gePath *P, geVFile *F);</P>
<P>&#9;// dumps formatted ascii to the file.  </P>

<P>GENESISAPI geBoolean GENESISCC gePath_WriteToBinaryFile(const gePath *P, geVFile *F);</P>
<P>&#9;// dumps a minimal binary image for fastest reading</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558912"><A NAME="_Toc452379812"><A NAME="_Toc454156721">PhysicsJoint.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  PHYSICSJOINT.H                                                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jason Wood                                                                  */</P>
<P>/*  Description: Rigid body joint interface                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef&#9;PHYSICSJOINT_H</P>
<P>#define PHYSICSJOINT_H</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>typedef enum</P>
<P>{</P>
<P>&#9;JT_WORLD = 0,</P>
<P>&#9;JT_SPHERICAL,</P>
<P>&#9;JT_PTTOPATH,</P>
<P>&#9;JT_PTTOSURFACE</P>
<P>}&#9;gePhysicsJoint_Kind;</P>

<P>typedef struct gePhysicsJoint gePhysicsJoint;</P>

<P>////////////////////////////////////////////////////////////////////////////////////////////////////</P>
<P>// ctor / dtor</P>

<P>//gePhysicsJoint* gePhysicsJoint_Create(ItemJoint* pItemJoint);</P>
<P>GENESISAPI gePhysicsJoint * GENESISCC gePhysicsJoint_Create(gePhysicsJoint_Kind Kind, const geVec3d *Location, </P>
<P>&#9;float assemblyRate, gePhysicsObject *PS1, gePhysicsObject *PS2, float physicsScale);</P>
<P>GENESISAPI geBoolean GENESISCC gePhysicsJoint_Destroy(gePhysicsJoint** ppPhysjnt);</P>

<P>////////////////////////////////////////////////////////////////////////////////////////////////////////////</P>
<P>// functions</P>

<P>GENESISAPI gePhysicsJoint_Kind GENESISCC gePhysicsJoint_GetType(const gePhysicsJoint* pPhysjnt);</P>
<P>GENESISAPI void GENESISCC gePhysicsJoint_GetLocationA(const gePhysicsJoint* pPhysjnt, geVec3d* pLoc);</P>
<P>GENESISAPI void GENESISCC gePhysicsJoint_GetLocationB(const gePhysicsJoint* pPhysjnt, geVec3d* pLoc);</P>
<P>GENESISAPI void GENESISCC gePhysicsJoint_SetLocationA(gePhysicsJoint* pPhysjnt, const geVec3d* pLoc);</P>
<P>GENESISAPI void GENESISCC gePhysicsJoint_SetLocationB(gePhysicsJoint* pPhysjnt, const geVec3d* pLoc);</P>
<P>GENESISAPI void GENESISCC gePhysicsJoint_GetLocationAInWorldSpace(const gePhysicsJoint* pPhysjnt, geVec3d* pLoc);</P>
<P>GENESISAPI void GENESISCC gePhysicsJoint_GetLocationBInWorldSpace(const gePhysicsJoint* pPhysjnt, geVec3d* pLoc);</P>
<P>GENESISAPI void GENESISCC gePhysicsJoint_SetLocationAInWorldSpace(gePhysicsJoint* pPhysjnt, const geVec3d* pLoc);</P>
<P>GENESISAPI void GENESISCC gePhysicsJoint_SetLocationBInWorldSpace(gePhysicsJoint* pPhysjnt, const geVec3d* pLoc);</P>
<P>GENESISAPI gePhysicsObject* GENESISCC gePhysicsJoint_GetObject1(const gePhysicsJoint* pPhysjnt);</P>
<P>GENESISAPI gePhysicsObject* GENESISCC gePhysicsJoint_GetObject2(const gePhysicsJoint* pPhysjnt);</P>
<P>GENESISAPI float GENESISCC gePhysicsJoint_GetAssemblyRate(const gePhysicsJoint* pPhysjnt);</P>
<P>GENESISAPI void GENESISCC gePhysicsJoint_SetAssemblyRate(gePhysicsJoint* pPhysjnt, float assemblyRate);</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558913"><A NAME="_Toc452379813"><A NAME="_Toc454156722">PhysicsObject.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  PHYSICSOBJECT.H                                                                     */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jason Wood                                                                  */</P>
<P>/*  Description: Constrained rigid body interface                                       */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef&#9;PHYSICSOBJECT_H</P>
<P>#define PHYSICSOBJECT_H</P>

<P>#include "matrix33.h"</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>#define PHYSICSOBJECT_GRAVITY&#9;&#9;&#9;&#9;(-3.9f)</P>

<P>typedef struct gePhysicsObject gePhysicsObject;</P>

<P>////////////////////////////////////////////////////////////////////////////////////////////////////////////</P>
<P>// ctor/dtor</P>

<P>GENESISAPI gePhysicsObject * GENESISCC gePhysicsObject_Create(</P>
<P>&#9;const geVec3d *StartLocation,</P>
<P>&#9;float mass,</P>
<P>&#9;geBoolean IsAffectedByGravity,</P>
<P>&#9;geBoolean RespondsToForces,</P>
<P>&#9;float linearDamping,</P>
<P>&#9;float angularDamping,</P>
<P>&#9;const geVec3d *&#9;Mins,</P>
<P>&#9;const geVec3d *&#9;Maxs,</P>
<P>&#9;float physicsScale);</P>
<P>GENESISAPI geBoolean GENESISCC gePhysicsObject_Destroy(gePhysicsObject** pPhysob);</P>

<P>////////////////////////////////////////////////////////////////////////////////////////////////////////////</P>
<P>// functions</P>

<P>GENESISAPI geBoolean GENESISCC gePhysicsObject_ApplyGlobalFrameForce(gePhysicsObject* pod, geVec3d* force, geVec3d* radiusVector, geBoolean isAppliedForce,</P>
<P>&#9;int configIndex);</P>
<P>GENESISAPI geBoolean GENESISCC gePhysicsObject_ApplyGlobalFrameImpulse(gePhysicsObject* pPhysob, geVec3d* pImpulse, geVec3d* pRadVec, int configIndex);</P>
<P>GENESISAPI geBoolean GENESISCC gePhysicsObject_ComputeForces(gePhysicsObject* pod, int configIndex);</P>
<P>GENESISAPI geBoolean GENESISCC gePhysicsObject_Integrate(gePhysicsObject* pod, float deltaTime, int SourceConfigIndex);</P>

<P>GENESISAPI float GENESISCC gePhysicsObject_GetMass(const gePhysicsObject* po);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_SetMass(gePhysicsObject* po, float mass);</P>

<P>GENESISAPI float GENESISCC gePhysicsObject_GetOneOverMass(const gePhysicsObject* po);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_GetXForm(const gePhysicsObject* po, geXForm3d* xform, int configIndex);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_SetXForm(gePhysicsObject* po, const geXForm3d* xform, int configIndex);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_GetXFormInEditorSpace(const gePhysicsObject* po, geXForm3d* xform, int configIndex);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_GetOriginalLocation(const gePhysicsObject* po, geVec3d* loc);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_SetOriginalLocation(gePhysicsObject* po, const geVec3d* loc);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_GetLocation(const gePhysicsObject *po, geVec3d *Location, int configIndex);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_GetLocationInEditorSpace(const gePhysicsObject* po, geVec3d* loc, int configIndex);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_GetLinearVelocity(const gePhysicsObject* po, geVec3d* vel, int configIndex);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_SetLinearVelocity(gePhysicsObject* po, const geVec3d* vel, int configIndex);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_GetAngularVelocity(const gePhysicsObject* po, geVec3d* vel, int configIndex);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_SetAngularVelocity(gePhysicsObject* po, const geVec3d* vel, int configIndex);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_GetForce(const gePhysicsObject* po, geVec3d* force, int configIndex);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_SetForce(gePhysicsObject* po, const geVec3d* force, int configIndex);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_GetTorque(const gePhysicsObject* po, geVec3d* torque, int configIndex);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_SetTorque(gePhysicsObject* po, const geVec3d* torque, int configIndex);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_GetAppliedForce(const gePhysicsObject* po, geVec3d* force, int configIndex);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_SetAppliedForce(gePhysicsObject* po, const geVec3d* force, int configIndex);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_GetAppliedTorque(const gePhysicsObject* po, geVec3d* torque, int configIndex);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_SetAppliedTorque(gePhysicsObject* po, const geVec3d* torque, int configIndex);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_ClearForce(gePhysicsObject* po, int configIndex);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_ClearTorque(gePhysicsObject* po, int configIndex);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_ClearAppliedForce(gePhysicsObject* po, int configIndex);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_ClearAppliedTorque(gePhysicsObject* po, int configIndex);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_IncForce(gePhysicsObject* po, const geVec3d* forceInc, int configIndex);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_IncTorque(gePhysicsObject* po, const geVec3d* torqueInc, int configIndex);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_IncAppliedForce(gePhysicsObject* po, const geVec3d* forceInc, int configIndex);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_IncAppliedTorque(gePhysicsObject* po, const geVec3d* torqueInc, int configIndex);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_GetOrientation(const gePhysicsObject* po, geQuaternion* orient, int configIndex);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_SetOrientation(gePhysicsObject* po, const geQuaternion* orient, int configIndex);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_GetInertiaTensor(const gePhysicsObject* po, Matrix33* iTensor);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_GetInertiaTensorInverse(const gePhysicsObject* po, Matrix33* iTensorInv);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_GetInertiaTensorInPhysicsSpace(const gePhysicsObject* pPhysob, Matrix33* pITensor, int configIndex);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_GetInertiaTensorInverseInPhysicsSpace(const gePhysicsObject* pPhysob, Matrix33* pITensorInv, int configIndex);</P>

<P>GENESISAPI geBoolean GENESISCC gePhysicsObject_IsAffectedByGravity(const gePhysicsObject* po);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_SetIsAffectedByGravity(gePhysicsObject* po, geBoolean flag);</P>

<P>GENESISAPI geBoolean GENESISCC gePhysicsObject_RespondsToForces(const gePhysicsObject* po);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_SetRespondsToForces(gePhysicsObject* po, geBoolean flag);</P>

<P>GENESISAPI float GENESISCC gePhysicsObject_GetLinearDamping(const gePhysicsObject* po);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_SetLinearDamping(gePhysicsObject* po, float linearDamping);</P>

<P>GENESISAPI float GENESISCC gePhysicsObject_GetAngularDamping(const gePhysicsObject* po);</P>
<P>GENESISAPI void GENESISCC gePhysicsObject_SetAngularDamping(gePhysicsObject* po, float angularDamping);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_SetActiveConfig(gePhysicsObject* pPhysob, int configIndex);</P>
<P>GENESISAPI int GENESISCC gePhysicsObject_GetActiveConfig(gePhysicsObject* pPhysob);</P>

<P>GENESISAPI void GENESISCC gePhysicsObject_SetPhysicsScale(gePhysicsObject* pPhysob, float scale);</P>
<P>GENESISAPI float GENESISCC gePhysicsObject_GetPhysicsScale(gePhysicsObject* pPhysob);</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558914"><A NAME="_Toc452379814"><A NAME="_Toc454156723">PhysicsSystem.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  PHYSICSSYSTEM.H                                                                     */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jason Wood                                                                  */</P>
<P>/*  Description: Rigid body, constraint based physics system interface                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined (PHYSICSSYSTEM_H)</P>
<P>#define PHYSICSSYSTEM_H</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>typedef struct gePhysicsSystem gePhysicsSystem;</P>

<P>////////////////////////////////////////////////////////////////////////////////////////////////////</P>
<P>// ctor / dtor</P>

<P>GENESISAPI gePhysicsSystem *GENESISCC gePhysicsSystem_Create(void);</P>
<P>GENESISAPI geBoolean GENESISCC gePhysicsSystem_Destroy(gePhysicsSystem** ppSys);</P>

<P>GENESISAPI geBoolean GENESISCC gePhysicsSystem_Iterate(gePhysicsSystem* psPtr, float Time);</P>

<P>GENESISAPI geBoolean GENESISCC gePhysicsSystem_AddJoint(gePhysicsSystem *psPtr, gePhysicsJoint *Joint);</P>
<P>GENESISAPI geBoolean GENESISCC gePhysicsSystem_AddObject(gePhysicsSystem *psPtr, gePhysicsObject *Object);</P>

<P>GENESISAPI int GENESISCC gePhysicsSystem_GetSourceConfigIndex(const gePhysicsSystem* pSys);</P>
<P>GENESISAPI gePhysicsObject** GENESISCC gePhysicsSystem_GetPhysobs(const gePhysicsSystem* pSys);</P>
<P>GENESISAPI gePhysicsJoint** GENESISCC gePhysicsSystem_GetPhysjnts(const gePhysicsSystem* pSys);</P>
<P>GENESISAPI int GENESISCC gePhysicsSystem_GetNumPhysobs(const gePhysicsSystem* pSys);</P>
<P>GENESISAPI int GENESISCC gePhysicsSystem_GetNumPhysjnts(const gePhysicsSystem* pSys);</P>
<P>GENESISAPI int GENESISCC gePhysicsSystem_GetSumOfConstraintDimensions(const gePhysicsSystem* pSys);</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558915"><A NAME="_Toc452379815"><A NAME="_Toc454156724">Pixelformat.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>#ifndef&#9;PIXELFORMAT_H</P>
<P>#define&#9;PIXELFORMAT_H</P>

<P>/****************************************************************************************/</P>
<P>/*  PixelFormat.h                                                                       */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Charles Bloom                                                               */</P>
<P>/*  Description:  The abstract Pixel primitives                                         */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>

<P>#include "basetype.h"</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>typedef enum&#9;&#9;// all supported formats (including shifts)</P>
<P>{</P>
<P>&#9;GE_PIXELFORMAT_NO_DATA = 0,</P>
<P>&#9;GE_PIXELFORMAT_8BIT,&#9;&#9;&#9;&#9;// PAL</P>
<P>&#9;GE_PIXELFORMAT_8BIT_GRAY,&#9;&#9;// no palette (intensity from bit value)</P>
<P>&#9;GE_PIXELFORMAT_16BIT_555_RGB,</P>
<P>&#9;GE_PIXELFORMAT_16BIT_555_BGR,</P>
<P>&#9;GE_PIXELFORMAT_16BIT_565_RGB,&#9;// #5</P>
<P>&#9;GE_PIXELFORMAT_16BIT_565_BGR, </P>
<P>&#9;GE_PIXELFORMAT_16BIT_4444_ARGB, // #7</P>
<P>&#9;GE_PIXELFORMAT_16BIT_1555_ARGB, </P>
<P>&#9;GE_PIXELFORMAT_24BIT_RGB,&#9;&#9;// #9</P>
<P>&#9;GE_PIXELFORMAT_24BIT_BGR,</P>
<P>&#9;GE_PIXELFORMAT_24BIT_YUV,&#9;&#9;// * see note below</P>
<P>&#9;GE_PIXELFORMAT_32BIT_RGBX, </P>
<P>&#9;GE_PIXELFORMAT_32BIT_XRGB, </P>
<P>&#9;GE_PIXELFORMAT_32BIT_BGRX, </P>
<P>&#9;GE_PIXELFORMAT_32BIT_XBGR,</P>
<P>&#9;GE_PIXELFORMAT_32BIT_RGBA, </P>
<P>&#9;GE_PIXELFORMAT_32BIT_ARGB,&#9;&#9;// #17</P>
<P>&#9;GE_PIXELFORMAT_32BIT_BGRA, </P>
<P>&#9;GE_PIXELFORMAT_32BIT_ABGR,</P>
<P>&#9;</P>
<P>&#9;GE_PIXELFORMAT_WAVELET,&#9;&#9;&#9;// #20 , Wavelet Compression</P>

<P>&#9;GE_PIXELFORMAT_COUNT</P>
<P>} gePixelFormat;</P>
<P>&#9;</P>
<P>/******</P>

<P>there's something wacked out about these format names :</P>

<P>&#9;for 16 bit &amp; 32 bit , the _RGB or _BGR refers to their order</P>
<P>&#9;&#9;*in the word or dword* ; since we're on intel, this means</P>
<P>&#9;&#9;the bytes in the data file have the *opposite* order !!</P>
<P>&#9;&#9;(for example the 32 bit _ARGB is actually B,G,R,A in raw bytes)</P>
<P>&#9;for 24 bit , the _RGB or _BGR refers to their order in the</P>
<P>&#9;&#9;actual bytes, so that windows bitmaps actually have</P>
<P>&#9;&#9;_RGB order in a dword !!</P>

<P>* YUV : the pixelformat ops here are identical to those of 24bit_RGB ;</P>
<P>&#9;&#9;this is just a place-keeper to notify you that you should to a YUV_to_RGB conversion</P>

<P>*********/</P>

<P>#define GE_PIXELFORMAT_8BIT_PAL GE_PIXELFORMAT_8BIT</P>

<P>typedef uint32&#9;(*gePixelFormat_Composer   )(int R,int G,int B,int A);</P>
<P>typedef void&#9;(*gePixelFormat_Decomposer )(uint32 Pixel,int *R,int *G,int *B,int *A);</P>

<P>typedef void&#9;(*gePixelFormat_ColorGetter)(uint8 **ppData,int *R,int *G,int *B,int *A);</P>
<P>typedef void&#9;(*gePixelFormat_ColorPutter)(uint8 **ppData,int  R,int  G,int  B,int  A);</P>

<P>typedef uint32&#9;(*gePixelFormat_PixelGetter)(uint8 **ppData);</P>
<P>typedef void&#9;(*gePixelFormat_PixelPutter)(uint8 **ppData,uint32 Pixel);</P>

<P>typedef struct gePixelFormat_Operations</P>
<P>{</P>
<P>&#9;uint32&#9;RMask;</P>
<P>&#9;uint32&#9;GMask;</P>
<P>&#9;uint32&#9;BMask;</P>
<P>&#9;uint32&#9;AMask;</P>

<P>&#9;int&#9;&#9;RShift;</P>
<P>&#9;int&#9;&#9;GShift;</P>
<P>&#9;int&#9;&#9;BShift;</P>
<P>&#9;int&#9;&#9;AShift;</P>

<P>&#9;int&#9;&#9;RAdd;</P>
<P>&#9;int&#9;&#9;GAdd;</P>
<P>&#9;int&#9;&#9;BAdd;</P>
<P>&#9;int&#9;&#9;AAdd;</P>

<P>&#9;int&#9;&#9;&#9;BytesPerPel;</P>
<P>&#9;geBoolean&#9;HasPalette;</P>
<P>&#9;char *&#9;&#9;Description;</P>
<P>&#9;</P>
<P>&#9;gePixelFormat_Composer&#9;&#9;ComposePixel;</P>
<P>&#9;gePixelFormat_Decomposer&#9;DecomposePixel;</P>

<P>&#9;gePixelFormat_ColorGetter&#9;GetColor;</P>
<P>&#9;gePixelFormat_ColorPutter&#9;PutColor;</P>

<P>&#9;gePixelFormat_PixelGetter&#9;GetPixel;</P>
<P>&#9;gePixelFormat_PixelPutter&#9;PutPixel;</P>
<P>} gePixelFormat_Operations;</P>

<P>&#9;// the Masks double as boolean "HaveAlpha" .. etc..</P>

<P>GENESISAPI const gePixelFormat_Operations * GENESISCC gePixelFormat_GetOperations( gePixelFormat Format );</P>

<P>&#9;// quick accessors to _GetOps</P>
<P>GENESISAPI geBoolean&#9;GENESISCC gePixelFormat_IsValid(&#9;&#9;gePixelFormat Format);</P>
<P>GENESISAPI unsigned int GENESISCC gePixelFormat_BytesPerPel(&#9;gePixelFormat Format );</P>
<P>GENESISAPI geBoolean&#9;GENESISCC gePixelFormat_HasPalette(&#9;&#9;gePixelFormat Format );</P>
<P>GENESISAPI geBoolean&#9;GENESISCC gePixelFormat_HasAlpha(&#9;&#9;gePixelFormat Format );</P>
<P>GENESISAPI geBoolean&#9;GENESISCC gePixelFormat_HasGoodAlpha(&#9;gePixelFormat Format ); // more than 1 bit of alpha</P>
<P>GENESISAPI const char * GENESISCC gePixelFormat_Description(&#9;gePixelFormat Format );</P>
<P>GENESISAPI geBoolean&#9;GENESISCC gePixelFormat_IsRaw(&#9;&#9;&#9;gePixelFormat Format );</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// 'Raw' means pixels can be made with the Compose operations</P>

<P>GENESISAPI uint32&#9;&#9;GENESISCC gePixelFormat_ComposePixel(&#9;gePixelFormat Format,int R,int G,int B,int A);</P>
<P>GENESISAPI void&#9;&#9;&#9;GENESISCC gePixelFormat_DecomposePixel(&#9;gePixelFormat Format,uint32 Pixel,int *R,int *G,int *B,int *A);</P>
<P>&#9;&#9;&#9;</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// these four functions move ppData to the next pixel</P>

<P>GENESISAPI void&#9;&#9;&#9;GENESISCC gePixelFormat_GetColor(gePixelFormat Format,uint8 **ppData,int *R,int *G,int *B,int *A);</P>
<P>GENESISAPI void&#9;&#9;&#9;GENESISCC gePixelFormat_PutColor(gePixelFormat Format,uint8 **ppData,int R,int G,int B,int A);</P>

<P>GENESISAPI uint32&#9;&#9;GENESISCC gePixelFormat_GetPixel(gePixelFormat Format,uint8 **ppData);</P>
<P>GENESISAPI void&#9;&#9;&#9;GENESISCC gePixelFormat_PutPixel(gePixelFormat Format,uint8 **ppData,uint32 Pixel);</P>
<P>&#9;</P>
<P>GENESISAPI uint32&#9;&#9;GENESISCC gePixelFormat_ConvertPixel(gePixelFormat Format,uint32 Pixel,gePixelFormat ToFormat);</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558916"><A NAME="_Toc452379816"><A NAME="_Toc454156725">Quatern.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  QUATERN.H                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Mike Sandige                                                                */</P>
<P>/*  Description: Quaternion mathematical system interface                               */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GE_QUATERNION_H</P>
<P>#define GE_QUATERNION_H</P>

<P>/***************************************************************************</P>

<P>&#9;The quatern module contains basic support for a quaternion object.</P>

<P>&#9;quaternions are an extension of complex numbers that allows an</P>
<P>&#9;expression for rotation that can be easily interpolated.  geQuaternion_s are also </P>
<P>&#9;more numericaly stable for repeated rotations than matrices.</P>

<P>&#9;</P>
<P>&#9;A quaternion is a 4 element 'vector'  [w,x,y,z] where:</P>

<P>&#9;q = w + xi + yj + zk</P>
<P>&#9;i*i = -1</P>
<P>&#9;j*j = -1</P>
<P>&#9;k*k = -1</P>
<P>&#9;i*j = -j*i = k</P>
<P>&#9;j*k = -k*j = i</P>
<P>&#9;k*i = -i*k = j</P>
<P>&#9;q' (conjugate) = w - xi - yj - zk</P>
<P>&#9;||q|| (magnitude) = sqrt(q*q') = sqrt(w*w + x*x + y*y + z*z)</P>
<P>&#9;unit quaternion ||q|| == 1; this implies  q' == qinverse </P>
<P>&#9;quaternions are associative (q1*q2)*q3 == q1*(q2*q3)</P>
<P>&#9;quaternions are not commutative  q1*q2 != q2*q1</P>
<P>&#9;qinverse (inverse (1/q) ) = q'/(q*q')</P>
<P>&#9;</P>
<P>&#9;q can be expressed by w + xi + yj + zk or [w,x,y,z] </P>
<P>&#9;or as in this implementation (s,v) where s=w, and v=[x,y,z]</P>

<P>&#9;quaternions can represent a rotation.  The rotation is an angle t, around a </P>
<P>&#9;unit vector u.   q=(s,v);  s= cos(t/2);   v= u*sin(t/2).</P>

<P>&#9;quaternions can apply the rotation to a point.  let the point be p [px,py,pz],</P>
<P>&#9;and let P be a quaternion(0,p).  Protated = q*P*qinverse </P>
<P>&#9;( Protated = q*P*q' if q is a unit quaternion)</P>

<P>&#9;concatenation rotations is similar to matrix concatenation.  given two rotations</P>
<P>&#9;q1 and q2,  to rotate by q1, then q2:  let qc = (q2*q1), then the combined </P>
<P>&#9;rotation is given by qc*P*qcinverse (= qc*P*qc' if q is a unit quaternion)</P>

<P>&#9;multiplication: </P>
<P>&#9;q1 = w1 + x1i + y1j + z1k</P>
<P>&#9;q2 = w2 + x2i + y2j + z2k</P>
<P>&#9;q1*q2 = q3 =</P>
<P>&#9;&#9;&#9;(w1*w2 - x1*x2 - y1*y2 - z1*z2)     {w3}</P>
<P>&#9;        (w1*x2 + x1*w2 + y1*z2 - z1*y2)i&#9;{x3}</P>
<P>&#9;&#9;&#9;(w1*y2 - x1*z2 + y1*w2 + z1*x2)j    {y3}</P>
<P>&#9;&#9;&#9;(w1*z2 + x1*y2 + y1*x2 + z1*w2)k&#9;{z3}</P>

<P>&#9;also, </P>
<P>&#9;q1 = (s1,v1) = [s1,(x1,y1,z1)]</P>
<P>&#9;q2 = (s2,v2) = [s2,(x2,y2,z2)]</P>
<P>&#9;q1*q2 = q3&#9;=&#9;(s1*s2 - dot_product(v1,v2),&#9;&#9;&#9;{s3}</P>
<P>&#9;&#9;&#9;&#9;&#9;(s1*v2 + s2*v1 + cross_product(v1,v2))&#9;{v3}</P>

<P>&nbsp;</P>
<P>&#9;interpolation - it is possible (and sometimes reasonable) to interpolate between</P>
<P>&#9;two quaternions by interpolating each component.  This does not quarantee a </P>
<P>&#9;resulting unit quaternion, and will result in an animation with non-linear </P>
<P>&#9;rotational velocity.</P>

<P>&#9;spherical interpolation: (slerp) treat the quaternions as vectors </P>
<P>&#9;find the angle between them (w = arccos(q1 dot q2) ).</P>
<P>&#9;given 0&lt;=t&lt;=1,  q(t) = q1*(sin((1-t)*w)/sin(w) + q2 * sin(t*w)/sin(w).</P>
<P>&#9;since q == -q, care must be taken to rotate the proper way.  </P>

<P>&#9;this implementation uses the notation quaternion q = (quatS,quatV) </P>
<P>&#9;  where quatS is a scalar, and quatV is a 3 element vector.</P>

<P>********************************************/</P>

<P>#include "basetype.h"</P>
<P>#include "xform3d.h"</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>typedef struct </P>
<P>{</P>
<P>&#9;geFloat&#9;W;</P>
<P>&#9;geFloat   X,Y,Z;</P>
<P>&#9;//geVec3d   QuatV;</P>
<P>} geQuaternion;</P>

<P>&nbsp;</P>
<P>#define&#9;QUATERNION_PI&#9;(GE_PI)</P>

<P>geBoolean GENESISCC geQuaternion_IsValid( const geQuaternion *Q );</P>
<P>&#9;// return GE_TRUE if Q is non null and for has no NAN's in its components</P>

<P>void GENESISCC geQuaternion_Set( geQuaternion *Q, geFloat W, geFloat X, geFloat Y, geFloat Z);</P>
<P>&#9;// set quaternion components.  Doesn't normalize</P>
<P>void GENESISCC geQuaternion_SetVec3d( geQuaternion *Q, geFloat W, const geVec3d *V);</P>
<P>&#9;// set quaternion components.  Doesn't normalize</P>
<P>GENESISAPI void GENESISCC geQuaternion_SetFromAxisAngle(geQuaternion *Q, const geVec3d *Axis, geFloat Theta);</P>
<P>&#9;// set a quaternion from an axis and a rotation around the axis</P>
<P>geBoolean GENESISCC geQuaternion_GetAxisAngle(const geQuaternion *Q, geVec3d *Axis, geFloat *Theta);</P>
<P>&#9;// gets an axis and angle of rotation around the axis from a quaternion</P>
<P>&#9;// returns GE_TRUE if there is an axis.  </P>
<P>&#9;// returns GE_FALSE if there is no axis (and Axis is set to 0,0,0, and Theta is 0)</P>

<P>void GENESISCC geQuaternion_Get( const geQuaternion *Q, </P>
<P>&#9;&#9;&#9;&#9;&#9;geFloat *W, geFloat *X, geFloat *Y, geFloat *Z);</P>
<P>&#9;// get quaternion components into W,X,Y,Z</P>
<P>void GENESISCC geQuaternion_GetVec3d( const geQuaternion *Q, geFloat *W, geVec3d *V);</P>
<P>&#9;// get quaternion components into W and V</P>

<P>void GENESISCC geQuaternion_FromMatrix(</P>
<P>&#9;const geXForm3d&#9;&#9;*RotationMatrix,</P>
<P>&#9;      geQuaternion&#9;*QDest);</P>
<P>&#9;// takes upper 3 by 3 portion of matrix (rotation sub matrix) </P>
<P>&#9;// and generates a quaternion</P>

<P>GENESISAPI void GENESISCC geQuaternion_ToMatrix(</P>
<P>&#9;const geQuaternion&#9;*Q, </P>
<P>&#9;&#9;  geXForm3d&#9;&#9;*RotationMatrixDest);</P>
<P>&#9;// takes a unit quaternion and makes RotationMatrixDest an equivelant rotation xform.</P>
<P>&#9;// (any translation in RotationMatrixDest will be list)</P>

<P>void GENESISCC geQuaternion_Slerp(</P>
<P>&#9;const geQuaternion&#9;&#9;*Q0, </P>
<P>&#9;const geQuaternion&#9;&#9;*Q1, </P>
<P>&#9;geFloat&#9;&#9;&#9;&#9;&#9;T,&#9;&#9;</P>
<P>&#9;geQuaternion&#9;&#9;&#9;*QT);</P>
<P>&#9;// spherical interpolation between q0 and q1.   0&lt;=t&lt;=1 </P>
<P>&#9;// resulting quaternion is 'between' q0 and q1</P>
<P>&#9;// with t==0 being all q0, and t==1 being all q1.</P>
<P>&#9;// returns a quaternion with a positive W - always takes shortest route</P>
<P>&#9;// through the positive W domain.</P>

<P>void GENESISCC geQuaternion_SlerpNotShortest(</P>
<P>&#9;const geQuaternion&#9;&#9;*Q0, </P>
<P>&#9;const geQuaternion&#9;&#9;*Q1, </P>
<P>&#9;geFloat&#9;&#9;&#9;&#9;&#9;T,&#9;&#9;</P>
<P>&#9;geQuaternion&#9;&#9;&#9;*QT);</P>
<P>&#9;// spherical interpolation between q0 and q1.   0&lt;=t&lt;=1 </P>
<P>&#9;// resulting quaternion is 'between' q0 and q1</P>
<P>&#9;// with t==0 being all q0, and t==1 being all q1.</P>

<P>&nbsp;</P>
<P>void GENESISCC geQuaternion_Multiply(</P>
<P>&#9;const geQuaternion&#9;*Q1, </P>
<P>&#9;const geQuaternion&#9;*Q2, </P>
<P>&#9;geQuaternion&#9;&#9;&#9;*QProduct);</P>
<P>&#9;// multiplies q1 * q2, and places the result in q.</P>
<P>&#9;// no failure. &#9;renormalization not automatic</P>

<P>void GENESISCC geQuaternion_Rotate(</P>
<P>&#9;const geQuaternion&#9;*Q, </P>
<P>&#9;const geVec3d       *V, </P>
<P>&#9;geVec3d&#9;&#9;&#9;&#9;*VRotated);</P>
<P>&#9;// Rotates V by the quaternion Q, places the result in VRotated.</P>

<P>geBoolean GENESISCC geQuaternion_IsUnit(const geQuaternion *Q);</P>
<P>&#9;// returns GE_TRUE if q is a unit quaternion.  GE_FALSE otherwise.</P>

<P>GENESISAPI geFloat GENESISCC geQuaternion_Normalize(geQuaternion *Q);</P>
<P>&#9;// normalizes q to be a unit quaternion.  returns original magnitude of q</P>

<P>GENESISAPI void GENESISCC geQuaternion_Copy(const geQuaternion *QSrc, geQuaternion *QDst);</P>
<P>&#9;// copies quaternion QSrc into QDst</P>

<P>void GENESISCC geQuaternion_SetNoRotation(geQuaternion *Q);</P>
<P>&#9;// sets Q to be a quaternion with no rotation (like an identity matrix)</P>

<P>void GENESISCC geQuaternion_Ln(</P>
<P>&#9;const geQuaternion *Q, </P>
<P>&#9;geQuaternion *LnQ);</P>
<P>&#9;// ln(Q) for unit quaternion only!</P>

<P>void GENESISCC geQuaternion_Exp(</P>
<P>&#9;const geQuaternion *Q,</P>
<P>&#9;geQuaternion *ExpQ);</P>
<P>&#9;// exp(Q) for pure quaternion only!  (zero scalar part (W))</P>

<P>void GENESISCC geQuaternion_Scale(</P>
<P>&#9;const geQuaternion *Q,</P>
<P>&#9;geFloat Scale,</P>
<P>&#9;geQuaternion *QScaled);</P>
<P>&#9;// Q = Q * Scale  (result is not generally a unit quaternion!)</P>

<P>void GENESISCC geQuaternion_Add(</P>
<P>&#9;const geQuaternion *Q1,</P>
<P>&#9;const geQuaternion *Q2,</P>
<P>&#9;geQuaternion *QSum);</P>
<P>&#9;// QSum = Q1 + Q2  (result is not generally a unit quaternion!)</P>

<P>void GENESISCC geQuaternion_Subtract(</P>
<P>&#9;const geQuaternion *Q1, </P>
<P>&#9;const geQuaternion *Q2, </P>
<P>&#9;geQuaternion *QSum);</P>
<P>&#9;// QSum = Q1 - Q2  (result is not generally a unit quaternion!)</P>

<P>void GENESISCC geQuaternion_Inverse(const geQuaternion *Q, geQuaternion *QInv);</P>
<P>&#9;// sets QInv to the inverse of Q.  </P>

<P>geFloat GENESISCC geQuaternion_Magnitude(const geQuaternion *Q);</P>
<P>&#9;// returns Magnitude of Q.  </P>

<P>geBoolean GENESISCC geQuaternion_Compare( geQuaternion *Q1, geQuaternion *Q2, geFloat Tolerance );</P>
<P>&#9;// return GE_TRUE if quaternions differ elementwise by less than Tolerance.</P>

<P>&nbsp;</P>
<P>#ifndef NDEBUG</P>
<P>void GENESISCC geQuaternion_SetMaximalAssertionMode( geBoolean Enable );</P>
<P>#endif</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif // GE_QUATERNION_H</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558917"></P>
<P><A NAME="_Toc452379817"><A NAME="_Toc454156726">Ram.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  RAM.H                                                                               */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:                                                                             */</P>
<P>/*  Description: Replacement for malloc, realloc and free                               */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GE_RAM_H</P>
<P>#define GE_RAM_H</P>

<P>#include "basetype.h"</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>typedef int (* geRam_CriticalCallbackFunction)(void);</P>

<P>/*</P>
<P>  Set the critical callback function.  ram_allocate will call the critical</P>
<P>  callback function if it's unable to allocate memory.</P>
<P>*/</P>
<P>GENESISAPI geRam_CriticalCallbackFunction geRam_SetCriticalCallback</P>
<P>    (</P>
<P>      geRam_CriticalCallbackFunction callback</P>
<P>    );</P>

<P>/*</P>
<P>  increments or decrements a counter .  if the counter is &gt;0</P>
<P>  the critical callback function (if set) is called for a failed memory allocation.</P>
<P>  add is added to the current counter value.  the new counter value is returned.</P>
<P>*/</P>
<P>GENESISAPI int geRam_EnableCriticalCallback(int add);</P>

<P>&nbsp;</P>
<P>/*</P>
<P>  Allocate memory of the given size.  In debug mode, the memory is filled</P>
<P>  with 0xA5, and we keep track of the amount of memory allocated.  Also, in debug</P>
<P>  mode, we track where the memory was allocated and can optionally provide a</P>
<P>  report of allocated blocks.  See geRam_ReportAllocations.</P>
<P>*/</P>
<P>#ifndef NDEBUG</P>

<P>#define geRam_Allocate(size) _geRam_DebugAllocate(size, __FILE__, __LINE__)</P>

<P>// Do not call _geRam_DebugAllocate directly.</P>
<P>GENESISAPI void* _geRam_DebugAllocate(uint32 size, const char* pFile, int line);</P>

<P>#else</P>

<P>GENESISAPI void *geRam_Allocate(uint32 size);</P>

<P>#endif</P>

<P>/*</P>
<P>  Free an allocated memory block.</P>
<P>*/</P>
<P>GENESISAPI void geRam_Free_(void *ptr);</P>

<P>&#9;&#9;extern void *StupidUnusedPointer;    // never used, except to mask the</P>
<P>&#9;&#9;// possible warning you get if you use the geRam_Free macro below, without</P>
<P>&#9;&#9;// using the xxx pointer again in the same block.  This is ugly.</P>
<P> </P>
<P>#define geRam_Free(xxx) geRam_Free_(xxx) ,(xxx)=NULL, StupidUnusedPointer=(xxx)</P>

<P>/*</P>
<P>  Reallocate memory.  This function supports shrinking and expanding blocks,</P>
<P>  and will also act like ram_allocate if the pointer passed to it is NULL.</P>
<P>  It won't, however, free the memory if you pass it a 0 size.</P>
<P>*/</P>
<P>#ifndef NDEBUG</P>

<P>#define geRam_Realloc(ptr, newsize) _geRam_DebugRealloc(ptr, newsize, __FILE__, __LINE__)</P>

<P>// Do not call _geRam_DebugRealloc directly.</P>
<P>GENESISAPI void* _geRam_DebugRealloc(void* ptr, uint32 size, const char* pFile, int line);</P>

<P>#else</P>

<P>GENESISAPI void *geRam_Realloc(void *ptr,uint32 newsize);</P>

<P>#endif</P>

<P>#ifndef NDEBUG</P>

<P>GENESISAPI void geRam_ReportAllocations(void);</P>

<P>#else</P>

<P>#define geRam_ReportAllocations() </P>

<P>#endif</P>

<P>#ifndef NDEBUG</P>
<P>    extern int32 geRam_CurrentlyUsed;</P>
<P>    extern int32 geRam_NumberOfAllocations;</P>
<P>    extern int32 geRam_MaximumUsed;</P>
<P>    extern int32 geRam_MaximumNumberOfAllocations;</P>

<P>GENESISAPI     void geRam_AddAllocation(int n,uint32 size);</P>
<P>#else</P>
<P>    #define geRam_AddAllocation(n,s)</P>
<P>#endif</P>

<P>// allocate the ram &amp; clear it. (calloc)</P>
<P>GENESISAPI void * geRam_AllocateClear(uint32 size);</P>

<P>#define GE_RAM_ALLOCATE_STRUCT(type)      (type *)geRam_Allocate (sizeof (type))</P>
<P>#define GE_RAM_ALLOCATE_ARRAY(type,count) (type *)geRam_Allocate (sizeof (type) * (count))</P>

<P>#ifndef NDEBUG</P>
<P>#define GE_RAM_REALLOC_ARRAY(ptr,type,count)  (type *)geRam_Realloc(  (ptr), sizeof(type) * (count) );{type *XX=(ptr);}</P>
<P>#else</P>
<P>#define GE_RAM_REALLOC_ARRAY(ptr,type,count)  (type *)geRam_Realloc(  (ptr), sizeof(type) * (count) )</P>
<P>#endif</P>

<P>#ifndef NDEBUG</P>
<P>geBoolean geRam_IsValidPtr(void *ptr);</P>
<P>#endif</P>

<P>#ifdef __cplusplus</P>
<P>  }</P>
<P>#endif</P>

<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558918"><A NAME="_Toc452379818"><A NAME="_Toc454156727">Vec3d.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  VEC3D.H                                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:                                                                             */</P>
<P>/*  Description: 3D Vector interface                                                    */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GE_VEC3D_H</P>
<P>#define GE_VEC3D_H</P>

<P>#include "basetype.h"</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;geFloat X, Y, Z;</P>
<P>} geVec3d;</P>

<P>#ifndef NDEBUG</P>
<P>GENESISAPI&#9;geFloat GENESISCC   geVec3d_GetElement(geVec3d *V, int Index);</P>
<P>#else</P>
<P>&#9;#define geVec3d_GetElement(Vector,Index)  (* ((&amp;((Vector)-&gt;X)) +  (Index) ))</P>
<P>#endif</P>

<P>GENESISAPI void GENESISCC&#9;&#9;geVec3d_Set(geVec3d *V, geFloat X, geFloat Y, geFloat Z);</P>
<P>GENESISAPI void GENESISCC&#9;&#9;geVec3d_Get(const geVec3d *V, geFloat *X, geFloat *Y, geFloat *Z);</P>

<P>GENESISAPI geFloat GENESISCC&#9;geVec3d_DotProduct(const geVec3d *V1, const geVec3d *V2);</P>
<P>GENESISAPI void GENESISCC&#9;&#9;geVec3d_CrossProduct(const geVec3d *V1, const geVec3d *V2, geVec3d *VResult);</P>
<P>GENESISAPI geBoolean GENESISCC&#9;geVec3d_Compare(const geVec3d *V1, const geVec3d *V2,geFloat tolarance);</P>
<P>GENESISAPI geFloat GENESISCC&#9;geVec3d_Normalize(geVec3d *V1);</P>
<P>GENESISAPI geBoolean GENESISCC &#9;geVec3d_IsNormalized(const geVec3d *V);</P>
<P>GENESISAPI void GENESISCC&#9;&#9;geVec3d_Scale(const geVec3d *VSrc, geFloat Scale, geVec3d *VDst);</P>
<P>GENESISAPI geFloat GENESISCC&#9;geVec3d_Length(const geVec3d *V1); </P>
<P>GENESISAPI geFloat GENESISCC&#9;geVec3d_LengthSquared(const geVec3d *V1);</P>
<P>GENESISAPI void GENESISCC&#9;&#9;geVec3d_Subtract(const geVec3d *V1, const geVec3d *V2, geVec3d *V1MinusV2);</P>
<P>GENESISAPI void GENESISCC&#9;&#9;geVec3d_Add(const geVec3d *V1, const geVec3d *V2,  geVec3d *VSum);</P>
<P>GENESISAPI void GENESISCC&#9;&#9;geVec3d_Copy(const geVec3d *Vsrc, geVec3d *Vdst);</P>
<P>GENESISAPI void GENESISCC&#9;&#9;geVec3d_Clear(geVec3d *V);</P>
<P>GENESISAPI void GENESISCC&#9;&#9;geVec3d_Inverse(geVec3d *V);</P>
<P>GENESISAPI void GENESISCC&#9;&#9;geVec3d_MA(geVec3d *V1, geFloat Scale, const geVec3d *V2, geVec3d *V1PlusV2Scaled);</P>
<P>GENESISAPI void GENESISCC&#9;&#9;geVec3d_AddScaled(const geVec3d *V1, const geVec3d *V2, geFloat Scale, geVec3d *V1PlusV2Scaled);</P>

<P>GENESISAPI geFloat GENESISCC&#9;&#9;geVec3d_DistanceBetween(const geVec3d *V1, const geVec3d *V2);&#9;// returns length of V1-V2&#9;</P>

<P>GENESISAPI geBoolean GENESISCC geVec3d_IsValid(const geVec3d *V);</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558919"><A NAME="_Toc452379819"><A NAME="_Toc454156728">Vfile.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  VFILE.H                                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Eli Boling                                                                  */</P>
<P>/*  Description: Virtual file interface                                                 */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef&#9;VFILE_H</P>
<P>#define&#9;VFILE_H</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>#include&#9;"basetype.h"</P>

<P>typedef&#9;struct&#9;geVFile&#9;&#9;&#9;geVFile;</P>

<P>//--------- Finder (Directory) --------------</P>
<P>typedef&#9;struct&#9;geVFile_Finder&#9;geVFile_Finder;</P>

<P>typedef int     &#9;&#9;geVFile_TypeIdentifier;</P>
<P>typedef unsigned int    geVFile_Attributes;</P>

<P>typedef struct&#9;geVFile_Hints</P>
<P>{</P>
<P>&#9;void *&#9;HintData;</P>
<P>&#9;int&#9;&#9;HintDataLength;</P>
<P>}&#9;geVFile_Hints;</P>

<P>typedef&#9;struct&#9;geVFile_Time</P>
<P>{</P>
<P>&#9;unsigned long&#9;Time1;</P>
<P>&#9;unsigned long&#9;Time2;</P>
<P>}&#9;geVFile_Time;</P>

<P>#define&#9;GE_VFILE_ATTRIB_READONLY&#9;0x00000001</P>
<P>#define&#9;GE_VFILE_ATTRIB_DIRECTORY&#9;0x00000002</P>

<P>typedef&#9;struct&#9;geVFile_Properties</P>
<P>{</P>
<P>&#9;geVFile_Time&#9;&#9;&#9;&#9;Time;</P>
<P>&#9;geVFile_Attributes&#9;&#9;AttributeFlags;</P>
<P>&#9;long&#9;&#9;&#9;&#9;&#9;Size;</P>
<P>&#9;geVFile_Hints&#9;&#9;&#9;&#9;Hints;</P>
<P>&#9;char&#9;&#9;&#9;&#9;&#9;Name[1024];</P>
<P>}&#9;geVFile_Properties;</P>

<P>#ifdef _INC_WINDOWS</P>
<P>GENESISAPI void GENESISCC geVFile_TimeToWin32FileTime(const geVFile_Time *, LPFILETIME Win32FileTime);</P>
<P>&#9;// Converts a geVFile time to a Win32 FILETIME structure.  This API is the</P>
<P>&#9;// way to get the file time into a format to do standardized date/time</P>
<P>&#9;// operations on.  We do not provide date/time operations natively.</P>
<P>#endif</P>

<P>GENESISAPI geVFile_Finder * GENESISCC geVFile_CreateFinder(</P>
<P>&#9;geVFile *&#9;&#9;FileSystem,</P>
<P>&#9;const char *&#9;FileSpec);</P>
<P>&#9;// Creates a finder object from which you can get iterated file names.</P>
<P>&#9;// This is findfirst/findnext functionality.  </P>

<P>GENESISAPI void GENESISCC geVFile_DestroyFinder(geVFile_Finder *Finder);</P>
<P>&#9;// Destroys a Finder object</P>

<P>GENESISAPI geBoolean GENESISCC geVFile_FinderGetNextFile(geVFile_Finder *Finder);</P>
<P>&#9;// Tracks to the next file in the finder directory</P>

<P>GENESISAPI geBoolean GENESISCC geVFile_FinderGetProperties(const geVFile_Finder *Finder, geVFile_Properties *Properties);</P>
<P>&#9;// Gets the file properties from a geVFile_Finder.  You cannot set properties for</P>
<P>&#9;// a file through a finder.  You have to set the properties through a geVFile.</P>

<P>//--------- File System Operations ----</P>

<P>typedef&#9;struct&#9;geVFile_MemoryContext</P>
<P>{</P>
<P>&#9;void *&#9;Data;</P>
<P>&#9;int&#9;&#9;DataLength;</P>
<P>}&#9;geVFile_MemoryContext;</P>

<P>#define GE_VFILE_TYPE_DOS&#9;    ( (geVFile_TypeIdentifier) 1L )</P>
<P>#define GE_VFILE_TYPE_MEMORY&#9;( (geVFile_TypeIdentifier) 2L )</P>
<P>#define GE_VFILE_TYPE_VIRTUAL&#9;( (geVFile_TypeIdentifier) 3L )</P>

<P>// First three flags are mutually exclusive.  Combining them will result in failure</P>
<P>// returns for both geVFile_OpenNewSystem and geVFile_Open.</P>
<P>#define&#9;GE_VFILE_OPEN_READONLY&#9; 0x00000001</P>
<P>#define&#9;GE_VFILE_OPEN_UPDATE &#9; 0x00000002</P>
<P>#define&#9;GE_VFILE_OPEN_CREATE&#9; 0x00000004</P>

<P>#define GE_VFILE_OPEN_DIRECTORY  0x00000008</P>

<P>#if 0</P>
<P>geBoolean GENESISCC&#9;geVFile_Startup(void);</P>
<P>&#9;// Initializes the VFile System.  This API MUST be called before any other</P>
<P>&#9;// VFile APIs are called.  This API ensures that the rest of the VFile systems</P>
<P>&#9;// will be thread safe.  Hence the application should ensure that this function</P>
<P>&#9;// is called once and only once.</P>
<P>#endif</P>

<P>GENESISAPI geVFile * GENESISCC geVFile_OpenNewSystem(</P>
<P>&#9;geVFile *&#9;&#9;&#9;&#9;&#9;FS,</P>
<P>&#9;geVFile_TypeIdentifier&#9;FileSystemType,  // { DOS, MEMORY, ETC ... },</P>
<P>&#9;const char *&#9;&#9;&#9;Name, </P>
<P>&#9;void *&#9;&#9;&#9;&#9;&#9;Context, </P>
<P>&#9;unsigned int &#9;&#9;&#9;OpenModeFlags);</P>
<P>&#9;// Opens a file / file system.</P>

<P>GENESISAPI geBoolean GENESISCC geVFile_UpdateContext(geVFile *FS, void *Context, int ContextSize);</P>

<P>GENESISAPI geVFile * GENESISCC geVFile_GetContext(const geVFile *File);</P>
<P>&#9;// Returns the outer context in which File was opened.</P>

<P>GENESISAPI geVFile * GENESISCC geVFile_Open( </P>
<P>&#9;geVFile *&#9;&#9;&#9;FS,</P>
<P>&#9;const char *&#9;Name, </P>
<P>&#9;unsigned int &#9;OpenModeFlags);</P>

<P>/*</P>
<P>typedef&#9;enum</P>
<P>{</P>
<P>&#9;geVFile_AppendPath,</P>
<P>&#9;geVFile_PrependPath,</P>
<P>}&#9;geVFile_SearchOrder;</P>
<P>*/</P>

<P>GENESISAPI geBoolean GENESISCC geVFile_AddPath(geVFile *FS1, const geVFile *FS2, geBoolean Append);</P>
<P>&#9;// Appends (or prepends) the path associated with FS2 into FS1.</P>
<P>&#9;//    Append==GE_TRUE   causes the FS2 to be searched AFTER FS1</P>
<P>&#9;//    Append==GE_FALSE  causes the FS2 to be searched BEFORE FS1</P>

<P>/*  perhaps geVFile_AppendPath and geVFile_PrependPath */</P>

<P>&nbsp;</P>
<P>GENESISAPI geBoolean GENESISCC geVFile_DeleteFile(geVFile *FS, const char *FileName);</P>
<P>&#9;// Deletes a file within a file system.  Returns GE_TRUE on success, GE_FALSE</P>
<P>&#9;// on failure.</P>

<P>GENESISAPI geBoolean GENESISCC geVFile_RenameFile(geVFile *FS, const char *FileName, const char *NewName);</P>
<P>&#9;// Renames a file within a file system.  Returns GE_TRUE on success, GE_FALSE</P>
<P>&#9;// on failure.</P>

<P>GENESISAPI geBoolean GENESISCC geVFile_FileExists(geVFile *FS, const char *FileName);</P>
<P>&#9;// Returns GE_TRUE if the file FileName exists in FS, GE_FALSE otherwise.</P>
<P>&#9;// Does not do any searching (?)</P>

<P>//geVFile_VFileType geVFile_Register( all kinds of stuff );</P>

<P>GENESISAPI geBoolean GENESISCC geVFile_Close (geVFile *File);</P>
<P>&#9;// closes and destroys the File</P>

<P>//---------- File Specific Operations -----------</P>

<P>typedef&#9;enum</P>
<P>{</P>
<P>&#9;GE_VFILE_SEEKCUR&#9;= 0,</P>
<P>&#9;GE_VFILE_SEEKEND&#9;= 1,</P>
<P>&#9;GE_VFILE_SEEKSET&#9;= 2</P>
<P>}&#9;geVFile_Whence;</P>

<P>GENESISAPI geBoolean GENESISCC geVFile_GetS  &#9;&#9; (&#9;&#9;geVFile *File, void *Buff, int MaxLen);</P>
<P>GENESISAPI geBoolean GENESISCC geVFile_Read  &#9;&#9; (&#9;&#9;geVFile *File, void *Buff, int Count);</P>
<P>GENESISAPI geBoolean GENESISCC geVFile_Write &#9;&#9; (&#9;&#9;geVFile *File, const void *Buff, int Count);</P>
<P>GENESISAPI geBoolean GENESISCC geVFile_Seek  &#9;&#9; (&#9;&#9;geVFile *File, int where, geVFile_Whence Whence);</P>
<P>GENESISAPI geBoolean GENESISCC geVFile_Printf&#9;&#9; (&#9;&#9;geVFile *File, const char *Format, ...);</P>
<P>GENESISAPI geBoolean GENESISCC geVFile_EOF   &#9;&#9; (const geVFile *File);</P>
<P>GENESISAPI geBoolean GENESISCC geVFile_Tell  &#9;&#9; (const geVFile *File, long *Position);</P>
<P>GENESISAPI geBoolean GENESISCC geVFile_GetProperties(const geVFile *File, geVFile_Properties *Properties);</P>
<P>//geBoolean geVFile_GetName(geVFile *File, char *Buff, int MaxBuffLen);</P>
<P>&#9;// Gets the name of the file</P>

<P>GENESISAPI geBoolean GENESISCC geVFile_Size  &#9;&#9; (const geVFile *File, long *Size);</P>
<P>GENESISAPI geBoolean GENESISCC geVFile_SetSize&#9;&#9; (&#9;&#9;geVFile *File, long Size);</P>
<P>GENESISAPI geBoolean GENESISCC geVFile_SetAttributes(&#9;&#9;geVFile *File, geVFile_Attributes Attributes);</P>
<P>GENESISAPI geBoolean GENESISCC geVFile_SetTime&#9;&#9; (&#9;&#9;geVFile *File, const geVFile_Time *Time);</P>
<P>GENESISAPI geBoolean GENESISCC geVFile_SetHints&#9; (&#9;&#9;geVFile *File, const geVFile_Hints *Hints);</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558920"><A NAME="_Toc452379820"><A NAME="_Toc454156729">Xform3d.h</A></A></A></P>
</B></I></FONT><FONT FACE="Courier New" SIZE=1><P>/****************************************************************************************/</P>
<P>/*  XFORM3D.H                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:                                                                             */</P>
<P>/*  Description: 3D transform interface                                                 */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GE_XFORM_H</P>
<P>#define GE_XFORM_H</P>

<P>&nbsp;</P>
<P>#include "Vec3d.h"</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>typedef struct</P>
<P>{&#9;</P>
<P>&#9;geFloat AX,AY,AZ;&#9;// e[0][0],e[0][1],e[0][2]</P>
<P>&#9;geFloat BX,BY,BZ;&#9;// e[1][0],e[1][1],e[1][2]</P>
<P>&#9;geFloat CX,CY,CZ;&#9;// e[2][0],e[2][1],e[2][2]</P>
<P>&#9;geVec3d Translation;  // e[0][3],e[1][3],e[2][3]</P>
<P>&#9;//&#9;  0,0,0,1&#9;&#9;// e[3][0],e[3][1],e[3][2]</P>
<P>} geXForm3d;</P>

<P>/*   this is essentially a 'standard' 4x4 transform matrix,</P>
<P>     with the bottom row always 0,0,0,1</P>

<P>&#9;| AX, AY, AZ, Translation.X |  </P>
<P>&#9;| BX, BY, BZ, Translation.Y |  </P>
<P>&#9;| CX, CY, CZ, Translation.Z |  </P>
<P>&#9;|  0,  0,  0,      1        |  </P>
<P>*/</P>

<P>//  all geXForm3d_Set* functions return a right-handed transform.</P>

<P>#define GEXFORM3D_MINIMUM_SCALE (0.00001f)</P>

<P>&nbsp;</P>
<P>GENESISAPI void GENESISCC geXForm3d_Copy(</P>
<P>&#9;const geXForm3d *Src, </P>
<P>&#9;geXForm3d *Dst);</P>
<P>&#9;// copies Src to Dst.  </P>

<P>GENESISAPI geBoolean GENESISCC geXForm3d_IsValid(const geXForm3d *M);</P>
<P>&#9;// returns GE_TRUE if M is 'valid'  </P>
<P>&#9;// 'valid' means that M is non NULL, and there are no NAN's in the matrix.</P>

<P>GENESISAPI geBoolean GENESISCC geXForm3d_IsOrthonormal(const geXForm3d *M);</P>
<P>&#9;// returns GE_TRUE if M is orthonormal </P>
<P>&#9;// (if the rows and columns are all normalized (transform has no scaling or shearing)</P>
<P>&#9;// and is orthogonal (row1 cross row2 = row3 &amp; col1 cross col2 = col3)</P>
<P>&#9;// * does not check for right-handed convention *</P>

<P>GENESISAPI geBoolean GENESISCC geXForm3d_IsOrthogonal(const geXForm3d *M);</P>
<P>&#9;// returns GE_TRUE if M is orthogonal</P>
<P>&#9;// (row1 cross row2 = row3 &amp; col1 cross col2 = col3)</P>
<P>&#9;// * does not check for right-handed convention *</P>

<P>GENESISAPI void GENESISCC geXForm3d_Orthonormalize(geXForm3d *M);</P>
<P>&#9;// essentially removes scaling (or other distortions) from </P>
<P>&#9;// an orthogonal (or nearly orthogonal) matrix </P>
<P>&#9;// returns a right-handed matrix</P>

<P>&nbsp;</P>
<P>GENESISAPI void GENESISCC geXForm3d_SetIdentity(geXForm3d *M);&#9;&#9;&#9;</P>
<P>&#9;// sets M to an identity matrix (clears it)</P>
<P>&#9;</P>
<P>GENESISAPI void GENESISCC geXForm3d_SetXRotation(geXForm3d *M,geFloat RadianAngle);</P>
<P>&#9;// sets up a transform that rotates RadianAngle about X axis</P>
<P>&#9;// all existing contents of M are replaced</P>
<P>&#9;</P>
<P>GENESISAPI void GENESISCC geXForm3d_SetYRotation(geXForm3d *M,geFloat RadianAngle);</P>
<P>&#9;// sets up a transform that rotates RadianAngle about Y axis</P>
<P>&#9;// all existing contents of M are replaced</P>

<P>GENESISAPI void GENESISCC geXForm3d_SetZRotation(geXForm3d *M,geFloat RadianAngle);</P>
<P>&#9;// sets up a transform that rotates RadianAngle about Z axis</P>
<P>&#9;// all existing contents of M are replaced</P>

<P>GENESISAPI void GENESISCC geXForm3d_SetTranslation(geXForm3d *M,geFloat x, geFloat y, geFloat z);</P>
<P>&#9;// sets up a transform that translates x,y,z</P>
<P>&#9;// all existing contents of M are replaced</P>

<P>GENESISAPI void GENESISCC geXForm3d_SetScaling(geXForm3d *M,geFloat x, geFloat y, geFloat z);</P>
<P>&#9;// sets up a transform that scales by x,y,z</P>
<P>&#9;// all existing contents of M are replaced</P>

<P>GENESISAPI void GENESISCC geXForm3d_RotateX(geXForm3d *M,geFloat RadianAngle);  </P>
<P>&#9;// Rotates M by RadianAngle about X axis   </P>
<P>&#9;// applies the rotation to the existing contents of M</P>

<P>GENESISAPI void GENESISCC geXForm3d_RotateY(geXForm3d *M,geFloat RadianAngle);</P>
<P>&#9;// Rotates M by RadianAngle about Y axis</P>
<P>&#9;// applies the rotation to the existing contents of M</P>

<P>GENESISAPI void GENESISCC geXForm3d_RotateZ(geXForm3d *M,geFloat RadianAngle);</P>
<P>&#9;// Rotates M by RadianAngle about Z axis</P>
<P>&#9;// applies the rotation to the existing contents of M</P>

<P>GENESISAPI void GENESISCC geXForm3d_Translate(geXForm3d *M,geFloat x, geFloat y, geFloat z);&#9;</P>
<P>&#9;// Translates M by x,y,z</P>
<P>&#9;// applies the translation to the existing contents of M</P>

<P>GENESISAPI void GENESISCC geXForm3d_Scale(geXForm3d *M,geFloat x, geFloat y, geFloat z);&#9;&#9;</P>
<P>&#9;// Scales M by x,y,z</P>
<P>&#9;// applies the scale to the existing contents of M</P>

<P>GENESISAPI void GENESISCC geXForm3d_Multiply(</P>
<P>&#9;const geXForm3d *M1, </P>
<P>&#9;const geXForm3d *M2, </P>
<P>&#9;geXForm3d *MProduct);</P>
<P>&#9;// MProduct = matrix multiply of M1*M2</P>
<P>&#9;// Concatenates the transformation in the M2 matrix onto the transformation in M1</P>

<P>GENESISAPI void GENESISCC geXForm3d_Transform(</P>
<P>&#9;const geXForm3d *M,</P>
<P>&#9;const geVec3d *V, </P>
<P>&#9;geVec3d *Result);</P>
<P>&#9;// Result is Matrix M * Vector V:  V Tranformed by M</P>

<P>GENESISAPI void GENESISCC geXForm3d_TransformArray(&#9;const geXForm3d *XForm, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const geVec3d *Source, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;geVec3d *Dest, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;int32 Count);</P>

<P>GENESISAPI void GENESISCC geXForm3d_Rotate(</P>
<P>&#9;const geXForm3d *M,</P>
<P>&#9;const geVec3d *V, </P>
<P>&#9;geVec3d *Result);</P>
<P>&#9;// Result is Matrix M * Vector V:  V Rotated by M (no translation)</P>

<P>&nbsp;</P>
<P>/***</P>
<P>*</P>
<P>&#9;"Left,Up,In" are just the basis vectors in the new coordinate space.</P>
<P>&#9;You can get them by multiplying the unit bases into the transforms.</P>
<P>*</P>
<P>******/</P>

<P>GENESISAPI void GENESISCC geXForm3d_GetLeft(const geXForm3d *M, geVec3d *Left);</P>
<P>&#9;// Gets a vector that is 'left' in the frame of reference of M (facing -Z)</P>

<P>GENESISAPI void GENESISCC geXForm3d_GetUp(const geXForm3d *M,    geVec3d *Up);</P>
<P>&#9;// Gets a vector that is 'up' in the frame of reference of M (facing -Z)</P>

<P>GENESISAPI void GENESISCC geXForm3d_GetIn(const geXForm3d *M,  geVec3d *In);</P>
<P>&#9;// Gets a vector that is 'in' in the frame of reference of M (facing -Z)</P>

<P>GENESISAPI void GENESISCC geXForm3d_GetTranspose(const geXForm3d *M, geXForm3d *MTranspose);</P>
<P>&#9;// Gets the Transpose transform of M   (M^T) </P>
<P>&#9;// Transpose of a matrix is the switch of the rows and columns</P>
<P>&#9;// The transpose is usefull because it is rapidly computed and is equal to the inverse </P>
<P>&#9;// transform for orthonormal transforms    [inverse is (M')  where M*M' = Identity ]</P>

<P>GENESISAPI void GENESISCC geXForm3d_TransposeTransform(</P>
<P>&#9;const geXForm3d *M, </P>
<P>&#9;const geVec3d *V, </P>
<P>&#9;geVec3d *Result);</P>
<P>&#9;// applies the transpose transform of M to V.  Result = (M^T) * V</P>

<P>/*****</P>
<P>*</P>
<P>&#9;the Euler angles are subsequent rotations :</P>
<P>&#9;&#9;by Angles-&gt;Z around the Z axis</P>
<P>&#9;&#9;then by Angles-&gt;Y around the Y axis, in the newly rotate coordinates</P>
<P>&#9;&#9;then by Angles-&gt;X around the X axis</P>
<P>*</P>
<P>******/&#9;</P>

<P>GENESISAPI void GENESISCC geXForm3d_GetEulerAngles(const geXForm3d *M, geVec3d *Angles);</P>
<P>&#9;// Finds Euler angles from M and puts them into Angles</P>
<P>&#9;</P>
<P>GENESISAPI void GENESISCC geXForm3d_SetEulerAngles(geXForm3d *M, const geVec3d *Angles);</P>
<P>&#9;// Applies Euler angles to build M</P>

<P>GENESISAPI void GENESISCC geXForm3d_SetFromLeftUpIn(</P>
<P>&#9;geXForm3d *M,</P>
<P>&#9;const geVec3d *Left, </P>
<P>&#9;const geVec3d *Up, </P>
<P>&#9;const geVec3d *In);</P>
<P>&#9;// Builds an geXForm3d from orthonormal Left, Up and In vectors</P>

<P>GENESISAPI void GENESISCC geXForm3d_Mirror(</P>
<P>&#9;const&#9;&#9;geXForm3d *Source, </P>
<P>&#9;const&#9;&#9;geVec3d *PlaneNormal, </P>
<P>&#9;float&#9;&#9;PlaneDist, </P>
<P>&#9;geXForm3d&#9;*Dest);</P>
<P>&#9;// Mirrors a XForm3d about a plane</P>

<P>&nbsp;</P>
<P>//--------------</P>

<P>#ifndef NDEBUG</P>
<P>&#9;GENESISAPI &#9;void GENESISCC geXForm3d_SetMaximalAssertionMode( geBoolean Enable );</P>
<P>#else</P>
<P>&#9;#define geXForm3d_SetMaximalAssertionMode(Enable)</P>
<P>#endif</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><FONT FACE="Arial" SIZE=2>
<P>&nbsp;</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc446558921"><A NAME="_Toc454156730">OpenSource/Tools Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>The header files in this subdirectory and the next sixteen subdirectories following it comprise the links necessary to create the Genesis3D engine.  These are the include files you need in order to create the libraries and drivers provided by Eclipse as the Genesis3D game engine.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156731">OpenSource/Tools/Actview/GenesisSDK Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>The routines in this subdirectory are all the include files used in the outer include file which we have already covered.  Each utility has its own copy in order to shorten compilation times.  For space reasons it will not be repeated here.  Simply refer to the previously described headers for reference.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156732">OpenSource/Tools/Actview/Main Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>The routines in this subdirectory handle basic resources and texture bitmap graphics and apply textures to walls and objects.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156733">Blender.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  BLENDER.H                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description:  Actor Viewer's motion blender dialog box.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Copyright (c) 1996-1999, Eclipse Entertainment, L.L.C.                              */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef BLENDER_H</P>
<P>#define BLENDER_H</P>

<P>#include &lt;windows.h&gt;</P>
<P>#include "genesis.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>#define WM_BLENDERCLOSING&#9;&#9;WM_USER + 1</P>
<P>#define WM_BLENDERMOTIONCHANGED&#9;WM_USER + 2</P>

<P>#define DEFAULT_POSE_INDEX  -1</P>

<P>HWND Blender_Create</P>
<P>&#9;(</P>
<P>&#9;  HWND hwndParent,</P>
<P>&#9;  HINSTANCE hinst,</P>
<P>&#9;  geActor_Def *ActorDef,</P>
<P>&#9;  geMotion *BlendedMotion</P>
<P>&#9;);</P>

<P>void Blender_UpdateActor</P>
<P>&#9;(</P>
<P>&#9;  HWND hwndBlender,</P>
<P>&#9;  geActor_Def *ActorDef,</P>
<P>&#9;  geMotion *BlendedMotion</P>
<P>&#9;);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156734">Resource.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>//{{NO_DEPENDENCIES}}</P>
<P>// Microsoft Developer Studio generated include file.</P>
<P>// Used by ActView.rc</P>
<P>//</P>
<P>#define IDS_CLASSNAME                   1</P>
<P>#define IDS_PROGRAMNAME                 2</P>
<P>#define IDS_UNIQUEMESSAGE               3</P>
<P>#define IDS_DEFAULTPOSE                 4</P>
<P>#define IDS_BLENDEDMOTION               5</P>
<P>#define IDR_MENU1                       101</P>
<P>#define IDD_DRIVERDIALOG                102</P>
<P>#define IDD_ACTOR                       103</P>
<P>#define IDD_BLENDER                     105</P>
<P>#define IDI_FRAME                       106</P>
<P>#define IDI_MAINICON                    107</P>
<P>#define IDI_ZOOM                        108</P>
<P>#define IDS_CANTCREATEENGINE            109</P>
<P>#define IDS_CANTCREATECAMERA            110</P>
<P>#define IDI_PAN                         111</P>
<P>#define IDS_CANTCREATEWORLD             111</P>
<P>#define IDS_CANTLOADDRIVER              112</P>
<P>#define IDI_ROTATE                      113</P>
<P>#define IDS_CANTINITENGINE              113</P>
<P>#define IDS_CANTLOADACTOR               114</P>
<P>#define IDR_ACCELERATOR1                115</P>
<P>#define IDD_ABOUT                       116</P>
<P>#define IDS_BEGINFRAMEFAIL              116</P>
<P>#define IDS_RENDERFAIL                  117</P>
<P>#define IDS_INIFILENAME                 118</P>
<P>#define IDS_ENDFRAMEFAIL                119</P>
<P>#define IDS_HELPFILENAME                120</P>
<P>#define IDS_PROGRAMBASENAME             121</P>
<P>#define IDS_ACTFILEFILTER               122</P>
<P>#define IDS_ACTFILEEXT                  123</P>
<P>#define IDS_ACTFILEFILTERDESC           124</P>
<P>#define IDS_UNNAMED                     125</P>
<P>#define IDB_ACTVIEW                     126</P>
<P>#define IDD_NEWDIALOG                   127</P>
<P>#define IDI_BLEND                       128</P>
<P>#define IDC_DRIVERLIST                  1000</P>
<P>#define IDC_MOTIONLIST                  1000</P>
<P>#define IDC_PAN                         1001</P>
<P>#define IDC_ROTATE                      1002</P>
<P>#define IDC_ZOOM                        1003</P>
<P>#define IDI_PLAY                        1004</P>
<P>#define IDI_PAUSE                       1005</P>
<P>#define IDI_RRSTART                     1006</P>
<P>#define IDI_RRFRAME                     1007</P>
<P>#define IDI_STOP                        1008</P>
<P>#define IDI_FFFRAME                     1009</P>
<P>#define IDI_FFEND                       1010</P>
<P>#define IDC_FRONT                       1011</P>
<P>#define IDC_MOTIONCOMBO                 1012</P>
<P>#define IDC_EDITSCALE                   1013</P>
<P>#define IDC_BACK                        1014</P>
<P>#define IDC_SLIDERTIME                  1015</P>
<P>#define IDC_EDITSPEED                   1016</P>
<P>#define IDC_LEFT                        1017</P>
<P>#define IDC_STATICSCALE                 1018</P>
<P>#define IDC_STATICMOTION                1019</P>
<P>#define IDC_RENDERWIN                   1020</P>
<P>#define IDC_STATICSPEED                 1021</P>
<P>#define IDC_RIGHT                       1022</P>
<P>#define IDC_SPINSCALE                   1023</P>
<P>#define IDC_SPINSPEED                   1024</P>
<P>#define IDC_EDITFRAMETIME               1025</P>
<P>#define IDC_SPINFRAMETIME               1026</P>
<P>#define IDC_STATICFRAME                 1027</P>
<P>#define IDC_TOP                         1028</P>
<P>#define IDC_BOTTOM                      1029</P>
<P>#define IDC_STATICEND                   1030</P>
<P>#define IDC_STATICSTART                 1031</P>
<P>#define IDS_STATICSTART                 1031</P>
<P>#define IDC_STATICCURRENTTIME           1032</P>
<P>#define IDC_LOOPED                      1033</P>
<P>#define IDC_CENTER                      1034</P>
<P>#define IDC_EDITDIR                     1035</P>
<P>#define IDC_STATICMOTION2               1035</P>
<P>#define IDC_TAB1                        1036</P>
<P>#define IDC_LIST1                       1037</P>
<P>#define IDC_MOTIONSLIST                 1037</P>
<P>#define IDC_LIST2                       1038</P>
<P>#define IDC_BLENDLIST                   1038</P>
<P>#define IDC_BUTTON1                     1039</P>
<P>#define IDC_BLEND                       1039</P>
<P>#define IDC_ADD                         1039</P>
<P>#define IDC_BUTTON2                     1040</P>
<P>#define IDC_MOVEUP                      1040</P>
<P>#define IDC_BUTTON3                     1041</P>
<P>#define IDC_REMOVE                      1041</P>
<P>#define IDC_BUTTON4                     1042</P>
<P>#define IDC_MOVEDOWN                    1042</P>
<P>#define IDC_EDITTIMEOFFSET              1043</P>
<P>#define IDC_SLIDERTIMEOFFSET            1044</P>
<P>#define IDC_EDITTIMESCALE               1045</P>
<P>#define IDC_EDITSTARTTIME               1046</P>
<P>#define IDC_SLIDERSTARTTIME             1047</P>
<P>#define IDC_EDITENDTIME                 1048</P>
<P>#define IDC_SLIDERENDTIME               1049</P>
<P>#define IDC_EDITSTARTBLEND              1050</P>
<P>#define IDC_EDITENDBLEND                1051</P>
<P>#define IDC_SPINSTARTBLEND              1052</P>
<P>#define IDC_SPINENDBLEND                1053</P>
<P>#define IDC_CHECKSMOOTHBLEND            1054</P>
<P>#define IDC_BLENDPATH                   1055</P>
<P>#define IDC_STATICMOTIONEND             1056</P>
<P>#define IDC_TESTOUT                     1057</P>
<P>#define IDC_STATICBLEND                 1060</P>
<P>#define IDC_STATICSUBMOTION             1061</P>
<P>#define ID_FILE_EXIT                    40001</P>
<P>#define ID_FILE_OPEN                    40002</P>
<P>#define ID_MOTION_SELECT                40003</P>
<P>#define ID_START                        40004</P>
<P>#define ID_OPTIONS_FRONT                40005</P>
<P>#define ID_HELP_CONTENTS                40006</P>
<P>#define ID_HELP_ABOUT                   40007</P>
<P>#define ID_OPTIONS_FRAMERATE            40008</P>
<P>#define IDS_CANTADDWORLD                40009</P>
<P>#define IDS_CANTSTARTTIMER              40010</P>
<P>#define IDC_NOTHING                     40011</P>
<P>#define IDC_STATIC                      -1</P>

<P>// Next default values for new objects</P>
<P>// </P>
<P>#ifdef APSTUDIO_INVOKED</P>
<P>#ifndef APSTUDIO_READONLY_SYMBOLS</P>
<P>#define _APS_NO_MFC                     1</P>
<P>#define _APS_NEXT_RESOURCE_VALUE        131</P>
<P>#define _APS_NEXT_COMMAND_VALUE         40012</P>
<P>#define _APS_NEXT_CONTROL_VALUE         1062</P>
<P>#define _APS_NEXT_SYMED_VALUE           101</P>
<P>#endif</P>
<P>#endif</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<I><P><A NAME="_Toc454156735">OpenSource/Tools/Actview/Util Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>The routines in this subdirectory are all the major utilities used in the program.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156736">About.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  ABOUT.H&#9;&#9;                                                                        */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description:  Actor Viewer's About dialog.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef ABOUT_H</P>
<P>#define ABOUT_H</P>

<P>#pragma warning(disable : 4201 4214 4115)</P>
<P>#include &lt;windows.h&gt;</P>
<P>#pragma warning(default : 4201 4214 4115)</P>

<P>void About_DoDialog</P>
<P>&#9;(</P>
<P>&#9;  HWND hwndParent,</P>
<P>&#9;  HINSTANCE hinst</P>
<P>&#9;);</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156737">Drvlist.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  DRVLIST.H&#9;                                                                        */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Modified by Jim Mischel&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*  Description:  Actor Viewer's driver picker.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef&#9;DRVLIST_H</P>
<P>#define DRVLIST_H</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>void&#9;DrvList_PickDriver(HANDLE hInstance, HWND hwndParent, geEngine *Engine, geDriver **Driver, geDriver_Mode **Mode);</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156738">FilePath.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  FILEPATH.H                                                                          */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description:  Commonly used file and path name functions.&#9;                        */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef FILEPATH_H</P>
<P>#define FILEPATH_H</P>

<P>#include "basetype.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>// Extract drive (d:\) from pPath and place in pDrive</P>
<P>geBoolean FilePath_GetDrive (char const *pPath, char *pDrive);</P>

<P>// Extract directory from pPath and place in pDir</P>
<P>geBoolean FilePath_GetDir (char const *pPath, char *pDir);</P>

<P>// Extract Name from pPath and place in pName</P>
<P>geBoolean FilePath_GetName (char const *pPath, char *pName);</P>

<P>// Extract Extension from pPath and place in pExt</P>
<P>geBoolean FilePath_GetExt (char const *pPath, char *pExt);</P>

<P>// Extract drive and directory from pPath and place in pDriveDir</P>
<P>// pDriveDir may be the same as pPath</P>
<P>geBoolean FilePath_GetDriveAndDir (char const *pPath, char *pDriveDir);</P>

<P>// Extract Name and extension from pPath and place in pName</P>
<P>// pName may be the same as pPath</P>
<P>geBoolean FilePath_GetNameAndExt (char const *pPath, char *pName);</P>

<P>// set extension of pSourceFile to pExt and place result in pDestFile</P>
<P>// pDestFile may be the same as pSourceFile</P>
<P>geBoolean FilePath_SetExt (char const *pSourceFile, char const *pExt, char *pDestFile);</P>

<P>// Terminate pPath with a slash (by appending if necessary), and return result in pDest.</P>
<P>// pPath and pDest may be the same.</P>
<P>geBoolean FilePath_SlashTerminate (const char *pPath, char *pDest);</P>

<P>// Append pName to pPath and return result in pDest.</P>
<P>// pDest may be the same as pPath or pName.</P>
<P>geBoolean FilePath_AppendName (char const *pPath, char const *pName, char *pDest);</P>

<P>// Search for a Filename in the semicolon-separated paths specified in SearchPath.</P>
<P>// If found, returns GE_TRUE and the full path name of the file in FoundPath.</P>
<P>// Returns GE_FALSE if unsuccessful.</P>
<P>geBoolean FilePath_SearchForFile (const char *Filename, const char *SearchPath, char *FoundPath);</P>

<P>&nbsp;</P>
<P>geBoolean FilePath_AppendSearchDir (char *SearchList, const char *NewDir);</P>
<P>geBoolean FilePath_ResolveRelativePath (const char *Relative, char *Resolved);</P>
<P>geBoolean FilePath_ResolveRelativePathList (const char *RelativeList, char *ResolvedList);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454156739">InstCheck.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  INSTCHECK.H                                                                         */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description:  Function to check for previous program instances.                     */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef INSTCHECK_H</P>
<P>#define INSTCHECK_H</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>#pragma warning(disable : 4201 4214 4115)</P>
<P>#include &lt;windows.h&gt;</P>
<P>#pragma warning(default : 4201 4214 4115)</P>

<P>HWND InstCheck_CheckForPreviousInstance</P>
<P>&#9;(</P>
<P>&#9;  HINSTANCE instance,</P>
<P>&#9;  const char *TitleText,</P>
<P>&#9;  const char *UniqueMessageString</P>
<P>&#9;);</P>

<P>UINT InstCheck_GetUniqueMessageId (void);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156740">RCString.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  RCSTRING.H                                                                          */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description:  Resource string wrapper function.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef RCSTRING_H</P>
<P>#define RCSTRING_H</P>

<P>#include &lt;windows.h&gt;</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>/*</P>
<P>  Gets a resource string and returns a pointer to it.</P>
<P>  This function maintains a static array of strings into which the resource strings</P>
<P>  are placed.  This function returns pointers to items in that static array.</P>
<P>  The array is maintained as a circular queue, so if you want to keep the contents </P>
<P>  of a resource string around, you should make a copy of it yourself after loading </P>
<P>  it.</P>
<P>*/</P>
<P>const char *rcstring_Load</P>
<P>&#9;(</P>
<P>&#9;  HINSTANCE hinst,</P>
<P>&#9;  int StringID</P>
<P>&#9;);</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156741">Units.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  UNITS.H&#9;&#9;                                                                        */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description:  Common constants and unit conversions.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef UNITS_H</P>
<P>#define UNITS_H</P>

<P>#include "basetype.h"</P>
<P>#include &lt;math.h&gt;</P>
<P> </P>
<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#define PI2&#9;&#9;&#9;&#9;((geFloat)(2.0f * (GE_PI)))</P>
<P>#define ONE_OVER_2PI&#9;((geFloat)(1.0f/(PI2)))</P>

<P>// some useful unit conversions</P>
<P>#define UNITS_DEGREES_TO_RADIANS(d) Units_DegreesToRadians(d)</P>
<P>#define UNITS_RADIANS_TO_DEGREES(r) Units_RadiansToDegrees(r)</P>

<P>#define Units_DegreesToRadians(d) ((((geFloat)(d)) * GE_PI) / 180.0f)</P>
<P>#define Units_RadiansToDegrees(r) ((((geFloat)(r)) * 180.0f) / GE_PI)</P>

<P>#define Units_Round(n) ((int)Units_FRound((n)))</P>
<P>#define Units_Trunc(n) ((int)(n))</P>
<P>#define Units_FRound(n)&#9;((geFloat)floor((n)+0.5f))</P>

<P>#define Units_MakePercent(fVal) (Units_Round(fVal*100.0f))</P>
<P>#define Units_FloatFromPercent(iVal) (((float)iVal)/100.0f)</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>#endif</P>
<P> </P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156742">WinUtil.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  WINUTIL.H                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description:  Windows helper functions.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef WINUTIL_H</P>
<P>#define WINUTIL_H</P>

<P>&nbsp;</P>
<P>#pragma warning(disable : 4201 4214 4115)</P>
<P>#include &lt;windows.h&gt;</P>
<P>#pragma warning(default : 4201 4214 4115)</P>
<P>#include "basetype.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>// Set an edit box with floating point value</P>
<P>void WinUtil_SetDlgItemFloat (HWND hwnd, int ControlId, geFloat fVal);</P>

<P>// Get a floating point value from an edit box</P>
<P>BOOL WinUtil_GetDlgItemFloat (HWND hwnd, int ControlId, geFloat *pVal);</P>

<P>// Convert a screen-relative rectangle to client-relative coordinates</P>
<P>BOOL WinUtil_ScreenRectToClient (HWND hwnd, RECT *pRect);</P>

<P>// EnableWindow for dialog items.</P>
<P>void WinUtil_EnableDlgItem (HWND hwnd, int ControlId, BOOL Enable);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<I><P><A NAME="_Toc454156743">OpenSource/Tools/Exporters Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>Exporters are the routines used to plug into 3D Studio Max to enable it to create and export Genesis3D Actor files (.ACT files).</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156744">3dseres.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>//{{NO_DEPENDENCIES}}</P>
<P>// Microsoft Developer Studio generated include file.</P>
<P>// Used by gexp.rc</P>
<P>//</P>
<P>#define IDS_DXFEXP                      1</P>
<P>#define IDD_EXPORTOPTIONS               101</P>
<P>#define IDC_BYOBJECT                    1016</P>
<P>#define IDC_BYMATERIAL                  1017</P>
<P>#define IDC_1LAYER                      1018</P>
<P>#define IDC_EDIT1                       1019</P>
<P>#define IDC_EDIT2                       1020</P>
<P>#define IDC_EDIT6                       1021</P>
<P>#define IDC_EDIT3                       1022</P>
<P>#define IDC_EDIT4                       1023</P>
<P>#define IDC_EDIT5                       1024</P>
<P>#define IDC_EDIT7                       1025</P>
<P>#define IDC_EDIT8                       1026</P>
<P>#define IDC_EDIT9                       1027</P>
<P>#define IDC_EDIT10                      1028</P>
<P>#define IDC_EDIT11                      1029</P>
<P>#define IDC_EDIT12                      1030</P>
<P>#define IDC_EDIT13                      1031</P>
<P>#define IDC_EDIT14                      1032</P>
<P>#define IDC_EDIT15                      1033</P>
<P>#define IDC_EDIT16                      1034</P>
<P>#define IDS_NFO_EXT&#9;&#9;&#9;&#9;&#9;&#9;40214</P>
<P>#define IDS_KEY_EXT&#9;&#9;&#9;&#9;&#9;&#9;40215</P>
<P>#define IDS_BVH_EXT&#9;&#9;&#9;&#9;&#9;&#9;40216</P>
<P>#define IDS_TH_CLASS                    40217</P>
<P>#define IDS_TH_SCENEFILE&#9;&#9;&#9;&#9;40220</P>
<P>#define IDS_TH_MESH&#9;&#9;&#9;&#9;&#9;&#9;40221</P>
<P>#define IDS_TH_AUTHOR                   40222</P>
<P>#define IDS_TH_COPYRIGHT_ECLIPSE        40223</P>
<P>#define IDS_TH_EXP&#9;&#9;&#9;&#9;&#9;&#9;40229</P>
<P>#define IDS_TH_SCENEEXPORT              40231</P>
<P>#define IDS_TH_EXPORTDLL&#9;&#9;&#9;&#9;40232</P>
<P>#define IDS_TH_NODATATOEXPORT           40233</P>
<P>#define IDS_TH_CANTCREATE               40234</P>
<P>#define IDS_TH_WRITEERROR               40235</P>
<P>#define IDS_OBJ_TOO_LARGE               40236</P>
<P>#define IDS_EXPORT_ERROR                40237</P>
<P>#define IDC_STATIC                      -1</P>

<P>// Next default values for new objects</P>
<P>// </P>
<P>#ifdef APSTUDIO_INVOKED</P>
<P>#ifndef APSTUDIO_READONLY_SYMBOLS</P>
<P>#define _APS_NEXT_RESOURCE_VALUE        103</P>
<P>#define _APS_NEXT_COMMAND_VALUE         40001</P>
<P>#define _APS_NEXT_CONTROL_VALUE         1027</P>
<P>#define _APS_NEXT_SYMED_VALUE           101</P>
<P>#endif</P>
<P>#endif</P>
</FONT><FONT FACE="Arial"><P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156745">3dsimp.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2>
<P>/**********************************************************************</P>
<P> *&lt;</P>
<P>&#9;FILE: 3dsimp.h</P>

<P>&#9;DESCRIPTION:  .3DS file import module header file</P>

<P>&#9;CREATED BY: Tom Hudson</P>

<P>&#9;HISTORY: created 26 December 1994</P>

<P> *&gt;&#9;Copyright (c) 1994, All Rights Reserved.</P>
<P> **********************************************************************/</P>

<P>#pragma pack(1)</P>

<P>&nbsp;</P>
<P>/* 3DS Shape point structure */</P>

<P>struct shppt</P>
<P>{</P>
<P>float x;&#9;/* Control point */</P>
<P>float y;</P>
<P>float z;</P>
<P>float inx;&#9;/* Incoming vector */</P>
<P>float iny;</P>
<P>float inz;</P>
<P>float outx;&#9;/* Outgoing vector */</P>
<P>float outy;</P>
<P>float outz;</P>
<P>unsigned short flags;</P>
<P>};</P>
<P>typedef struct shppt Shppt;</P>

<P>#include "ofile.h"&#9;&#9;// 3DS Object file header</P>
<P>#include "cfile.h"&#9;&#9;// 3DS Project file header</P>
<P>//#include "3dsshape.h"&#9;// 3DS shape file header</P>
<P>#include "kfio.h"&#9;&#9;// 3DS KF header</P>
<P>#pragma pack()</P>

<P>struct Bkgrad {</P>
<P>&#9;float midpct;</P>
<P>&#9;Color botcolor;</P>
<P>&#9;Color midcolor;</P>
<P>&#9;Color topcolor;</P>
<P>&#9;};</P>

<P>struct Fogdata {</P>
<P>&#9;float nearplane;</P>
<P>&#9;float neardens;</P>
<P>&#9;float farplane;</P>
<P>&#9;float fardens;</P>
<P>&#9;Color color;</P>
<P>&#9;};</P>

<P>struct LFogData {</P>
<P>&#9;float zmin,zmax;</P>
<P>&#9;float density;</P>
<P>&#9;short type;</P>
<P>&#9;short fog_bg;</P>
<P>&#9;Color color;</P>
<P>&#9;};</P>

<P>struct Distcue {</P>
<P>&#9;float nearplane;</P>
<P>&#9;float neardim;</P>
<P>&#9;float farplane;</P>
<P>&#9;float fardim;</P>
<P>&#9;};</P>

<P>#define ENV_DISTCUE 1</P>
<P>#define ENV_FOG 2</P>
<P>#define ENV_LAYFOG 3</P>

<P>#define BG_SOLID 1</P>
<P>#define BG_GRADIENT 2</P>
<P>#define BG_BITMAP 3</P>

<P>struct BGdata {</P>
<P>&#9;int bgType;</P>
<P>&#9;int envType;</P>
<P>&#9;Color bkgd_solid;</P>
<P>&#9;Color amb_light;</P>
<P>&#9;Bkgrad bkgd_gradient;</P>
<P>&#9;Fogdata fog_data;</P>
<P>&#9;Distcue distance_cue;</P>
<P>&#9;int fog_bg,dim_bg;</P>
<P>&#9;char bkgd_map[81];</P>
<P>&#9;LFogData lfog_data;</P>
<P>&#9;};</P>

<P>class StudioImport : public SceneImport {</P>
<P>public:</P>
<P>&#9;&#9;&#9;&#9;&#9;StudioImport();</P>
<P>&#9;&#9;&#9;&#9;&#9;~StudioImport();</P>
<P>&#9;int&#9;&#9;&#9;&#9;ExtCount();&#9;&#9;&#9;&#9;&#9;// Number of extensions supported</P>
<P>&#9;const TCHAR *&#9;Ext(int n);&#9;&#9;&#9;&#9;&#9;// Extension #n (i.e. "3DS")</P>
<P>&#9;const TCHAR *&#9;LongDesc();&#9;&#9;&#9;&#9;&#9;// Long ASCII description (i.e. "Autodesk 3D Studio File")</P>
<P>&#9;const TCHAR *&#9;ShortDesc();&#9;&#9;&#9;&#9;// Short ASCII description (i.e. "3D Studio")</P>
<P>&#9;const TCHAR *&#9;AuthorName();&#9;&#9;&#9;&#9;// ASCII Author name</P>
<P>&#9;const TCHAR *&#9;CopyrightMessage();&#9;&#9;&#9;// ASCII Copyright message</P>
<P>&#9;const TCHAR *&#9;OtherMessage1();&#9;&#9;&#9;// Other message #1</P>
<P>&#9;const TCHAR *&#9;OtherMessage2();&#9;&#9;&#9;// Other message #2</P>
<P>&#9;unsigned int&#9;Version();&#9;&#9;&#9;&#9;&#9;// Version number * 100 (i.e. v3.01 = 301)</P>
<P>&#9;void&#9;&#9;&#9;ShowAbout(HWND hWnd);&#9;&#9;// Show DLL's "About..." box</P>
<P>&#9;int&#9;&#9;&#9;&#9;DoImport(const TCHAR *name,ImpInterface *i,Interface *gi);&#9;// Import file</P>
<P>&#9;};</P>

<P>#define SINGLE_SHAPE 0</P>
<P>#define MULTIPLE_SHAPES 1</P>

<P>class StudioShapeImport : public SceneImport {</P>
<P>&#9;friend BOOL CALLBACK ShapeImportOptionsDlgProc(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam);</P>

<P>public:</P>
<P>&#9;static int&#9;&#9;importType;</P>
<P>&#9;int&#9;&#9;&#9;&#9;shapeNumber;</P>
<P>&#9;&#9;&#9;&#9;&#9;StudioShapeImport();</P>
<P>&#9;&#9;&#9;&#9;&#9;~StudioShapeImport();</P>
<P>&#9;int&#9;&#9;&#9;&#9;ExtCount();&#9;&#9;&#9;&#9;&#9;// Number of extensions supported</P>
<P>&#9;const TCHAR *&#9;Ext(int n);&#9;&#9;&#9;&#9;&#9;// Extension #n (i.e. "3DS")</P>
<P>&#9;const TCHAR *&#9;LongDesc();&#9;&#9;&#9;&#9;&#9;// Long ASCII description (i.e. "Autodesk 3D Studio File")</P>
<P>&#9;const TCHAR *&#9;ShortDesc();&#9;&#9;&#9;&#9;// Short ASCII description (i.e. "3D Studio")</P>
<P>&#9;const TCHAR *&#9;AuthorName();&#9;&#9;&#9;&#9;// ASCII Author name</P>
<P>&#9;const TCHAR *&#9;CopyrightMessage();&#9;&#9;&#9;// ASCII Copyright message</P>
<P>&#9;const TCHAR *&#9;OtherMessage1();&#9;&#9;&#9;// Other message #1</P>
<P>&#9;const TCHAR *&#9;OtherMessage2();&#9;&#9;&#9;// Other message #2</P>
<P>&#9;unsigned int&#9;Version();&#9;&#9;&#9;&#9;&#9;// Version number * 100 (i.e. v3.01 = 301)</P>
<P>&#9;void&#9;&#9;&#9;ShowAbout(HWND hWnd);&#9;&#9;// Show DLL's "About..." box</P>
<P>&#9;int&#9;&#9;&#9;&#9;DoImport(const TCHAR *name,ImpInterface *i,Interface *gi);&#9;// Import file</P>
<P>&#9;};</P>

<P>// Handy file class</P>

<P>class WorkFile {</P>
<P>private:</P>
<P>&#9;FILE *stream;</P>
<P>public:</P>
<P>&#9;&#9;&#9;&#9;&#9;WorkFile(const TCHAR *filename,const TCHAR *mode) { stream = _tfopen(filename,mode); };</P>
<P>&#9;&#9;&#9;&#9;&#9;~WorkFile() { if(stream) fclose(stream); stream = NULL; };</P>
<P>&#9;FILE *&#9;&#9;&#9;Stream() { return stream; };</P>
<P>&#9;};</P>

<P>// Some 3DS structures</P>

<P>#pragma pack(1)</P>
<P>typedef struct {</P>
<P>&#9;float r,g,b;</P>
<P>&#9;} Color_f;</P>

<P>typedef struct {</P>
<P>&#9;unsigned char r,g,b;</P>
<P>&#9;} Color_24;</P>

<P>typedef struct {</P>
<P>&#9;unsigned short tag;</P>
<P>&#9;long size;</P>
<P>&#9;} Chunk_hdr;</P>

<P>typedef struct {</P>
<P>&#9;float x;</P>
<P>&#9;float y;</P>
<P>&#9;float z;</P>
<P>&#9;unsigned short flags;</P>
<P>&#9;} Verts;</P>

<P>typedef struct {</P>
<P>&#9;float u;</P>
<P>&#9;float v;</P>
<P>&#9;} Texverts;</P>

<P>typedef struct {</P>
<P>&#9;unsigned short a;</P>
<P>&#9;unsigned short b;</P>
<P>&#9;unsigned short c;</P>
<P>&#9;unsigned char material;</P>
<P>&#9;unsigned char filler;</P>
<P>&#9;unsigned long sm_group;</P>
<P>&#9;unsigned short flags;</P>
<P>&#9;} Faces;</P>

<P>typedef struct {</P>
<P>&#9;float x;</P>
<P>&#9;float y;</P>
<P>&#9;float z;</P>
<P>&#9;float tx;</P>
<P>&#9;float ty;</P>
<P>&#9;float tz;</P>
<P>&#9;float bank;</P>
<P>&#9;float focal;</P>
<P>&#9;unsigned short flags;</P>
<P>&#9;float nearplane;</P>
<P>&#9;float farplane;</P>
<P>&#9;void *appdata;</P>
<P>&#9;} Camera3DS;</P>

<P>typedef struct dirlight{</P>
<P>&#9;float x;</P>
<P>&#9;float y;</P>
<P>&#9;float z;</P>
<P>&#9;float tx;</P>
<P>&#9;float ty;</P>
<P>&#9;float tz;</P>
<P>&#9;unsigned short flags;</P>
<P>&#9;Color color;</P>
<P>&#9;float hotsize;</P>
<P>&#9;float fallsize;</P>
<P>&#9;float lo_bias;</P>
<P>//&#9;Object_list *exclude;</P>
<P>&#9;int shadsize;</P>
<P>&#9;float in_range,out_range;&#9;&#9;/* Attenuation range */</P>
<P>&#9;float shadfilter;&#9;/* size of filter box*/</P>
<P>&#9;char imgfile[13];</P>
<P>&#9;float ray_bias;</P>
<P>&#9;float bank,aspect;&#9;/* Spotlight bank angle, aspect ratio */</P>
<P>&#9;float mult;&#9;&#9;&#9;/* Light multiplier */</P>
<P>&#9;void *appdata;</P>
<P>&#9;NameTab excList;</P>
<P>&#9;} Dirlight;</P>

<P>typedef struct</P>
<P>&#9;{</P>
<P>&#9;float lo_bias,hi_bias;</P>
<P>&#9;short shadsize,shadsamp,shadrange;</P>
<P>&#9;} Locshad;</P>

<P>typedef struct {</P>
<P>&#9;float bias,shadfilter;</P>
<P>&#9;short shadsize;</P>
<P>&#9;} LocShad2;</P>

<P>#pragma pack()</P>

<P>// 3DS face edge vis flags</P>
<P>#define ABLINE (1&lt;&lt;2)</P>
<P>#define BCLINE (1&lt;&lt;1)</P>
<P>#define CALINE 1</P>

<P>#define VWRAP (1&lt;&lt;11)&#9;&#9;/* Texture coord V wraps on this face */</P>
<P>#define UWRAP (1&lt;&lt;3)&#9;&#9;/* Texture coord U wraps on this face */</P>

<P>// Node list structure</P>

<P>#define OBJ_MESH 0</P>
<P>#define OBJ_OMNILIGHT 1</P>
<P>#define OBJ_SPOTLIGHT 2</P>
<P>#define OBJ_CAMERA 3</P>
<P>#define OBJ_DUMMY 4</P>
<P>#define OBJ_TARGET 5</P>
<P>#define OBJ_OTHER  6 // generated from app data</P>

<P>// 3DS Key structures</P>

<P>#pragma pack(1)</P>
<P>#define KEYHDR  \</P>
<P>&#9;TimeValue time;  \</P>
<P>&#9;float tens,cont,bias; \</P>
<P>&#9;float easeTo,easeFrom;</P>

<P>typedef struct { float p,ds,dd; } PosElem;</P>
<P>typedef struct {</P>
<P>&#9;KEYHDR</P>
<P>&#9;PosElem e[8]; /* enough to be bigger than the biggest key,</P>
<P>&#9;&#9;&#9;&#9;&#9;including RotKey */</P>
<P>&#9;} Key;</P>

<P>typedef struct {</P>
<P>&#9;KEYHDR</P>
<P>&#9;PosElem e[1];</P>
<P>&#9;} ScalarKey;</P>

<P>typedef struct {</P>
<P>&#9;KEYHDR</P>
<P>&#9;PosElem e[3];</P>
<P>&#9;} PosKey;&#9;</P>

<P>typedef struct {</P>
<P>&#9;KEYHDR</P>
<P>&#9;float angle;&#9;/* angle of rotation in radians (always &gt;0) */</P>
<P>&#9;float axis[3]; /* axis of rotation (unit vector) */</P>
<P>&#9;float q[4];  &#9;/* quaternion describing orientation */</P>
<P>&#9;float b[4];&#9;&#9;/* incoming tangent term */</P>
<P>&#9;float a[4];&#9;&#9;/* outgoing tangent term */</P>
<P>&#9;} RotKey;</P>

<P>#ifdef LATER</P>
<P>typedef struct {</P>
<P>&#9;KEYHDR</P>
<P>&#9;Namedobj *object;  </P>
<P>&#9;} MorphKey;&#9;</P>

<P>typedef struct {</P>
<P>&#9;KEYHDR</P>
<P>&#9;} HideKey;</P>
<P>#endif // LATER</P>

<P>typedef struct {</P>
<P>&#9;KEYHDR</P>
<P>&#9;FLOAT c[3];</P>
<P>&#9;} ColorKey;</P>
<P>#pragma pack()</P>

<P>// key types</P>
<P>#define KEY_FLOAT&#9;0</P>
<P>#define KEY_POS&#9;&#9;1</P>
<P>#define KEY_ROT&#9;&#9;2</P>
<P>#define KEY_SCL&#9;&#9;3</P>
<P>#define KEY_COLOR&#9;4</P>

<P>#define NUMTRACKS 8</P>

<P>#define POS_TRACK_INDEX 0</P>
<P>#define ROT_TRACK_INDEX 1</P>
<P>#define SCL_TRACK_INDEX 2</P>
<P>#define FOV_TRACK_INDEX 3</P>
<P>#define ROLL_TRACK_INDEX 4</P>
<P>#define COL_TRACK_INDEX 5</P>
<P>#define HOT_TRACK_INDEX 6</P>
<P>#define FALL_TRACK_INDEX 7</P>

<P>&nbsp;</P>
<P>typedef struct {</P>
<P>&#9;union {</P>
<P>&#9;&#9;Key key;</P>
<P>&#9;&#9;PosKey pos;</P>
<P>&#9;&#9;RotKey rot;</P>
<P>&#9;&#9;ColorKey col;</P>
<P>&#9;&#9;ScalarKey sc;</P>
<P>&#9;&#9;} key;</P>
<P>&#9;void *next;</P>
<P>&#9;} KeyList;</P>

<P>// A list of 3DS objects with their names and types</P>
<P>typedef struct {</P>
<P>&#9;void *object;</P>
<P>&#9;Point3 srcPos;</P>
<P>&#9;Point3 targPos;</P>
<P>&#9;TSTR name;</P>
<P>&#9;int type;</P>
<P>&#9;int used;</P>
<P>&#9;int cstShad;</P>
<P>&#9;int rcvShad;</P>
<P>&#9;int mtln;</P>
<P>&#9;void *next;</P>
<P>&#9;} WkObjList;</P>

<P>// A list of the nodes and their various keys</P>
<P>typedef struct {</P>
<P>&#9;ImpNode *node;</P>
<P>&#9;short id;</P>
<P>&#9;int type;</P>
<P>&#9;int mnum;</P>
<P>&#9;TSTR name;</P>
<P>&#9;TSTR owner;</P>
<P>&#9;Mesh *mesh;</P>
<P>&#9;ImpNode *parent;</P>
<P>&#9;Matrix3 tm;</P>
<P>&#9;KeyList *posList;</P>
<P>&#9;KeyList *rotList;</P>
<P>&#9;KeyList *scList;</P>
<P>&#9;KeyList *colList;</P>
<P>&#9;KeyList *hotList;</P>
<P>&#9;KeyList *fallList;</P>
<P>&#9;KeyList *fovList;</P>
<P>&#9;KeyList *rollList;</P>
<P>&#9;SHORT trackFlags[NUMTRACKS];</P>
<P>&#9;void *next;</P>
<P>&#9;} WkNodeList;</P>

<P>/* Camera flag bit meanings */</P>

<P>#define NO_CAM_CONE&#9;0x0001</P>
<P>#define NO_CAM_TEMP_APPDATA 0x0002 /* Free appdata after rendering complete  */&#9;</P>

<P>#define NO_CAM_CONE_OFF&#9;(~NO_CAM_CONE)</P>

<P>/* Light flag bit meanings */</P>

<P>#define NO_LT_ON&#9;0x0001</P>
<P>#define NO_LT_SHAD&#9;0x0002</P>
<P>#define NO_LT_LOCAL&#9;0x0004</P>
<P>#define NO_LT_CONE&#9;0x0008</P>
<P>#define NO_LT_RECT&#9;0x0010</P>
<P>#define NO_LT_PROJ&#9;0x0020</P>
<P>#define NO_LT_OVER&#9;0x0040</P>
<P>#define NO_LT_ATTEN&#9;0x0080</P>
<P>#define NO_LT_RAYTR&#9;0x0100</P>
<P>#define NO_LT_TEMP_APPDATA 0x0200 /* Free appdata after rendering complete  */&#9;</P>

<P>#define NO_LT_OFF&#9;(~NO_LT_ON)</P>
<P>#define NO_LT_SHAD_OFF&#9;(~NO_LT_SHAD)</P>
<P>#define NO_LT_LOCAL_OFF&#9;(~NO_LT_LOCAL)</P>
<P>#define NO_LT_CONE_OFF&#9;(~NO_LT_CONE)</P>
<P>#define NO_LT_RECT_OFF&#9;(~NO_LT_RECT)</P>
<P>#define NO_LT_PROJ_OFF&#9;(~NO_LT_PROJ)</P>
<P>#define NO_LT_OVER_OFF&#9;(~NO_LT_OVER)</P>
<P>#define NO_LT_ATTEN_OFF&#9;(~NO_LT_ATTEN)</P>

<P>/*--------- Track flags bits------------ */</P>

<P>/*-- This bit causes the spline to be cyclic */</P>
<P>#define ANIM_CYCLIC 1</P>
<P>/*-- This bit causes a track to continue "modulo" its duration */</P>
<P>#define ANIM_LOOP  (1&lt;&lt;1)</P>
<P>/*-- This bit is used by anim.c, but clients need not worry about it*/</P>
<P>#define ANIM_NEGWRAP (1&lt;&lt;2)</P>

<P>#define X_LOCKED (1&lt;&lt;3)</P>
<P>#define Y_LOCKED (1&lt;&lt;4)</P>
<P>#define Z_LOCKED (1&lt;&lt;5)</P>
<P>#define ALL_LOCKED (X_LOCKED|Y_LOCKED|Z_LOCKED)</P>
<P>#define TRACK_ATKEY (1&lt;&lt;6)</P>

<P>/* these flags specify which coords are NOT inherited from parent */ </P>
<P>#define LNKSHFT 7</P>
<P>#define NO_LNK_X (1&lt;&lt;LNKSHFT)</P>
<P>#define NO_LNK_Y (1&lt;&lt;(LNKSHFT+1))</P>
<P>#define NO_LNK_Z (1&lt;&lt;(LNKSHFT+2))</P>
<P>#define LASTAXIS_SHFT 10</P>
<P>#define LASTAXIS_MASK (3&lt;&lt;LASTAXIS_SHFT)</P>

<P>// A worker object for dealing with creating the objects.</P>
<P>// Useful in the chunk-oriented 3DS file format</P>

<P>// Worker types</P>

<P>#define WORKER_IDLE&#9;&#9;0</P>
<P>#define WORKER_MESH&#9;&#9;1</P>
<P>#define WORKER_KF&#9;&#9;2</P>
<P>#define WORKER_SHAPE&#9;3</P>
<P>#define WORKER_LIGHT&#9;4</P>
<P>#define WORKER_CAMERA&#9;5</P>

<P>struct SMtl;</P>

<P>struct MtlName{</P>
<P>&#9;char s[20];</P>
<P>&#9;};</P>

<P>class ObjWorker {</P>
<P>public:</P>
<P>&#9;int okay;</P>
<P>&#9;ImpInterface *i;</P>
<P>&#9;Interface *ip;</P>
<P>&#9;TSTR name;</P>
<P>&#9;int mode;</P>
<P>&#9;int gotverts;</P>
<P>&#9;int verts;</P>
<P>&#9;int tverts;</P>
<P>&#9;int gottverts;</P>
<P>&#9;int gotfaces;</P>
<P>&#9;int faces;</P>
<P>&#9;int cstShad;</P>
<P>&#9;int rcvShad;</P>
<P>&#9;Mtl *sceneMtls[256];</P>
<P>&#9;MtlName mtlNames[256];</P>
<P>&#9;TriObject *object;</P>
<P>&#9;GenLight *light;</P>
<P>&#9;Dirlight studioLt;</P>
<P>&#9;GenCamera *camera;</P>
<P>&#9;Camera3DS studioCam;</P>
<P>&#9;SplineShape *splShape;</P>
<P>&#9;BezierShape *shape;</P>
<P>&#9;Spline3D *spline;</P>
<P>&#9;Mesh *mesh;</P>
<P>&#9;ImpNode *thisNode;</P>
<P>&#9;ImpNode *parentNode;</P>
<P>&#9;short id;</P>
<P>&#9;WkObjList *objects;</P>
<P>&#9;WkNodeList *nodes;</P>
<P>&#9;WkNodeList *workNode;</P>
<P>&#9;Matrix3 tm;</P>
<P>&#9;Point3 pivot;</P>
<P>&#9;DummyObject *dummy;</P>
<P>&#9;int isDummy;</P>
<P>&#9;int lightType;</P>
<P>&#9;TSTR nodename;</P>
<P>&#9;// Time stuff:</P>
<P>&#9;BOOL lengthSet;</P>
<P>&#9;TimeValue length;</P>
<P>&#9;BOOL segmentSet;</P>
<P>&#9;Interval segment;&#9;</P>
<P>&#9;SHORT trackFlags[NUMTRACKS];</P>
<P>&#9;MtlList loadMtls;</P>
<P>&#9;void *appdata;</P>
<P>&#9;DWORD appdataLen;</P>
<P>&#9;Tab&lt;UVVert&gt;newTV;</P>

<P>&#9;float hook_x, hook_y;</P>
<P>&#9;&#9;&#9;&#9;&#9;ObjWorker(ImpInterface *iptr,Interface *ip);</P>
<P>&#9;&#9;&#9;&#9;&#9;~ObjWorker() { FinishUp(); FreeObjList(); FreeNodeList(); i-&gt;RedrawViews(); }</P>
<P>&#9;int&#9;&#9;&#9;&#9;StartMesh(const char *name);</P>
<P>&#9;int&#9;&#9;&#9;&#9;StartLight(const char *name);</P>
<P>&#9;int&#9;&#9;&#9;&#9;CreateLight(int type);</P>
<P>&#9;int&#9;&#9;&#9;&#9;StartCamera(const char *name);</P>
<P>&#9;int&#9;&#9;&#9;&#9;CreateCamera(int type);</P>
<P>&#9;int&#9;&#9;&#9;&#9;StartKF(ImpNode *node);</P>
<P>&#9;int&#9;&#9;&#9;&#9;StartShape();</P>
<P>&#9;int&#9;&#9;&#9;&#9;StartSpline();</P>
<P>&#9;int&#9;&#9;&#9;&#9;AddShapePoint(Shppt *p);</P>
<P>&#9;int&#9;&#9;&#9;&#9;CloseSpline();</P>
<P>&#9;int&#9;&#9;&#9;&#9;FinishShape();</P>
<P>&#9;int&#9;&#9;&#9;&#9;FinishUp();</P>
<P>&#9;void&#9;&#9;&#9;SetTm(Matrix3 *transform) { tm = *transform; }</P>
<P>&#9;int&#9;&#9;&#9;&#9;SetVerts(int count);</P>
<P>&#9;int&#9;&#9;&#9;&#9;SetTVerts(int count);</P>
<P>&#9;int&#9;&#9;&#9;&#9;GetVerts() { return verts; }</P>
<P>&#9;int&#9;&#9;&#9;&#9;SetFaces(int count);</P>
<P>&#9;int&#9;&#9;&#9;&#9;GetFaces() { return faces; }</P>
<P>&#9;int&#9;&#9;&#9;&#9;PutVertex(int index,Verts *v);</P>
<P>&#9;int&#9;&#9;&#9;&#9;PutTVertex(int index,UVVert *v);</P>
<P>&#9;int&#9;&#9;&#9;&#9;PutFace(int index,Faces *f);</P>
<P>&#9;int&#9;&#9;&#9;&#9;PutSmooth(int index,unsigned long smooth);</P>
<P>&#9;int &#9;&#9;&#9;PutFaceMtl(int index, int imtl);</P>
<P>&#9;void &#9;&#9;&#9;SetTVerts(int nf, Faces *f);</P>
<P>&#9;DWORD &#9;&#9;&#9;AddNewTVert(UVVert p);</P>
<P>&#9;void&#9;&#9;&#9;Reset();</P>
<P>&#9;void&#9;&#9;&#9;Abandon();</P>
<P>&#9;int&#9;&#9;&#9;&#9;AddObject(Object *obj,int type,const TCHAR *name, int mtlNum=-1);</P>
<P>&#9;int&#9;&#9;&#9;&#9;AddNode(ImpNode *node,const TCHAR *name,int type,Mesh *mesh,char *owner,int mtlNum=-1);</P>
<P>&#9;int&#9;&#9;&#9;&#9;SetNodeId(ImpNode *node,short id);</P>
<P>&#9;int&#9;&#9;&#9;&#9;SetNodesParent(ImpNode *node,ImpNode *parent);</P>
<P>&#9;void *&#9;&#9;&#9;FindObject(char *name, int &amp;type, int &amp;cstShad, int &amp;rcvShad, int &amp;mtlNum);</P>
<P>&#9;int&#9;&#9;&#9;&#9;UseObject(char *name);</P>
<P>&#9;int&#9;&#9;&#9;&#9;CompleteScene();</P>
<P>&#9;int &#9;&#9;&#9;SetupEnvironment();</P>
<P>&#9;ImpNode *&#9;&#9;FindNode(char *name);</P>
<P>&#9;ImpNode *&#9;&#9;FindNodeFromId(short id);</P>
<P>&#9;WkNodeList *&#9;FindEntry(char *name);</P>
<P>&#9;WkNodeList *&#9;FindEntryFromId(short id);</P>
<P>&#9;WkNodeList *&#9;FindNodeListEntry(ImpNode *node);</P>
<P>&#9;WkObjList *&#9;&#9;FindObjListEntry(TSTR &amp;name);</P>
<P>&#9;void *&#9;&#9;&#9;FindObjFromNode(ImpNode *node);</P>
<P>&#9;int&#9;&#9;&#9;&#9;FindTypeFromNode(ImpNode *node, Mesh **mesh);</P>
<P>&#9;TCHAR *&#9;&#9;&#9;NodeName(ImpNode *node);</P>
<P>&#9;void&#9;&#9;&#9;FreeObjList();</P>
<P>&#9;void&#9;&#9;&#9;FreeNodeList();</P>
<P>&#9;ImpNode *&#9;&#9;ThisNode() { return thisNode; }</P>
<P>&#9;ImpNode *&#9;&#9;ParentNode() { return parentNode; }</P>
<P>&#9;void&#9;&#9;&#9;SetParentNode(ImpNode *node) { parentNode = node; }</P>
<P>&#9;void&#9;&#9;&#9;SetPivot(Point3 p) { pivot = p; }</P>
<P>&#9;int&#9;&#9;&#9;&#9;AddPositionKey(PosKey *key) { return AddKey(&amp;workNode-&gt;posList,(Key *)key); }</P>
<P>&#9;int&#9;&#9;&#9;&#9;AddRotationKey(RotKey *key) { return AddKey(&amp;workNode-&gt;rotList,(Key *)key); }</P>
<P>&#9;int&#9;&#9;&#9;&#9;AddScaleKey(PosKey *key) { return AddKey(&amp;workNode-&gt;scList,(Key *)key); }</P>
<P>&#9;int&#9;&#9;&#9;&#9;AddColorKey(ColorKey *key) { return AddKey(&amp;workNode-&gt;colList,(Key *)key); }</P>
<P>&#9;int&#9;&#9;&#9;&#9;AddHotKey(ScalarKey *key) { return AddKey(&amp;workNode-&gt;hotList,(Key *)key); }</P>
<P>&#9;int&#9;&#9;&#9;&#9;AddFallKey(ScalarKey *key) { return AddKey(&amp;workNode-&gt;fallList,(Key *)key); }</P>
<P>&#9;int&#9;&#9;&#9;&#9;AddFOVKey(ScalarKey *key) { return AddKey(&amp;workNode-&gt;fovList,(Key *)key); }</P>
<P>&#9;int&#9;&#9;&#9;&#9;AddRollKey(ScalarKey *key) { return AddKey(&amp;workNode-&gt;rollList,(Key *)key); }</P>
<P>&#9;int&#9;&#9;&#9;&#9;AddKey(KeyList **list,Key *data);</P>
<P>&#9;void&#9;&#9;&#9;FreeKeyList(KeyList **list);</P>
<P>&#9;int&#9;&#9;&#9;&#9;SetTransform(ImpNode *node,Matrix3&amp; m);</P>
<P>&#9;Matrix3&#9;&#9;&#9;GetTransform(ImpNode *node);</P>
<P>&#9;int&#9;&#9;&#9;&#9;ReadyDummy();</P>
<P>&#9;ImpNode *&#9;&#9;MakeDummy(const TCHAR *name);</P>
<P>&#9;ImpNode *&#9;&#9;MakeANode(const TCHAR *name, BOOL target,char *owner);</P>
<P>&#9;void&#9;&#9;&#9;SetDummy(int x) { isDummy = x; }</P>
<P>&#9;int&#9;&#9;&#9;&#9;IsDummy() { return isDummy; }</P>
<P>&#9;int&#9;&#9;&#9;&#9;SetDummyBounds(Point3&amp; min,Point3&amp; max);</P>
<P>&#9;void&#9;&#9;&#9;SetNodeName(const TCHAR *name) { nodename = name; }</P>
<P>&#9;void&#9;&#9;&#9;SetInstanceName(ImpNode *node, const TCHAR *iname);</P>
<P>&#9;void&#9;&#9;&#9;SetAnimLength(TimeValue l) { length = l; lengthSet = TRUE; }</P>
<P>&#9;void&#9;&#9;&#9;SetSegment(Interval seg) { segment = seg; segmentSet = TRUE; }</P>
<P>&#9;void&#9;&#9;&#9;SetControllerKeys(Control *cont,KeyList *keys,int type,float f=1.0f,float aspect=-1.0f);</P>
<P>&#9;void            MakeControlsTCB(Control *tmCont,SHORT *tflags);</P>
<P>&#9;Mtl*&#9;&#9;&#9;GetMaxMtl(int i);</P>
<P>&#9;void &#9;&#9;&#9;AssignMtl(INode *theINode, Mesh *mesh);</P>
<P>&#9;void &#9;&#9;&#9;AssignMtl(WkNodeList* wkNode);</P>
<P>&#9;int &#9;&#9;&#9;GetMatNum(char *name);</P>
<P>&#9;void &#9;&#9;&#9;AddMeshMtl(SMtl *mtl);</P>
<P>&#9;void &#9;&#9;&#9;FreeUnusedMtls();</P>
<P>&#9;int&#9;&#9;&#9;&#9;LoadAppData(FILE *stream,DWORD chunkSize);</P>
<P>&#9;void&#9;&#9;&#9;ParseIKData(INode *node);</P>
<P>&#9;};</P>

<P>&nbsp;</P>
<P>int skip_chunk(FILE *stream);</P>
<P>int get_next_chunk(FILE *stream,Chunk_hdr *hdr);</P>
<P>int SkipRead(FILE *stream,long bytes);</P>
<P>int read_string(char *string,FILE *stream,int maxsize);</P>
<P>int load_app_data(FILE *stream,void **pdata, int size);</P>

<P>#define RDERR(ptr,count) { if(!fread(ptr,count,1,stream)) return 0; }</P>
<P>#define RD3FLOAT(p) RDERR(p,3*sizeof(FLOAT))</P>
<P>#define RDFLOAT(p) &#9;RDERR(p,sizeof(FLOAT))</P>
<P>#define RDLONG(p) RDERR(p,sizeof(LONG))</P>
<P>#define RDSHORT(p) RDERR(p,sizeof(SHORT))</P>
<P>#define DUMNUM 0x7fff</P>
</FONT><FONT FACE="Arial"><P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156746">3dsires.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>//{{NO_DEPENDENCIES}}</P>
<P>// Microsoft Developer Studio generated include file.</P>
<P>// Used by 3dsimp.rc</P>
<P>//</P>
<P>#define IDS_MATCHANIMLENGTH             1</P>
<P>#define IDS_3DSIMP                      2</P>
<P>#define IDS_DB_MISSING_SHAPE            3</P>
<P>#define IDS_DB_LIGHT_ERROR              4</P>
<P>#define IDS_DB_CAMERA_ERROR             5</P>
<P>#define IDS_DB_NO_OBJECT                6</P>
<P>#define IDS_DB_HAS_VERTS                7</P>
<P>#define IDS_DB_NUMVERTS_FAIL            8</P>
<P>#define IDS_DB_HAS_TVERTS               9</P>
<P>#define IDS_DB_HAS_FACES                10</P>
<P>#define IDS_DB_NUMFACES_FAIL            11</P>
<P>#define IDS_DB_NUMTVFACES_FAIL          12</P>
<P>#define IDS_DB_PUT_NO_VERTS             13</P>
<P>#define IDS_DB_3DSIMP                   14</P>
<P>#define IDS_DB_VERTS_OR                 15</P>
<P>#define IDS_DB_PUT_NO_TVERTS            16</P>
<P>#define IDS_DB_TVERTS_OR                17</P>
<P>#define IDS_DB_PUT_NO_FACES             18</P>
<P>#define IDS_DB_FACES_OR                 19</P>
<P>#define IDS_DB_SMOOTH_NO_FACES          20</P>
<P>#define IDS_DB_SMFACE_OR                21</P>
<P>#define IDS_DB_SHAPE_NUM                22</P>
<P>#define IDS_DB_NOT_LINKED               23</P>
<P>#define IDD_SHAPEIMPORTOPTIONS          101</P>
<P>#define IDD_MERGEORREPL                 102</P>
<P>#define IDC_SINGLEOBJECT                1000</P>
<P>#define IDC_MULTIPLEOBJECTS             1001</P>
<P>#define IDC_3DS_MERGE                   1002</P>
<P>#define IDC_3DS_REPLACE                 1003</P>
<P>#define IDS_TH_3DSTUDIO                 40216</P>
<P>#define IDS_TH_SCENEIMPORT              40217</P>
<P>#define IDS_TH_3DSTUDIOSHAPE            40218</P>
<P>#define IDS_TH_3DSIMPORTDLL             40219</P>
<P>#define IDS_TH_3DSSCENEFILE             40220</P>
<P>#define IDS_TH_3DSMESH                  40221</P>
<P>#define IDS_TH_TOM_HUDSON               40222</P>
<P>#define IDS_TH_COPYRIGHT_YOST_GROUP     40223</P>
<P>#define IDS_TH_3DSSHAPEFILE             40224</P>
<P>#define IDS_TH_ERR_OPENING_FILE         40225</P>
<P>#define IDS_TH_3DSIMP                   40226</P>
<P>#define IDS_TH_3DSREADERROR             40227</P>
<P>#define IDS_TH_INVALIDFILE              40228</P>
<P>#define IDC_STATIC                      -1</P>

<P>// Next default values for new objects</P>
<P>// </P>
<P>#ifdef APSTUDIO_INVOKED</P>
<P>#ifndef APSTUDIO_READONLY_SYMBOLS</P>
<P>#define _APS_NEXT_RESOURCE_VALUE        103</P>
<P>#define _APS_NEXT_COMMAND_VALUE         40001</P>
<P>#define _APS_NEXT_CONTROL_VALUE         1003</P>
<P>#define _APS_NEXT_SYMED_VALUE           101</P>
<P>#endif</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156747">Cfile.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2>
<P>/* Configuration file data chunks */</P>

<P>#define CMAGIC 0xC23D&#9;/* Configuration magic */</P>

<P>#define C_MDRAWER 0xC010</P>
<P>#define C_TDRAWER 0xC020</P>
<P>#define C_SHPDRAWER 0xC030</P>
<P>#define C_MODDRAWER 0xC040</P>
<P>#define C_RIPDRAWER 0xC050</P>
<P>#define C_TXDRAWER 0xC060</P>
<P>#define C_PDRAWER 0xC062</P>
<P>#define C_MTLDRAWER 0xC064</P>
<P>#define C_FLIDRAWER 0xC066</P>
<P>#define C_CUBDRAWER 0xC067</P>
<P>#define C_MFILE 0xC070</P>
<P>#define C_SHPFILE 0xC080</P>
<P>#define C_MODFILE 0xC090</P>
<P>#define C_RIPFILE 0xC0A0</P>
<P>#define C_TXFILE 0xC0B0</P>
<P>#define C_PFILE 0xC0B2</P>
<P>#define C_MTLFILE 0xC0B4</P>
<P>#define C_FLIFILE 0xC0B6</P>
<P>#define C_PALFILE 0xC0B8</P>
<P>#define C_TX_STRING 0xC0C0</P>
<P>#define C_CONSTS 0xC0D0</P>
<P>#define C_SNAPS 0xC0E0</P>
<P>#define C_GRIDS 0xC0F0</P>
<P>#define C_ASNAPS 0xC100</P>
<P>#define C_GRID_RANGE 0xC110</P>
<P>#define C_RENDTYPE 0xC120</P>
<P>#define C_PROGMODE 0xC130</P>
<P>#define C_PREVMODE 0xC140</P>
<P>#define C_MODWMODE 0xC150</P>
<P>#define C_MODMODEL 0xC160</P>
<P>#define C_ALL_LINES 0xC170</P>
<P>#define C_BACK_TYPE 0xC180</P>
<P>#define C_MD_CS 0xC190</P>
<P>#define C_MD_CE 0xC1A0</P>
<P>#define C_MD_SML 0xC1B0</P>
<P>#define C_MD_SMW 0xC1C0</P>
<P>#define C_LOFT_WITH_TEXTURE 0xC1C3</P>
<P>#define C_LOFT_L_REPEAT 0xC1C4</P>
<P>#define C_LOFT_W_REPEAT 0xC1C5</P>
<P>#define C_LOFT_UV_NORMALIZE 0xC1C6</P>
<P>#define C_WELD_LOFT 0xC1C7</P>
<P>#define C_MD_PDET 0xC1D0</P>
<P>#define C_MD_SDET 0xC1E0</P>
<P>#define C_RGB_RMODE 0xC1F0</P>
<P>#define C_RGB_HIDE 0xC200</P>
<P>#define C_RGB_MAPSW 0xC202</P>
<P>#define C_RGB_TWOSIDE 0xC204</P>
<P>#define C_RGB_SHADOW 0xC208</P>
<P>#define C_RGB_AA 0xC210</P>
<P>#define C_RGB_OVW 0xC220</P>
<P>#define C_RGB_OVH 0xC230</P>
<P>#define C_RGB_PICTYPE 0xC240</P>
<P>#define C_RGB_OUTPUT 0xC250</P>
<P>#define C_RGB_TODISK 0xC253</P>
<P>#define C_RGB_COMPRESS 0xC254</P>
<P>#define C_JPEG_COMPRESSION 0xC255</P>
<P>#define C_RGB_DISPDEV 0xC256</P>
<P>#define C_RGB_HARDDEV 0xC259</P>
<P>#define C_RGB_PATH 0xC25A</P>
<P>#define C_BITMAP_DRAWER 0xC25B</P>
<P>#define C_RGB_FILE 0xC260</P>
<P>#define C_RGB_OVASPECT 0xC270</P>

<P>#define C_RGB_ANIMTYPE 0xC271</P>
<P>#define C_RENDER_ALL 0xC272</P>
<P>#define C_REND_FROM 0xC273</P>
<P>#define C_REND_TO 0xC274</P>
<P>#define C_REND_NTH 0xC275</P>
<P>#define C_PAL_TYPE 0xC276</P>
<P>#define C_RND_TURBO 0xC277</P>
<P>#define C_RND_MIP&#9;0xC278</P>
<P>#define C_BGND_METHOD 0xC279</P>
<P>#define C_AUTO_REFLECT 0xC27A</P>
<P>#define C_VP_FROM 0xC27B</P>
<P>#define C_VP_TO 0xC27C</P>
<P>#define C_VP_NTH 0xC27D</P>

<P>#define C_SRDIAM 0xC280</P>
<P>#define C_SRDEG 0xC290</P>
<P>#define C_SRSEG 0xC2A0</P>
<P>#define C_SRDIR 0xC2B0</P>
<P>#define C_HETOP 0xC2C0</P>
<P>#define C_HEBOT 0xC2D0</P>
<P>#define C_HEHT 0xC2E0</P>
<P>#define C_HETURNS 0xC2F0</P>
<P>#define C_HEDEG 0xC300</P>
<P>#define C_HESEG 0xC310</P>
<P>#define C_HEDIR 0xC320</P>
<P>#define C_QUIKSTUFF 0xC330</P>
<P>#define C_SEE_LIGHTS 0xC340</P>
<P>#define C_SEE_CAMERAS 0xC350</P>
<P>#define C_SEE_3D 0xC360</P>
<P>#define C_MESHSEL 0xC370</P>
<P>#define C_MESHUNSEL 0xC380</P>
<P>#define C_POLYSEL 0xC390</P>
<P>#define C_POLYUNSEL 0xC3A0</P>
<P>#define C_SHPLOCAL 0xC3A2</P>
<P>#define C_MSHLOCAL 0xC3A4</P>
<P>#define C_NUM_FORMAT 0xC3B0</P>
<P>#define C_ARCH_DENOM 0xC3C0</P>
<P>#define C_IN_DEVICE 0xC3D0</P>
<P>#define C_MSCALE 0xC3E0</P>
<P>#define C_COMM_PORT 0xC3F0</P>
<P>#define C_TAB_BASES 0xC400</P>
<P>#define C_TAB_DIVS 0xC410</P>
<P>#define C_MASTER_SCALES 0xC420</P>
<P>#define C_SHOW_1STVERT 0xC430</P>
<P>#define C_SHAPER_OK 0xC440</P>
<P>#define C_LOFTER_OK 0xC450</P>
<P>#define C_EDITOR_OK 0xC460</P>
<P>#define C_KEYFRAMER_OK 0xC470</P>
<P>#define C_PICKSIZE 0xC480</P>
<P>#define C_MAPTYPE 0xC490</P>
<P>#define C_MAP_DISPLAY 0xC4A0</P>
<P>#define C_TILE_XY 0xC4B0</P>
<P>#define C_MAP_XYZ 0xC4C0</P>
<P>#define C_MAP_SCALE 0xC4D0</P>
<P>#define C_MAP_MATRIX_OLD 0xC4E0</P>
<P>#define C_MAP_MATRIX 0xC4E1</P>
<P>#define C_MAP_WID_HT 0xC4F0</P>
<P>#define C_OBNAME 0xC500</P>
<P>#define C_CAMNAME 0xC510</P>
<P>#define C_LTNAME 0xC520</P>
<P>#define C_CUR_MNAME 0xC525</P>
<P>#define C_CURMTL_FROM_MESH 0xC526</P>
<P>#define C_GET_SHAPE_MAKE_FACES 0xC527</P>
<P>#define C_DETAIL 0xC530</P>
<P>#define C_VERTMARK 0xC540</P>
<P>#define C_MSHAX 0xC550</P>
<P>#define C_MSHCP 0xC560</P>
<P>#define C_USERAX 0xC570</P>
<P>#define C_SHOOK 0xC580</P>
<P>#define C_RAX 0xC590</P>
<P>#define C_STAPE 0xC5A0</P>
<P>#define C_LTAPE 0xC5B0</P>
<P>#define C_ETAPE 0xC5C0</P>
<P>#define C_KTAPE 0xC5C8</P>
<P>#define C_SPHSEGS 0xC5D0</P>
<P>#define C_GEOSMOOTH 0xC5E0</P>
<P>#define C_HEMISEGS 0xC5F0</P>
<P>#define C_PRISMSEGS 0xC600</P>
<P>#define C_PRISMSIDES 0xC610</P>
<P>#define C_TUBESEGS 0xC620</P>
<P>#define C_TUBESIDES 0xC630</P>
<P>#define C_TORSEGS 0xC640</P>
<P>#define C_TORSIDES 0xC650</P>
<P>#define C_CONESIDES 0xC660</P>
<P>#define C_CONESEGS 0xC661</P>
<P>#define C_NGPARMS 0xC670</P>
<P>#define C_PTHLEVEL 0xC680</P>
<P>#define C_MSCSYM 0xC690</P>
<P>#define C_MFTSYM 0xC6A0</P>
<P>#define C_MTTSYM 0xC6B0</P>
<P>#define C_SMOOTHING 0xC6C0</P>
<P>#define C_MODICOUNT 0xC6D0</P>
<P>#define C_FONTSEL 0xC6E0</P>
<P>#define C_TESS_TYPE 0xC6f0</P>
<P>#define C_TESS_TENSION 0xC6f1</P>

<P>#define C_SEG_START 0xC700</P>
<P>#define C_SEG_END 0xC705</P>
<P>#define C_CURTIME 0xC710</P>
<P>#define C_ANIMLENGTH 0xC715</P>
<P>#define C_PV_FROM 0xC720</P>
<P>#define C_PV_TO 0xC725</P>
<P>#define C_PV_DOFNUM 0xC730</P>
<P>#define C_PV_RNG 0xC735</P>
<P>#define C_PV_NTH 0xC740</P>
<P>#define C_PV_TYPE 0xC745</P>
<P>#define C_PV_METHOD 0xC750</P>
<P>#define C_PV_FPS 0xC755</P>
<P>#define C_VTR_FRAMES 0xC765</P>
<P>#define C_VTR_HDTL 0xC770</P>
<P>#define C_VTR_HD 0xC771</P>
<P>#define C_VTR_TL 0xC772</P>
<P>#define C_VTR_IN 0xC775</P>
<P>#define C_VTR_PK 0xC780</P>
<P>#define C_VTR_SH 0xC785</P>

<P>/* Material chunks */</P>

<P>#define C_WORK_MTLS 0xC790&#9;  /* Old-style -- now ignored */</P>
<P>#define C_WORK_MTLS_2 0xC792 /* Old-style -- now ignored */</P>
<P>#define C_WORK_MTLS_3 0xC793 /* Old-style -- now ignored */</P>
<P>#define C_WORK_MTLS_4 0xC794 /* Old-style -- now ignored */</P>
<P>#define C_WORK_MTLS_5 0xCB00 /* Old-style -- now ignored */</P>
<P>#define C_WORK_MTLS_6 0xCB01 /* Old-style -- now ignored */</P>
<P>#define C_WORK_MTLS_7 0xCB02 /* Old-style -- now ignored */</P>
<P>#define C_WORK_MTLS_8 0xCB03 /* Old-style -- now ignored */</P>
<P>#define C_WORKMTL 0xCB04</P>
<P>#define C_SXP_TEXT_DATA 0xCB10</P>
<P>#define C_SXP_TEXT2_DATA 0xCB20</P>
<P>#define C_SXP_OPAC_DATA 0xCB11</P>
<P>#define C_SXP_BUMP_DATA 0xCB12</P>
<P>#define C_SXP_SPEC_DATA 0xCB24</P>
<P>#define C_SXP_SHIN_DATA 0xCB13</P>
<P>#define C_SXP_SELFI_DATA 0xCB28</P>
<P>#define C_SXP_TEXT_MASKDATA 0xCB30</P>
<P>#define C_SXP_TEXT2_MASKDATA 0xCB32</P>
<P>#define C_SXP_OPAC_MASKDATA 0xCB34</P>
<P>#define C_SXP_BUMP_MASKDATA 0xCB36</P>
<P>#define C_SXP_SPEC_MASKDATA 0xCB38</P>
<P>#define C_SXP_SHIN_MASKDATA 0xCB3A</P>
<P>#define C_SXP_SELFI_MASKDATA 0xC3C</P>
<P>#define C_SXP_REFL_MASKDATA 0xCB3E</P>

<P>#define C_BGTYPE 0xC7A1</P>
<P>#define C_MEDTILE 0xC7B0</P>

<P>/* Contrast */</P>

<P>#define C_LO_CONTRAST 0xC7D0</P>
<P>#define C_HI_CONTRAST 0xC7D1</P>

<P>/* 3d frozen display */</P>

<P>#define C_FROZ_DISPLAY 0xC7E0</P>

<P>/* Booleans */</P>
<P>#define C_BOOLWELD 0xc7f0</P>
<P>#define C_BOOLTYPE 0xc7f1</P>

<P>#define C_ANG_THRESH 0xC900</P>
<P>#define C_SS_THRESH 0xC901</P>
<P>#define C_TEXTURE_BLUR_DEFAULT 0xC903</P>

<P>#define C_MAPDRAWER 0xCA00</P>
<P>#define C_MAPDRAWER1 0xCA01</P>
<P>#define C_MAPDRAWER2 0xCA02</P>
<P>#define C_MAPDRAWER3 0xCA03</P>
<P>#define C_MAPDRAWER4 0xCA04</P>
<P>#define C_MAPDRAWER5 0xCA05</P>
<P>#define C_MAPDRAWER6 0xCA06</P>
<P>#define C_MAPDRAWER7 0xCA07</P>
<P>#define C_MAPDRAWER8 0xCA08</P>
<P>#define C_MAPDRAWER9 0xCA09</P>
<P>#define C_MAPDRAWER_ENTRY 0xCA10</P>

<P>/* system options */</P>
<P>#define C_BACKUP_FILE 0xCA20</P>
<P>#define C_DITHER_256 0xCA21</P>
<P>#define C_SAVE_LAST 0xCA22</P>
<P>#define C_USE_ALPHA 0xCA23</P>
<P>#define C_TGA_DEPTH 0xCA24</P>
<P>#define C_REND_FIELDS 0xCA25</P>
<P>#define C_REFLIP 0xCA26</P>
<P>#define C_SEL_ITEMTOG 0xCA27</P>
<P>#define C_SEL_RESET 0xCA28</P>
<P>#define C_STICKY_KEYINF 0xCA29</P>
<P>#define C_WELD_THRESHOLD 0xCA2A</P>
<P>#define C_ZCLIP_POINT 0xCA2B</P>
<P>#define C_ALPHA_SPLIT 0xCA2C</P>
<P>#define C_KF_SHOW_BACKFACE 0xCA30</P>
<P>#define C_OPTIMIZE_LOFT 0xCA40</P>
<P>#define C_TENS_DEFAULT 0xCA42</P>
<P>#define C_CONT_DEFAULT 0xCA44</P>
<P>#define C_BIAS_DEFAULT 0xCA46</P>

<P>#define C_DXFNAME_SRC  0xCA50</P>
<P>#define C_AUTO_WELD  0xCA60</P>
<P>#define C_AUTO_UNIFY  0xCA70</P>
<P>#define C_AUTO_SMOOTH  0xCA80</P>
<P>#define C_DXF_SMOOTH_ANG  0xCA90</P>
<P>#define C_SMOOTH_ANG  0xCAA0</P>

<P>/* Special network-use chunks */</P>

<P>#define C_NET_USE_VPOST 0xCC00</P>
<P>#define C_NET_USE_GAMMA 0xCC10</P>
<P>#define C_NET_FIELD_ORDER 0xCC20</P>

<P>#define C_BLUR_FRAMES 0xCD00</P>
<P>#define C_BLUR_SAMPLES 0xCD10</P>
<P>#define C_BLUR_DUR 0xCD20</P>
<P>#define C_HOT_METHOD 0xCD30</P>
<P>#define C_HOT_CHECK 0xCD40</P>
<P>#define C_PIXEL_SIZE 0xCD50</P>
<P>#define C_DISP_GAMMA 0xCD60</P>
<P>#define C_FBUF_GAMMA 0xCD70</P>
<P>#define C_FILE_OUT_GAMMA 0xCD80</P>
<P>#define C_FILE_IN_GAMMA 0xCD82</P>
<P>#define C_GAMMA_CORRECT 0xCD84</P>
<P>#define C_APPLY_DISP_GAMMA 0xCD90  /* OBSOLETE */</P>
<P>#define C_APPLY_FBUF_GAMMA 0xCDA0  /* OBSOLETE */</P>
<P>#define C_APPLY_FILE_GAMMA 0xCDB0  /* OBSOLETE */</P>
<P>#define C_FORCE_WIRE 0xCDC0</P>
<P>#define C_RAY_SHADOWS 0xCDD0</P>
<P>#define C_MASTER_AMBIENT 0xCDE0</P>
<P>#define C_SUPER_SAMPLE 0xCDF0</P>
<P>#define C_OBJECT_MBLUR 0xCE00</P>
<P>#define C_MBLUR_DITHER 0xCE10</P>
<P>#define C_DITHER_24 0xCE20</P>
<P>#define C_SUPER_BLACK 0xCE30</P>
<P>#define C_SAFE_FRAME 0xCE40</P>
<P>#define C_VIEW_PRES_RATIO 0xCE50</P>
<P>#define C_BGND_PRES_RATIO 0xCE60</P>
<P>#define C_NTH_SERIAL_NUM 0xCE70</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454156748">gexp.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2>
<P>/**********************************************************************</P>
<P> *&lt;</P>
<P>&#9;FILE: 3dsexp.h</P>

<P>&#9;DESCRIPTION:  .3DS file export module header file</P>

<P>&#9;CREATED BY: Tom Hudson</P>

<P>&#9;HISTORY: created 26 December 1994</P>

<P> *&gt;&#9;Copyright (c) 1994, All Rights Reserved.</P>
<P> **********************************************************************/</P>

<P>#pragma pack(1)</P>

<P>/* 3DS Shape point structure */</P>

<P>struct shppt</P>
<P>{</P>
<P>float x;&#9;/* Control point */</P>
<P>float y;</P>
<P>float z;</P>
<P>float inx;&#9;/* Incoming vector */</P>
<P>float iny;</P>
<P>float inz;</P>
<P>float outx;&#9;/* Outgoing vector */</P>
<P>float outy;</P>
<P>float outz;</P>
<P>unsigned short flags;</P>
<P>};</P>
<P>typedef struct shppt Shppt;</P>

<P>#include "ofile.h"&#9;&#9;// 3DS Object file header</P>
<P>//#include "3dsshape.h"&#9;// 3DS shape file header</P>
<P>#include "kfio.h"&#9;&#9;// 3DS KF header</P>
<P>#pragma pack()</P>

<P>&nbsp;</P>
<P>// Some 3DS structures</P>

<P>#pragma pack(1)</P>
<P>typedef struct {</P>
<P>&#9;unsigned short tag;</P>
<P>&#9;long size;</P>
<P>&#9;} Chunk_hdr;</P>

<P>typedef struct {</P>
<P>&#9;float x;</P>
<P>&#9;float y;</P>
<P>&#9;float z;</P>
<P>&#9;unsigned short flags;</P>
<P>&#9;} Verts;</P>

<P>typedef struct {</P>
<P>&#9;float u;</P>
<P>&#9;float v;</P>
<P>&#9;} Texverts;</P>

<P>typedef struct {</P>
<P>&#9;unsigned short a;</P>
<P>&#9;unsigned short b;</P>
<P>&#9;unsigned short c;</P>
<P>&#9;unsigned char material;</P>
<P>&#9;unsigned char filler;</P>
<P>&#9;unsigned long sm_group;</P>
<P>&#9;unsigned short flags;</P>
<P>&#9;} Faces;</P>
<P>#pragma pack()</P>

<P>// 3DS face edge vis flags</P>
<P>#define ABLINE (1&lt;&lt;2)</P>
<P>#define BCLINE (1&lt;&lt;1)</P>
<P>#define CALINE 1</P>

<P>#define VWRAP (1&lt;&lt;11)&#9;&#9;/* Texture coord V wraps on this face */</P>
<P>#define UWRAP (1&lt;&lt;3)&#9;&#9;/* Texture coord U wraps on this face */</P>

<P>// Node list structure</P>

<P>//struct WkObjList;</P>
<P>typedef struct {</P>
<P>&#9;TriObject *object;</P>
<P>&#9;TCHAR name[11];</P>
<P>&#9;int used;</P>
<P>&#9;void *next;</P>
<P>&#9;} WkObjList;</P>

<P>//struct WkNodeList;</P>
<P>typedef struct {</P>
<P>&#9;ImpNode *node;</P>
<P>&#9;short id;</P>
<P>&#9;TCHAR name[11];</P>
<P>&#9;Mesh *mesh;</P>
<P>&#9;ImpNode *parent;</P>
<P>&#9;Matrix3 tm;</P>
<P>&#9;void *next;</P>
<P>&#9;} WkNodeList;</P>

<P>// 3DS Key structures</P>

<P>#pragma pack(1)</P>

<P>struct fc_wrt</P>
<P>{</P>
<P>unsigned short a;</P>
<P>unsigned short b;</P>
<P>unsigned short c;</P>
<P>unsigned short flags;</P>
<P>} Fc_wrt;</P>

<P>struct color_24</P>
<P>{</P>
<P>uchar r;</P>
<P>uchar g;</P>
<P>uchar b;</P>
<P>};</P>
<P>typedef struct color_24 Color_24;</P>

<P>struct color_f</P>
<P>{</P>
<P>float r;</P>
<P>float g;</P>
<P>float b;</P>
<P>};</P>
<P>typedef struct color_f Color_f;</P>

<P>// key types</P>
<P>#define KEY_FLOAT&#9;0</P>
<P>#define KEY_POS&#9;&#9;1</P>
<P>#define KEY_ROT&#9;&#9;2</P>
<P>#define KEY_SCL&#9;&#9;3</P>
<P>#define KEY_COLOR&#9;4</P>

<P>#define KEYHDR  \</P>
<P>&#9;TimeValue time;  \</P>
<P>&#9;float tens,cont,bias; \</P>
<P>&#9;float easeTo,easeFrom;</P>

<P>typedef struct { float p,ds,dd; } PosElem;</P>
<P>typedef struct {</P>
<P>&#9;KEYHDR</P>
<P>&#9;PosElem e[8]; /* enough to be bigger than the biggest key,</P>
<P>&#9;&#9;&#9;&#9;&#9;including RotKey */</P>
<P>&#9;} Key;</P>

<P>typedef struct {</P>
<P>&#9;KEYHDR</P>
<P>&#9;PosElem e[1];</P>
<P>&#9;} ScalarKey;</P>

<P>typedef struct {</P>
<P>&#9;KEYHDR</P>
<P>&#9;PosElem e[3];</P>
<P>&#9;} PosKey;&#9;</P>

<P>typedef struct {</P>
<P>&#9;KEYHDR</P>
<P>&#9;float angle;&#9;/* angle of rotation in radians (always &gt;0) */</P>
<P>&#9;float axis[3]; /* axis of rotation (unit vector) */</P>
<P>&#9;float q[4];  &#9;/* quaternion describing orientation */</P>
<P>&#9;float b[4];&#9;&#9;/* incoming tangent term */</P>
<P>&#9;float a[4];&#9;&#9;/* outgoing tangent term */</P>
<P>&#9;} RotKey;</P>

<P>#ifdef LATER</P>
<P>typedef struct {</P>
<P>&#9;KEYHDR</P>
<P>&#9;Namedobj *object;  </P>
<P>&#9;} MorphKey;&#9;</P>

<P>typedef struct {</P>
<P>&#9;KEYHDR</P>
<P>&#9;} HideKey;</P>

<P>typedef struct {</P>
<P>&#9;KEYHDR</P>
<P>&#9;FLOAT c[3];</P>
<P>&#9;} ColorKey;</P>
<P>#endif // LATER</P>
<P>#pragma pack()</P>

<P>typedef struct {</P>
<P>&#9;union {</P>
<P>&#9;&#9;Key key;</P>
<P>&#9;&#9;PosKey pos;</P>
<P>&#9;&#9;RotKey rot;</P>
<P>&#9;&#9;} key;</P>
<P>&#9;void *next;</P>
<P>&#9;} KeyList;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454156749">Kfio.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>#ifndef __kfio__</P>
<P>#define __kfio__</P>

<P>&nbsp;</P>
<P>#define DOGIO</P>
<P>#define KFVERSION 5</P>

<P>/* kfio.h: defs for saving and loading .KFB files */</P>

<P>#define UNREC_OBJECT_NAME 0xff00</P>
<P>#define BAD_PARENT_REF 0xff01</P>
<P>#define BAD_OBJ_NAME 0xff02</P>

<P>#define NO_PARENT 0xFFFF</P>

<P>#define M3DMAGIC 0x4D4D&#9;</P>
<P>#define M3D_VERSION 0x0002</P>

<P>#define KFDATA  0xB000</P>
<P>#define KFHDR 0xB00A</P>
<P>#define AMBIENT_NODE_TAG  0xB001</P>
<P>#define OBJECT_NODE_TAG  0xB002</P>
<P>#define CAMERA_NODE_TAG  0xB003</P>
<P>#define TARGET_NODE_TAG  0xB004&#9; /* for cameras only */</P>
<P>#define LIGHT_NODE_TAG  0xB005</P>
<P>#define L_TARGET_NODE_TAG  0xB006&#9; /* for lights only */</P>
<P>#define SPOTLIGHT_NODE_TAG  0xB007</P>
<P>#define KFSEG  0xB008</P>
<P>#define KFCURTIME  0xB009</P>
<P>#define NODE_HDR  0xB010</P>
<P>#define INSTANCE_NAME 0xB011</P>
<P>#define PRESCALE 0xB012</P>
<P>#define PIVOT 0xB013</P>
<P>#define BOUNDBOX  0xB014</P>
<P>#define MORPH_SMOOTH  0xB015</P>
<P>#define POS_TRACK_TAG 0xB020</P>
<P>#define ROT_TRACK_TAG 0xB021</P>
<P>#define SCL_TRACK_TAG 0xB022</P>
<P>#define FOV_TRACK_TAG 0xB023</P>
<P>#define ROLL_TRACK_TAG 0xB024</P>
<P>#define COL_TRACK_TAG 0xB025</P>
<P>#define MORPH_TRACK_TAG 0xB026</P>
<P>#define HOT_TRACK_TAG 0xB027</P>
<P>#define FALL_TRACK_TAG 0xB028</P>
<P>#define HIDE_TRACK_TAG 0xB029</P>
<P>#define NODE_ID 0xB030</P>

<P>#define W_TENS  1</P>
<P>#define W_CONT  (1&lt;&lt;1)</P>
<P>#define W_BIAS  (1&lt;&lt;2)</P>
<P>#define W_EASETO  (1&lt;&lt;3)</P>
<P>#define W_EASEFROM  (1&lt;&lt;4)</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454156750">Mtldef.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/*******************************************************************</P>
<P> *</P>
<P> *    DESCRIPTION:  3DStudio R4 Material definitions</P>
<P> *</P>
<P> *    AUTHOR:</P>
<P> *</P>
<P> *    HISTORY:    </P>
<P> *</P>
<P> *******************************************************************/</P>

<P>#ifndef __MTLDEF__H</P>
<P>#define __MTLDEF__H</P>

<P>#define REND_WIRE 0</P>
<P>#define REND_FLAT 1</P>
<P>#define REND_GOURAUD 2</P>
<P>#define REND_PHONG 3</P>
<P>#define REND_METAL 4</P>

<P>/* Material flags field bit definitions&#9;*/</P>
<P>#define MF_TWOSIDE  &#9;(1&lt;&lt;0)&#9;/* Material seen from both sides&#9;*/</P>
<P>#define MF_SELF &#9;  &#9;(1&lt;&lt;1)&#9;/* Material self-illuminated&#9;&#9;*/</P>
<P>#define MF_DECAL &#9;&#9;(1&lt;&lt;2)&#9;/* Material maps act as decals (transparent color)&#9;*/</P>
<P>#define MF_ADDITIVE &#9;(1&lt;&lt;3)&#9;/* Material uses additive transparency&#9;*/</P>
<P>#define MF_WIRE&#9; &#9;(1&lt;&lt;4)&#9;/* Material renders as wire frame */</P>
<P>#define MF_NEEDUV &#9;(1&lt;&lt;5)&#9;/* Material has some UV type maps */</P>
<P>#define MF_NEED3D    (1&lt;&lt;6)&#9;/* Material needs 3D coords for SXP */</P>
<P>#define MF_XPFALLIN  (1&lt;&lt;7)   /* Transparency fall-off to inside&#9;*/</P>
<P>#define MF_MATTE  &#9;(1&lt;&lt;8)&#9;/* Material used as a matte&#9;&#9;*/</P>
<P>#define MF_CUBICMAP &#9;(1&lt;&lt;9)&#9;/* Reflection map is cubic&#9;&#9;*/</P>
<P>#define MF_XPFALL   &#9;(1&lt;&lt;10)  /* Do Transparency fall-off&#9;&#9;*/</P>
<P>#define MF_SUPERSMP&#9;(1&lt;&lt;11)&#9;/* Super sample material */</P>
<P>#define MF_FACEMAP&#9;(1&lt;&lt;12)&#9;/* Face-texture-coords */</P>
<P>#define MF_PHONGSOFT&#9;(1&lt;&lt;13)&#9;/* Soften phong hilites */</P>
<P>#define MF_WIREABS&#9;(1&lt;&lt;14)&#9;/* Absolute wire size */</P>
<P>#define MF_REFBLUR   (1&lt;&lt;15)&#9;/* blurred reflection map */</P>
<P>/* for clearing temporary flags */</P>
<P>#define MF_CLEAR_TEMPFLAGS ~(MF_NEEDUV|MF_NEED3D|MF_REFBLUR|MF_CUBICMAP)</P>

<P>typedef unsigned short ushort;</P>
<P>typedef unsigned char uchar;</P>
<P>typedef unsigned int uint;</P>

<P>&nbsp;</P>
<P>typedef struct {</P>
<P>&#9;uchar shade;&#9;&#9;/* shading level for auto-cubic */</P>
<P>&#9;uchar aalevel;&#9;&#9;/* anti-alias level for auto-cubic */</P>
<P>&#9;ushort flags;&#9;&#9;/* auto cubic flags */</P>
<P>&#9;int size;&#9;&#9;&#9;/* bitmap size for auto-cubic */</P>
<P>&#9;int nth;&#9;&#9;&#9;&#9;/* do nth frame for auto-cubic */</P>
<P>&#9;} AutoCubicParams;</P>

<P>&nbsp;</P>
<P>#define CM_UP 0</P>
<P>#define CM_DOWN 1</P>
<P>#define CM_LEFT 2</P>
<P>#define CM_RIGHT 3</P>
<P>#define CM_FRONT 4</P>
<P>#define CM_BACK 5</P>
<P>#define CUBMAP_READY 1</P>

<P>typedef struct cubmap&#9;{</P>
<P>    //&#9;Bitmap *mapptr[6];</P>
<P>&#9;char mapname[6][13];</P>
<P>&#9;short flags;</P>
<P>&#9;short objnum;&#9;/* for auto-cubic= point-of-view object: -1 for user defined*/</P>
<P>&#9;short mtlobj; /* object referred to to find which face is mapped (morphing)*/</P>
<P>&#9;struct cubmap *next;</P>
<P>&#9;// Bitmap *blurmap;  </P>
<P>&#9;int x,y;  /* location for mirrors */</P>
<P>&#9;} Cubmap;</P>

<P>/* Auto-cubic flags */</P>
<P>#define AC_ON  1&#9;  /* if ON this is an auto-cubic mapped material */</P>
<P>#define AC_SHADOW  (1&lt;&lt;1)</P>
<P>#define AC_2SIDE  (1&lt;&lt;2)</P>
<P>#define AC_FIRSTONLY (1&lt;&lt;3)</P>
<P>#define AC_MIRROR (1&lt;&lt;4)</P>

<P>/* rmtl.use flags */</P>
<P>#define MATUSE_XPFALL (1&lt;&lt;0)</P>
<P>#define MATUSE_REFBLUR (1&lt;&lt;1)</P>

<P>/* TextureParam.texflags */</P>
<P>#define TEX_DECAL (1)</P>
<P>#define TEX_MIRROR (1&lt;&lt;1)</P>
<P>#define TEX_UNUSED1 (1&lt;&lt;2)</P>
<P>#define TEX_INVERT (1&lt;&lt;3)</P>
<P>#define TEX_NOWRAP (1&lt;&lt;4)</P>
<P>#define TEX_SAT (1&lt;&lt;5)&#9; /* summed area table */</P>
<P>#define TEX_ALPHA_SOURCE (1&lt;&lt;6) /* use ALPHA instead of RGB of map */</P>
<P>#define TEX_TINT (1&lt;&lt;7)         /* tint for color */</P>
<P>#define TEX_DONT_USE_ALPHA (1&lt;&lt;8)    /* don't use map alpha */</P>
<P>#define TEX_RGB_TINT (1&lt;&lt;9)    /* Do RGB color transform */</P>

<P>typedef struct sxpent {</P>
<P>&#9;char name[13];</P>
<P>&#9;ULONG handle;</P>
<P>&#9;void *pdata;</P>
<P>&#9;struct sxpent *next;</P>
<P>&#9;} SXPentry;</P>

<P>#define NMAPTYPES 8</P>
<P>#define Ntex 0</P>
<P>#define Ntex2 1</P>
<P>#define Nopac 2</P>
<P>#define Nbump 3</P>
<P>#define Nspec 4</P>
<P>#define Nshin 5</P>
<P>#define Nselfi 6</P>
<P>#define Nrefl 7</P>

<P>#define USE_tex  (1&lt;&lt;Ntex)</P>
<P>#define USE_tex2  (1&lt;&lt;Ntex2)</P>
<P>#define USE_opac  (1&lt;&lt;Nopac)</P>
<P>#define USE_bump  (1&lt;&lt;Nbump)</P>
<P>#define USE_spec  (1&lt;&lt;Nspec)</P>
<P>#define USE_shin  (1&lt;&lt;Nshin)</P>
<P>#define USE_selfi  (1&lt;&lt;Nselfi)</P>
<P>#define USE_refl  (1&lt;&lt;Nrefl)</P>

<P>&nbsp;</P>
<P>#define MAP_TYPE_UV 1</P>
<P>#define MAP_TYPE_SXP 2</P>

<P>typedef struct {</P>
<P>&#9;uchar type; /* MAP_TYPE_UV, MAP_TYPE_SXP */</P>
<P>&#9;ushort texflags;</P>
<P>&#9;void *sxp_data;</P>
<P>&#9;Bitmap *bm;</P>
<P>&#9;float texblur;&#9;&#9;/* texture blur  */</P>
<P>&#9;float uscale,vscale;</P>
<P>&#9;float uoffset,voffset;</P>
<P>&#9;float ang_sin,ang_cos;</P>
<P>&#9;Color_24 col1,col2;  /* tinting colors */</P>
<P>&#9;Color_24 rcol,gcol,bcol;  /* RGB tinting colors */</P>
<P>&#9;} MapParams;</P>

<P>typedef struct {</P>
<P>&#9;AutoCubicParams acb;  /* auto-cubic params */</P>
<P>&#9;Bitmap *bm;</P>
<P>&#9;Bitmap *blurbm;</P>
<P>&#9;} RMapParams;</P>

<P>&nbsp;</P>
<P>typedef struct {</P>
<P>&#9;uchar ok; </P>
<P>&#9;uchar kind;&#9;&#9;/* Texture(0) or Reflection map (1)*/</P>
<P>&#9;char name[13];</P>
<P>&#9;union {</P>
<P>&#9;&#9;MapParams tex;&#9;  /* kind == 0 */</P>
<P>&#9;&#9;RMapParams ref;  /* kind == 1 */</P>
<P>&#9;&#9;} p;</P>
<P>&#9;} MapData;</P>

<P>typedef struct {</P>
<P>&#9;uchar use;</P>
<P>&#9;union { float f; int pct;} amt;</P>
<P>&#9;MapData map;</P>
<P>&#9;MapData mask;</P>
<P>&#9;} Mapping;</P>

<P>struct SMtl {</P>
<P>&#9;char name[17];&#9;&#9; &#9;/* Material's 16-char name&#9;&#9;*/</P>
<P>&#9;Color_24 amb;&#9;&#9; &#9;/* 0-255 triplets&#9;&#9;&#9;*/</P>
<P>&#9;Color_24 diff;&#9;&#9;&#9; /* 0-255 triplets&#9;&#9;&#9;*/</P>
<P>&#9;Color_24 spec;&#9;&#9; &#9;/* 0-255 triplets&#9;&#9;&#9;*/</P>
<P>&#9;short transparency;&#9;/* 0-100&#9;*/</P>
<P>&#9;short shading;&#9;&#9; &#9;/* 0=WIRE 1=FLAT 2=GOURAUD 3=PHONG 4=METAL&#9;*/</P>
<P>&#9;ulong flags;&#9;&#9; &#9;/* Material flags&#9;*/</P>
<P>&#9;ushort use;   &#9;&#9;&#9;/* Use  flags */</P>

<P>&#9;/* Effect percent sliders */</P>
<P>&#9;short shininess;&#9; &#9;/* 0-100&#9;   */</P>
<P>&#9;short shin2pct;&#9;&#9;/* 0-100    */</P>
<P>&#9;short shin3pct;&#9;&#9;/* 0-100    */</P>
<P>&#9;short xpfall;&#9;&#9;&#9;/* 0-100   &#9;*/</P>
<P>&#9;short refblur;&#9;&#9;&#9;/* 0-100   &#9;*/</P>
<P>&#9;short selfipct;&#9;  &#9;/* 0-100    */</P>
<P>&#9;float wiresize;   /* size of wire frame */</P>

<P>&#9;Mapping *map[8];</P>
<P>&#9;void *appdata;</P>
<P>&#9;};</P>

<P>int get_mtlchunk(FILE *stream,void *data);</P>
<P>int dump_mtlchunk(ushort tag,FILE *stream,void *data);</P>
<P>void init_mtl_struct(SMtl *mtl);</P>

<P>extern SMtl *loadmtl,inmtl;</P>

<P>/* Material library in-memory list */</P>
<P>struct Mliblist&#9;{</P>
<P>&#9;SMtl material;</P>
<P>&#9;Mliblist *next;</P>
<P>&#9;};</P>

<P>/* Current mesh's in-memory list */</P>
<P>struct Mmtllist&#9;{</P>
<P>&#9;SMtl material;</P>
<P>&#9;Mmtllist *next;</P>
<P>&#9;short flags;</P>
<P>&#9;};</P>

<P>extern SMtl *savemtl;</P>
<P>void FreeMatRefs(SMtl *m);</P>
<P>void *XMAlloc(int size);</P>
<P>void *XMAllocZero(int size);</P>
<P>void XMFree(void *p);</P>
<P>void XMFreeAndZero(void **p);</P>
<P>int TexBlurToPct(float tb);</P>
<P>float PctToTexBlur(int p);</P>
<P>void ResetMapData(MapData *md, int n, int ismask);</P>
<P>void InitMappingValues(Mapping *m, int n, int isRmtl);</P>
<P>void FreeMapDataRefs(MapData *md);</P>
<P>void FreeMatRefs(SMtl *m);</P>
<P>void ResetMapping(Mapping *m, int n, int isRmtl);</P>
<P>Mapping *NewMapping(int n,int isRmtl);</P>
<P>void init_mtl_struct(SMtl *mtl);</P>
<P>void set_mtl_decal(SMtl *mtl);</P>

<P>#endif</P>
</FONT><FONT FACE="Arial"><P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156751">Ofile.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2>
<P>/* 3D object file defines */</P>

<P>#ifndef _OFILE_H_DEFINED</P>

<P>/* Error types for file loads */</P>

<P>#define INVALID_FILE 1</P>
<P>#define PARTIAL_READ 2</P>
<P>#define EXCEEDS_SETUP 3</P>

<P>#define MMAGIC 0x3D3D&#9;/* Mesh magic */</P>
<P>#define SMAGIC 0x2D2D&#9;/* Shaper magic */</P>
<P>#define LMAGIC 0x2D3D&#9;/* Lofter magic */</P>
<P>#define MLIBMAGIC 0x3DAA&#9;/* Material library magic */</P>
<P>#define MATMAGIC 0x3DFF&#9;/* Material magic */</P>

<P>#define MESH_VERSION 0x3D3E  /* version chunk */</P>

<P>#define COLOR_F 0x0010</P>
<P>#define COLOR_24 0x0011</P>
<P>#define LIN_COLOR_24 0x0012</P>
<P>#define LIN_COLOR_F 0x0013</P>
<P>#define INT_PERCENTAGE 0x0030</P>
<P>#define FLOAT_PERCENTAGE 0x0031</P>

<P>#define MASTER_SCALE 0x0100</P>

<P>#define BIT_MAP 0x1100</P>
<P>#define USE_BIT_MAP 0x1101</P>
<P>#define SOLID_BGND 0x1200</P>
<P>#define USE_SOLID_BGND 0x1201</P>
<P>#define V_GRADIENT 0x1300</P>
<P>#define USE_V_GRADIENT 0x1301</P>

<P>#define LO_SHADOW_BIAS 0x1400</P>
<P>#define HI_SHADOW_BIAS 0x1410</P>
<P>#define SHADOW_MAP_SIZE 0x1420</P>
<P>#define SHADOW_SAMPLES 0x1430</P>
<P>#define SHADOW_RANGE 0x1440</P>
<P>#define SHADOW_FILTER 0x1450</P>
<P>#define RAY_BIAS 0x1460</P>
<P>#define RAY_SHADOWS 0x1470</P>

<P>#define O_CONSTS 0x1500</P>
<P> </P>
<P>#define AMBIENT_LIGHT 0x2100</P>

<P>#define FOG 0x2200</P>
<P>#define USE_FOG 0x2201</P>
<P>#define FOG_BGND 0x2210</P>
<P>#define DISTANCE_CUE 0x2300</P>
<P>#define USE_DISTANCE_CUE 0x2301</P>
<P>#define LAYER_FOG 0x2302</P>
<P>#define USE_LAYER_FOG 0x2303</P>
<P>#define DCUE_BGND 0x2310</P>

<P>#define DEFAULT_VIEW 0x3000</P>
<P>#define VIEW_TOP 0x3010</P>
<P>#define VIEW_BOTTOM 0x3020</P>
<P>#define VIEW_LEFT 0x3030</P>
<P>#define VIEW_RIGHT 0x3040</P>
<P>#define VIEW_FRONT 0x3050</P>
<P>#define VIEW_BACK 0x3060</P>
<P>#define VIEW_USER 0x3070</P>
<P>#define VIEW_CAMERA 0x3080</P>
<P>#define VIEW_WINDOW 0x3090</P>

<P>#define NAMED_OBJECT 0x4000</P>
<P>#define OBJ_HIDDEN 0x4010</P>
<P>#define OBJ_VIS_LOFTER 0x4011</P>
<P>#define OBJ_DOESNT_CAST 0x4012</P>
<P>#define OBJ_MATTE 0x4013</P>
<P>#define OBJ_FAST 0x4014</P>
<P>#define OBJ_PROCEDURAL 0x4015</P>
<P>#define OBJ_FROZEN 0x4016</P>
<P>#define OBJ_DONT_RCVSHADOW  0x4017</P>

<P>#define N_TRI_OBJECT 0x4100</P>

<P>#define POINT_ARRAY 0x4110</P>
<P>#define POINT_FLAG_ARRAY 0x4111</P>
<P>#define FACE_ARRAY 0x4120</P>
<P>#define MSH_MAT_GROUP 0x4130</P>
<P>#define OLD_MAT_GROUP 0x4131</P>
<P>#define TEX_VERTS 0x4140</P>
<P>#define SMOOTH_GROUP 0x4150</P>
<P>#define MESH_MATRIX 0x4160</P>
<P>#define MESH_COLOR 0x4165</P>
<P>#define MESH_TEXTURE_INFO 0x4170</P>
<P>#define PROC_NAME 0x4181</P>
<P>#define PROC_DATA 0x4182</P>
<P>#define MSH_BOXMAP 0x4190</P>

<P>#define N_D_L_OLD 0x4400</P>

<P>#define N_CAM_OLD 0x4500</P>

<P>#define N_DIRECT_LIGHT 0x4600</P>
<P>#define DL_SPOTLIGHT 0x4610</P>
<P>#define DL_OFF 0x4620</P>
<P>#define DL_ATTENUATE 0x4625</P>
<P>#define DL_RAYSHAD 0x4627</P>
<P>#define DL_SHADOWED 0x4630</P>
<P>#define DL_LOCAL_SHADOW 0x4640</P>
<P>#define DL_LOCAL_SHADOW2 0x4641</P>
<P>#define DL_SEE_CONE 0x4650</P>
<P>#define DL_SPOT_RECTANGULAR 0x4651</P>
<P>#define DL_SPOT_OVERSHOOT 0x4652</P>
<P>#define DL_SPOT_PROJECTOR 0x4653</P>
<P>#define DL_EXCLUDE 0x4654</P>
<P>#define DL_RANGE 0x4655&#9;/* Old style chunk -- don't write */</P>
<P>#define DL_SPOT_ROLL 0x4656</P>
<P>#define DL_SPOT_ASPECT 0x4657</P>
<P>#define DL_RAY_BIAS 0x4658</P>
<P>#define DL_INNER_RANGE 0x4659</P>
<P>#define DL_OUTER_RANGE 0x465A</P>
<P>#define DL_MULTIPLIER 0x465B</P>

<P>#define N_AMBIENT_LIGHT 0x4680</P>

<P>#define N_CAMERA 0x4700</P>
<P>#define CAM_SEE_CONE 0x4710</P>
<P>#define CAM_RANGES 0x4720</P>

<P>#define HIERARCHY 0x4F00</P>
<P>#define PARENT_OBJECT 0x4F10</P>
<P>#define PIVOT_OBJECT 0x4F20</P>
<P>#define PIVOT_LIMITS 0x4F30</P>
<P>#define PIVOT_ORDER 0x4F40</P>
<P>#define XLATE_RANGE 0x4F50</P>

<P>#define POLY_2D 0x5000</P>

<P>/* Flags in shaper file that tell whether polys make up an ok shape */</P>

<P>#define SHAPE_OK 0x5010</P>
<P>#define SHAPE_NOT_OK 0x5011</P>

<P>#define SHAPE_HOOK 0x5020</P>

<P>#define PATH_3D 0x6000</P>
<P>#define PATH_MATRIX 0x6005</P>
<P>#define SHAPE_2D 0x6010</P>
<P>#define M_SCALE 0x6020</P>
<P>#define M_TWIST 0x6030</P>
<P>#define M_TEETER 0x6040</P>
<P>#define M_FIT 0x6050</P>
<P>#define M_BEVEL 0x6060</P>
<P>#define XZ_CURVE 0x6070</P>
<P>#define YZ_CURVE 0x6080</P>
<P>#define INTERPCT 0x6090</P>
<P>#define DEFORM_LIMIT 0x60A0</P>

<P>/* Flags for Modeler options */</P>

<P>#define USE_CONTOUR 0x6100</P>
<P>#define USE_TWEEN 0x6110</P>
<P>#define USE_SCALE 0x6120</P>
<P>#define USE_TWIST 0x6130</P>
<P>#define USE_TEETER 0x6140</P>
<P>#define USE_FIT 0x6150</P>
<P>#define USE_BEVEL 0x6160</P>

<P>/* Viewport description chunks */</P>

<P>#define VIEWPORT_LAYOUT_OLD 0x7000</P>
<P>#define VIEWPORT_DATA_OLD 0x7010</P>
<P>#define VIEWPORT_LAYOUT 0x7001</P>
<P>#define VIEWPORT_DATA 0x7011</P>
<P>#define VIEWPORT_DATA_3 0x7012&#9;/* Version 3.0 -- not backward-compatible */</P>
<P>#define VIEWPORT_SIZE 0x7020</P>
<P>#define NETWORK_VIEW 0x7030</P>

<P>/* Material file chunk IDs */</P>

<P>#define&#9;MAT_ENTRY&#9;&#9;0xAFFF</P>
<P>#define MAT_NAME&#9;&#9;0xA000</P>
<P>#define MAT_AMBIENT&#9;&#9;0xA010</P>
<P>#define MAT_DIFFUSE&#9;&#9;0xA020</P>
<P>#define MAT_SPECULAR&#9;&#9;0xA030</P>
<P>#define MAT_SHININESS&#9;&#9;0xA040</P>
<P>#define MAT_SHIN2PCT&#9;&#9;0xA041</P>
<P>#define MAT_SHIN3PCT&#9;&#9;0xA042</P>
<P>#define MAT_TRANSPARENCY&#9;0xA050</P>
<P>#define MAT_XPFALL&#9;0xA052</P>
<P>#define MAT_REFBLUR&#9;0xA053</P>

<P>#define MAT_SELF_ILLUM&#9;&#9;0xA080</P>
<P>#define MAT_TWO_SIDE&#9;&#9;0xA081</P>
<P>#define MAT_DECAL&#9;&#9;0xA082</P>
<P>#define MAT_ADDITIVE&#9;&#9;0xA083</P>
<P>#define MAT_SELF_ILPCT&#9;0xA084</P>
<P>#define MAT_WIRE&#9;&#9;&#9;0xA085</P>
<P>#define MAT_SUPERSMP&#9;&#9;0xA086</P>
<P>#define MAT_WIRESIZE&#9;&#9;0xA087</P>
<P>#define MAT_FACEMAP&#9;&#9;0xA088</P>
<P>#define MAT_XPFALLIN&#9;&#9;0xA08A</P>
<P>#define MAT_PHONGSOFT&#9;0xA08C</P>
<P>#define MAT_WIREABS  &#9;0xA08E</P>

<P>#define MAT_SHADING&#9;&#9;0xA100</P>

<P>#define MAT_TEXMAP&#9;&#9;0xA200</P>
<P>#define MAT_OPACMAP&#9;&#9;0xA210</P>
<P>#define MAT_BUMPMAP&#9;&#9;0xA230</P>
<P>#define MAT_SPECMAP&#9;&#9;0xA204</P>
<P>#define MAT_REFLMAP&#9;&#9;0xA220</P>
<P>#define MAT_USE_XPFALL&#9;0xA240</P>
<P>#define MAT_USE_REFBLUR&#9;0xA250</P>
<P>#define MAT_BUMP_PERCENT 0xA252  /* new scaled up bump value */</P>

<P>#define MAT_MAPNAME&#9;&#9;0xA300</P>
<P>#define MAT_ACUBIC&#9;&#9;0xA310</P>

<P>#define MAT_SXP_TEXT_DATA 0xA320</P>
<P>#define MAT_SXP_TEXT2_DATA 0xA321</P>
<P>#define MAT_SXP_OPAC_DATA 0xA322</P>
<P>#define MAT_SXP_BUMP_DATA 0xA324</P>
<P>#define MAT_SXP_SPEC_DATA 0xA325</P>
<P>#define MAT_SXP_SHIN_DATA 0xA326</P>
<P>#define MAT_SXP_SELFI_DATA 0xA328</P>
<P>#define MAT_SXP_TEXT_MASKDATA 0xA32A</P>
<P>#define MAT_SXP_TEXT2_MASKDATA 0xA32C</P>
<P>#define MAT_SXP_OPAC_MASKDATA&#9;0xA32E</P>
<P>#define MAT_SXP_BUMP_MASKDATA&#9;0xA330</P>
<P>#define MAT_SXP_SPEC_MASKDATA&#9;0xA332</P>
<P>#define MAT_SXP_SHIN_MASKDATA&#9;0xA334</P>
<P>#define MAT_SXP_SELFI_MASKDATA 0xA336</P>
<P>#define MAT_SXP_REFL_MASKDATA&#9; 0xA338</P>
<P>#define MAT_TEX2MAP &#9;0xA33A</P>
<P>#define MAT_SHINMAP &#9;0xA33C</P>
<P>#define MAT_SELFIMAP 0xA33D</P>
<P>#define MAT_TEXMASK 0xA33E</P>
<P>#define MAT_TEX2MASK 0xA340</P>
<P>#define MAT_OPACMASK 0xA342</P>
<P>#define MAT_BUMPMASK 0xA344</P>
<P>#define MAT_SHINMASK 0xA346</P>
<P>#define MAT_SPECMASK 0xA348</P>
<P>#define MAT_SELFIMASK 0xA34A</P>
<P>#define MAT_REFLMASK 0xA34C</P>
<P>#define MAT_MAP_TILINGOLD 0xA350</P>
<P>#define MAT_MAP_TILING 0xA351</P>
<P>#define MAT_MAP_TEXBLUR_OLD 0xA352</P>
<P>#define MAT_MAP_TEXBLUR 0xA353</P>
<P>#define MAT_MAP_USCALE 0xA354</P>
<P>#define MAT_MAP_VSCALE 0xA356</P>
<P>#define MAT_MAP_UOFFSET 0xA358</P>
<P>#define MAT_MAP_VOFFSET 0xA35A</P>
<P>#define MAT_MAP_ANG 0xA35C</P>
<P>#define MAT_MAP_COL1 0xA360</P>
<P>#define MAT_MAP_COL2 0xA362</P>
<P>#define MAT_MAP_RCOL 0xA364 </P>
<P>#define MAT_MAP_GCOL 0xA366 </P>
<P>#define MAT_MAP_BCOL 0xA368 </P>

<P>/* NOTE Numbers 0x8000 through 0x8FFF are reserved for external</P>
<P>   applications to include in APP_DATA chunks */</P>
<P>#define APP_DATA 0x8000</P>

<P>/* Dummy chunk ID */</P>

<P>#define DUMMY 0xFFFF</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>#endif</P>

<P>#define _OFILE_H_DEFINED</P>

<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<I><P><A NAME="_Toc454156752">OpenSource/Tools/Fusion2 Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>Fusion2 is the codename for the Genesis 3D Editor it comprises several files and subdirectories.  The header files are listed below, with the exception if the Genesis3D include files which have been previously documented.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156753">About.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  about.h                                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef ABOUT_H</P>
<P>#define ABOUT_H</P>

<P>#include "resource.h"</P>
<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CAboutDlg dialog used for App About</P>

<P>class CAboutDlg : public CDialog</P>
<P>{</P>
<P>public:</P>
<P>&#9;CAboutDlg();</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CAboutDlg)</P>
<P>&#9;enum { IDD = IDD_ABOUTBOX };</P>
<P>&#9;//}}AFX_DATA</P>

<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CAboutDlg)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>
<P>&#9;//{{AFX_MSG(CAboutDlg)</P>
<P>&#9;&#9;// No message handlers</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>};</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156754">ActivationWatch.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  ActivationWatch.h                                                                   */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CActivationWatch thread</P>

<P>#ifndef _ACTIVATIONWATCH_H</P>
<P>#define _ACTIVATIONWATCH_H</P>

<P>class CActivationWatch : public CWinThread</P>
<P>{</P>
<P>&#9;DECLARE_DYNCREATE(CActivationWatch)</P>
<P>protected:</P>
<P>&#9;CActivationWatch();           // protected constructor used by dynamic creation</P>

<P>// Attributes</P>
<P>public:</P>

<P>// Operations</P>
<P>public:</P>

<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CActivationWatch)</P>
<P>&#9;public:</P>
<P>&#9;virtual BOOL InitInstance();</P>
<P>&#9;virtual int ExitInstance();</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>
<P>&#9;virtual ~CActivationWatch();</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CActivationWatch)</P>
<P>&#9;&#9;// NOTE - the ClassWizard will add and remove member functions here.</P>
<P>&#9;//}}AFX_MSG</P>

<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>};</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156755">array.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  array.h                                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef ARRAY_H</P>
<P>#define ARRAY_H</P>

<P>#include "basetype.h"</P>
<P>#include &lt;string.h&gt;</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>typedef struct tag_Array Array;</P>
<P>struct tag_Array</P>
<P>{</P>
<P>&#9;int ItemsAllocated;&#9;&#9;// number of items currently allocated</P>
<P>&#9;int ItemSize;</P>
<P>&#9;void *Items;&#9;&#9;&#9;// array of data</P>
<P>};</P>

<P>&nbsp;</P>
<P>// Initialize an allocated array object</P>
<P>geBoolean Array_Init (Array *pArray, int InitialSize, int ItemSize);</P>

<P>// Free memory allocated by an array's items</P>
<P>void Array_Uninit (Array *pArray);</P>

<P>// Create an array object with given initial size (possibly 0).</P>
<P>// The array contains items of size ItemSize (must be &gt; 0)</P>
<P>Array *Array_Create (int InitialSize, int ItemSize);</P>

<P>// Destroy an array object</P>
<P>void Array_Destroy (Array **ppArray);</P>

<P>// Size the array to contain NewSize items.</P>
<P>// returns new size in items.</P>
<P>int Array_Resize (Array *pArray, int NewSize);</P>

<P>#ifdef _DEBUG</P>
<P>&#9;// Returns the array's current size.</P>
<P>&#9;int Array_GetSize (const Array *pArray);</P>

<P>&#9;// Return size of items held by the array</P>
<P>&#9;int Array_GetItemSize (const Array *pArray);</P>

<P>&#9;// Returns a pointer to the item's data.</P>
<P>&#9;void *Array_ItemPtr (Array *pArray, int Index);</P>

<P>&#9;// Copies DataSize bytes from pData to array[Index]</P>
<P>&#9;void Array_PutAt (Array *pArray, int Index, void *pData, int DataSize);</P>

<P>&#9;// Inserts an item at the given position, moving all other items</P>
<P>&#9;// down by 1.  The last item in the array is lost...</P>
<P>&#9;void Array_InsertAt (Array *pArray, int Index, void *pData, int DataSize);</P>

<P>&#9;// Deletes the item at and moves all following items in the array up</P>
<P>&#9;// to fill in the empty spot.</P>
<P>&#9;void Array_DeleteAt (Array *pArray, int Index);</P>

<P>#else</P>
<P>&#9;#define Array_GetSize(a) ((a)-&gt;ItemsAllocated)</P>
<P>&#9;#define Array_GetItemSize(a) ((a)-&gt;ItemSize)</P>
<P>&#9;#define Array_ItemPtr(a,i) ((void *)(((long)((a)-&gt;Items))+((i)*(a)-&gt;ItemSize)))</P>
<P>&#9;#define Array_PutAt(a,i,d,s) (memcpy (Array_ItemPtr((a),(i)),(d),(s)))</P>
<P>&#9;#define Array_InsertAt(a,i,d,s) \</P>
<P>&#9;&#9;(memmove(Array_ItemPtr((a),(i)+1),Array_ItemPtr((a),(i)),((a)-&gt;ItemsAllocated-(i)-1)*(a)-&gt;ItemSize), \</P>
<P>&#9;&#9; memcpy(Array_ItemPtr((a),(i)),(d),(s)))</P>
<P>&#9;#define Array_DeleteAt(a,i) \</P>
<P>&#9;&#9;(memcpy (Array_ItemPtr((a),(i)),Array_ItemPtr((a),(i+1)),((a)-&gt;ItemsAllocated-(i)-1)*(a)-&gt;ItemSize))</P>
<P>#endif</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156756">box3d.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  box3d.h                                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef BOX3D_H</P>
<P>#define BOX3D_H</P>

<P>#include "basetype.h"</P>
<P>#include "vec3d.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>struct tag_Box3d</P>
<P>{</P>
<P>&#9;geVec3d Min;</P>
<P>&#9;geVec3d Max;</P>
<P>};</P>

<P>typedef struct tag_Box3d Box3d;</P>

<P>// Set all vectors to 0.</P>
<P>void Box3d_Clear</P>
<P>&#9;(</P>
<P>&#9;  Box3d *b</P>
<P>&#9;);</P>

<P>// Create an inverted box (FLT_MAX, FLT_MAX, FLT_MAX, -FLT_MAX, -FLT_MAX, -FLT_MAX)</P>
<P>// for use in creating a bounding box.</P>
<P>void Box3d_SetBogusBounds</P>
<P>&#9;(</P>
<P>&#9;  Box3d *b</P>
<P>&#9;);</P>

<P>// Set the values in a box</P>
<P>void Box3d_Set</P>
<P>&#9;(</P>
<P>&#9;  Box3d *b,</P>
<P>&#9;  geFloat x1,</P>
<P>&#9;  geFloat y1,</P>
<P>&#9;  geFloat z1,</P>
<P>&#9;  geFloat x2,</P>
<P>&#9;  geFloat y2,</P>
<P>&#9;  geFloat z2</P>
<P>&#9;);</P>

<P>// Extend a box to encompas the passed point</P>
<P>void Box3d_AddPoint</P>
<P>&#9;(</P>
<P>&#9;  Box3d *b,</P>
<P>&#9;  geFloat px,</P>
<P>&#9;  geFloat py,</P>
<P>&#9;  geFloat pz</P>
<P>&#9;);</P>

<P>// Return result of box intersection.</P>
<P>// If no intersection, returns GE_FALSE and bResult is not modified.</P>
<P>// If intersection, returns GE_TRUE and fills bResult (if not NULL)</P>
<P>// with the intersected box,</P>
<P>// bResult may be one of b1 or b2.</P>
<P>// </P>
<P>geBoolean Box3d_Intersection</P>
<P>&#9;(</P>
<P>&#9;  const Box3d *b1,</P>
<P>&#9;  const Box3d *b2,</P>
<P>&#9;  Box3d *bResult</P>
<P>&#9;);</P>

<P>// computes union of b1 and b2 and returns in bResult.</P>
<P>// bResult may be one of b1 or b2.</P>
<P>void Box3d_Union</P>
<P>&#9;(</P>
<P>&#9;  const Box3d *b1,</P>
<P>&#9;  const Box3d *b2,</P>
<P>&#9;  Box3d *bResult</P>
<P>&#9;);</P>

<P>geBoolean Box3d_ContainsPoint</P>
<P>&#9;(</P>
<P>&#9;  const Box3d *b,</P>
<P>&#9;  geFloat px,</P>
<P>&#9;  geFloat py,</P>
<P>&#9;  geFloat pz</P>
<P>&#9;);</P>

<P>const geVec3d *Box3d_GetMin</P>
<P>&#9;(</P>
<P>&#9;  const Box3d *b</P>
<P>&#9;);</P>

<P>const geVec3d *Box3d_GetMax</P>
<P>&#9;(</P>
<P>&#9;  const Box3d *b</P>
<P>&#9;);</P>

<P>void Box3d_GetCenter</P>
<P>&#9;(</P>
<P>&#9;  const Box3d *b,</P>
<P>&#9;  geVec3d *pCenter</P>
<P>&#9;);</P>

<P>geFloat Box3d_GetWidth</P>
<P>&#9;(</P>
<P>&#9;  const Box3d *b</P>
<P>&#9;);</P>

<P>geFloat Box3d_GetHeight</P>
<P>&#9;(</P>
<P>&#9;  const Box3d *b</P>
<P>&#9;);</P>

<P>geFloat Box3d_GetDepth</P>
<P>&#9;(</P>
<P>&#9;  const Box3d *b</P>
<P>&#9;);</P>

<P>void Box3d_GetSize</P>
<P>&#9;(</P>
<P>&#9;  const Box3d *b,</P>
<P>&#9;  geVec3d *pSize</P>
<P>&#9;);</P>

<P>// Scale the box</P>
<P>void Box3d_Scale</P>
<P>&#9;(</P>
<P>&#9;  Box3d *b,</P>
<P>&#9;  geFloat Scale</P>
<P>&#9;);</P>

<P>void Box3d_SetSize</P>
<P>&#9;(</P>
<P>&#9;  Box3d *b,</P>
<P>&#9;  geFloat sx,</P>
<P>&#9;  geFloat sy,</P>
<P>&#9;  geFloat sz</P>
<P>&#9;);</P>

<P>void Box3d_Move</P>
<P>&#9;(</P>
<P>&#9;  Box3d *b,</P>
<P>&#9;  geFloat dx,</P>
<P>&#9;  geFloat dy,</P>
<P>&#9;  geFloat dz</P>
<P>&#9;);</P>

<P>void Box3d_Inflate</P>
<P>&#9;(</P>
<P>&#9;  Box3d *b,</P>
<P>&#9;  geFloat dx,</P>
<P>&#9;  geFloat dy,</P>
<P>&#9;  geFloat dz</P>
<P>&#9;);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156757">brush.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  brush.h                                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax, John Pollard                      */</P>
<P>/*  Description:  Header for brush.c, important flags                                   */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef _BRUSH_H_</P>
<P>#define _BRUSH_H_</P>

<P>#include &lt;math.h&gt;</P>
<P>#include &lt;stdio.h&gt;</P>
<P>#include "Vec3d.h"</P>
<P>#include "XForm3d.h"</P>
<P>#include "face.h"</P>
<P>#include "box3d.h"</P>
<P>#include "parse3dt.h"</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>enum LastBrushAction</P>
<P>{</P>
<P>&#9;BRUSH_MOVE,</P>
<P>&#9;BRUSH_ROTATE,</P>
<P>&#9;BRUSH_SCALE,</P>
<P>&#9;BRUSH_SHEAR,</P>
<P>&#9;BRUSH_RESET,</P>
<P>&#9;BRUSH_DIALOG</P>
<P>};</P>

<P>enum BrushTypeFlags</P>
<P>{</P>
<P>&#9;BRUSH_MULTI&#9;&#9;&#9;=0x0001,</P>
<P>&#9;BRUSH_LEAF&#9;&#9;&#9;=0x0002, </P>
<P>&#9;BRUSH_CSG&#9;&#9;&#9;=0x0004</P>
<P>};</P>

<P>#define BRUSH_COUNT_MULTI 1</P>
<P>#define BRUSH_COUNT_LEAF  2</P>
<P>#define BRUSH_COUNT_CSG   4</P>
<P>#define BRUSH_COUNT_ALL (BRUSH_COUNT_MULTI | BRUSH_COUNT_LEAF | BRUSH_COUNT_CSG)</P>
<P>#define BRUSH_COUNT_NORECURSE 8</P>

<P>typedef struct tag_FaceList FaceList;</P>
<P>typedef struct tag_BrushList BrushList;</P>
<P>typedef struct BrushTag Brush;</P>

<P>//instancing / init</P>
<P>Brush&#9;&#9;*Brush_Create(int Type, const FaceList *fl, const BrushList *BList);</P>
<P>void&#9;&#9;Brush_Destroy(Brush **b);</P>
<P>Brush&#9;&#9;*Brush_Clone(Brush const *from);</P>
<P>Brush&#9;&#9;*Brush_CreateHollowFromBrush(const Brush *b);</P>

<P>//access</P>
<P>int&#9;&#9;&#9;Brush_GetNumFaces(const Brush *b);</P>
<P>Face&#9;&#9;*Brush_GetFace(const Brush *b, int i);</P>
<P>int&#9;&#9;&#9;Brush_GetModelId(const Brush *b);</P>
<P>int&#9;&#9;&#9;Brush_GetGroupId(const Brush *b);</P>
<P>geFloat&#9;&#9;Brush_GetHullSize(const Brush *b);</P>
<P>uint32&#9;&#9;Brush_GetColor(const Brush *b);</P>
<P>int&#9;&#9;&#9;Brush_GetType (const Brush *b);</P>

<P>const char *Brush_GetName(const Brush *b);</P>
<P>Face&#9;&#9;*Brush_GetSelectedFace(const Brush *b);</P>
<P>const Box3d&#9;*Brush_GetBoundingBox (const Brush *b);</P>
<P>const BrushList&#9;*Brush_GetBrushList(const Brush *b);</P>
<P>geBoolean&#9;Brush_GetParent(const BrushList&#9;*pList,&#9;&#9;//list to search</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;const Brush&#9;&#9;*b,&#9;&#9;&#9;//brush to find</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;Brush&#9;&#9;&#9;**bParent);&#9;//parent returned</P>
<P>Brush *&#9;&#9;Brush_GetTopLevelParent (const BrushList&#9;*pList, const Brush&#9;*b);</P>

<P>//set elements</P>
<P>void&#9;&#9;Brush_SetModelId(Brush *b, const int mid);</P>
<P>void&#9;&#9;Brush_SetGroupId(Brush *b, const int gid);</P>
<P>void&#9;&#9;Brush_SetHullSize(Brush *b, const geFloat HullSize);</P>
<P>void&#9;&#9;Brush_SetColor(Brush *b, const uint32 Color);</P>
<P>void&#9;&#9;Brush_SetName(Brush *b, const char *bname);</P>

<P>//check flags</P>
<P>geBoolean&#9;Brush_IsSolid(const Brush *b);</P>
<P>geBoolean&#9;Brush_IsWindow(const Brush *b);</P>
<P>geBoolean&#9;Brush_IsWavy(const Brush *b);</P>
<P>geBoolean&#9;Brush_IsDetail(const Brush *b);</P>
<P>geBoolean&#9;Brush_IsSubtract(const Brush *b);</P>
<P>geBoolean&#9;Brush_IsClip(const Brush *b);</P>
<P>geBoolean&#9;Brush_IsHollow(const Brush *b);</P>
<P>geBoolean&#9;Brush_IsHollowCut(const Brush *b);</P>
<P>geBoolean&#9;Brush_IsVisible(const Brush *b);</P>
<P>geBoolean&#9;Brush_IsLocked(const Brush *b);</P>
<P>geBoolean&#9;Brush_IsHint(const Brush *b);</P>
<P>geBoolean&#9;Brush_IsArea(const Brush *b);</P>
<P>geBoolean&#9;Brush_IsTranslucent(const Brush *b);</P>
<P>geBoolean&#9;Brush_IsEmpty(const Brush *b);</P>
<P>geBoolean&#9;Brush_IsMulti(const Brush *b);</P>
<P>geBoolean&#9;Brush_IsFlocking (const Brush *b);</P>
<P>geBoolean&#9;Brush_IsSheet (const Brush *b);</P>

<P>//set/reset flags</P>
<P>void&#9;&#9;Brush_SetSolid(Brush *b, const geBoolean state);</P>
<P>void&#9;&#9;Brush_SetWindow(Brush *b, const geBoolean state);</P>
<P>void&#9;&#9;Brush_SetWavy(Brush *b, const geBoolean state);</P>
<P>void&#9;&#9;Brush_SetDetail(Brush *b, const geBoolean state);</P>
<P>void&#9;&#9;Brush_SetSubtract(Brush *b, const geBoolean state);</P>
<P>void&#9;&#9;Brush_SetClip(Brush *b, const geBoolean state);</P>
<P>void&#9;&#9;Brush_SetHollow(Brush *b, const geBoolean state);</P>
<P>void&#9;&#9;Brush_SetVisible(Brush *b, const geBoolean state);</P>
<P>void&#9;&#9;Brush_SetLocked(Brush *b, const geBoolean state);</P>
<P>void&#9;&#9;Brush_SetHint(Brush *b, const geBoolean state);</P>
<P>void&#9;&#9;Brush_SetArea(Brush *b, const geBoolean state);</P>
<P>void&#9;&#9;Brush_SetTranslucent(Brush *b, const geBoolean state);</P>
<P>void&#9;&#9;Brush_SetEmpty(Brush *b, const geBoolean state);</P>
<P>void&#9;&#9;Brush_SetHollowCut(Brush *b, const geBoolean bState);</P>
<P>void&#9;&#9;Brush_SetFlocking (Brush *b, const geBoolean bState);</P>
<P>void&#9;&#9;Brush_SetSheet (Brush *b, const geBoolean bState);</P>
<P>void&#9;&#9;Brush_SetUserFlags (Brush *b, unsigned long Flags);</P>
<P>unsigned long Brush_GetUserFlags (const Brush *b);</P>

<P>//io</P>
<P>void&#9;&#9;Brush_WriteToMap(const Brush *b, FILE *ofile, geBoolean VisDetail);</P>
<P>void&#9;&#9;Brush_WriteToQuakeMap(const Brush *b, FILE *ofile);</P>
<P>geBoolean&#9;Brush_Write(const Brush *b, FILE *ofile);</P>
<P>Brush&#9;&#9;*Brush_CreateFromFile(Parse3dt *Parser, int VersionMajor, int VersionMinor, const char **Expected);</P>

<P>//operations</P>
<P>void&#9;&#9;Brush_Resize(Brush *b, float dx, float dy, int sides, int inidx, geVec3d *fnscale, int *ScaleNum);</P>
<P>void&#9;&#9;Brush_ResizeFinal(Brush *b, int sides, int inidx, geVec3d *fnscale);</P>
<P>//void&#9;&#9;Brush_SnapNearest(Brush *b, geFloat gsize, int sides, int inidx);</P>
<P>void&#9;&#9;Brush_SnapShearNearest(Brush *b, geFloat gsize, int sides, int inidx, int snapside);</P>
<P>void&#9;&#9;Brush_SnapScaleNearest(Brush *b, geFloat gsize, int sides, int inidx, geVec3d *fnscale, int *ScaleNum);</P>
<P>Face&#9;&#9;*Brush_RayCast(const Brush *b, geVec3d *BrushOrg, geVec3d *dir, geFloat *dist);</P>
<P>void&#9;&#9;Brush_Move(Brush *b, const geVec3d *trans);</P>
<P>void&#9;&#9;Brush_Scale3d(Brush *b, const geVec3d *scalevec);</P>
<P>void&#9;&#9;Brush_Transform (Brush *b, const geXForm3d *pXfm);</P>
<P>void&#9;&#9;Brush_Rotate (Brush *b, const geXForm3d *pXfmRotate, const geVec3d *pCenter);</P>
<P>void&#9;&#9;Brush_Scale (Brush *b, float ScaleFactor);</P>
<P>void&#9;&#9;Brush_Shear(Brush *b, const geVec3d *ShearVec, const geVec3d *ShearAxis);</P>
<P>void&#9;&#9;Brush_ShearFixed(Brush *b, float dx, float dy, int sides, int inidx, geVec3d *fnscale, int *ScaleNum);</P>
<P>void&#9;&#9;Brush_Bound(Brush *b);</P>
<P>geBoolean&#9;Brush_TestBoundsIntersect(const Brush *b, const Box3d *pBox);</P>
<P>void&#9;&#9;Brush_SealFaces(Brush **b);</P>
<P>void&#9;&#9;Brush_UpdateChildFaces(Brush *b);</P>
<P>void&#9;&#9;Brush_SetFaceListDirty(Brush *b);</P>
<P>geBoolean&#9;Brush_SetNextSelectedFace(Brush *b);</P>
<P>geBoolean&#9;Brush_SetPrevSelectedFace(Brush *b);</P>
<P>Face&#9;&#9;*Brush_SelectFirstFace(Brush *b);</P>
<P>Face&#9;&#9;*Brush_SelectLastFace(Brush *b);</P>
<P>Brush&#9;&#9;*Brush_GetNextBrush(Brush *b, BrushList *pList);</P>
<P>Brush&#9;&#9;*Brush_GetPrevBrush(Brush *b, BrushList *pList);</P>
<P>void&#9;&#9;Brush_SetTextureScale (Brush *b, geFloat ScaleVal);</P>

<P>typedef geBoolean (*BrushList_CB)( Brush *pBrush, void * pVoid ) ;</P>

<P>// Brush list operations</P>
<P>BrushList&#9;*BrushList_Create (void);</P>
<P>BrushList&#9;*BrushList_CreateFromFile (Parse3dt *Parser, int VersionMajor, int VersionMinor, const char **Expected);</P>
<P>void&#9;&#9;BrushList_MakeHollowsMulti(BrushList *inList);</P>
<P>void BrushList_Destroy (BrushList **ppList);</P>
<P>void BrushList_Append (BrushList *pList, Brush *pBrush);</P>
<P>void BrushList_InsertAfter(BrushList *pList, Brush *pBMarker, Brush *pBrush);</P>
<P>void BrushList_InsertBefore(BrushList *pList, Brush *pBMarker, Brush *pBrush);</P>
<P>void BrushList_Prepend (BrushList *pList, Brush *pBrush);</P>
<P>void BrushList_Remove (BrushList *pList, Brush *pBrush);</P>
<P>void BrushList_DeleteAll (BrushList *pList);</P>
<P>void BrushList_GetBounds(const BrushList *BList, Box3d *pBounds);</P>
<P>geBoolean BrushList_Write (BrushList *BList, FILE *ofile);</P>
<P>geBoolean BrushList_EnumAll</P>
<P>&#9;(</P>
<P>&#9;&#9;BrushList const *pList,</P>
<P>&#9;&#9;void *&#9;&#9;&#9;lParam,</P>
<P>&#9;&#9;BrushList_CB&#9;CallBack</P>
<P>&#9;) ;</P>
<P>geBoolean BrushList_Enum </P>
<P>&#9;(</P>
<P>&#9;&#9;BrushList const *pList,</P>
<P>&#9;&#9;void *&#9;&#9;&#9;lParam,</P>
<P>&#9;&#9;BrushList_CB&#9;CallBack</P>
<P>&#9;) ;</P>
<P>int BrushList_EnumLeafBrushes</P>
<P>&#9;(</P>
<P>&#9;&#9;BrushList const *pList,</P>
<P>&#9;&#9;void *&#9;&#9;&#9;&#9;pVoid,</P>
<P>&#9;&#9;BrushList_CB&#9;&#9;CallBack</P>
<P>&#9;) ;</P>
<P>int BrushList_EnumCSGBrushes</P>
<P>&#9;(</P>
<P>&#9;&#9;BrushList const *pList,</P>
<P>&#9;&#9;void *&#9;&#9;&#9;&#9;pVoid,</P>
<P>&#9;&#9;BrushList_CB&#9;&#9;CallBack</P>
<P>&#9;) ;</P>

<P>typedef geBoolean (*Brush_CSGCallback)(const Brush *pBrush, void *lParam);</P>

<P>typedef Brush * BrushIterator;</P>
<P>Brush *BrushList_GetFirst (BrushList *bList, BrushIterator *bi);</P>
<P>Brush *BrushList_GetNext (BrushIterator *bi);</P>
<P>Brush *BrushList_GetLast (BrushList *bList, BrushIterator *bi);</P>
<P>Brush *BrushList_GetPrev (BrushIterator *bi);</P>
<P>int BrushList_Count&#9;(BrushList const *pList, int CountFlags);</P>
<P>BrushList&#9;*BrushList_Clone(BrushList *inList);</P>
<P>void&#9;BrushList_DoCSG(BrushList *inList, int mid, Brush_CSGCallback Callback, void *lParam);</P>
<P>void&#9;BrushList_RebuildHollowFaces(BrushList *inList, int mid, Brush_CSGCallback Callback, void *lParam);</P>
<P>void&#9;BrushList_ClearAllCSG (BrushList *pList);</P>
<P>void&#9;BrushList_ClearCSGAndHollows(BrushList *inList, int mid);</P>
<P>void&#9;BrushList_Move(BrushList *pList, const geVec3d *trans);</P>
<P>void&#9;BrushList_Scale (BrushList *pList, float ScaleFactor);</P>
<P>void&#9;BrushList_Scale3d(BrushList *pList, const geVec3d *trans);</P>
<P>void&#9;BrushList_Transform(BrushList *pList, const geXForm3d *pXfm);</P>
<P>void&#9;BrushList_Rotate(BrushList *pList, const geXForm3d *pXfmRotate, const geVec3d *pCenter);</P>
<P>void&#9;BrushList_Shear(BrushList *pList, const geVec3d *ShearVec, const geVec3d *ShearAxis);</P>
<P>void&#9;Brush_ShearFinal(Brush *b, int sides, int inidx, geVec3d *fnscale);</P>
<P>Brush * BrushList_FindFaceParent (const BrushList *pList, const Face *pFace);</P>
<P>Brush * BrushList_FindTopLevelFaceParent (const BrushList *pList, const Face *pFace);</P>

<P>void&#9;Brush_Center(const Brush *b, geVec3d *center);</P>

<P>typedef geBoolean (*Brush_FaceCallback)(Face *pFace, void *lParam);</P>

<P>void&#9;Brush_EnumFaces (Brush *b, void *lParam, Brush_FaceCallback Callback);</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454156758">BrushAttributesDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  BrushAttributesDialog.h                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef BRUSHATTRIBUTESDIALOG_H</P>
<P>#define BRUSHATTRIBUTESDIALOG_H</P>

<P>#include "brush.h"</P>
<P>#include "resource.h"</P>

<P>class CFusionDoc;</P>

<P>class CBrushAttributesDialog : public CDialog</P>
<P>{</P>
<P>public:</P>
<P>&#9;void UpdateBrushFocus ();</P>
<P>&#9;CBrushAttributesDialog(CFusionDoc *pDoc, CWnd* pParent = NULL);   // standard constructor</P>

<P>&nbsp;</P>
<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CBrushAttributesDialog)</P>
<P>&#9;enum { IDD = IDD_BRUSHDIALOG };</P>
<P>&#9;CCheckListBox&#9;m_ContentsList;</P>
<P>&#9;CEdit&#9;m_EditHullsize;</P>
<P>&#9;CStatic&#9;m_LblHullsize;</P>
<P>&#9;CString&#9;m_Name;</P>
<P>&#9;float&#9;m_HullSize;</P>
<P>&#9;BOOL&#9;m_Wavy;</P>
<P>&#9;BOOL&#9;m_Area;</P>
<P>&#9;BOOL&#9;m_Translucent;</P>
<P>&#9;int&#9;&#9;m_BrushType;</P>
<P>&#9;BOOL&#9;m_Detail;</P>
<P>&#9;BOOL&#9;m_Hollow;</P>
<P>&#9;BOOL&#9;m_Flocking;</P>
<P>&#9;BOOL&#9;m_Sheet;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CBrushAttributesDialog)</P>
<P>&#9;protected:</P>
<P>&#9;virtual&#9;BOOL OnInitDialog();</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;virtual void PostNcDestroy();</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>
<P>&#9;uint16&#9;m_OldFlags ;</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CBrushAttributesDialog)</P>
<P>&#9;afx_msg void OnApply();</P>
<P>&#9;virtual void OnCancel();</P>
<P>&#9;afx_msg void OnBrushsolid();</P>
<P>&#9;afx_msg void OnBrushclip();</P>
<P>&#9;afx_msg void OnBrushwindow();</P>
<P>&#9;afx_msg void OnBrushhint();</P>
<P>&#9;afx_msg void OnBrushsubtract();</P>
<P>&#9;afx_msg void OnBrushhollow();</P>
<P>&#9;afx_msg void OnBrushempty();</P>
<P>&#9;afx_msg void OnBrushtranslucent();</P>
<P>&#9;afx_msg void OnBrushflocking();</P>
<P>&#9;afx_msg void OnBrushsheet();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>private:</P>
<P>&#9;int BrushColor;</P>
<P>&#9;CFusionDoc&#9;*m_pDoc;</P>

<P>&#9;void OnRadioButton( void ) ;</P>
<P>&#9;void EnableTranslucency (void);</P>
<P>&#9;void EnableHullsize (void);</P>
<P>&#9;void SetDialogFields (void);</P>
<P>&#9;int&#9; BrushFlagsToIndex( void ) ;</P>
<P>&#9;void BrushOptionsFromType( void ) ;</P>
<P>&#9;void SetFlagsToBrushType( void ) ;</P>
<P>&#9;void AssignCurrentToValues();</P>
<P>&#9;void AssignCurrentToViews();</P>
<P>};</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156759">BrushEntityDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>*********/</P>
<P>/*  BrushEntityDialog.h                                                                 */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>

<P>#ifndef BRUSHENTITYDIALOG_H</P>
<P>#define BRUSHENTITYDIALOG_H</P>

<P>#include "basetype.h"</P>
<P>#include "resource.h"</P>

<P>class CFusionDoc;</P>
<P>class CFusionTabControls;</P>
<P>class CPreMadeObject;</P>

<P>// CBrushEntityDialog dialog</P>

<P>class CBrushEntityDialog : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;void Update( CFusionDoc* pDoc );</P>
<P>&#9;CBrushEntityDialog(CFusionTabControls* pParent = NULL, CFusionDoc* pDoc = NULL);   // standard constructor</P>

<P>&#9;// goes through all names in the object library and adds them to the list combo</P>
<P>&#9;void SetupObjectListCombo();</P>
<P>&#9;void AddObjectListName( char *name);</P>

<P>&#9;// enables or disables (depending on state of flag) the place object button</P>
<P>&#9;void EnablePlaceObjectButton( BOOL flag = TRUE );</P>

<P>&#9;geBoolean GetCurrentEntityName (char *pEntityName);</P>
<P>&#9;geBoolean GetCurrentObjectName (char *pObjName);</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CBrushEntityDialog)</P>
<P>&#9;enum { IDD = IDD_BRUSH_ENTITY_DIALOG };</P>
<P>&#9;CStatic&#9;m_LblBrushes;</P>
<P>&#9;CStatic&#9;m_LblEntities;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CBrushEntityDialog)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;virtual&#9;BOOL OnInitDialog();</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CBrushEntityDialog)</P>
<P>&#9;afx_msg void OnCubePrimitive();</P>
<P>&#9;afx_msg void OnCylinderPrimitive();</P>
<P>&#9;afx_msg void OnSpheroidPrimitive();</P>
<P>&#9;afx_msg void OnStaircasePrimitive();</P>
<P>&#9;afx_msg void OnArchPrimitive();</P>
<P>&#9;afx_msg void OnConePrimitive();</P>
<P>&#9;afx_msg void OnPlaceObject();</P>
<P>&#9;afx_msg void OnEntities();</P>
<P>&#9;afx_msg void OnSelchangeEntitycombo();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>private:</P>
<P>&#9;//&#9;Brushes</P>
<P>&#9;CButton m_ConeButton;</P>
<P>&#9;CButton m_ArchButton;</P>
<P>&#9;CButton m_StaircaseButton;</P>
<P>&#9;CButton m_CylinderButton;</P>
<P>&#9;CButton m_SpheroidButton;</P>
<P>&#9;CButton m_CubeButton;</P>
<P>&#9;</P>
<P>&#9;//&#9;Entitites</P>
<P>&#9;CButton m_EntityButton;</P>
<P>&#9;CComboBox m_EntityCombo;</P>

<P>&#9;// combo box containing list of library objects</P>
<P>&#9;CComboBox&#9;m_ObjectListCombo;</P>
<P>&#9;// button that user clicks to place an object within the level</P>
<P>&#9;CButton&#9;m_PlaceObjectButton;</P>

<P>&#9;CFusionTabControls* m_pParentCtrl;</P>
<P>&#9;CFusionDoc* m_pFusionDoc;</P>
<P>&#9;void SetupDialog();</P>
<P>&#9;void DisplayEntityButtonBitmap ();</P>
<P>&#9;void FillEntitiesCombo ();</P>
<P>};</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454156760">BrushGroupDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  BrushGroupDialog.h&#9;                                                                */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Jeff Lomax, John Moore                                   */</P>
<P>/*  Description:  Dialog code for brush groups                                          */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef BRUSHGROUPDIALOG_H_</P>
<P>#define BRUSHGROUPDIALOG_H_</P>

<P>#include "brush.h"</P>
<P>#include "colorbtn.h"</P>
<P>#include "resource.h"</P>

<P>class CFusionDoc;</P>
<P>class CFusionTabControls;</P>
<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CBrushGroupDialog dialog</P>

<P>class CBrushGroupDialog : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;CBrushGroupDialog(CFusionTabControls *pParent, CFusionDoc *apDoc);   // standard constructor</P>
<P>&#9;void CBrushGroupDialog::UpdateTabDisplay(CFusionDoc* NewDoc);</P>
<P>&#9;void CBrushGroupDialog::LoadComboBox(void);</P>
<P>&#9;void UpdateGroupSelection( void ) ;</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CBrushGroupDialog)</P>
<P>&#9;enum { IDD = IDD_GROUPDIALOG };</P>
<P>&#9;CButton&#9;m_BrushLock;</P>
<P>&#9;CButton&#9;m_Visible;</P>
<P>&#9;CListBox&#9;m_BrushList;</P>
<P>&#9;CColorButton&#9;m_ColorButton;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CBrushGroupDialog)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CBrushGroupDialog)</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;virtual void OnOK();</P>
<P>&#9;afx_msg void OnSelectbrushes();</P>
<P>&#9;afx_msg void OnDeselectbrushes();</P>
<P>&#9;virtual void OnCancel();</P>
<P>&#9;afx_msg void OnCreateNewGroup();</P>
<P>&#9;afx_msg void OnAddToCurrent();</P>
<P>&#9;afx_msg void OnSelChangeGroupCombo();</P>
<P>&#9;afx_msg void OnVisible();</P>
<P>&#9;afx_msg void OnRemovefromcurrent();</P>
<P>&#9;afx_msg void OnBrushlock();</P>
<P>&#9;afx_msg void OnSelchangeBrushlist();</P>
<P>&#9;afx_msg void OnRemovegroup();</P>
<P>&#9;afx_msg LRESULT OnChangeColor(WPARAM wParam, LPARAM lParam);</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>

<P>private:</P>
<P>//&#9;int&#9;&#9;&#9;&#9;&#9;mCurrentGroup;&#9;WHY, it was not updated!</P>
<P>&#9;CFusionDoc&#9;&#9;&#9;*pDoc;</P>
<P>&#9;CFusionTabControls&#9;*m_pParentCtrl;</P>
<P>};</P>
<P>/////////////////////////////////////////////////////////////////////////////</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156761">BrushTemplate.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  BrushTemplate.h                                                                     */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef BRUSHTEMPLATE_H</P>
<P>#define BRUSHTEMPLATE_H</P>

<P>#include "basetype.h"</P>
<P>#include "brush.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>typedef struct</P>
<P>{</P>
<P>&#9;int&#9;&#9;&#9;NumSlits;</P>
<P>&#9;geFloat&#9;&#9;Thickness;</P>
<P>&#9;geFloat&#9;&#9;Width;</P>
<P>&#9;geFloat&#9;&#9;Radius;</P>
<P>&#9;geFloat&#9;&#9;WallSize;</P>
<P>&#9;int&#9;&#9;&#9;Style;</P>
<P>&#9;geFloat&#9;&#9;EndAngle;</P>
<P>&#9;geFloat&#9;&#9;StartAngle;</P>
<P>&#9;geBoolean&#9;TCut;</P>
<P>} BrushTemplate_Arch;</P>

<P>&nbsp;</P>
<P>typedef struct</P>
<P>{</P>
<P>&#9;int&#9;&#9;&#9;Solid;</P>
<P>&#9;geBoolean&#9;TCut;</P>
<P>&#9;geBoolean&#9;TSheet;</P>
<P>&#9;geFloat&#9;&#9;Thickness;</P>
<P>&#9;geFloat&#9;&#9;XSizeTop;</P>
<P>&#9;geFloat&#9;&#9;XSizeBot;</P>
<P>&#9;geFloat&#9;&#9;YSize;</P>
<P>&#9;geFloat&#9;&#9;ZSizeTop;</P>
<P>&#9;geFloat&#9;&#9;ZSizeBot;</P>
<P>} BrushTemplate_Box;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int&#9;&#9;&#9;Style;</P>
<P>&#9;geFloat&#9;&#9;Width;</P>
<P>&#9;geFloat&#9;&#9;Height;</P>
<P>&#9;int&#9;&#9;&#9;VerticalStrips;</P>
<P>&#9;geFloat&#9;&#9;Thickness;</P>
<P>&#9;geBoolean&#9;TCut;</P>
<P>} BrushTemplate_Cone;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;geFloat&#9;&#9;BotXOffset;</P>
<P>&#9;geFloat&#9;&#9;BotXSize;</P>
<P>&#9;geFloat&#9;&#9;BotZOffset;</P>
<P>&#9;geFloat&#9;&#9;BotZSize;</P>
<P>&#9;int&#9;&#9;&#9;Solid;</P>
<P>&#9;geFloat&#9;&#9;Thickness;</P>
<P>&#9;geFloat&#9;&#9;TopXOffset;</P>
<P>&#9;geFloat&#9;&#9;TopXSize;</P>
<P>&#9;geFloat&#9;&#9;TopZOffset;</P>
<P>&#9;geFloat&#9;&#9;TopZSize;</P>
<P>&#9;int&#9;&#9;&#9;VerticalStripes;</P>
<P>&#9;geFloat&#9;&#9;YSize;</P>
<P>&#9;geFloat&#9;&#9;RingLength;</P>
<P>&#9;geBoolean&#9;TCut;</P>
<P>} BrushTemplate_Cylinder;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int&#9;&#9;&#9;HorizontalBands;</P>
<P>&#9;int&#9;&#9;&#9;VerticalBands;</P>
<P>&#9;geFloat&#9;&#9;YSize;</P>
<P>&#9;int&#9;&#9;&#9;Solid;</P>
<P>&#9;geFloat&#9;&#9;Thickness;</P>
<P>&#9;geBoolean&#9;TCut;</P>
<P>} BrushTemplate_Spheroid;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;geFloat&#9;&#9;Height;</P>
<P>&#9;geFloat&#9;&#9;Length;</P>
<P>&#9;int&#9;&#9;&#9;NumberOfStairs;</P>
<P>&#9;geFloat&#9;&#9;Width;</P>
<P>&#9;geBoolean&#9;MakeRamp;</P>
<P>&#9;geBoolean&#9;TCut;</P>
<P>} BrushTemplate_Staircase;</P>

<P>&nbsp;</P>
<P>Brush *BrushTemplate_CreateArch      (const BrushTemplate_Arch *Template);</P>
<P>Brush *BrushTemplate_CreateBox&#9;&#9; (const BrushTemplate_Box *Template);</P>
<P>Brush *BrushTemplate_CreateCone&#9;&#9; (const BrushTemplate_Cone *Template);</P>
<P>Brush *BrushTemplate_CreateCylinder  (const BrushTemplate_Cylinder *Template);</P>
<P>Brush *BrushTemplate_CreateSpheroid  (const BrushTemplate_Spheroid *Template);</P>
<P>Brush *BrushTemplate_CreateStaircase (const BrushTemplate_Staircase *Template);</P>

<P>void BrushTemplate_ArchDefaults (BrushTemplate_Arch *pArchTemplate);</P>
<P>geBoolean BrushTemplate_WriteArch (const BrushTemplate_Arch *pArchTemplate, FILE *f);</P>

<P>geBoolean BrushTemplate_LoadArch </P>
<P>&#9;(</P>
<P>&#9;  BrushTemplate_Arch *pArchTemplate,</P>
<P>&#9;  Parse3dt *Parser, </P>
<P>&#9;  int VersionMajor, </P>
<P>&#9;  int VersionMinor, </P>
<P>&#9;  const char **Expected</P>
<P>&#9;);</P>

<P>void BrushTemplate_BoxDefaults (BrushTemplate_Box *pBoxTemplate);</P>
<P>geBoolean BrushTemplate_WriteBox (const BrushTemplate_Box *pBoxTemplate, FILE *f);</P>

<P>geBoolean BrushTemplate_LoadBox</P>
<P>&#9;(</P>
<P>&#9;  BrushTemplate_Box *pBoxTemplate,</P>
<P>&#9;  Parse3dt *Parser, </P>
<P>&#9;  int VersionMajor, </P>
<P>&#9;  int VersionMinor, </P>
<P>&#9;  const char **Expected</P>
<P>&#9;);</P>

<P>void BrushTemplate_ConeDefaults (BrushTemplate_Cone *pConeTemplate);</P>
<P>geBoolean BrushTemplate_WriteCone (const BrushTemplate_Cone *pConeTemplate, FILE *f);</P>

<P>geBoolean BrushTemplate_LoadCone</P>
<P>&#9;(</P>
<P>&#9;  BrushTemplate_Cone *pConeTemplate,</P>
<P>&#9;  Parse3dt *Parser, </P>
<P>&#9;  int VersionMajor, </P>
<P>&#9;  int VersionMinor, </P>
<P>&#9;  const char **Expected</P>
<P>&#9;);</P>

<P>void BrushTemplate_CylinderDefaults (BrushTemplate_Cylinder *pCylinderTemplate);</P>
<P>geBoolean BrushTemplate_WriteCylinder (const BrushTemplate_Cylinder *pCylinderTemplate, FILE *f);</P>

<P>geBoolean BrushTemplate_LoadCylinder</P>
<P>&#9;(</P>
<P>&#9;  BrushTemplate_Cylinder *pCylinderTemplate,</P>
<P>&#9;  Parse3dt *Parser, </P>
<P>&#9;  int VersionMajor, </P>
<P>&#9;  int VersionMinor, </P>
<P>&#9;  const char **Expected</P>
<P>&#9;);</P>

<P>void BrushTemplate_SpheroidDefaults (BrushTemplate_Spheroid *pSpheroidTemplate);</P>
<P>geBoolean BrushTemplate_WriteSpheroid (const BrushTemplate_Spheroid *pSpheroidTemplate, FILE *f);</P>

<P>geBoolean BrushTemplate_LoadSpheroid</P>
<P>&#9;(</P>
<P>&#9;  BrushTemplate_Spheroid *pSpheroidTemplate,</P>
<P>&#9;  Parse3dt *Parser, </P>
<P>&#9;  int VersionMajor, </P>
<P>&#9;  int VersionMinor, </P>
<P>&#9;  const char **Expected</P>
<P>&#9;);</P>

<P>void BrushTemplate_StaircaseDefaults (BrushTemplate_Staircase *pStaircaseTemplate);</P>
<P>geBoolean BrushTemplate_WriteStaircase (const BrushTemplate_Staircase *pStaircaseTemplate, FILE *f);</P>

<P>geBoolean BrushTemplate_LoadStaircase</P>
<P>&#9;(</P>
<P>&#9;  BrushTemplate_Staircase *pStaircaseTemplate,</P>
<P>&#9;  Parse3dt *Parser, </P>
<P>&#9;  int VersionMajor, </P>
<P>&#9;  int VersionMinor, </P>
<P>&#9;  const char **Expected</P>
<P>&#9;);</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156762">ChildFrm.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  ChildFrm.h                                                                          */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef CHILDFRM_H</P>
<P>#define CHILDFRM_H</P>

<P>#include "resource.h"</P>

<P>// CFixedSplitterWnd fixes WM_MOUSEWHEEL crash in MFC 0x0421</P>
<P>class CFixedSplitterWnd : public CSplitterWnd</P>
<P>{</P>
<P>&#9;//{{AFX_MSG(CFixedSplitterWnd)</P>
<P>&#9;afx_msg BOOL OnMouseWheel(UINT nFlags, short zDelta, CPoint pt);</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>};</P>

<P>&nbsp;</P>
<P>// child frame class</P>
<P>class CChildFrame : public CMDIChildWnd</P>
<P>{</P>
<P>&#9;DECLARE_DYNCREATE(CChildFrame)</P>
<P>public:</P>
<P>&#9;CChildFrame();</P>

<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CChildFrame)</P>
<P>&#9;public:</P>
<P>&#9;virtual BOOL PreCreateWindow(CREATESTRUCT&amp; cs);</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>&nbsp;</P>
<P>// Implementation</P>
<P>public:</P>
<P>&#9;virtual ~CChildFrame();</P>
<P>&#9;virtual BOOL OnCreateClient(LPCREATESTRUCT lpcs, CCreateContext* pContext);</P>

<P>// Generated message map functions</P>
<P>protected:</P>
<P>&#9;//{{AFX_MSG(CChildFrame)</P>
<P>&#9;afx_msg void OnSize(UINT nType, int cx, int cy);</P>
<P>&#9;afx_msg void OnSetFocus(CWnd* pOldWnd);</P>
<P>&#9;//}}AFX_MSG</P>

<P>&#9;CFixedSplitterWnd m_wndSplitter;</P>

<P>&#9;afx_msg LRESULT OnSetText(WPARAM wParam, LPARAM lParam);</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>private:</P>
<P>&#9;BOOL&#9;InitDone;</P>
<P>};</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156763">ColorBtn.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  ColorBtn.h                                                                          */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>

<P>#define WM_UPDATEGROUPCOLOR&#9;(WM_USER+100)</P>

<P>&nbsp;</P>
<P>class CColorButton : public CButton</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;void SetColor( COLORREF Color);</P>
<P>&#9;COLORREF mCurrentColor;</P>
<P>&#9;COLORREF GetColor();</P>
<P>&#9;CColorButton();</P>

<P>// Attributes</P>
<P>public:</P>

<P>// Operations</P>
<P>public:</P>

<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CColorButton)</P>
<P>&#9;public:</P>
<P>&#9;virtual void DrawItem(LPDRAWITEMSTRUCT lpDrawItemStruct);</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>public:</P>
<P>&#9;virtual ~CColorButton();</P>

<P>&#9;// Generated message map functions</P>
<P>protected:</P>
<P>&#9;//{{AFX_MSG(CColorButton)</P>
<P>&#9;afx_msg void OnClicked();</P>
<P>&#9;//}}AFX_MSG</P>

<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>};</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156764">CompileDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  CompileDialog.h                                                                     */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CCompileDialog dialog</P>

<P>#ifndef _COMPILEDIALOG_H</P>
<P>#define _COMPILEDIALOG_H</P>

<P>#include "resource.h"</P>
<P>#include "compiler.h"</P>

<P>class CCompileDialog : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;CCompileDialog(CWnd* pParent, CompileParamsType *pParms);   // standard constructor</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CCompileDialog)</P>
<P>&#9;enum { IDD = IDD_COMPILEDIALOG };</P>
<P>&#9;CButton&#9;m_Vis;</P>
<P>&#9;CButton&#9;m_RunGbsp;</P>
<P>&#9;CButton&#9;m_RunLight;</P>
<P>&#9;CButton&#9;m_EntitiesOnly;</P>
<P>&#9;BOOL&#9;m_RunAvenger;</P>
<P>&#9;CString&#9;m_FileName;</P>
<P>&#9;BOOL&#9;Rad;</P>
<P>&#9;int&#9;&#9;BounceLimit;</P>
<P>&#9;CString&#9;MinLight;</P>
<P>&#9;CString&#9;ReflectScale;</P>
<P>&#9;int&#9;&#9;PatchSize;</P>
<P>&#9;BOOL&#9;UseMinLight;</P>
<P>&#9;BOOL&#9;m_SuppressHidden;</P>
<P>&#9;BOOL&#9;m_VisDetail;</P>
<P>&#9;CString&#9;LightScale;</P>
<P>&#9;BOOL&#9;FastPatch;</P>
<P>&#9;BOOL&#9;ExtraSamp;</P>
<P>&#9;BOOL&#9;m_FullVis;</P>
<P>&#9;BOOL&#9;m_VisVerbose;</P>
<P>&#9;BOOL&#9;m_GbspVerbose;</P>
<P>&#9;BOOL&#9;m_EntityVerbose;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CCompileDialog)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CCompileDialog)</P>
<P>&#9;afx_msg void OnBrowse();</P>
<P>&#9;virtual void OnOK();</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;afx_msg void OnEntitiesonly();</P>
<P>&#9;afx_msg void OnRungbsp();</P>
<P>&#9;afx_msg void OnVis();</P>
<P>&#9;afx_msg void OnRunlight();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>

<P>private:</P>
<P>&#9;CompileParamsType *pParms;</P>
<P>&#9;void EnableControls (void);</P>
<P>&#9;void DoEnableWindow (int id, BOOL Enable);</P>
<P>};</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156765">Compiler.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  Compiler.h                                                                          */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef COMPILER_H</P>
<P>#define COMPILER_H</P>

<P>#include "gbsplib.h"</P>
<P>#include &lt;stdlib.h&gt;</P>

<P>#define WM_USER_COMPILE_MSG (WM_USER + 1)</P>
<P>#define WM_USER_COMPILE_ERR (WM_USER + 2)</P>
<P>#define WM_USER_COMPILE_DONE (WM_USER + 3)</P>

<P>typedef struct tag_CompileParamsType</P>
<P>{</P>
<P>&#9;geBoolean DoVis;</P>
<P>&#9;geBoolean DoLight;</P>
<P>&#9;geBoolean RunBsp;</P>
<P>&#9;geBoolean RunPreview;</P>
<P>&#9;geBoolean UseMinLight;</P>
<P>&#9;geBoolean SuppressHidden;</P>
<P>&#9;geBoolean EntitiesOnly;</P>
<P>&#9;geBoolean VisDetailBrushes;</P>
<P>&#9;LightParms Light;</P>
<P>&#9;VisParms Vis;</P>
<P>&#9;BspParms Bsp;</P>
<P>&#9;char Filename[_MAX_PATH];</P>
<P>} CompileParamsType;</P>

<P>typedef enum</P>
<P>{</P>
<P>&#9;COMPILER_ERROR_NONE,</P>
<P>&#9;COMPILER_ERROR_USERCANCEL,</P>
<P>&#9;COMPILER_ERROR_THREAD,&#9;&#9;&#9;// couldn't spawn thread</P>
<P>&#9;// Errors returned by DLL loader</P>
<P>&#9;COMPILER_ERROR_NODLL,&#9;&#9;&#9;// couldn't find the DLL</P>
<P>&#9;COMPILER_ERROR_MISSINGFUNC,&#9;&#9;// the DLL is missing a required function</P>
<P>&#9;// Errors returned by GBSP functions</P>
<P>&#9;COMPILER_ERROR_BSPFAIL,&#9;&#9;&#9;// unable to compile the BSP</P>
<P>&#9;COMPILER_ERROR_BSPSAVE,&#9;&#9;&#9;// unable to save the compiled BSP</P>
<P>&#9;// Errors returned by preview launcher</P>
<P>&#9;COMPILER_ERROR_NOBSP,</P>
<P>&#9;COMPILER_ERROR_BSPCOPY</P>
<P>} CompilerErrorEnum;</P>

<P>&nbsp;</P>
<P>#define COMPILER_PROCESSID 0x12345678</P>

<P>CompilerErrorEnum Compiler_Compile</P>
<P>&#9;(</P>
<P>&#9;  CompileParamsType const *pParams,</P>
<P>&#9;  ERROR_CB ErrorCallbackFcn,</P>
<P>&#9;  PRINTF_CB PrintfCallbackFcn</P>
<P>&#9;);</P>

<P>CompilerErrorEnum Compiler_StartThreadedCompile</P>
<P>&#9;(</P>
<P>&#9;  CompileParamsType const *pParams,</P>
<P>&#9;  HWND hwndNotify</P>
<P>&#9;);</P>

<P>&nbsp;</P>
<P>CompilerErrorEnum Compiler_RunPreview</P>
<P>&#9;(</P>
<P>&#9;  char const *PreviewFilename,</P>
<P>&#9;  char const *MotionFilename,</P>
<P>&#9;  char const *GPreviewPath</P>
<P>&#9;);</P>

<P>geBoolean Compiler_CompileInProgress</P>
<P>&#9;(</P>
<P>&#9;  void</P>
<P>&#9;);</P>

<P>geBoolean Compiler_CancelCompile </P>
<P>&#9;(</P>
<P>&#9;  void</P>
<P>&#9;);</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156766">ConsoleTab.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  ConsoleTab.h                                                                        */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined(AFX_CONSOLETAB_H__F4D701E1_7D42_11D1_9A1D_0000E824D625__INCLUDED_)</P>
<P>#define AFX_CONSOLETAB_H__F4D701E1_7D42_11D1_9A1D_0000E824D625__INCLUDED_</P>

<P>/*</P>
<P>&#9;Okay, this is really ugly.  For the moment we want to have the console functions</P>
<P>&#9;avalailable from C programs.  So we do that stupid #ifdef __cplusplus trick...</P>
<P>*/</P>
<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>
<P>//console stuff</P>
<P>//char *TranslateString(char *);</P>
<P>void ConClear(void);</P>
<P>void ConPrintf(char *, ...);</P>
<P>void ConError(char *, ...);&#9;//wanna do this red eventually</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>

<P>#include "resource.h"</P>

<P>class CFusionDoc;</P>
<P>class CFusionTabControls;</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>
<P>// ConsoleTab.h : header file</P>
<P>//</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CConsoleTab dialog</P>

<P>class CConsoleTab : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;CFusionTabControls* m_pParentCtrl;</P>
<P>&#9;CFusionDoc* m_pFusionDoc;</P>

<P>&#9;CConsoleTab(CFusionTabControls* pParent = NULL, CFusionDoc* pDoc = NULL);</P>
<P>&#9;void SetConHwnd(void);</P>
<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CConsoleTab)</P>
<P>&#9;enum { IDD = IDD_CONSOLE };</P>
<P>&#9;&#9;// NOTE: the ClassWizard will add data members here</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CConsoleTab)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CConsoleTab)</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;afx_msg void OnDestroy();</P>
<P>&#9;afx_msg void OnMaxtextConedit();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>private:</P>
<P>&#9;HFONT Font;</P>
<P>&#9;BOOL bNewFont;</P>
<P>};</P>

<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>#endif  // __cplusplus</P>

<P>#endif // !defined(AFX_CONSOLETAB_H__F4D701E1_7D42_11D1_9A1D_0000E824D625__INCLUDED_)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156767">CreateArchDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  CreateArchDialog.h                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef CREATEARCHDIALOG_H</P>
<P>#define&#9;CREATEARCHDIALOG_H</P>

<P>#include "resource.h"</P>
<P>#include "BrushTemplate.h"</P>

<P>class CCreateArchDialog : public CDialog</P>
<P>{</P>
<P>public:</P>
<P>&#9;virtual int DoModal(geBoolean ConvertToMetric, BrushTemplate_Arch *pArchTemplate);</P>
<P>&#9;CCreateArchDialog(CWnd *pParent=NULL);   // standard constructor</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CCreateArchDialog)</P>
<P>&#9;enum { IDD = IDD_CREATE_ARCH };</P>
<P>&#9;int&#9;&#9;m_NumSlits;</P>
<P>&#9;float&#9;m_Thickness;</P>
<P>&#9;float&#9;m_Width;</P>
<P>&#9;float&#9;m_Radius;</P>
<P>&#9;float&#9;m_WallSize;</P>
<P>&#9;int&#9;&#9;m_Style;</P>
<P>&#9;float&#9;m_EndAngle;</P>
<P>&#9;float&#9;m_StartAngle;</P>
<P>&#9;BOOL&#9;m_TCut;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CCreateArchDialog)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>private:</P>
<P>&#9;void&#9;&#9;dlgFieldsToCentimeters(void);</P>
<P>&#9;void&#9;&#9;dlgFieldsToTexels(void);</P>
<P>&#9;geBoolean&#9;m_ConvertToMetric;</P>
<P>&#9;BrushTemplate_Arch *m_pArchTemplate;</P>

<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CCreateArchDialog)</P>
<P>&#9;afx_msg void OnDefaults();</P>
<P>&#9;afx_msg void OnSolid();</P>
<P>&#9;afx_msg void OnHollow();</P>
<P>&#9;afx_msg void OnRing();</P>
<P>&#9;virtual void OnOK();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>};</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156768">CreateBoxDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  CreateBoxDialog.h                                                                   */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef CREATEBOXDIALOG_H</P>
<P>#define CREATEBOXDIALOG_H</P>

<P>#include "resource.h"</P>
<P>#include "BrushTemplate.h"</P>

<P>class CCreateBoxDialog : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;virtual int DoModal(geBoolean ConvertToMetric, BrushTemplate_Box *pBoxTemplate);</P>
<P>&#9;CCreateBoxDialog(CWnd* pParent = NULL);   // standard constructor</P>
<P>&#9;~CCreateBoxDialog();</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CCreateBoxDialog)</P>
<P>&#9;enum { IDD = IDD_CREATEBOX };</P>
<P>&#9;CButton&#9;m_CutBtn;</P>
<P>&#9;CButton&#9;m_SheetBtn;</P>
<P>&#9;CStatic&#9;m_Picture;</P>
<P>&#9;float&#9;m_YSize;</P>
<P>&#9;int&#9;&#9;m_Solid;</P>
<P>&#9;float&#9;m_XSizeBot;</P>
<P>&#9;float&#9;m_XSizeTop;</P>
<P>&#9;float&#9;m_ZSizeBot;</P>
<P>&#9;float&#9;m_ZSizeTop;</P>
<P>&#9;BOOL&#9;m_TCut;</P>
<P>&#9;float&#9;m_Thickness;</P>
<P>&#9;BOOL&#9;m_TSheet;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CCreateBoxDialog)</P>
<P>&#9;public:</P>
<P>&#9;virtual void Serialize(CArchive&amp; ar);</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>private:</P>
<P>&#9;void&#9;&#9;dlgFieldsToCentimeters(void);</P>
<P>&#9;void&#9;&#9;dlgFieldsToTexels(void);</P>
<P>&#9;geBoolean&#9;m_ConvertToMetric;</P>
<P>&#9;BrushTemplate_Box *m_pBoxTemplate;</P>

<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CCreateBoxDialog)</P>
<P>&#9;afx_msg void OnSolid();</P>
<P>&#9;afx_msg void OnHollow();</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;afx_msg void OnDefaults();</P>
<P>&#9;afx_msg void OnTcut();</P>
<P>&#9;virtual void OnOK();</P>
<P>&#9;afx_msg void OnTsheet();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>

<P>&#9;CBitmap mHollowBitmap, mSolidBitmap;</P>
<P>};</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156769">CreateConeDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  CreateConeDialog.h                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef CREATECONEDIALOG_H</P>
<P>#define CREATECONEDIALOG_H</P>

<P>#include "resource.h"</P>
<P>#include "BrushTemplate.h"</P>

<P>class CCreateConeDialog : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;virtual int DoModal(geBoolean ConvertToMetric, BrushTemplate_Cone *pConeTemplate);</P>
<P>&#9;CCreateConeDialog(CWnd *pParent=NULL);   // standard constructor</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CCreateConeDialog)</P>
<P>&#9;enum { IDD = IDD_CREATE_CONE };</P>
<P>&#9;int&#9;&#9;m_Style;</P>
<P>&#9;float&#9;m_Width;</P>
<P>&#9;float&#9;m_Height;</P>
<P>&#9;int&#9;&#9;m_VerticalStrips;</P>
<P>&#9;float&#9;m_Thickness;</P>
<P>&#9;BOOL&#9;m_TCut;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CCreateConeDialog)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>private:</P>
<P>&#9;void&#9;&#9;CCreateConeDialog::dlgFieldsToCentimeters(void);</P>
<P>&#9;void&#9;&#9;CCreateConeDialog::dlgFieldsToTexels(void);</P>
<P>&#9;geBoolean&#9;m_ConvertToMetric;</P>
<P>&#9;BrushTemplate_Cone *m_pConeTemplate;</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CCreateConeDialog)</P>
<P>&#9;afx_msg void OnDefault();</P>
<P>&#9;afx_msg void OnSolid();</P>
<P>&#9;afx_msg void OnHollow();</P>
<P>&#9;afx_msg void OnFunnel();</P>
<P>&#9;virtual void OnOK();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>};</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156770">CreateCylDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  CreateCylDialog.h                                                                   */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef CREATECYLDIALOG_H</P>
<P>#define CREATECYLDIALOG_H</P>

<P>#include "resource.h"</P>
<P>#include "BrushTemplate.h"</P>

<P>class CCreateCylDialog : public CDialog</P>
<P>{</P>
<P>public:</P>
<P>&#9;virtual int DoModal(geBoolean ConvertToMetric, BrushTemplate_Cylinder *pCylTemplate);</P>
<P>&#9;CCreateCylDialog(CWnd* pParent = NULL);   // standard constructor</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CCreateCylDialog)</P>
<P>&#9;enum { IDD = IDD_CREATE_CYL };</P>
<P>&#9;float&#9;m_BotXOffset;</P>
<P>&#9;float&#9;m_BotXSize;</P>
<P>&#9;float&#9;m_BotZOffset;</P>
<P>&#9;float&#9;m_BotZSize;</P>
<P>&#9;int&#9;&#9;m_Solid;</P>
<P>&#9;float&#9;m_TopXOffset;</P>
<P>&#9;float&#9;m_TopXSize;</P>
<P>&#9;float&#9;m_TopZOffset;</P>
<P>&#9;float&#9;m_TopZSize;</P>
<P>&#9;float&#9;m_YSize;</P>
<P>&#9;float&#9;m_RingLength;</P>
<P>&#9;BOOL&#9;m_TCut;</P>
<P>&#9;int&#9;&#9;m_VerticalStripes;</P>
<P>&#9;float&#9;m_Thickness;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CCreateCylDialog)</P>
<P>&#9;public:</P>
<P>&#9;virtual void Serialize(CArchive&amp; ar);</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>private:</P>
<P>&#9;void&#9;&#9;dlgFieldsToCentimeters(void);</P>
<P>&#9;void&#9;&#9;dlgFieldsToTexels(void);</P>
<P>&#9;geBoolean&#9;m_ConvertToMetric;</P>
<P>&#9;BrushTemplate_Cylinder *m_pCylTemplate;</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CCreateCylDialog)</P>
<P>&#9;afx_msg void OnDefaults();</P>
<P>&#9;virtual void OnOK();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>};</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156771">CreateSphereoidDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  CreateSpheroidDialog.h                                                              */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef CREATESPHEROIDDIALOG_H</P>
<P>#define CREATESPHEROIDDIALOG_H</P>

<P>#include "resource.h"</P>
<P>#include "BrushTemplate.h"</P>

<P>class CCreateSpheroidDialog : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;virtual int DoModal(geBoolean ConvertToMetric, BrushTemplate_Spheroid *pTemplate);</P>
<P>&#9;CCreateSpheroidDialog(CWnd* pParent = NULL);   // standard constructor</P>
<P>&#9;~CCreateSpheroidDialog();</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CCreateSpheroidDialog)</P>
<P>&#9;enum { IDD = IDD_CREATE_SPHEROID };</P>
<P>&#9;CStatic&#9;m_Picture;</P>
<P>&#9;int&#9;&#9;m_HorizontalBands;</P>
<P>&#9;int&#9;&#9;m_VerticalBands;</P>
<P>&#9;float&#9;m_YSize;</P>
<P>&#9;int&#9;&#9;m_Solid;</P>
<P>&#9;float&#9;m_Thickness;</P>
<P>&#9;BOOL&#9;m_TCut;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CCreateSpheroidDialog)</P>
<P>&#9;public:</P>
<P>&#9;virtual void Serialize(CArchive&amp; ar);</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>private:</P>
<P>&#9;void&#9;&#9;dlgFieldsToCentimeters(void);</P>
<P>&#9;void&#9;&#9;dlgFieldsToTexels(void);</P>
<P>&#9;geBoolean&#9;m_ConvertToMetric;</P>
<P>&#9;BrushTemplate_Spheroid *m_pTemplate;</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CCreateSpheroidDialog)</P>
<P>&#9;afx_msg void OnHollow();</P>
<P>&#9;afx_msg void OnSolid();</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;afx_msg void OnDefaults();</P>
<P>&#9;virtual void OnOK();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>&#9;CBitmap mSolidSphere, mHollowSphere;</P>
<P>};</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156772">CreateStaircaseDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  CreateStaircaseDialog.h                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef CREATESTAIRCASEDIALOG_H</P>
<P>#define CREATESTAIRCASEDIALOG_H</P>

<P>#include "resource.h"</P>
<P>#include "BrushTemplate.h"</P>

<P>class CCreateStaircaseDialog : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;virtual int DoModal(geBoolean ConvertToMetric, BrushTemplate_Staircase *pStairTemplate);</P>
<P>&#9;CCreateStaircaseDialog(CWnd* pParent = NULL);   // standard constructor</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CCreateStaircaseDialog)</P>
<P>&#9;enum { IDD = IDD_STAIRCASEDIALOG };</P>
<P>&#9;float&#9;m_Height;</P>
<P>&#9;float&#9;m_Length;</P>
<P>&#9;float&#9;m_Width;</P>
<P>&#9;BOOL&#9;m_MakeRamp;</P>
<P>&#9;BOOL&#9;m_TCut;</P>
<P>&#9;int&#9;&#9;m_NumberOfStairs;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CCreateStaircaseDialog)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>private:</P>
<P>&#9;void&#9;&#9;dlgFieldsToCentimeters(void);</P>
<P>&#9;void&#9;&#9;dlgFieldsToTexels(void);</P>
<P>&#9;geBoolean&#9;m_ConvertToMetric;</P>
<P>&#9;BrushTemplate_Staircase *m_pStairTemplate;</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CCreateStaircaseDialog)</P>
<P>&#9;afx_msg void OnDefaults();</P>
<P>&#9;virtual void OnOK();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>};</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156773">EntitiesDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  EntitiesDialog.h                                                                    */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CEntitiesDialog dialog</P>
<P>#ifndef ENTITIES_DIALOG_H</P>
<P>#define ENTITIES_DIALOG_H</P>

<P>#include "Entity.h"</P>
<P>#include "resource.h"</P>

<P>class CFusionDoc;</P>

<P>class CEntitiesDialog : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;CFusionDoc *pDoc;</P>
<P>//&#9;void CreateNewEntity(char** ClassnameList);</P>
<P>&#9;void FillInKeyValuePairs(int Selection);</P>
<P>&#9;void FillInDialog();</P>
<P>&#9;int DoDialog( CEntityArray&amp; Entities, CFusionDoc* Doc);</P>
<P>&#9;int EditEntity( CEntityArray&amp; Entities, int CurrentEntity, CFusionDoc* Doc);</P>
<P>&#9;CEntitiesDialog(CWnd* pParent = NULL);   // standard constructor</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CEntitiesDialog)</P>
<P>&#9;enum { IDD = IDD_ENTITIES };</P>
<P>&#9;CListBox&#9;m_PropertiesList;</P>
<P>&#9;CComboBox&#9;m_EntityCombo;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CEntitiesDialog)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>&#9;BOOL NeedTextNotify( UINT id, NMHDR * pTTTStruct, LRESULT * pResult );</P>
<P>&#9;int OnToolHitTest( CPoint point, TOOLINFO* pTI ) const;</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CEntitiesDialog)</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;virtual void OnOK ();</P>
<P>&#9;afx_msg void OnSelchangeEntitylist();</P>
<P>&#9;afx_msg void OnDblclkPropertieslist();</P>
<P>&#9;afx_msg int OnVKeyToItem(UINT nKey, CListBox* pListBox, UINT nIndex);</P>
<P>&#9;afx_msg void OnDrawItem(int nIDCtl, LPDRAWITEMSTRUCT lpDrawItemStruct);</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>

<P>&#9;// our entity array</P>
<P>&#9;CEntityArray* mEntityArray;</P>
<P>&#9;int mCurrentEntity;</P>
<P>&#9;int mCurrentKey;</P>
<P>&#9;mutable UINT UglyGlobalItemId;</P>
<P>&#9;BOOL MultiEntityFlag;</P>
<P>};</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156774">Entity.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  Entity.h                                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef ENTITY_H_</P>
<P>#define ENTITY_H_</P>

<P>#include "render.h"    // very, very bad!!!!</P>
<P>#include "brush.h"</P>
<P>#include "model.h"</P>
<P>#include "EntityTable.h"</P>
<P>#include "parse3dt.h"</P>

<P>enum EntityStyles { ENTITY_S_ORIGIN, ENTITY_S_BRUSH };</P>
<P>&#9;&#9;&#9;</P>
<P>enum</P>
<P>{</P>
<P>&#9;ENTITY_SELECTED = 0x0001,</P>
<P>&#9;ENTITY_ACTIVE   = 0x0002,</P>
<P>&#9;ENTITY_HIDDEN&#9;= 0x0004,</P>
<P>&#9;ENTITY_LOCKED&#9;= 0x0008</P>
<P>};</P>

<P>class CEntity;</P>
<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// make an entity array</P>
<P>typedef CArray&lt;CEntity, CEntity&amp;&gt; CEntityArray;</P>

<P>typedef geBoolean (*EntityList_CB)( CEntity&amp; Entity, void *lParam) ;</P>
<P>&#9;</P>
<P>class CEntity</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;void UpdateOriginFirst(const EntityTable *pEntityDefs);</P>
<P>&#9;float RayDistance (CPoint point, ViewVars *v);</P>
<P>&#9;float DistanceFrom (geVec3d const *pPoint);</P>
<P>&#9;void Export (FILE *OutFile);</P>
<P>&#9;void Move (geVec3d const *v);</P>
<P>&#9;void DoneMove (double GridSize, const EntityTable *pEntityDefs);</P>
<P>&#9;void Rotate (geXForm3d const *pXfmRotate, geVec3d const *pCenter, const EntityTable *pEntityDefs);</P>
<P>&#9;void Scale (geFloat ScaleFactor, const EntityTable *pEntityDefs);</P>

<P>&#9;void SetKeyValue (const char *Key, const char *Value);</P>
<P>&#9;BOOL GetKeyValue (const char *Key, char *Value) const;</P>
<P>&#9;BOOL GetKeyValue (const char *Key, CString &amp;Value) const;</P>
<P>&#9;int GetNumKeyValuePairs (void) const;</P>
<P>&#9;BOOL GetKeyValuePair (int Index, CString &amp;Key, CString &amp;Value) const;</P>

<P>&#9;void UpdateOrigin(const EntityTable *pEntityDefs);</P>
<P>    CEntity &amp;operator=( CEntity &amp;Entity );  // Right side is the argument.</P>
<P>&#9;CString GetName (void) const;</P>
<P>&#9;CString GetClassname (void) const;</P>
<P>&#9;CEntity();</P>
<P>&#9;~CEntity ();</P>
<P>&#9;geBoolean IsCamera( void ) const;</P>

<P>&#9;BOOL SetOrigin (geFloat x, geFloat y, geFloat z, const EntityTable *pEntityDefs);</P>
<P>&#9;BOOL GetOriginString (CString &amp;Origin, const EntityTable *pEntityDefs) const;</P>

<P>&#9;BOOL GetAngles (geVec3d *pDir, const EntityTable *pEntityDefs) const;</P>
<P>&#9;BOOL SetAngles (const geVec3d *pDir, const EntityTable *pEntityDefs);</P>
<P>&#9;BOOL GetArc (geFloat *pArc, const EntityTable *pEntityDefs) const;</P>
<P>&#9;BOOL SetArc (geFloat Arc, const EntityTable *pEntityDefs);</P>
<P>&#9;BOOL GetRadius (geFloat *pRadius, const EntityTable *pEntityDefs) const;</P>
<P>&#9;BOOL SetRadius (geFloat Radius, const EntityTable *pEntityDefs);</P>

<P>&#9;BOOL GetSpecialField (EntityTable_GetFieldFunc Callback, CString &amp;FieldValue, const EntityTable *pEntityDefs) const;</P>
<P>&#9;BOOL SetSpecialField (EntityTable_GetFieldFunc Callback, CString const FieldValue, const EntityTable *pEntityDefs);</P>

<P>&#9;// sets selected state of entity</P>
<P>&#9;void Select();</P>

<P>&#9;// clears selected flag of entity</P>
<P>&#9;void DeSelect();</P>

<P>&#9;// returns selected state of entity</P>
<P>&#9;int IsSelected() const;</P>

<P>&#9;// saves the entity out to a specified file stream</P>
<P>&#9;geBoolean SaveToFile( FILE *file );</P>

<P>&#9;// reads the entity in from a specified file stream</P>
<P>&#9;geBoolean ReadFromFile (Parse3dt *Parser, int VersionMajor, int VersionMinor, const char **Expected, const EntityTable *pEntityDefs);</P>

<P>&#9;// writes the entity out to the map file</P>
<P>&#9;void WriteToMap (FILE *file, ModelList const *pModels, CEntityArray const *pEnts, const EntityTable *pEntityDefs) const;</P>

<P>&#9;// whether this is a brush type</P>
<P>&#9;// entity or an origin type entity</P>
<P>&#9;EntityStyles EntityStyle;</P>

<P>&#9;// the origin if it's an origin type</P>
<P>&#9;geVec3d&#9;mOrigin;</P>

<P>&#9;void SetGroupId (int id);</P>
<P>&#9;int GetGroupId (void) const ;</P>
<P>&#9;void SetVisible (BOOL flag);</P>
<P>&#9;BOOL IsVisible (void) const ;</P>
<P>&#9;void SetLock (BOOL flag);</P>
<P>&#9;BOOL IsLocked (void) const ;</P>

<P>&#9;const geBitmap *GetBitmapPtr (const EntityTable *pEntityDefs) const;</P>

<P>private:</P>
<P>&#9;// which group this entity belongs to.</P>
<P>&#9;int mGroup;</P>

<P>&#9;// some flags such as active or selected</P>
<P>&#9;int mFlags;</P>

<P>&#9;// array of key names</P>
<P>&#9;CStringArray mKeyArray;</P>
<P>&#9;// array of values</P>
<P>&#9;CStringArray mValueArray;</P>
<P>&#9;int GetKeyIndex (const char *Key) const;</P>
<P>&#9;BOOL GetOriginFieldName (CString &amp;FieldName, const EntityTable *pEntityDefs) const;</P>
<P>&#9;int GetNumValidKeyValuePairs (ModelList const *pModels, CEntityArray const *pEnts, const EntityTable *pEntityDefs) const;</P>
<P>&#9;BOOL IsValidKey (CString const &amp;Key, ModelList const *pModels, CEntityArray const *pEnts, const EntityTable *pEntityDefs) const;</P>
<P>};</P>

<P>int EntityList_Enum</P>
<P>&#9;(</P>
<P>&#9;&#9;CEntityArray&amp;       EntityArray,</P>
<P>&#9;&#9;void *&#9;&#9;&#9;&#9;lParam,</P>
<P>&#9;&#9;EntityList_CB&#9;&#9;CallBack</P>
<P>&#9;) ;</P>

<P>CEntity * EntityList_FindByClassName</P>
<P>&#9;(</P>
<P>&#9;  CEntityArray  *&#9;pEnts,</P>
<P>&#9;  const char&#9;*&#9;pName</P>
<P>&#9;) ;</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156775">EntityTable.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  EntityTable.h                                                                         */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef ENTITYTABLE_H</P>
<P>#define ENTITYTABLE_H</P>

<P>#include "basetype.h"</P>
<P>#include "iden.h"</P>
<P>#include "type.h"</P>
<P>#include "bitmap.h"</P>

<P>extern const char EntityNameKey[];</P>

<P>typedef struct tag_EntityTable EntityTable;</P>

<P>typedef struct</P>
<P>{</P>
<P>    int KeyNum;</P>
<P>    char *pKey;</P>
<P>    char *pValue;</P>
<P>    TopType type;</P>
<P>&#9;int published;</P>
<P>} EntityProperty;</P>

<P>typedef struct</P>
<P>{</P>
<P>    int NumProps;</P>
<P>    EntityProperty Props[1];</P>
<P>} EntityPropertiesList;</P>

<P>enum EntityTablePropType</P>
<P>{</P>
<P>&#9;ET_PUBLISHED,</P>
<P>&#9;ET_ALL</P>
<P>};</P>

<P>struct EntityTypeList</P>
<P>{</P>
<P>&#9;int nTypes;</P>
<P>&#9;char *TypeNames[1];</P>
<P>};</P>

<P>EntityTable *EntityTable_Create (char const *DirName);</P>
<P>void EntityTable_Destroy (EntityTable **ppTable);</P>

<P>geBoolean EntityTable_GetEntityPropertyType</P>
<P>    (</P>
<P>&#9;  const EntityTable *pTable,</P>
<P>&#9;  char const *pEntityName,</P>
<P>&#9;  char const *pPropertyName,</P>
<P>&#9;  TopType *pType</P>
<P>&#9;);</P>

<P>typedef geBoolean (*EntityTable_GetFieldFunc)(EntityTable const *pTable, char const *pEntityName, CString &amp;FieldName);</P>

<P>geBoolean EntityTable_GetEntityOriginFieldName</P>
<P>&#9;(</P>
<P>&#9;  const EntityTable *pTable,</P>
<P>&#9;  char const *pEntityName,</P>
<P>&#9;  CString &amp;OriginFieldName</P>
<P>&#9;);</P>

<P>geBoolean EntityTable_GetEntityRadiusFieldName</P>
<P>&#9;(</P>
<P>&#9;  const EntityTable *pTable,</P>
<P>&#9;  char const *pEntityName,</P>
<P>&#9;  CString &amp;RadiusFieldName</P>
<P>&#9;);</P>

<P>geBoolean EntityTable_GetEntityAnglesFieldName</P>
<P>&#9;(</P>
<P>&#9;  const EntityTable *pTable,</P>
<P>&#9;  char const *pEntityName,</P>
<P>&#9;  CString &amp;AnglesFieldName</P>
<P>&#9;);</P>

<P>geBoolean EntityTable_GetEntityArcFieldName</P>
<P>&#9;(</P>
<P>&#9;  const EntityTable *pTable,</P>
<P>&#9;  char const *pEntityName,</P>
<P>&#9;  CString &amp;ArcFieldName</P>
<P>&#9;);</P>

<P>char const *EntityTable_GetEntityFieldDoc</P>
<P>&#9;(</P>
<P>&#9;  const EntityTable *pTable,</P>
<P>&#9;  char const *pEntityName,</P>
<P>&#9;  char const *pFieldName</P>
<P>&#9;);</P>

<P>CString EntityTable_GetEntityPropertyTypeName</P>
<P>    (</P>
<P>&#9;  const EntityTable *pTable,</P>
<P>&#9;  char const *pEntityName,</P>
<P>&#9;  char const *pPropertyName</P>
<P>&#9;);</P>

<P>EntityPropertiesList *EntityTable_GetEntityPropertiesFromName</P>
<P>    (</P>
<P>&#9;  const EntityTable *pTable,</P>
<P>&#9;  CString const Classname,</P>
<P>&#9;  EntityTablePropType WhichProps</P>
<P>&#9;);</P>

<P>geBoolean EntityTable_IsValidEntityType</P>
<P>&#9;(</P>
<P>&#9;  const EntityTable *pTable,</P>
<P>&#9;  char const *pName</P>
<P>&#9;);</P>

<P>void EntityTable_ReleaseEntityProperties</P>
<P>    (</P>
<P>      EntityPropertiesList const *pProps</P>
<P>    );</P>

<P>EntityTypeList *EntityTable_GetAvailableEntityTypes</P>
<P>&#9;(</P>
<P>&#9;  const EntityTable *pTable</P>
<P>&#9;);</P>

<P>void EntityTable_ReleaseEntityTypes</P>
<P>&#9;(</P>
<P>&#9;  EntityTypeList *pList</P>
<P>&#9;);</P>

<P>int EntityTable_WriteTypesToMap</P>
<P>&#9;(</P>
<P>&#9;  const EntityTable *pTable,</P>
<P>&#9;  FILE *f</P>
<P>&#9;);</P>

<P>int EntityTable_GetTypeCount</P>
<P>&#9;(</P>
<P>&#9;  const EntityTable *pTable</P>
<P>&#9;);</P>

<P>const geBitmap *EntityTable_GetBitmapPtr</P>
<P>&#9;(</P>
<P>&#9;  const EntityTable *pTable,</P>
<P>&#9;  const char *EntityClassname</P>
<P>&#9;);</P>

<P>&nbsp;</P>
<P>struct ContentsTableEntry</P>
<P>{</P>
<P>&#9;const char *Name;</P>
<P>&#9;unsigned long Value;</P>
<P>};</P>

<P>struct ContentsTable</P>
<P>{</P>
<P>&#9;int nEntries;</P>
<P>&#9;ContentsTableEntry Entries[1];</P>
<P>};</P>

<P>&nbsp;</P>
<P>ContentsTable *EntityTable_GetContentsList</P>
<P>&#9;(</P>
<P>&#9;  const EntityTable *pTable</P>
<P>&#9;);</P>

<P>void EntityTable_FreeContentsList</P>
<P>&#9;(</P>
<P>&#9;  ContentsTable **ppContents</P>
<P>&#9;);</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156776">EntityVisDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  EntityVisDlg.h                                                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined(AFX_ENTITYVISDLG_H__9B251C00_C7BA_11D1_B69D_004005424FA9__INCLUDED_)</P>
<P>#define AFX_ENTITYVISDLG_H__9B251C00_C7BA_11D1_B69D_004005424FA9__INCLUDED_</P>

<P>#include "EntView.h"</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>

<P>// EntityVisDlg.h : header file</P>
<P>//</P>

<P>class CMyCheckListBox : public CCheckListBox</P>
<P>{</P>
<P>};</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CEntityVisDlg dialog</P>

<P>class CEntityVisDlg : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;CEntityVisDlg(CWnd* pParent = NULL);   // standard constructor</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CEntityVisDlg)</P>
<P>&#9;enum { IDD = IDD_ENTITYVISIBILITY };</P>
<P>&#9;CMyCheckListBox&#9;m_EntsList;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CEntityVisDlg)</P>
<P>&#9;public:</P>
<P>&#9;virtual int DoModal(EntityViewList *pList);</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CEntityVisDlg)</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;virtual void OnOK();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>

<P>private:</P>
<P>&#9;EntityViewList *pViewList;</P>
<P>};</P>

<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>#endif // !defined(AFX_ENTITYVISDLG_H__9B251C00_C7BA_11D1_B69D_004005424FA9__INCLUDED_)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156777">EntTypeName.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  EntTypeName.h                                                                       */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef ENTTYPENAME_H</P>
<P>#define ENTTYPENAME_H</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>//typedef struct tag_EntTypeName EntTypeName;</P>
<P>typedef struct tag_List EntTypeNameList;</P>

<P>&nbsp;</P>
<P>EntTypeNameList *EntTypeNameList_Create (void);</P>
<P>void EntTypeNameList_Destroy (EntTypeNameList **ppList);</P>
<P>int EntTypeNameList_UpdateCount (EntTypeNameList *pList, const char *pTypeName);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156778">EntView.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  EntView.h                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef ENTVIEW_H</P>
<P>#define ENTVIEW_H</P>

<P>#include "basetype.h"</P>
<P>#include "parse3dt.h"</P>
<P>#include "EntityTable.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>struct EntityViewEntry</P>
<P>{</P>
<P>&#9;char *pName;</P>
<P>&#9;geBoolean IsVisible;</P>
<P>};</P>

<P>typedef struct tag_EntityViewList</P>
<P>{</P>
<P>&#9;int nEntries;</P>
<P>&#9;EntityViewEntry pEntries[1];</P>
<P>} EntityViewList;</P>

<P>EntityViewList *EntityViewList_Create</P>
<P>&#9;(</P>
<P>&#9;  const EntityTable *pEntityDefs</P>
<P>&#9;);</P>

<P>void EntityViewList_Destroy</P>
<P>&#9;(</P>
<P>&#9;  EntityViewList **ppList</P>
<P>&#9;);</P>

<P>EntityViewList *EntityViewList_Copy</P>
<P>&#9;(</P>
<P>&#9;  EntityViewList const *pSrc</P>
<P>&#9;);</P>

<P>geBoolean EntityViewList_LoadSettings</P>
<P>&#9;(</P>
<P>&#9;  EntityViewList *pList,</P>
<P>&#9;  Parse3dt *Parser,</P>
<P>&#9;  int VersionMajor,</P>
<P>&#9;  int VersionMinor,</P>
<P>&#9;  const char **Expected</P>
<P>&#9;);</P>

<P>geBoolean EntityViewList_WriteToFile</P>
<P>&#9;(</P>
<P>&#9;  EntityViewList *pList,</P>
<P>&#9;  FILE *f</P>
<P>&#9;);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156779">face.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  face.h                                                                              */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef _FACE_H_</P>
<P>#define _FACE_H_</P>

<P>#include "Vec3d.h"</P>
<P>#include "xform3d.h"</P>
<P>#include "box3d.h"</P>
<P>#include &lt;stdio.h&gt;</P>
<P>#include "Parse3dt.h"</P>

<P>&nbsp;</P>
<P>typedef struct</P>
<P>{</P>
<P>&#9;geVec3d uVec, vVec;</P>
<P>&#9;geFloat uOffset, vOffset;</P>
<P>} TexInfo_Vectors;</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>typedef struct NodeTag Node;</P>

<P>typedef struct PlaneTag</P>
<P>{</P>
<P>&#9;geVec3d&#9;&#9;Normal;</P>
<P>&#9;geFloat&#9;&#9;Dist;</P>
<P>} Plane;</P>

<P>typedef struct FaceTag Face;</P>

<P>//instancing / init</P>
<P>Face&#9;*Face_Create(int NumPnts, const geVec3d *pnts, int DibId);</P>
<P>Face&#9;*Face_CreateFromPlane(const Plane *p, geFloat Radius, int DibId);</P>
<P>void&#9;Face_Destroy(Face **);</P>
<P>Face&#9;*Face_Clone(const Face *src);</P>
<P>Face&#9;*Face_CloneReverse(const Face *src);</P>

<P>//access</P>
<P>int&#9;&#9;&#9;&#9;&#9;&#9;Face_GetNumPoints(const Face *f);</P>
<P>geFloat&#9;&#9;&#9;&#9;&#9;Face_GetValue(const Face *f);</P>
<P>const Plane&#9;&#9;&#9;&#9;*Face_GetPlane(const Face *f);</P>
<P>const geVec3d&#9;&#9;&#9;*Face_GetPoints(const Face *f);</P>
<P>int&#9;&#9;&#9;&#9;&#9;&#9;Face_GetLightIntensity(const Face *f);</P>
<P>void&#9;&#9;&#9;&#9;&#9;Face_GetLightScale(const Face *f, geFloat *pxScale, geFloat *pyScale);</P>
<P>void&#9;&#9;&#9;&#9;&#9;Face_GetTextureScale(const Face *f, geFloat *pxScale, geFloat *pyScale);</P>
<P>void&#9;&#9;&#9;&#9;&#9;Face_GetTextureShift(const Face *f, int *pxShift, int *pyShift);</P>
<P>geFloat&#9;&#9;&#9;&#9;&#9;Face_GetTextureRotate(const Face *f);</P>
<P>const TexInfo_Vectors&#9;*Face_GetTextureVecs(const Face *f);</P>
<P>int&#9;&#9;&#9;&#9;&#9;&#9;Face_GetTextureDibId(const Face *f);</P>
<P>char const&#9;&#9;&#9;&#9;*Face_GetTextureName(const Face *f);</P>
<P>geFloat&#9;&#9;&#9;&#9;&#9;Face_GetMipMapBias(const Face *f);</P>
<P>geFloat&#9;&#9;&#9;&#9;&#9;Face_GetTranslucency(const Face *f);</P>
<P>geFloat&#9;&#9;&#9;&#9;&#9;Face_GetReflectivity(const Face *f);</P>

<P>//check flags</P>
<P>geBoolean&#9;Face_IsSelected(const Face *f);</P>
<P>geBoolean&#9;Face_IsLight(const Face *f);</P>
<P>geBoolean&#9;Face_IsMirror(const Face *f);</P>
<P>geBoolean&#9;Face_IsFullBright(const Face *f);</P>
<P>geBoolean&#9;Face_IsSky(const Face *f);</P>
<P>geBoolean&#9;Face_IsFixedHull(const Face *f);</P>
<P>geBoolean&#9;Face_IsGouraud(const Face *f);</P>
<P>geBoolean&#9;Face_IsFlat(const Face *f);</P>
<P>geBoolean&#9;Face_IsTextureLocked (const Face *f);</P>
<P>geBoolean&#9;Face_IsVisible (const Face *f);</P>
<P>geBoolean&#9;Face_IsSheet(const Face *f);</P>
<P>geBoolean&#9;Face_IsTransparent(const Face *f);</P>

<P>//set/reset flags</P>
<P>void&#9;Face_SetSelected(Face *f, const geBoolean state);</P>
<P>void&#9;Face_SetLight(Face *f, const geBoolean state);</P>
<P>void&#9;Face_SetMirror(Face *f, const geBoolean state);</P>
<P>void&#9;Face_SetFullBright(Face *f, const geBoolean state);</P>
<P>void&#9;Face_SetSky(Face *f, const geBoolean state);</P>
<P>void&#9;Face_SetFixedHull(Face *f, const geBoolean state);</P>
<P>void&#9;Face_SetGouraud(Face *f, const geBoolean state);</P>
<P>void&#9;Face_SetFlat(Face *f, const geBoolean state);</P>
<P>void&#9;Face_SetTextureLock(Face *f, const geBoolean state);</P>
<P>void&#9;Face_SetVisible(Face *f, const geBoolean state);</P>
<P>void&#9;Face_SetSheet(Face *f, const geBoolean state);</P>
<P>void&#9;Face_SetTransparent(Face *f, const geBoolean state);</P>

<P>//set elements</P>
<P>void&#9;Face_SetLightIntensity(Face *f, const int Value);</P>
<P>void&#9;Face_SetLightScale(Face *f, const geFloat xScale, const geFloat yScale);</P>
<P>void&#9;Face_SetTextureScale(Face *f, const geFloat xScale, const geFloat yScale);</P>
<P>void&#9;Face_SetTextureShift(Face *f, const int xShift, const int yShift);</P>
<P>void&#9;Face_SetTextureRotate(Face *f, const geFloat Rotate);</P>
<P>void&#9;Face_SetTextureDibId(Face *f, const int Dib);</P>
<P>void&#9;Face_SetTextureName(Face *f, const char *pName);</P>
<P>void&#9;Face_SetTextureSize (Face *f, const int txSize, const int tySize);</P>
<P>void&#9;Face_SetMipMapBias (Face *f, const geFloat Bias);</P>
<P>void&#9;Face_SetTranslucency (Face *f, const geFloat trans);</P>
<P>void&#9;Face_SetReflectivity (Face *f, const geFloat rscale);</P>
<P>void&#9;Face_CopyTexInfo(const Face *src, Face *dst);</P>
<P>void&#9;Face_CopyFaceInfo(const Face *src, Face *dst);</P>

<P>//operations</P>
<P>void&#9;Face_Rotate(Face *f, const geXForm3d *pXfmRotate, const geVec3d *pCenter);</P>
<P>void&#9;Face_Move(Face *f, const geVec3d *trans);</P>
<P>void&#9;Face_Transform(Face *f, const geXForm3d *pXfm);</P>
<P>void&#9;Face_Scale(Face *f, const geVec3d *ScaleVec);</P>
<P>void&#9;Face_Shear(Face *f, const geVec3d *ShearVec, const geVec3d *ShearAxis);</P>
<P>void&#9;Face_GetBounds(const Face *f, Box3d *b);</P>
<P>void&#9;Face_GetCenter(const Face *f, geVec3d *pCenter);</P>
<P>void&#9;Face_GetSplitInfo(const Face *f, const Plane *p, geFloat *dists, uint8 *sides, uint8 *cnt);</P>
<P>void&#9;Face_Split(const Face&#9;*f,&#9;&#9;//original face</P>
<P>&#9;&#9;&#9;&#9;   const Plane&#9;*p,&#9;&#9;//split plane</P>
<P>&#9;&#9;&#9;&#9;   Face&#9;&#9;&#9;**ff,&#9;//front face (null)</P>
<P>&#9;&#9;&#9;&#9;   Face&#9;&#9;&#9;**bf,&#9;//back face (null)</P>
<P>&#9;&#9;&#9;&#9;   geFloat&#9;&#9;*dists,&#9;//plane dists per vert</P>
<P>&#9;&#9;&#9;&#9;   uint8&#9;&#9;*sides);//plane sides per vert</P>
<P>void&#9;Face_Clip(Face *f, const Plane *p, geFloat *dists, uint8 *sides);</P>
<P>geFloat&#9;Face_PlaneDistance(const Face *f, geVec3d *pos);</P>
<P>void&#9;Face_MostlyOnSide(const Face *f, const Plane *p, geFloat *max, int *side);</P>

<P>//io</P>
<P>void&#9;Face_WriteToMap(const Face *f, FILE *wf);</P>
<P>void&#9;Face_WriteToQuakeMap(const Face *f, FILE *wf);</P>
<P>geBoolean Face_Write(const Face *f, FILE *wf);</P>
<P>Face&#9;*Face_CreateFromFile(Parse3dt *Parser, int VersionMajor, int VersionMinor, const char **Expected);</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156780">FaceAttributesDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  FaceAttributesDialog.h                                                              */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef FACEATTRIBUTESDIALOG_H</P>
<P>#define FACEATTRIBUTESDIALOG_H</P>

<P>#include "brush.h"</P>
<P>#include "resource.h"</P>

<P>class CFusionDoc;</P>

<P>class CFaceAttributesDialog : public CDialog</P>
<P>{</P>
<P>public:</P>
<P>&#9;CFaceAttributesDialog(CFusionDoc* pFusionDoc, CWnd* pParent = NULL);</P>
<P>&#9;void SetupDialog();</P>
<P>&#9;void UpdatePolygonFocus ();</P>
<P>&#9;void AssignCurrentToViews();</P>
<P>&#9;void OnResetAll();</P>
<P>&#9;void AssignFaceValues (Face *pFace);</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CFaceAttributesDialog)</P>
<P>&#9;enum { IDD = IDD_FACEDIALOG };</P>
<P>&#9;CEdit&#9;m_EditTranslucency;</P>
<P>&#9;CEdit&#9;m_EditReflectivity;</P>
<P>&#9;CEdit&#9;m_EditMipMapBias;</P>
<P>&#9;CEdit&#9;m_EditLightIntensity;</P>
<P>&#9;CComboBox&#9;m_ComboYLightScale;</P>
<P>&#9;CComboBox&#9;m_ComboXLightScale;</P>
<P>&#9;CEdit&#9;m_EditLightYScale;</P>
<P>&#9;CEdit&#9;m_EditLightXScale;</P>
<P>&#9;CEdit&#9;m_EditAngle;</P>
<P>&#9;CEdit&#9;m_EditYScale;</P>
<P>&#9;CEdit&#9;m_EditXScale;</P>
<P>&#9;CEdit&#9;m_EditYOffset;</P>
<P>&#9;CEdit&#9;m_EditXOffset;</P>
<P>&#9;CComboBox&#9;m_ComboXOffset;</P>
<P>&#9;CComboBox&#9;m_ComboYOffset;</P>
<P>&#9;CComboBox&#9;m_ComboXScale;</P>
<P>&#9;CComboBox&#9;m_ComboYScale;</P>
<P>&#9;CComboBox&#9;m_ComboAngle;</P>
<P>&#9;float m_TextureYScale;</P>
<P>&#9;float m_TextureXScale;</P>
<P>&#9;int m_TextureYOffset;</P>
<P>&#9;int m_TextureXOffset;</P>
<P>&#9;CString m_TextureName;</P>
<P>&#9;float&#9;m_TextureAngle;</P>
<P>&#9;BOOL&#9;m_FullBright;</P>
<P>&#9;BOOL&#9;m_Light;</P>
<P>&#9;BOOL&#9;m_Mirror;</P>
<P>&#9;BOOL&#9;m_Sky;</P>
<P>&#9;float&#9;m_LightXScale;</P>
<P>&#9;float&#9;m_LightYScale;</P>
<P>&#9;int&#9;&#9;m_LightIntensity;</P>
<P>&#9;BOOL&#9;m_Flat;</P>
<P>&#9;BOOL&#9;m_Gouraud;</P>
<P>&#9;float&#9;m_MipMapBias;</P>
<P>&#9;BOOL&#9;m_TextureLock;</P>
<P>&#9;float&#9;m_Reflectivity;</P>
<P>&#9;float&#9;m_Translucency;</P>
<P>&#9;BOOL&#9;m_Transparent;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CFaceAttributesDialog)</P>
<P>&#9;public:</P>
<P>&#9;virtual&#9;BOOL OnInitDialog();</P>
<P>&#9;virtual BOOL OnCmdMsg(UINT nID, int nCode, void* pExtra, AFX_CMDHANDLERINFO* pHandlerInfo);</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;virtual void PostNcDestroy();</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CFaceAttributesDialog)</P>
<P>&#9;afx_msg void OnVScroll(UINT nSBCode, UINT nPos, CScrollBar* pScrollBar);</P>
<P>&#9;virtual void OnCancel();</P>
<P>&#9;afx_msg void OnMouseMove(UINT nFlags, CPoint point);</P>
<P>&#9;afx_msg void OnChangeXOffset();</P>
<P>&#9;afx_msg void OnKillfocusXOffset();</P>
<P>&#9;afx_msg void OnChangeYOffset();</P>
<P>&#9;afx_msg void OnKillfocusYOffset();</P>
<P>&#9;afx_msg void OnChangeXScale();</P>
<P>&#9;afx_msg void OnKillfocusXScale();</P>
<P>&#9;afx_msg void OnChangeYScale();</P>
<P>&#9;afx_msg void OnKillfocusYScale();</P>
<P>&#9;afx_msg void OnChangeAngle();</P>
<P>&#9;afx_msg void OnKillfocusAngle();</P>
<P>&#9;afx_msg void OnFlipvertical();</P>
<P>&#9;afx_msg void OnFliphorizontal();</P>
<P>&#9;afx_msg void OnActivate( UINT, CWnd*, BOOL );</P>
<P>&#9;afx_msg void OnChangeEditxlightscale();</P>
<P>&#9;afx_msg void OnKillfocusEditxlightscale();</P>
<P>&#9;afx_msg void OnChangeEditylightscale();</P>
<P>&#9;afx_msg void OnKillfocusEditylightscale();</P>
<P>&#9;afx_msg void OnFacemirror();</P>
<P>&#9;afx_msg void OnFacesky();</P>
<P>&#9;afx_msg void OnFacefullbright();</P>
<P>&#9;afx_msg void OnKillfocusFacelightintensity();</P>
<P>&#9;afx_msg void OnFacegouraud();</P>
<P>&#9;afx_msg void OnFaceflat();</P>
<P>&#9;afx_msg void OnKillfocusMipmapbias();</P>
<P>&#9;afx_msg void OnTexturelock();</P>
<P>&#9;afx_msg void OnKillfocusReflectivity();</P>
<P>&#9;afx_msg void OnKillfocusFacetranslucency();</P>
<P>&#9;afx_msg void OnTransparent();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>&#9;virtual void OnOK ();</P>
<P>private:</P>
<P>&#9;CFusionDoc&#9;&#9;*m_pDoc;</P>

<P>&#9;void&#9;OnFacelight( void );</P>
<P>&#9;float&#9;DoIncrement (float v, float incr, float vMin, float vMax, int nSBCode);</P>
<P>&#9;float&#9;GetIncrement (CComboBox &amp;combo);</P>
<P>&#9;void&#9;SetShadingChecks ();</P>
<P>};</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156781">facelist.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  facelist.h                                                                          */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef FACELIST_H</P>
<P>#define FACELIST_H</P>

<P>#include "face.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>typedef struct tag_FaceList FaceList;</P>

<P>FaceList&#9;*FaceList_Create(int NumFaces);</P>
<P>void&#9;&#9;FaceList_Destroy(FaceList **ppList);</P>

<P>// Grows the face list by doubling its size.</P>
<P>geBoolean&#9;FaceList_Grow (FaceList **ppList);</P>

<P>FaceList&#9;*FaceList_Clone(const FaceList *pList);</P>
<P>void&#9;&#9;FaceList_RemoveFace(FaceList *pList, int WhichFace);</P>

<P>void&#9;&#9;FaceList_SetDirty(FaceList *pList);&#9;&#9;//rethink this</P>
<P>geBoolean&#9;FaceList_SetNextSelectedFace(FaceList *fl);</P>
<P>geBoolean&#9;FaceList_SetPrevSelectedFace(FaceList *fl);</P>
<P>void&#9;&#9;FaceList_SetTranslucency(const FaceList *fl, geFloat trans);</P>
<P>void&#9;&#9;FaceList_SetTransparent (const FaceList *fl, geBoolean trans);</P>

<P>void&#9;&#9;FaceList_GetCenter(const FaceList *pList, geVec3d *pCenter);</P>
<P>void&#9;&#9;FaceList_GetBounds(const FaceList *pList, Box3d *pBounds);</P>
<P>int&#9;&#9;&#9;FaceList_GetNumFaces(const FaceList *pList);</P>
<P>int&#9;&#9;&#9;FaceList_GetFaceLimit (const FaceList *pList);</P>
<P>Face&#9;&#9;*FaceList_GetFace(const FaceList *pList, int WhichFace);</P>
<P>Face&#9;&#9;*FaceList_GetSelectedFace(const FaceList *fl);</P>

<P>void&#9;&#9;FaceList_AddFace(FaceList *pList, Face *pFace);</P>
<P>void&#9;&#9;FaceList_Rotate(FaceList *pList, const geXForm3d *pXfm, const geVec3d *pCenter);</P>
<P>void&#9;&#9;FaceList_Move(FaceList *pList, const geVec3d *trans);</P>
<P>void&#9;&#9;FaceList_Transform(FaceList *pList, const geXForm3d *pXfm);</P>
<P>void&#9;&#9;FaceList_Scale(FaceList *pList, const geVec3d *ScaleVec);</P>
<P>void&#9;&#9;FaceList_Shear(FaceList *pList, const geVec3d *ScaleVec, const geVec3d *ShearAxis);</P>
<P>void&#9;&#9;FaceList_ClipFaceToList(const FaceList *fl, Face **f);</P>
<P>void&#9;&#9;FaceList_CopyFaceInfo(const FaceList *src, FaceList *dst);</P>

<P>geBoolean&#9;FaceList_Write(const FaceList *pList, FILE *f);</P>
<P>FaceList&#9;*FaceList_CreateFromFile(Parse3dt *Parser, int VersionMajor, int VersionMinor, const char **Expected);</P>
<P>geBoolean&#9;FaceList_WriteToMap(const FaceList *pList, FILE *f);</P>
<P>geBoolean&#9;FaceList_WriteToQuakeMap(const FaceList *pList, FILE *f);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156782">FilePath.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  FilePath.h                                                                          */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef FILEPATH_H</P>

<P>#define FILEPATH_H</P>

<P>#include "basetype.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>// Extract drive (d:\) from pPath and place in pDrive</P>
<P>geBoolean FilePath_GetDrive (char const *pPath, char *pDrive);</P>

<P>// Extract directory from pPath and place in pDir</P>
<P>geBoolean FilePath_GetDir (char const *pPath, char *pDir);</P>

<P>// Extract Name from pPath and place in pName</P>
<P>geBoolean FilePath_GetName (char const *pPath, char *pName);</P>

<P>// Extract Extension from pPath and place in pExt</P>
<P>geBoolean FilePath_GetExt (char const *pPath, char *pExt);</P>

<P>// Extract drive and directory from pPath and place in pDriveDir</P>
<P>// pDriveDir may be the same as pPath</P>
<P>geBoolean FilePath_GetDriveAndDir (char const *pPath, char *pDriveDir);</P>

<P>// Extract Name and extension from pPath and place in pName</P>
<P>// pName may be the same as pPath</P>
<P>geBoolean FilePath_GetNameAndExt (char const *pPath, char *pName);</P>

<P>// set extension of pSourceFile to pExt and place result in pDestFile</P>
<P>// pDestFile may be the same as pSourceFile</P>
<P>geBoolean FilePath_SetExt (char const *pSourceFile, char const *pExt, char *pDestFile);</P>

<P>// Terminate pPath with a slash (by appending if necessary), and return result in pDest.</P>
<P>// pPath and pDest may be the same.</P>
<P>geBoolean FilePath_SlashTerminate (const char *pPath, char *pDest);</P>

<P>// Append pName to pPath and return result in pDest.</P>
<P>// pDest may be the same as pPath or pName.</P>
<P>geBoolean FilePath_AppendName (char const *pPath, char const *pName, char *pDest);</P>

<P>// Search for a Filename in the semicolon-separated paths specified in SearchPath.</P>
<P>// If found, returns GE_TRUE and the full path name of the file in FoundPath.</P>
<P>// Returns GE_FALSE if unsuccessful.</P>
<P>geBoolean FilePath_SearchForFile (const char *Filename, const char *SearchPath, char *FoundPath);</P>

<P>&nbsp;</P>
<P>geBoolean FilePath_AppendSearchDir (char *SearchList, const char *NewDir);</P>
<P>geBoolean FilePath_ResolveRelativePath (const char *Relative, char *Resolved);</P>
<P>geBoolean FilePath_ResolveRelativePathList (const char *RelativeList, char *ResolvedList);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156783">Fusion.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  Fusion.h                                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef __AFXWIN_H__</P>
<P>&#9;#error include 'stdafx.h' before including this file for PCH</P>
<P>#endif</P>

<P>#ifndef FUSION_H</P>
<P>#define FUSION_H</P>

<P>#include "resource.h"       // main symbols</P>
<P>#include "MainFrm.h"</P>
<P>#include "activationwatch.h"</P>
<P>#include "prefs.h"</P>

<P>#include &lt;afxmt.h&gt;&#9;// required for single-instance checking</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CFusionApp:</P>
<P>// See FUSION.cpp for the implementation of this class</P>
<P>//</P>
<P>// Define our standard template so we can use these other places</P>
<P>#define TEMPLATE_RESOURCE_ID&#9;&#9;&#9;IDR_FUSIONTYPE</P>
<P>#define TEMPLATE_DOC_CLASS&#9;&#9;&#9;&#9;RUNTIME_CLASS( CFusionDoc )</P>
<P>#define TEMPLATE_CHILD_FRAME_CLASS&#9;&#9;RUNTIME_CLASS( CChildFrame )</P>
<P>#define TEMPLATE_VIEW_CLASS&#9;&#9;&#9;&#9;RUNTIME_CLASS( CFusionView )</P>

<P>#define FUSION_INIFILE_NAME "Gedit.ini"</P>

<P>class CFusionApp : public CWinApp</P>
<P>{</P>
<P>public:</P>
<P>&#9;void InitUserPreferences(CMainFrame* pMainFrame);</P>
<P>&#9;virtual BOOL PreTranslateMessage(MSG* pMsg);</P>
<P>&#9;CFusionApp();</P>
<P>&#9;~CFusionApp();</P>
<P>&#9;CFusionDoc * GetActiveFusionDoc( void ) const ;</P>

<P>&#9;const Prefs * GetPreferences( void ) { return pResolvedPrefs; } ;</P>
<P>&#9;CEvent* pNewInstanceEvent;</P>
<P>&#9;CEvent* pShutdownEvent;</P>

<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CFusionApp)</P>
<P>&#9;public:</P>
<P>&#9;virtual BOOL InitInstance();</P>
<P>&#9;virtual BOOL OnIdle(LONG lCount);</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>

<P>&#9;//{{AFX_MSG(CFusionApp)</P>
<P>&#9;afx_msg void OnAppAbout();</P>
<P>&#9;afx_msg void OnFileNew();</P>
<P>&#9;afx_msg void OnFileOpen();</P>
<P>&#9;afx_msg BOOL OnOpenRecentFile (UINT nID);</P>
<P>&#9;afx_msg void OnPreferences();</P>
<P>&#9;afx_msg void OnUpdatePreferences(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnHelpHowdoi();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>protected:</P>
<P>&#9;afx_msg void OnHelp( );</P>
<P>&#9;afx_msg void OnHelpIndex ();</P>
<P>private:</P>
<P>&#9;CMainFrame* pMainFrame;</P>
<P>&#9;CActivationWatch* pWatcher;</P>

<P>&#9;/*</P>
<P>&#9;  pPrefs points to the preferences that were read from the INI file, and</P>
<P>&#9;  are modified by the preferences dialog.  pResolvedPrefs is a preferences</P>
<P>&#9;  structure in which the relative path names have been resolved.  A pointer</P>
<P>&#9;  to this structure is returned by GetPreferences.  The paths are resolved</P>
<P>&#9;  in this structure when the preferences are read, and whenever they are changed.</P>
<P>&#9;*/</P>
<P>&#9;Prefs *pPrefs;</P>
<P>&#9;Prefs *pResolvedPrefs;</P>

<P>&#9;void CommandLineExport( CString* pMapFileName );</P>
<P>&#9;BOOL ProcessCommandLine();</P>
<P>&#9;CMultiDocTemplate* pDocTemplate;</P>
<P>&#9;BOOL IsFirstInstance();</P>
<P>&#9;CFusionDoc* pFusionDoc;</P>
<P>&#9;void ResolvePreferencesPaths ();</P>
<P>};</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>#endif // Prevent multiple inclusion</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156784">FusionDoc.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  FusionDoc.h                                                                         */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  Copyright (c) 1996-1999, Eclipse Entertainment, L.L.C.                              */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef FUSIONDOC_H</P>
<P>#define FUSIONDOC_H</P>

<P>#include &lt;assert.h&gt;</P>

<P>#include "resource.h"</P>
<P>#include "Fusion.h"</P>
<P>#include "level.h"</P>

<P>#include "FaceAttributesDialog.h"</P>
<P>#include "BrushAttributesDialog.h"</P>
<P>#include "SelFaceList.h"</P>
<P>#include "SelBrushList.h"</P>
<P>#include "EntityTable.h"</P>

<P>#include "mainfrm.h"</P>
<P>#include "undostack.h"</P>

<P>#define WINDOW_TOP_VIEW 0</P>
<P>#define WINDOW_FRONT_VIEW 1</P>
<P>#define WINDOW_SIDE_VIEW 2</P>
<P>#define MAX_SEL&#9;1000</P>
<P>#define CURTOOL_NONE&#9;(-1)</P>

<P>enum UpdateFlags</P>
<P>{</P>
<P>&#9;REBUILD_QUICK&#9;&#9;&#9;&#9;=1,</P>
<P>&#9;UAV_RENDER_ONLY&#9;&#9;&#9;&#9;=2,</P>
<P>&#9;UAV_ACTIVE3DVIEW_ONLY&#9;&#9;=4,</P>
<P>&#9;UAV_NONACTIVE3DVIEWS_ONLY&#9;=8,</P>
<P>&#9;UAV_TEXTUREVIEW_ONLY&#9;&#9;=16,</P>
<P>&#9;UAV_GRID_ONLY&#9;&#9;&#9;&#9;=32,</P>
<P>&#9;UAV_TEXTUREBROWSER_ONLY&#9;&#9;=64,</P>
<P>&#9;UAV_ALLVIEWS&#9;&#9;&#9;&#9;=128,</P>
<P>&#9;UAV_ALL3DVIEWS&#9;&#9;&#9;&#9;=256,</P>
<P>&#9;UAV_THIS_GRID_ONLY&#9;&#9;&#9;=512</P>
<P>};</P>

<P>enum</P>
<P>{</P>
<P>&#9;fctNOTHING,</P>
<P>&#9;fctENTITY,</P>
<P>&#9;fctBRUSH</P>
<P>};</P>

<P>enum BrushSel</P>
<P>{</P>
<P>&#9;brushSelToggle,</P>
<P>&#9;brushSelAlways,</P>
<P>&#9;brushDeselAlways</P>
<P>} ;</P>

<P>enum GridFlags</P>
<P>{</P>
<P>&#9;USE_GRID&#9;&#9;&#9;=1,</P>
<P>&#9;CONSTRAIN_HOLLOWS&#9;=2</P>
<P>};</P>

<P>enum SelectionState</P>
<P>{</P>
<P>&#9;NOBRUSHES=0, ONEBRUSH=1, MULTIBRUSH=2, RESERVEDBRUSH=4,</P>
<P>&#9;NOFACES=8, ONEFACE=16, MULTIFACE=32, RESERVEDFACE=64,</P>
<P>&#9;NOENTITIES=128, ONEENTITY=256, MULTIENTITY=512, RESERVEDENTITY=1024,</P>
<P>&#9;ONEBRUSHONLY=137, ONEBRUSH_ONEFACE=145, ONEENTITYONLY=264,</P>
<P>&#9;ONEBRUSH_ONEENTITY=265, NOSELECTIONS=136,</P>
<P>&#9;BRUSHCLEAR=7, FACECLEAR=120, ENTITYCLEAR=1920,</P>
<P>&#9;ANYENTITY=1792, ANYBRUSH=7, ANYFACE=112</P>
<P>};</P>

<P>//bool callback for flag checking</P>
<P>typedef geBoolean (*BrushFlagTest)(const Brush *pBrush);</P>

<P>&nbsp;</P>
<P>enum fdocAdjustEnum</P>
<P>{</P>
<P>&#9;ADJUST_MODE_TOGGLE,</P>
<P>&#9;ADJUST_MODE_BRUSH,</P>
<P>&#9;ADJUST_MODE_FACE</P>
<P>};</P>

<P>class CMainFrame;</P>

<P>class CFusionDoc : public CDocument</P>
<P>{</P>
<P>protected: // create from serialization only</P>
<P>&#9;CFusionDoc();</P>
<P>&#9;DECLARE_SERIAL(CFusionDoc);</P>

<P>public:</P>
<P>&#9;Level *pLevel;</P>

<P>&#9;//states and stats</P>
<P>&#9;int&#9;NumSelEntities;</P>

<P>&#9;int mShowSelectedFaces;</P>
<P>&#9;int mCurrentTool, mCurrentBitmap, mShowBrush, mModeTool;</P>
<P>&#9;int mShowEntities, mCurrentGroup, mCurTextureSelection;</P>
<P>&#9;int IsNewDocument, mActiveView, mLastOp;</P>
<P>&#9;fdocAdjustEnum mAdjustMode;</P>
<P>&#9;int mShowSelectedBrushes;</P>
<P>&#9;int mLockAxis;</P>
<P>&#9;geBoolean&#9;mConstrainHollows ;</P>
<P>&#9;BOOL SelectLock, TempEnt;</P>
<P>    BOOL PlaceObjectFlag;&#9;// this flag signifies to place an object rather than putting</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;// down an entity when enter is pressed</P>
<P>&#9;DWORD SelState;</P>

<P>&#9;//list related</P>
<P>&#9;Brush&#9;*BTemplate, *CurBrush, *TempShearTemplate;</P>
<P>&#9;SelBrushList *pSelBrushes;</P>
<P>&#9;SelBrushList *pTempSelBrushes;</P>
<P>&#9;SelFaceList *pSelFaces;</P>

<P>&#9;Node&#9;&#9;&#9;*mWorldBsp;</P>
<P>&#9;CEntity&#9;&#9;&#9;mRegularEntity;</P>
<P>&#9;int&#9;&#9;&#9;&#9;mCurrentEntity, ScaleNum;</P>
<P>&#9;geVec3d&#9;&#9;&#9;SelectedGeoCenter, FinalRot, FinalScale, FinalPos;</P>

<P>&#9;//dialogs / controls</P>
<P>&#9;CFrameWnd *mpActiveViewFrame;</P>
<P>&#9;CBrushAttributesDialog *mpBrushAttributes;</P>
<P>&#9;CMainFrame *mpMainFrame;</P>
<P>&#9;CFaceAttributesDialog *mpFaceAttributes;</P>

<P>&#9;geBoolean BrushIsVisible( const Brush * pBrush ) const ;</P>
<P>&#9;geBoolean EntityIsVisible( const CEntity *pEntity ) const ;</P>
<P>&#9;void TempCopySelectedBrushes();</P>
<P>&#9;void DoneRotate(void);</P>
<P>&#9;void DoneResize(int sides, int inidx);</P>
<P>&#9;void DoneShear(int sides, int inidx);</P>
<P>&#9;void DoneMove(void);</P>
<P>&#9;void SnapScaleNearest(int sides, int inidx, ViewVars *v);</P>
<P>&#9;DWORD GetSelState(void){  return SelState;  }</P>
<P>&#9;int&#9; GetLockAxis( void ) { return mLockAxis ; } ;</P>
<P>&#9;void SetLockAxis( int Lock ) { mLockAxis = Lock ; } ;</P>
<P>&#9;void SetCurrentBrushTexture();</P>
<P>&#9;BOOL IsEntitySelected();</P>
<P>&#9;void SelectAll (void);</P>
<P>&#9;void DeleteSelectedEntities();</P>
<P>&#9;void UpdateSelected();</P>
<P>&#9;void ResetAllSelectedEntities();</P>
<P>&#9;void CopySelectedBrushes();</P>
<P>&#9;void SetSelectedEntity( int ID );</P>
<P>&#9;void AdjustEntityAngle( const ViewVars * v, const geFloat dx ) ;</P>
<P>&#9;void AdjustEntityArc( const ViewVars * v, const geFloat dx ) ;</P>
<P>&#9;void AdjustEntityRadius( const geVec3d *pVec ) ;</P>

<P>&#9;void CenterThingInActiveView( Brush* pBrush, CEntity* pEntity );</P>
<P>&#9;void SelectAllBrushes();</P>
<P>&#9;void ResetAllSelections();</P>
<P>&#9;void SelectGroupBrushes (BOOL Select, int WhichGroup);</P>
<P>&#9;void SelectModelBrushes (BOOL Select, int ModelId);</P>

<P>&#9;void OnBrushAddtoworld();</P>
<P>&#9;void DoGeneralSelect (void);</P>
<P>&#9;void CreateEntity(char const *pEntityName);</P>
<P>&#9;geBoolean CreateEntityFromName (char const *pEntityType, CEntity &amp;NewEnt);</P>

<P>&#9;// creates a template entity with which the user specifies a location for any objects</P>
<P>&#9;// they place</P>
<P>&#9;void CreateObjectTemplate();</P>

<P>&#9;void CreateStaircase();</P>
<P>&#9;void CreateCylinder();</P>
<P>&#9;void CreateSpheroid();</P>
<P>&#9;void CreateCube();</P>
<P>&#9;void CreateCone();</P>
<P>&#9;void CreateArch();</P>

<P>&#9;void SetSelectedBrush();</P>
<P>&#9;void SetSelectedFace(int PolyNum);</P>
<P>&#9;void ResetSelectedBrush();</P>
<P>&#9;void ResetSelectedFace(int PolyNum = 0);</P>
<P>&#9;BOOL OneBrushSelectedOnly(void);</P>
<P>&#9;void ToggleSelectionLock(void){ SelectLock=!(SelectLock); }</P>
<P>&#9;BOOL IsSelectionLocked(void){ return SelectLock; }</P>
<P>&#9;void RotateSelectedBrushes(geVec3d const *v);</P>
<P>&#9;void RotateSelectedBrushesDirect(geVec3d const *v);</P>

<P>&#9;void SelectTextureFromFace3D(CPoint point, ViewVars *v);</P>
<P>&#9;void PlaceTemplateEntity3D(CPoint point, ViewVars *v);</P>
<P>&#9;void MoveToNearest(void);</P>
<P>&#9;void ResetAllSelectedFaces();</P>
<P>&#9;void ResetAllSelectedBrushes();</P>
<P>&#9;void AddBrushToWorld();</P>
<P>&#9;void NullBrushAttributes();</P>
<P>&#9;void ConfigureCurrentTool();</P>
<P>&#9;void UpdateCameraEntity( const ViewVars *v ) ;</P>
<P>&#9;void SetRenderedViewCamera( const geVec3d * pVec, const geVec3d * pPRY ) ;</P>
<P>&#9;void GetCursorInfo(char *info, int MaxSize);</P>
<P>&#9;void NullFaceAttributes();</P>
<P>&#9;void FaceAttributesDialog ();</P>
<P>&#9;void UpdateAllViews(int Mode, CView* pSender, BOOL Override = FALSE );</P>
<P>&#9;int SubtractBrushFromList(Brush&amp; Brush);</P>
<P>&#9;void ResetSelectedFaceAttributes ();</P>
<P>&#9;void ResizeSelected(float dx, float dy, int sides, int inidx);</P>
<P>&#9;void ShearSelected(float dx, float dy, int sides, int inidx);</P>
<P>&#9;void MoveSelectedBrushes (geVec3d const *v);</P>
<P>&#9;void MoveSelectedClone (geVec3d const *v);</P>
<P>&#9;void MoveTemplateBrush (geVec3d *);</P>
<P>//&#9;void ChangeGridSize(geFloat Increment, CView* pSender );</P>
<P>&#9;void UpdateGridInformation();</P>
<P>&#9;void DeleteCurrentThing();</P>
<P>&#9;void MoveEntity(geVec3d *);</P>
<P>&#9;void DoneMoveEntity();</P>
<P>&#9;void DeleteEntity(int EntityIndex);</P>
<P>&#9;void DoneRotateBrush();</P>
<P>&#9;void OnSelectedTypeCmdUI(CCmdUI* pCmdUI);</P>
<P>&#9;void RenderOrthoView(ViewVars *, CDC *);</P>
<P>&#9;int AreBrushesSelected();</P>
<P>&#9;void UpdateEntityOrigins();</P>
<P>&#9;int CanRedo();</P>
<P>&#9;void SaveBrushUndo();</P>
<P>&#9;int CanUndo();</P>
<P>&#9;void RenderWorld(ViewVars *v, CDC* pDC);</P>
<P>&#9;void RotateTemplateBrush(geVec3d *);</P>
<P>&#9;void ShearBrush(geVec3d *);</P>
<P>&#9;void ResetSelectedBrushAttributes();</P>
<P>&#9;void BrushListToMeters(void);</P>
<P>&#9;void BrushListToTexels(void);</P>
<P>&#9;void MakeSelectedBrushNewest(void);</P>
<P>&#9;void ScaleWorld(geFloat ScaleFactor);</P>
<P>&#9;void SetAllFacesTextureScale(geFloat ScaleVal);</P>

<P>&#9;void SetDefaultBrushTexInfo(Brush *);</P>
<P>&#9;void SelectOrtho(CPoint point, ViewVars *v);</P>
<P>&#9;void SelectOrthoRect(CPoint ptStart, CPoint ptEnd, ViewVars *v) ;</P>
<P>&#9;void SelectRay(CPoint point, ViewVars *v);</P>
<P>&#9;WadFileEntry* GetDibBitmap(const char *Name);</P>
<P>&#9;BOOL DeleteSelectedBrushes();</P>
<P>&#9;BOOL TempDeleteSelected(void);</P>
<P>&#9;int&#9;MakeNewBrushGroup ( CWnd * pParent );</P>
<P>&#9;int FillBrushGroupCombo (CComboBox &amp;cb);</P>
<P>&#9;int DoBrushGroupEditor (CComboBox &amp;cb);</P>
<P>&#9;void AddSelToGroup( void ) ;</P>
<P>&#9;void RemovesSelFromGroup( void ) ;</P>
<P>&#9;void SetAdjustmentMode ( fdocAdjustEnum nCmdIDMode ) ;</P>

<P>&#9;// places the specified object down into the level at the specified location</P>
<P>&#9;geBoolean PlaceObject( const char *Objectname, const geVec3d *location );</P>
<P>&#9;geBoolean ImportFile (const char *PathName, const geVec3d *location);</P>

<P>&#9;void SelectEntity (CEntity *pEnt);</P>
<P>&#9;void DeselectEntity (CEntity *pEnt);</P>

<P>&#9;geBoolean&#9;ValidateEntities( void ) ;</P>
<P>&#9;geBoolean&#9;ValidateBrushes( void ) ;</P>
<P>&#9;void&#9;&#9;SelectTab( int nTabIndex ) ;</P>

<P>&#9;void BrushSelect (Brush *pBrush);</P>
<P>&#9;geBoolean BrushIsSelected (Brush const *pBrush);</P>

<P>&#9;void DoBrushSelection (Brush *pBrush, BrushSel nSelType ) ;</P>
<P>&#9;void DoEntitySelection (CEntity *pEntity);</P>
<P>&#9;int FindClosestThing (POINT const *ptFrom, ViewVars *v, Brush **ppMinBrush, CEntity **ppMinEntity, geFloat *pDist);</P>
<P>&#9;geBoolean&#9;fdocShowBrush( Brush const *b, Box3d const *ViewBox ) ;</P>

<P>&#9;geBoolean&#9;bShowLeakFinder(void) { return bShowLeak; }</P>
<P>&#9;void&#9;&#9;SetShowLeakFinder(geBoolean bShow) { bShowLeak=bShow; }</P>
<P>&#9;geBoolean&#9;IsLeakFileLoaded(void) { return bLeakLoaded; }</P>
<P>&#9;geVec3d&#9;&#9;*GetLeakPoints(void) { assert(LeakPoints); return LeakPoints; }</P>
<P>&#9;int&#9;&#9;&#9;GetNumLeakPoints(void) { return NumLeakPoints; }</P>
<P>&#9;void CompileDone (CompilerErrorEnum CompileRslt);</P>
<P>&#9;void UpdateFaceAttributesDlg (void);</P>
<P>&#9;void UpdateBrushAttributesDlg (void);</P>
<P>&#9;const Prefs *GetPrefs (void);</P>
<P>&#9;void&#9;RebuildTrees(void);</P>
<P>&#9;void&#9;InvalidateDrawTreeOriginalFaces(void);</P>
<P>public:</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CFusionDoc)</P>
<P>&#9;public:</P>
<P>&#9;virtual BOOL OnNewDocument();</P>
<P>&#9;virtual void Serialize(CArchive&amp; ar);</P>
<P>&#9;virtual BOOL OnOpenDocument(LPCTSTR lpszPathName);</P>
<P>&#9;virtual BOOL OnSaveDocument(LPCTSTR lpszPathName);</P>
<P>&#9;virtual void OnCloseDocument();</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>public:</P>
<P>&#9;virtual ~CFusionDoc();</P>

<P>protected:</P>

<P>// Generated message map functions</P>
<P>protected:</P>
<P>&#9;//{{AFX_MSG(CFusionDoc)</P>
<P>&#9;afx_msg void OnToolsUsegrid();</P>
<P>&#9;afx_msg void OnUpdateToolsUsegrid(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnToolsGridsettings();</P>
<P>&#9;afx_msg void OnEditUndo();</P>
<P>&#9;afx_msg void OnUpdateEditUndo(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnEditRedo();</P>
<P>&#9;afx_msg void OnUpdateEditRedo(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnEntitiesEditor();</P>
<P>&#9;afx_msg void OnEntitiesShow();</P>
<P>&#9;afx_msg void OnUpdateEntitiesShow(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnViewShowAllGroups();</P>
<P>&#9;afx_msg void OnViewShowCurrentGroup();</P>
<P>&#9;afx_msg void OnViewShowVisibleGroups();</P>
<P>&#9;afx_msg void OnUpdateViewShowVisibleGroups(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateViewShowAllGroups(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateViewShowCurrentGroup(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateBrushAdjustmentmode(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnBrushSelectedCopytocurrent();</P>
<P>&#9;afx_msg void OnBrushSelectedDelete();</P>
<P>&#9;afx_msg void OnGbspnowater();</P>
<P>&#9;afx_msg void OnUpdateFaceAdjustmentmode(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnConstrainhollows();</P>
<P>&#9;afx_msg void OnUpdateConstrainhollows(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnGeneralselect();</P>
<P>&#9;afx_msg void OnUpdateGeneralselect(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnThingAttributes();</P>
<P>&#9;afx_msg void OnBrushSubtractfromworld();</P>
<P>&#9;afx_msg void OnEditCopy();</P>
<P>&#9;afx_msg void OnEditPaste();</P>
<P>&#9;afx_msg void OnUpdateEditCopy(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateEditPaste(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnEditCut();</P>
<P>&#9;afx_msg void OnUpdateEditCut(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnCompile();</P>
<P>&#9;afx_msg void OnUpdateBrushSubtractfromworld(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateThingAttributes(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateToolsBrushShowassociatedentity(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateEntitiesEditor(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnNewLibObject();</P>
<P>&#9;afx_msg void OnFileOpen();</P>
<P>&#9;afx_msg void OnToolsBrushAdjustmentmode();</P>
<P>&#9;afx_msg void OnToolsFaceAdjustmentmode();</P>
<P>&#9;afx_msg void OnUpdateBrushPrimitives(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnBrushPrimitivesCube();</P>
<P>&#9;afx_msg void OnBrushPrimitivesSpheroid();</P>
<P>&#9;afx_msg void OnBrushPrimitivesCylinder();</P>
<P>&#9;afx_msg void OnBrushPrimitivesStaircase();</P>
<P>&#9;afx_msg void OnViewShowClip();</P>
<P>&#9;afx_msg void OnUpdateViewShowClip(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnViewShowDetail();</P>
<P>&#9;afx_msg void OnUpdateViewShowDetail(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnViewShowHint();</P>
<P>&#9;afx_msg void OnUpdateViewShowHint(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnEditDelete();</P>
<P>&#9;afx_msg void OnBrushPrimitivesArch();</P>
<P>&#9;afx_msg void OnBrushPrimitivesCone();</P>
<P>&#9;afx_msg void OnFileImport();</P>
<P>&#9;afx_msg void OnToolsBrushAttributes();</P>
<P>&#9;afx_msg void OnUpdateToolsBrushAttributes(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnToolsFaceAttributes();</P>
<P>&#9;afx_msg void OnUpdateToolsFaceAttributes(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnEntityVisibility();</P>
<P>&#9;afx_msg void OnRebuildBsp();</P>
<P>&#9;afx_msg void OnUpdateRebuildBsp(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnFileSave();</P>
<P>&#9;afx_msg void OnFileSaveAs();</P>
<P>&#9;afx_msg void OnToolsToggleadjustmode();</P>
<P>&#9;afx_msg void OnUpdateToolsToggleadjustmode(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnLeveloptions();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>private:</P>
<P>&#9;geVec3d&#9;&#9;*LeakPoints;</P>
<P>&#9;int&#9;&#9;&#9;NumLeakPoints;</P>
<P>&#9;geBoolean&#9;bLeakLoaded, bShowLeak;</P>
<P>&#9;geBoolean&#9;LoadLeakFile(const char *Filename);</P>
<P>&#9;geBoolean&#9;LoadMapFile(const char *Filename);</P>
<P>&#9;UndoStack&#9;*pUndoStack;</P>
<P>&#9;char&#9;&#9;LastPath[MAX_PATH];  //no cstrings for dialog action</P>

<P>&#9;geBoolean&#9;bShowClipBrushes, bShowDetailBrushes, bShowHintBrushes;</P>

<P>&#9;int DoCompileDialog (void);</P>
<P>&#9;geBoolean WriteLevelToMap (const char *Filename);</P>

<P>&#9;geBoolean Load( const char *FileName );  // Loads from filename</P>
<P>&#9;geBoolean Save( const char *FileName );  // saves filename</P>

<P>&#9;void UpdateSelectedModel (int MoveRotate, geVec3d const *pVecDelta);</P>

<P>&#9;// insures all of the Dib ID's in the brush are correct</P>
<P>&#9;// returns GE_TRUE if all textures fixed up.</P>
<P>&#9;// returns GE_FALSE if any texture was not found</P>
<P>&#9;geBoolean FixUpBrushDibIDs( Brush *brush );</P>

<P>&#9;// our current setting for our grid movement</P>
<P>&#9;int mCurrentBrushId;</P>

<P>&#9;void RotateSelectedBrushList (SelBrushList *pList, geVec3d const *v);</P>
<P>&#9;void MoveSelectedBrushList (SelBrushList *pList, geVec3d const *v);</P>
<P>&#9;void GetRotationPoint (geVec3d *pVec);</P>
<P>&#9;void AddCameraEntityToLevel (void);</P>
<P>&#9;CEntity *FindCameraEntity (void);</P>

<P>&#9;geBoolean FindClosestEntity (POINT const *ptFrom, ViewVars *v, CEntity **ppMinEntity, geFloat *pMinEntityDist);</P>
<P>&#9;geBoolean FindClosestBrush (POINT const *ptFrom, ViewVars *v, Brush **ppFoundBrush, geFloat *pMinEdgeDist);</P>

<P>&#9;void CreateNewTemplateBrush (Brush *pBrush);</P>
<P>&#9;void SetupDefaultFilename (void);</P>
<P>&#9;const char *FindTextureLibrary (char const *WadName);</P>
<P>&#9;Face *FindSelectedFace (void);</P>
<P>&#9;void DeleteBrushAttributes (void);</P>
<P>&#9;void DeleteFaceAttributes (void);</P>
<P>};</P>

<P>&nbsp;</P>
<P>geBoolean BrushSelect( Brush *pBrush, uint32 Action, uint32 Data, void * pVoid ) ;</P>
<P>geBoolean BrushDraw( Brush *pBrush, uint32 Action, uint32 Data, void * pVoid ) ;</P>
<P>geBoolean EntitySelect( CEntity&amp; Entity, uint32 Action, uint32 Data, void * pVoid ) ;</P>
<P>geBoolean EntityDraw( CEntity&amp; Entity, uint32 Action, uint32 Data, void * pVoid ) ;</P>

<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156785">FusionTabControls.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  FusionTabControls.h                                                                 */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>

<P>#ifndef&#9;FUSIONTABCONTROLS_H</P>
<P>#define FUSIONTABCONTROLS_H</P>

<P>#include "resource.h"</P>
<P>#include "ConsoleTab.h"</P>
<P>#include "brush.h"</P>

<P>class CBrushEntityDialog;</P>
<P>class CBrushGroupDialog;</P>
<P>class CTextureDialog;</P>
<P>class CMainFrame;</P>
<P>class CModelDialog;</P>
<P>class CSkyDialog;</P>

<P>#define BRUSH_ENTITY_TAB&#9;0</P>
<P>#define TEXTURE_TAB&#9;&#9;&#9;1</P>
<P>#define GROUP_TAB&#9;&#9;&#9;2</P>
<P>#define CONSOLE_TAB&#9;&#9;&#9;3</P>
<P>#define MODEL_TAB&#9;&#9;&#9;4</P>
<P>#define SKY_TAB&#9;&#9;&#9;&#9;5</P>

<P>&nbsp;</P>
<P>#define FTC_BORDER_SIZE_TOP&#9;&#9;4</P>
<P>#define FTC_BORDER_SIZE_LEFT&#9;4</P>
<P>#define FTC_BORDER_SIZE_RIGHT&#9;8</P>
<P>#define FTC_BORDER_SIZE_BOTTOM&#9;64</P>

<P>&nbsp;</P>
<P>// CFusionTabControls window</P>

<P>class CFusionTabControls : public CTabCtrl</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;void&#9;SelectTexture(int SelNum);</P>
<P>&#9;void DisableAllTabDialogs();</P>
<P>&#9;const char *GetCurrentTexture();</P>
<P>&#9;WINDOWPLACEMENT m_WindowPlacement;</P>
<P>&#9;void UpdateTabs();</P>
<P>&#9;int m_CurrentTab;</P>
<P>&#9;CWnd *LastView;</P>
<P>&#9;BOOL CreateTabs();</P>
<P>&#9;CFusionTabControls( CDialogBar* pDBar );</P>
<P>&#9;CConsoleTab&#9;&#9;&#9;*ConTab;  //i just cant do the m thing</P>
<P>&#9;CBrushGroupDialog&#9;*GrpTab;</P>
<P>&#9;CModelDialog&#9;&#9;*ModelTab;</P>
<P>&#9;CSkyDialog&#9;&#9;&#9;*SkyTab;</P>

<P>// Attributes</P>
<P>public:</P>

<P>// Operations</P>
<P>public:</P>

<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CFusionTabControls)</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>public:</P>
<P>&#9;virtual ~CFusionTabControls();</P>

<P>&#9;//moved public to grey the buttons</P>
<P>&#9;CBrushEntityDialog* m_pBrushEntityDialog;</P>
<P>&#9;void UpdateTextures (void);</P>

<P>&#9;// Generated message map functions</P>
<P>public:</P>
<P>&#9;CMainFrame* m_pMainFrame;</P>
<P>&#9;//{{AFX_MSG(CFusionTabControls)</P>
<P>&#9;afx_msg void OnSelchange(NMHDR* pNMHDR, LRESULT* pResult);</P>
<P>&#9;afx_msg void OnSetFocus(CWnd* pOldWnd);</P>
<P>&#9;//}}AFX_MSG</P>

<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>private:</P>
<P>&#9;CDialogBar* m_pDialogBar;</P>
<P>&#9;CTextureDialog&#9;&#9;*m_pTextureDialog;</P>

<P>};</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156786">FusionView.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  FusionView.h                                                                        */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef FUSIONVIEW_H</P>
<P>#define FUSIONVIEW_H</P>

<P>#include "brush.h"</P>
<P>#include "render.h"</P>
<P>#include "resource.h"</P>
<P>#include "fusiondoc.h"</P>

<P>/* SELECTION MODES, part in VIEW, part in DOC</P>
<P>&#9;mCurrentTool GetTool()&#9;&#9;&#9;mAdjustMode GetAdjustMode()&#9;&#9;mModeTool GetModeTool()</P>
<P>&#9;ID_TOOLS_BRUSH_SCALEBRUSH&#9;&#9;ID_TOOLS_BRUSH_ADJUSTMENTMODE&#9;&#9;ID_TOOLS_TEMPLATE</P>
<P>&#9;ID_TOOLS_BRUSH_MOVEROTATEBRUSH&#9;ID_TOOLS_FACE_ADJUSTMENTMODE&#9;&#9;ID_TOOLS_CAMERA</P>
<P>&#9;ID_TOOLS_BRUSH_SHEARBRUSH&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;ID_GENERALSELECT</P>
<P>&#9;CURTOOL_NONE</P>
<P>*/</P>

<P>typedef struct tag_EntityViewList EntityViewList;</P>

<P>class CFusionView : public CView</P>
<P>{</P>
<P>protected: // create from serialization only</P>
<P>&#9;DECLARE_DYNCREATE(CFusionView)</P>

<P>// Attributes</P>
<P>public:</P>
<P>&#9;UINT&#9;&#9;mViewType;</P>
<P>&#9;int&#9;&#9;&#9;sides;</P>
<P>&#9;ViewVars&#9;*VCam;</P>

<P>&#9;CFusionView();</P>
<P>&#9;void SetTool(int Tool);</P>
<P>&#9;void SetAdjustMode(fdocAdjustEnum Mode);</P>
<P>&#9;void SetModeTool(int Tool);</P>
<P>&#9;void SetTitle();</P>
<P>&#9;int GetTool(void);</P>
<P>&#9;fdocAdjustEnum GetAdjustMode(void);</P>
<P>&#9;int GetModeTool(void);</P>
<P>&#9;CFusionDoc* GetDocument();</P>

<P>// Operations</P>
<P>public:</P>

<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CFusionView)</P>
<P>&#9;public:</P>
<P>&#9;virtual void OnDraw(CDC* pDC);  // overridden to draw this view</P>
<P>&#9;virtual BOOL PreCreateWindow(CREATESTRUCT&amp; cs);</P>
<P>&#9;virtual void OnInitialUpdate();</P>
<P>&#9;protected:</P>
<P>&#9;virtual void OnActivateView(BOOL bActivate, CView* pActivateView, CView* pDeactiveView);</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>public:</P>
<P>&#9;virtual ~CFusionView();</P>

<P>protected:</P>

<P>// Generated message map functions</P>
<P>protected:</P>
<P>&#9;LRESULT OnCompileMessage (WPARAM wParam, LPARAM lParam);</P>
<P>&#9;LRESULT OnCompileError (WPARAM wParam, LPARAM lParam);</P>
<P>&#9;LRESULT OnCompileDone (WPARAM wParam, LPARAM lParam);</P>
<P>&#9;//{{AFX_MSG(CFusionView)</P>
<P>&#9;afx_msg void OnSize(UINT nType, int cx, int cy);</P>
<P>&#9;afx_msg void OnLButtonDown(UINT nFlags, CPoint point);</P>
<P>&#9;afx_msg void OnLButtonUp(UINT nFlags, CPoint point);</P>
<P>&#9;afx_msg void OnMouseMove(UINT nFlags, CPoint point);</P>
<P>&#9;afx_msg void OnToolsCamera();</P>
<P>&#9;afx_msg void OnUpdateToolsCamera(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnRButtonDown(UINT nFlags, CPoint point);</P>
<P>&#9;afx_msg void OnRButtonUp(UINT nFlags, CPoint point);</P>
<P>&#9;afx_msg void OnAxisX();</P>
<P>&#9;afx_msg void OnUpdateAxisX(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnAxisY();</P>
<P>&#9;afx_msg void OnUpdateAxisY(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnAxisZ();</P>
<P>&#9;afx_msg void OnUpdateAxisZ(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnToolsBrushMoverotatebrush();</P>
<P>&#9;afx_msg void OnUpdateToolsBrushMoverotatebrush(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnToolsBrushScalebrush();</P>
<P>&#9;afx_msg void OnUpdateToolsBrushScalebrush(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnToolsBrushShowbrush();</P>
<P>&#9;afx_msg void OnUpdateToolsBrushShowbrush(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg BOOL OnEraseBkgnd(CDC* pDC);</P>
<P>&#9;afx_msg void OnToolsBrushShearbrush();</P>
<P>&#9;afx_msg void OnUpdateToolsBrushShearbrush(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateBrushGroupsMakenewgroup(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateBrushGroupsAddtogroup(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnToolsBrushRotate45();</P>
<P>&#9;afx_msg void OnToolsBrushMoveselectedbrushes();</P>
<P>&#9;afx_msg void OnUpdateToolsBrushMoveselectedbrushes(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnToolsTemplate();</P>
<P>&#9;afx_msg void OnUpdateToolsTemplate(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateToolsBrushRotate45(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnBrushRemoveselectedfromgroup();</P>
<P>&#9;afx_msg void OnUpdateBrushRemoveselectedfromgroup(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnBrushGroupsAddtogroup();</P>
<P>&#9;afx_msg void OnDeselectall();</P>
<P>&#9;afx_msg void OnUpdateDeselectall(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnSelectall();</P>
<P>&#9;afx_msg void OnUpdateSelectall(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnToolsScaleworld();</P>
<P>&#9;afx_msg void OnToolsBrushMakenewest();</P>
<P>&#9;afx_msg void OnToolsSettexturescale();</P>
<P>&#9;afx_msg void OnToolsNextbrush();</P>
<P>&#9;afx_msg void OnToolsPrevbrush();</P>
<P>&#9;afx_msg void OnToolsAddtolevel();</P>
<P>&#9;afx_msg void OnUpdateToolsAddtolevel(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnViewZoomin();</P>
<P>&#9;afx_msg void OnUpdateViewZoomin(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnViewZoomout();</P>
<P>&#9;afx_msg void OnUpdateViewZoomout(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnCenterthing();</P>
<P>&#9;afx_msg void OnUpdateCenterthing(CCmdUI* pCmdUI);</P>
<P>&#9;//}}AFX_MSG</P>
<P>public:</P>
<P>&#9;afx_msg void OnViewType(UINT nID);</P>
<P>&#9;BOOL IsPanning;</P>
<P>&#9;void DoZoom (float ZoomInc);</P>
<P>protected:</P>
<P>&#9;afx_msg void OnViewTypeCmdUi(CCmdUI* pCmdUI);</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>private:</P>
<P>&#9;geBoolean&#9;mViewIs3d ;</P>
<P>&#9;BOOL&#9;&#9;IsCopying;</P>
<P>&#9;BOOL&#9;&#9;IsDragging ;</P>
<P>&#9;double&#9;&#9;mZoomFactor;</P>
<P>&#9;int&#9;&#9;&#9;mShowBrush;</P>
<P>&#9;int&#9;&#9;&#9;mQuadrant;&#9;// Current Quadrant of brush that mouse is in...</P>
<P>&#9;CPoint&#9;&#9;mStartPoint;</P>
<P>&#9;CPoint&#9;&#9;mDragStartPoint ;</P>
<P>&#9;CPoint&#9;&#9;mDragCurrentPoint ;</P>

<P>&#9;// These flags are updated by the OnLButtonDown, OnLButtonUp,</P>
<P>&#9;// OnRButtonDown, and OnRButtonUp messages handlers, and are</P>
<P>&#9;// checked in those handlers to prevent problems associated with</P>
<P>&#9;// other ways of checking mouse key position (either by checking the nFlags</P>
<P>&#9;// parameter to the handlers, or using GetAsyncKeyState).</P>
<P>&#9;// NOTE:  These variables track the state of mouse button message processing,</P>
<P>&#9;// they do not reflect the current state of the mouse buttons.</P>
<P>&#9;geBoolean LMouseButtonDown;</P>
<P>&#9;geBoolean RMouseButtonDown;</P>

<P>&#9;int mTextureViewIndex;</P>
<P>&#9;int m3DWireframeViewIndex;</P>
<P>&#9;int mSolidGonViewIndex;</P>
<P>&#9;int mFrontViewIndex;</P>
<P>&#9;int mSideViewIndex;</P>
<P>&#9;int mTopViewIndex;</P>

<P>&#9;static int mCY_DRAG ;</P>
<P>&#9;static int mCX_DRAG ;</P>

<P>&#9;void DrawLeakPoints(HDC ViewDC, geVec3d *LeakPoints, int NumLeakPoints);</P>
<P>&#9;void DrawLeakPoints3D(HDC ViewDC, geVec3d *LeakPoints, int NumLeakPoints);</P>
<P>&#9;void LockAxisView (int *dx, int *dy);</P>
<P>&#9;void LockAxis( geVec3d * pWP ) ;</P>
<P>&#9;void SetEditCursor (int Tool, const POINT *pMousePos);</P>
<P>&#9;int GetCursorBoxPos (const POINT *pMousePos);</P>
<P>&#9;void Pan (CFusionDoc *pDoc, int dx, int dy, const geVec3d *dv, BOOL LButtonIsDown, BOOL RButtonIsDown);</P>
<P>&#9;void ScaleSelected (CFusionDoc *pDoc, int dx, int dy);</P>
<P>&#9;void ShearSelected (CFusionDoc *pDoc, int dx, int dy);</P>
<P>&#9;void HideTheCursor (void);</P>
<P>&#9;void ShowTheCursor (void);</P>
<P>&#9;void DoneMovingBrushes ();</P>
<P>&#9;EntityViewList *pEntityView;</P>
<P>};</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454156787">Gbsplib.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  GbspLib.h                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       John Pollard                                                          */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GBSPLIB_H</P>
<P>#define GBSPLIB_H</P>

<P>#include &lt;Windows.h&gt;</P>
<P>#include "vec3d.h"</P>
<P>#include "basetype.h"</P>

<P>//#include "MyDef.h"</P>
<P>//#include "MathLib.h"</P>

<P>//#include "Motion.h"</P>

<P>#define GBSP_VERSION_MAJOR&#9;6</P>
<P>#define GBSP_VERSION_MINOR&#9;0</P>
<P>/*</P>
<P>//====================================================================================</P>
<P>//&#9;Global defines</P>
<P>//====================================================================================</P>
<P>#define PLANENUM_LEAF&#9;&#9;-1</P>
<P>#define TEXINFO_NODE&#9;&#9;-1</P>

<P>&nbsp;</P>
<P>#define MAX_BSP_PLANES&#9;&#9;32000</P>

<P>#define&#9;DIST_EPSILON&#9;(VecType)0.01</P>
<P>#define&#9;ANGLE_EPSILON&#9;(VecType)0.00001</P>

<P>//====================================================================================</P>
<P>//&#9;BSP sructures</P>
<P>//====================================================================================</P>

<P>struct _GBSP_Portal;</P>

<P>typedef struct GBSP_Brush2&#9;GBSP_Brush2;</P>
<P>typedef struct GBSP_Side&#9;GBSP_Side;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;S32&#9;&#9;&#9;NumVerts;</P>
<P>&#9;Vec3d&#9;&#9;*Verts;</P>
<P>} GBSP_Poly;</P>

<P>&nbsp;</P>
<P>typedef struct _GBSP_Face</P>
<P>{</P>
<P>&#9;_GBSP_Face&#9;*Next;</P>
<P>&#9;_GBSP_Face&#9;*Original;</P>
<P>&#9;GBSP_Poly&#9;*Poly;</P>
<P>&#9;S32&#9;&#9;&#9;Contents[2];</P>
<P>&#9;S32&#9;&#9;&#9;TexInfo;</P>
<P>&#9;S32&#9;&#9;&#9;PlaneNum;</P>
<P>&#9;S32&#9;&#9;&#9;PlaneSide;</P>

<P>&#9;S32&#9;&#9;&#9;Entity;&#9;&#9;&#9;&#9;&#9;// Originating entity</P>

<P>&#9;U8&#9;&#9;&#9;Detail;&#9;&#9;&#9;&#9;&#9;// 1 if was on detail brush</P>
<P>&#9;U8&#9;&#9;&#9;Hint;</P>
<P>&#9;U8&#9;&#9;&#9;Visible;&#9;&#9;&#9;</P>

<P>&#9;// For GFX file saving</P>
<P>&#9;S32&#9;&#9;&#9;OutputNum;&#9;</P>

<P>&#9;S32&#9;&#9;&#9;*IndexVerts;</P>
<P>&#9;S32&#9;&#9;&#9;FirstIndexVert;</P>
<P>&#9;S32&#9;&#9;&#9;NumIndexVerts;</P>

<P>&#9;_GBSP_Portal *Portal;</P>
<P>&#9;_GBSP_Face&#9;*Split[2];</P>
<P>&#9;_GBSP_Face&#9;*Merged;</P>
<P>} GBSP_Face;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;Vec3d&#9;&#9;Normal;</P>
<P>&#9;VecType&#9;&#9;Dist;</P>
<P>&#9;S32&#9;&#9;&#9;Type;</P>
<P>} GBSP_Plane;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;S32&#9;&#9;Contents;&#9;&#9;&#9;&#9;&#9;// Contents of leaf</P>
<P>} GBSP_Leaf;</P>

<P>typedef struct _GBSP_Node</P>
<P>{</P>
<P>&#9;// Info for this node as a node or leaf</P>
<P>&#9;S32&#9;&#9;&#9;&#9;PlaneNum;&#9;&#9;&#9;// -1 if a leaf</P>
<P>&#9;S32&#9;&#9;&#9;&#9;PlaneSide;&#9;&#9;&#9;// CHANGE1!!!</P>
<P>&#9;S32&#9;&#9;&#9;&#9;Contents;&#9;&#9;&#9;// Contents node/leaf</P>
<P>&#9;GBSP_Face&#9;&#9;*Faces;&#9;&#9;&#9;&#9;// Faces on this node</P>
<P>&#9;_GBSP_Node&#9;&#9;*Children[2];&#9;&#9;// Front and back child</P>
<P>&#9;_GBSP_Node&#9;&#9;*Parent;&#9;&#9;&#9;// Parent of this node</P>
<P>&#9;Vec3d&#9;&#9;&#9;Mins;&#9;&#9;&#9;&#9;// Current BBox of node</P>
<P>&#9;Vec3d&#9;&#9;&#9;Maxs;</P>

<P>&#9;// Info for this node as a leaf</P>
<P>&#9;_GBSP_Portal&#9;*Portals;&#9;&#9;&#9;// Portals on this leaf</P>
<P>&#9;S32&#9;&#9;&#9;&#9;NumMarkFaces;&#9;&#9;// Number of faces touching this leaf</P>
<P>&#9;GBSP_Face&#9;&#9;**MarkFaces;&#9;&#9;// Pointer to Faces touching this leaf</P>
<P>&#9;S32&#9;&#9;&#9;&#9;CurrentFill;&#9;&#9;// For the outside filling stage</P>
<P>&#9;S32&#9;&#9;&#9;&#9;Entity;&#9;&#9;&#9;&#9;// 1 if entity touching leaf</P>
<P>&#9;S32&#9;&#9;&#9;&#9;Occupied;&#9;&#9;&#9;// FIXME:  Can use Entity!!!</P>
<P>&#9;S32&#9;&#9;&#9;&#9;PortalLeafNum;&#9;&#9;// For portal saving</P>

<P>&#9;BOOL&#9;&#9;&#9;Detail;</P>
<P>&#9;S32&#9;&#9;&#9;&#9;Cluster;</P>
<P>&#9;S32&#9;&#9;&#9;&#9;Area;&#9;&#9;&#9;&#9;// Area number, -1 if area portal, 0 if solid</P>

<P>&#9;GBSP_Brush2&#9;&#9;*Volume;</P>
<P>&#9;GBSP_Side&#9;&#9;*Side;</P>
<P>&#9;GBSP_Brush2&#9;&#9;*BrushList;</P>

<P>&#9;// For GFX file saving</P>
<P>&#9;S32&#9;&#9;&#9;&#9;ChildrenID[2];</P>
<P>&#9;S32&#9;&#9;&#9;&#9;FirstFace;</P>
<P>&#9;S32&#9;&#9;&#9;&#9;NumFaces;</P>
<P>&#9;S32&#9;&#9;&#9;&#9;FirstPortal;</P>
<P>&#9;S32&#9;&#9;&#9;&#9;NumPortals;</P>

<P>&#9;S32&#9;&#9;&#9;&#9;FirstSide;&#9;&#9;&#9;// For bevel bbox clipping</P>
<P>&#9;S32&#9;&#9;&#9;&#9;NumSides;</P>

<P>} GBSP_Node;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;S32&#9;&#9;PlaneNum;</P>
<P>&#9;S32&#9;&#9;PlaneSide;</P>
<P>} GBSP_LeafSide;</P>

<P>typedef struct _GBSP_Node2</P>
<P>{</P>
<P>&#9;_GBSP_Node2&#9;&#9;*Children[2];</P>
<P>&#9;S32&#9;&#9;&#9;&#9;PlaneNum;&#9;&#9;&#9;// -1 == Leaf</P>
<P>&#9;</P>
<P>&#9;// For leafs</P>
<P>&#9;S32&#9;&#9;&#9;&#9;Contents;</P>
<P>} GBSP_Node2;</P>

<P>// Side flags...</P>
<P>#define SIDE_HINT&#9;(1&lt;&lt;0)</P>

<P>typedef struct GBSP_Side</P>
<P>{</P>
<P>&#9;GBSP_Poly&#9;*Poly;</P>

<P>&#9;S32&#9;&#9;&#9;PlaneNum;</P>
<P>&#9;U8&#9;&#9;&#9;PlaneSide;</P>

<P>&#9;S32&#9;&#9;&#9;TexInfo;</P>

<P>&#9;U8&#9;&#9;&#9;Flags;</P>

<P>&#9;U8&#9;&#9;&#9;Visible;</P>
<P>&#9;U8&#9;&#9;&#9;Tested;</P>
<P>&#9;//U8&#9;&#9;&#9;Bevel;</P>

<P>} GBSP_Side;</P>

<P>typedef struct _GBSP_Portal</P>
<P>{</P>
<P>&#9;GBSP_Poly&#9;&#9;*Poly;&#9;&#9;&#9;&#9;// Convex poly that holds the shape of the portal</P>
<P>&#9;GBSP_Node&#9;&#9;*Nodes[2];&#9;&#9;&#9;// Node on each side of the portal</P>
<P>&#9;_GBSP_Portal&#9;*Next[2];&#9;&#9;&#9;// Next portal for each node</P>
<P>&#9;S32&#9;&#9;&#9;&#9;PlaneNum;</P>

<P>&#9;GBSP_Node&#9;&#9;*OnNode;</P>
<P>&#9;GBSP_Face&#9;&#9;*Face[2];</P>
<P>&#9;GBSP_Side&#9;&#9;*Side;</P>
<P>&#9;U8&#9;&#9;&#9;&#9;SideFound;</P>
<P>} GBSP_Portal;</P>

<P>typedef struct MAP_Brush2&#9;MAP_Brush2;</P>

<P>typedef struct GBSP_Brush2</P>
<P>{</P>
<P>&#9;GBSP_Brush2&#9;*Next;</P>
<P>&#9;Vec3d&#9;&#9;Mins, Maxs;</P>
<P>&#9;S32&#9;&#9;&#9;Side, TestSide;&#9;&#9;// Side of node during construction</P>
<P>&#9;MAP_Brush2&#9;*Original;</P>
<P>&#9;S32&#9;&#9;&#9;NumSides;</P>
<P>&#9;GBSP_Side&#9;Sides[6];&#9;&#9;&#9;// Variably sized</P>

<P>} GBSP_Brush2;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;GBSP_Node&#9;*RootNode[2];&#9;&#9;// 0 = DrawHull, 1 = Bevel ClipHull</P>

<P>&#9;Vec3d&#9;&#9;Origin;</P>

<P>&#9;GBSP_Node&#9;OutsideNode;&#9;&#9;// So each model can have it's own outside node</P>

<P>&#9;S32&#9;&#9;&#9;TempAreas[5];&#9;&#9;// Areas that model touches</P>
<P>&#9;S32&#9;&#9;&#9;NumTempAreas;</P>
<P>&#9;// For GFX File saving</P>
<P>&#9;S32&#9;&#9;&#9;RootNodeID[2];</P>
<P>&#9;S32&#9;&#9;&#9;FirstFace;</P>
<P>&#9;S32&#9;&#9;&#9;NumFaces;</P>
<P>&#9;S32&#9;&#9;&#9;FirstLeaf;</P>
<P>&#9;S32&#9;&#9;&#9;NumLeafs;</P>
<P>&#9;S32&#9;&#9;&#9;FirstCluster;</P>
<P>&#9;S32&#9;&#9;&#9;NumClusters;</P>
<P>&#9;S32&#9;&#9;&#9;FirstArea;</P>
<P>&#9;S32&#9;&#9;&#9;NumAreas;</P>
<P>&#9;S32&#9;&#9;&#9;NumSolidLeafs;&#9;&#9;// So we can skip over solid leafs for vis stuff</P>

<P>} GBSP_Model;</P>
<P>*/</P>
<P>//====================================================================================</P>
<P>//&#9;Main driver interfaces</P>
<P>//====================================================================================</P>
<P>#define DllImport&#9;extern "C" __declspec( dllimport )</P>
<P>#define DllExport&#9;extern "C" __declspec( dllexport )</P>

<P>typedef void ERROR_CB(char *String, ...);</P>
<P>typedef void PRINTF_CB(char *String, ...);</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;BOOL&#9;Verbose;</P>
<P>&#9;BOOL&#9;EntityVerbose;</P>

<P>} BspParms;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;BOOL&#9;Verbose;</P>
<P>&#9;BOOL&#9;ExtraSamples;</P>
<P>&#9;float&#9;LightScale;</P>
<P>&#9;BOOL&#9;Radiosity;</P>
<P>&#9;int&#9;&#9;NumBounce;</P>
<P>&#9;float&#9;PatchSize;</P>
<P>&#9;BOOL&#9;FastPatch;</P>
<P>&#9;float&#9;ReflectiveScale;</P>

<P>&#9;geVec3d&#9;MinLight;&#9;&#9;&#9;// R,G,B (XYZ) min color for each faces lightmap</P>

<P>} LightParms;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;BOOL&#9;Verbose;</P>
<P>&#9;BOOL&#9;FullVis;</P>
<P>&#9;BOOL&#9;SortPortals;</P>

<P>} VisParms;</P>

<P>extern BOOL&#9;&#9;CancelRequest;&#9;&#9;// Global cancel request...</P>

<P>typedef enum</P>
<P>{</P>
<P>&#9;GBSP_ERROR,</P>
<P>&#9;GBSP_OK,</P>
<P>&#9;GBSP_CANCEL</P>
<P>} GBSP_RETVAL;</P>

<P>typedef GBSP_RETVAL GBSP_CREATE_BSP(char *MapText, BspParms *Parms);</P>
<P>typedef GBSP_RETVAL GBSP_S_FILE(char *FileName);</P>
<P>typedef void GBSP_FREE_BSP(void);</P>
<P>typedef GBSP_RETVAL GBSP_VIS_FILE(char *FileName, VisParms *Parms);</P>
<P>typedef GBSP_RETVAL GBSP_LIGHT_FILE(char *FileName, LightParms *Parms);</P>
<P>typedef BOOL GBSP_CANCEL_COMPILE(void);</P>
<P>typedef BOOL GBSP_UPDATE_ENTITIES(char *MapName, char *BSPName);</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;ERROR_CB&#9;&#9;*Error;&#9;&#9;&#9;// This must be set by caller</P>
<P>&#9;PRINTF_CB&#9;&#9;*Printf;&#9;&#9;// This too</P>

<P>} GBSP_Hook;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;&#9;VersionMajor;&#9;&#9;&#9;// Major changes, like function parms...</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;&#9;VersionMinor;&#9;&#9;&#9;// Internal changes, that do not effect caller</P>
<P>&#9;GBSP_CREATE_BSP&#9;&#9;&#9;*GBSP_CreateBSP;</P>
<P>&#9;GBSP_S_FILE&#9;&#9;&#9;&#9;*GBSP_SaveGBSPFile;</P>
<P>&#9;GBSP_FREE_BSP&#9;&#9;&#9;*GBSP_FreeBSP;</P>
<P>&#9;GBSP_VIS_FILE&#9;&#9;&#9;*GBSP_VisGBSPFile;</P>
<P>&#9;GBSP_LIGHT_FILE&#9;&#9;&#9;*GBSP_LightGBSPFile;</P>
<P>&#9;GBSP_CANCEL_COMPILE&#9;&#9;*GBSP_Cancel;</P>
<P>&#9;GBSP_UPDATE_ENTITIES&#9;*GBSP_UpdateEntities;</P>
<P>} GBSP_FuncHook;</P>

<P>typedef GBSP_FuncHook *GBSP_INIT(GBSP_Hook *Hook);</P>

<P>#endif</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454156788">GridSizeDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  GridSizeDialog.h                                                                    */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GRIDSIZEDIALOG_H</P>
<P>#define GRIDSIZEDIALOG_H</P>

<P>#include "resource.h"</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CGridSizeDialog dialog</P>

<P>class CGridSizeDialog : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;CGridSizeDialog(CWnd* pParent = NULL);   // standard constructor</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CGridSizeDialog)</P>
<P>&#9;enum { IDD = IDD_GRIDSETTINGSDIALOG };</P>
<P>&#9;double&#9;m_SnapDegrees;</P>
<P>&#9;BOOL&#9;m_UseSnap;</P>
<P>&#9;int&#9;&#9;MetricOrTexelSnap;</P>
<P>&#9;int&#9;&#9;MetricOrTexelGrid;</P>
<P>&#9;int&#9;&#9;TexelGridUnits;</P>
<P>&#9;int&#9;&#9;m_GridUnits;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CGridSizeDialog)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CGridSizeDialog)</P>
<P>&#9;afx_msg void OnSnap15();</P>
<P>&#9;afx_msg void OnSnap30();</P>
<P>&#9;afx_msg void OnSnap45();</P>
<P>&#9;afx_msg void OnSnap60();</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;afx_msg void OnUsertosnap();</P>
<P>&#9;afx_msg void OnSnap90();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>};</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156789">group.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  group.h                                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GROUP_H</P>
<P>#define GROUP_H</P>

<P>#include &lt;BaseType.h&gt;</P>
<P>#include &lt;GeTypes.h&gt;</P>
<P>#include "brush.h"</P>
<P>#include "entity.h"</P>
<P>#include "Parse3dt.h"</P>

<P>typedef struct tag_GroupListType GroupListType;</P>
<P>typedef struct tag_Group Group;</P>

<P>#define NO_MORE_GROUPS&#9;(-1)</P>

<P>Group *Group_Create</P>
<P>&#9;(</P>
<P>&#9;  int id,</P>
<P>&#9;  char const *pName</P>
<P>&#9;);</P>

<P>geBoolean GroupList_IsValidId</P>
<P>&#9;(</P>
<P>&#9;  const GroupListType *pList,</P>
<P>&#9;  int GroupId</P>
<P>&#9;);</P>

<P>GroupListType *Group_CreateList</P>
<P>&#9;(</P>
<P>&#9;  void</P>
<P>&#9;);</P>

<P>void Group_DestroyList</P>
<P>&#9;(</P>
<P>&#9;  GroupListType **ppList</P>
<P>&#9;);</P>

<P>int Group_AddToList</P>
<P>&#9;(</P>
<P>&#9;  GroupListType *pList</P>
<P>&#9;);</P>

<P>void Group_RemoveFromList</P>
<P>&#9;(</P>
<P>&#9;  GroupListType *pList,</P>
<P>&#9;  int GroupId,</P>
<P>&#9;  BrushList *BrushList,</P>
<P>&#9;  CEntityArray *Entities</P>
<P>&#9;);</P>

<P>const char * Group_GetNameFromId</P>
<P>&#9;(</P>
<P>&#9;  GroupListType *pList,</P>
<P>&#9;  int GroupId</P>
<P>&#9;);</P>

<P>void Group_SetName</P>
<P>&#9;(</P>
<P>&#9;  GroupListType *pList,</P>
<P>&#9;  int GroupId,</P>
<P>&#9;  const char *pName</P>
<P>&#9;);</P>

<P>int Group_GetIdFromName</P>
<P>&#9;(</P>
<P>&#9;  GroupListType *pList,</P>
<P>&#9;  char const *pName</P>
<P>&#9;);</P>

<P>void Group_AddBrush</P>
<P>&#9;(</P>
<P>&#9;  GroupListType *pList,</P>
<P>&#9;  int GroupId,</P>
<P>&#9;  Brush *pBrush</P>
<P>&#9;);</P>

<P>void Group_RemoveBrush</P>
<P>&#9;(</P>
<P>&#9;  GroupListType *pList,</P>
<P>&#9;  int GroupId,</P>
<P>&#9;  Brush *pBrush</P>
<P>&#9;);</P>

<P>void Group_AddEntity</P>
<P>&#9;(</P>
<P>&#9;  GroupListType *pList,</P>
<P>&#9;  int GroupId,</P>
<P>&#9;  CEntity *pEntity</P>
<P>&#9;);</P>

<P>void Group_RemoveEntity</P>
<P>&#9;(</P>
<P>&#9;  GroupListType *pList,</P>
<P>&#9;  int GroupId,</P>
<P>&#9;  CEntity *pEntity</P>
<P>&#9;);</P>

<P>BOOL Group_IsVisible</P>
<P>&#9;(</P>
<P>&#9;  GroupListType *pList,</P>
<P>&#9;  int GroupId</P>
<P>&#9;);</P>

<P>void Group_Hide</P>
<P>&#9;(</P>
<P>&#9;  GroupListType *pList,</P>
<P>&#9;  int GroupId,</P>
<P>&#9;  BrushList *BrushList,</P>
<P>&#9;  CEntityArray *Entities</P>
<P>&#9;);</P>

<P>void Group_Show</P>
<P>&#9;(</P>
<P>&#9;  GroupListType *pList,</P>
<P>&#9;  int GroupId,</P>
<P>&#9;  BrushList *BrushList,</P>
<P>&#9;  CEntityArray *Entities</P>
<P>&#9;);</P>

<P>BOOL Group_IsLocked</P>
<P>&#9;(</P>
<P>&#9;  GroupListType *pList,</P>
<P>&#9;  int GroupId</P>
<P>&#9;);</P>

<P>void Group_Lock</P>
<P>&#9;(</P>
<P>&#9;  GroupListType *pList,</P>
<P>&#9;  int GroupId,</P>
<P>&#9;  BrushList *BrushList,</P>
<P>&#9;  CEntityArray *Entities</P>
<P>&#9;);</P>

<P>void Group_Unlock</P>
<P>&#9;(</P>
<P>&#9;  GroupListType *pList,</P>
<P>&#9;  int GroupId,</P>
<P>&#9;  BrushList *BrushList,</P>
<P>&#9;  CEntityArray *Entities</P>
<P>&#9;);</P>

<P>// Group iterators</P>
<P>typedef struct tag_Group * GroupIterator;</P>

<P>// returns group ID.  0 if no more groups.</P>
<P>// 0 is not a valid group id!!</P>
<P>int Group_GetFirstId</P>
<P>&#9;(</P>
<P>&#9;  GroupListType const *pList,</P>
<P>&#9;  GroupIterator *gi</P>
<P>&#9;);</P>

<P>int Group_GetNextId</P>
<P>&#9;(</P>
<P>&#9;  GroupListType const *pList,</P>
<P>&#9;  GroupIterator *gi</P>
<P>&#9;);</P>

<P>geBoolean Group_WriteList</P>
<P>&#9;(</P>
<P>&#9;  GroupListType const *pList,</P>
<P>&#9;  FILE *f</P>
<P>&#9;);</P>

<P>geBoolean Group_ReadList</P>
<P>&#9;(</P>
<P>&#9;  GroupListType *pList,</P>
<P>&#9;  int nGroups,&#9;&#9;// so we know how many to read</P>
<P>&#9;  Parse3dt *Parser,</P>
<P>&#9;  int VersionMajor,</P>
<P>&#9;  int VersionMinor,</P>
<P>&#9;  const char **Expected</P>
<P>&#9;);</P>

<P>int Group_GetCount</P>
<P>&#9;(</P>
<P>&#9;  GroupListType const *pList</P>
<P>&#9;);</P>

<P>const GE_RGBA * Group_GetColor</P>
<P>&#9;(</P>
<P>&#9;  const GroupListType *pList,</P>
<P>&#9;  int GroupId</P>
<P>&#9;);</P>

<P>void Group_SetColor</P>
<P>&#9;(</P>
<P>&#9;  GroupListType *pList,</P>
<P>&#9;  int GroupId,</P>
<P>&#9;  const GE_RGBA * pColor</P>
<P>&#9;);</P>

<P>void GroupList_FillCombobox</P>
<P>&#9;( </P>
<P>&#9;&#9;const GroupListType *pList, </P>
<P>&#9;&#9;CComboBox * pCombo, </P>
<P>&#9;&#9;int GroupId </P>
<P>&#9;);</P>
<P>&#9;</P>
<P>Group *GroupList_GetFromId (GroupListType *pList, int GroupId);</P>
<P>Group *Group_Clone (const Group *OldGroup);</P>

<P>void GroupList_Add (GroupListType *Groups, Group *pGroup);</P>
<P>const char *Group_GetName (const Group *pGroup);</P>

<P>void GroupList_Collapse (GroupListType *Groups, int StartingId, BrushList *Brushes, CEntityArray *Entities);</P>
<P>void Group_SetGroupName (Group *pGroup, const char *Name);</P>

<P>#endif&#9;// __GROUP_H</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156790">KeyEditDlg.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  KeyEditDlg.h                                                                        */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined(AFX_KEYEDITDLG_H__E9ABF084_A391_11D1_AC11_0060088D6C58__INCLUDED_)</P>
<P>#define AFX_KEYEDITDLG_H__E9ABF084_A391_11D1_AC11_0060088D6C58__INCLUDED_</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>
<P>// KeyEditDlg.h : header file</P>
<P>//</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CKeyEditDlg dialog</P>
<P>#include "model.h"</P>
<P>#include "resource.h"</P>
<P>#include "entity.h"</P>
<P>#include "EntityTable.h"</P>

<P>class CKeyEditDlg : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;CKeyEditDlg(CWnd* pParent, CString const pKeyS, CString *pValS);   // standard constructor</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CKeyEditDlg)</P>
<P>&#9;enum { IDD = IDD_KEYEDIT };</P>
<P>&#9;CEdit&#9;m_ValueEdit;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CKeyEditDlg)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CKeyEditDlg)</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;virtual void OnOK();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>private:</P>
<P>&#9;CString const Key;</P>
<P>&#9;CString *pValue;</P>
<P>};</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CPointKeyEditDlg dialog</P>

<P>class CPointKeyEditDlg : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;CPointKeyEditDlg(CWnd* pParent, CString const KeyS, CString *pValS);</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CPointKeyEditDlg)</P>
<P>&#9;enum { IDD = IDD_POINTKEYEDIT };</P>
<P>&#9;CEdit&#9;m_ZEdit;</P>
<P>&#9;CEdit&#9;m_YEdit;</P>
<P>&#9;CEdit&#9;m_XEdit;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CPointKeyEditDlg)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CPointKeyEditDlg)</P>
<P>&#9;virtual void OnOK();</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>

<P>private:</P>
<P>&#9;CString const Key;</P>
<P>&#9;CString *pValue;</P>
<P>};</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CStructKeyEditDlg dialog</P>

<P>class CStructKeyEditDlg : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;CStructKeyEditDlg(CWnd* pParent, CEntity const &amp;aEnt, </P>
<P>&#9;  CString const KeyS, CEntityArray *Ents, CString *pValS, </P>
<P>&#9;  const EntityTable *pEntTable);</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CStructKeyEditDlg)</P>
<P>&#9;enum { IDD = IDD_STRUCTEDIT };</P>
<P>&#9;CListBox&#9;m_StructList;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CStructKeyEditDlg)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CStructKeyEditDlg)</P>
<P>&#9;afx_msg void OnDblclkStructlist();</P>
<P>&#9;virtual void OnOK();</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;afx_msg int OnVKeyToItem(UINT nKey, CListBox* pListBox, UINT nIndex);</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>

<P>private:</P>
<P>&#9;CEntity const &amp;Ent;</P>
<P>&#9;CString const Key;</P>
<P>&#9;CEntityArray* mEntityArray;</P>
<P>&#9;CString *pValue;</P>
<P>&#9;const EntityTable *m_pEntityTable;</P>
<P>};</P>
<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CModelKeyEditDlg dialog</P>

<P>class CModelKeyEditDlg : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;CModelKeyEditDlg::CModelKeyEditDlg(CWnd* pParent, ModelList *pModels, CString const KeyS, CString *pValS);</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CModelKeyEditDlg)</P>
<P>&#9;enum { IDD = IDD_MODELEDIT };</P>
<P>&#9;CListBox&#9;m_ModelList;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CModelKeyEditDlg)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CModelKeyEditDlg)</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;afx_msg void OnDblclkModellist();</P>
<P>&#9;virtual void OnOK();</P>
<P>&#9;afx_msg int OnVKeyToItem(UINT nKey, CListBox* pListBox, UINT nIndex);</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>

<P>private:</P>
<P>&#9;ModelList *Models;</P>
<P>&#9;CString const Key;</P>
<P>&#9;CString *pValue;</P>
<P>};</P>
<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CBoolKeyEditDlg dialog</P>

<P>class CBoolKeyEditDlg : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;CBoolKeyEditDlg(CWnd* pParent, CString const KeyS, CString *pValS);</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CBoolKeyEditDlg)</P>
<P>&#9;enum { IDD = IDD_BOOLEDIT };</P>
<P>&#9;CListBox&#9;m_BoolList;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CBoolKeyEditDlg)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CBoolKeyEditDlg)</P>
<P>&#9;afx_msg void OnDblclkBoollist();</P>
<P>&#9;virtual void OnOK();</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;afx_msg int OnVKeyToItem(UINT nKey, CListBox* pListBox, UINT nIndex);</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>private:</P>
<P>&#9;CString const Key;</P>
<P>&#9;CString *pValue;</P>
<P>};</P>
<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>// CColorKeyEditDlg -- Custom ColorDialog...</P>
<P>class CColorKeyEditDlg : public CColorDialog</P>
<P>{</P>
<P>public:</P>
<P>&#9;CColorKeyEditDlg (CWnd* pParent, CString const KeyS, CString *pValS);</P>
<P>&#9;virtual int DoModal();</P>
<P>protected:</P>
<P>&#9;virtual BOOL OnInitDialog ();</P>
<P>private:</P>
<P>&#9;CString const Key;</P>
<P>&#9;CString *pValue;</P>
<P>};</P>

<P>&nbsp;</P>
<P>class CIntKeyEditDlg : public CKeyEditDlg</P>
<P>{</P>
<P>public:</P>
<P>&#9;CIntKeyEditDlg (CWnd* pParent, CString const KeyS, CString *pValS);</P>
<P>protected:</P>
<P>&#9;virtual void OnOK (void);</P>
<P>};</P>

<P>class CFloatKeyEditDlg : public CKeyEditDlg</P>
<P>{</P>
<P>public:</P>
<P>&#9;CFloatKeyEditDlg (CWnd* pParent, CString const KeyS, CString *pValS);</P>
<P>protected:</P>
<P>&#9;virtual void OnOK (void);</P>
<P>};</P>

<P>#endif // !defined(AFX_KEYEDITDLG_H__E9ABF084_A391_11D1_AC11_0060088D6C58__INCLUDED_)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156791">level.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  level.h                                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef LEVEL_H</P>
<P>#define LEVEL_H</P>

<P>#include "entity.h"</P>
<P>#include "brush.h"</P>
<P>#include "model.h"</P>
<P>#include "group.h"</P>
<P>#include "wadfile.h"</P>
<P>#include "compiler.h"</P>
<P>#include "EntView.h"</P>
<P>#include "BrushTemplate.h"</P>
<P>#include "EntityTable.h"</P>

<P>#define LEVEL_VERSION_MAJOR&#9;1</P>
<P>//#define LEVEL_VERSION_MINOR 16&#9;&#9;// version 1.16 06/01/98 - eli - Removed palette dependencies (no more PalPath)</P>
<P>//#define LEVEL_VERSION_MINOR 17&#9;&#9;// version 1.17 06/10/98 - jim - added LightXScale and LightYScale to face</P>
<P>//#define LEVEL_VERSION_MINOR 18&#9;&#9;// version 1.18 06/17/98 - jim - read paths as literal strings</P>
<P>//#define LEVEL_VERSION_MINOR 19&#9;&#9;// version 1.19 06/26/98 - jim - Quote group and model names</P>
<P>//#define LEVEL_VERSION_MINOR 20&#9;&#9;// version 1.20 07/06/98 - jim - Store build and edit information in level file</P>
<P>//#define LEVEL_VERSION_MINOR 21&#9;&#9;// VERSION 1.21 07/14/98 - jim - removed entity RenderOrigin field</P>
<P>//#define LEVEL_VERSION_MINOR 22&#9;&#9;// version 1.22 07/27/98 - jim - Added level options (draw scale and lightmap scale)</P>
<P>//#define LEVEL_VERSION_MINOR 23&#9;&#9;// version 1.23 08/20/98 - jim - Added hull thickness to cylinder template</P>
<P>//#define LEVEL_VERSION_MINOR 24&#9;&#9;// version 1.24 08/26/98 - jim - Quoted texture name in brush and texinfo I/O</P>
<P>//#define LEVEL_VERSION_MINOR 25&#9;&#9;// Version 1.25 10/06/98 - jim - Add support for Gouraud and flat shading faces</P>
<P>//#define LEVEL_VERSION_MINOR 26&#9;&#9;// Version 1.26 10/14/98 - jim - Add sky box rotation axis and speed</P>
<P>//#define LEVEL_VERSION_MINOR 27&#9;&#9;// Version 1.27 10/27/98 - Ken - New face flags and values</P>
<P>//#define LEVEL_VERSION_MINOR 28&#9;&#9;// Version 1.28 10/27/98 - Ken - Sky texture scale</P>
<P>//#define LEVEL_VERSION_MINOR 29&#9;&#9;// Version 1.29 12/09/98 - Jim - Added sheet brushes</P>
<P>//#define LEVEL_VERSION_MINOR 30&#9;&#9;// Version 1.30 12/22/98 - Jim - Added face transparent flag</P>
<P>#define LEVEL_VERSION_MINOR 31&#9;&#9;&#9;// Version 1.31 01/05/99 - jim - Added headers directory</P>

<P>struct SkyFaceTexture</P>
<P>{</P>
<P>&#9;char *TextureName;</P>
<P>&#9;geBoolean Apply;</P>
<P>};</P>

<P>enum</P>
<P>{</P>
<P>&#9;SkyFace_Left&#9;= 0,</P>
<P>&#9;SkyFace_Right&#9;= 1,</P>
<P>&#9;SkyFace_Top&#9;&#9;= 2,</P>
<P>&#9;SkyFace_Bottom&#9;= 3,</P>
<P>&#9;SkyFace_Front&#9;= 4,</P>
<P>&#9;SkyFace_Back&#9;= 5</P>
<P>};</P>

<P>enum</P>
<P>{</P>
<P>&#9;Group_ShowAll,</P>
<P>&#9;Group_ShowVisible,</P>
<P>&#9;Group_ShowCurrent</P>
<P>};</P>

<P>enum {GridMetric = 0, GridTexel = 1};</P>

<P>enum</P>
<P>{</P>
<P>&#9;GridSize_Centimeter&#9;=1,</P>
<P>&#9;GridSize_Decimeter&#9;=10,</P>
<P>&#9;GridSize_Meter&#9;&#9;=100</P>
<P>};</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;geBoolean UseGrid;</P>
<P>&#9;int GridType;</P>

<P>&#9;int SnapType;</P>
<P>&#9;int MetricSnapSize;</P>
<P>&#9;int TexelSnapSize;</P>
<P>&#9;int RotationSnap;</P>
<P>} GridInfo;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;geBoolean IsValid;</P>
<P>&#9;float ZoomFactor;</P>
<P>&#9;geVec3d PitchRollYaw;</P>
<P>&#9;geVec3d CameraPos;</P>
<P>} ViewStateInfo;</P>

<P>typedef struct tag_Level Level;</P>

<P>&nbsp;</P>
<P>Level *Level_Create (const char *DefaultWad, const char *HeadersDir);</P>
<P>Level *Level_CreateFromFile (const char *FileName, const char **ErrMsg, const char *DefaultHeadersDir);</P>
<P>void Level_Destroy (Level **ppLevel);</P>

<P>geBoolean Level_WriteToFile (Level *pLevel, const char *Filename);</P>

<P>&nbsp;</P>
<P>CEntityArray *Level_GetEntities (Level *pLevel);</P>
<P>BrushList *Level_GetBrushes (Level *pLevel);</P>
<P>SkyFaceTexture *Level_GetSkyInfo (Level *pLevel, geVec3d *Axis, geFloat *Speed, geFloat *Scale);</P>

<P>void Level_SetSkyRotationAxis (Level *pLevel, const geVec3d *Axis);</P>
<P>void Level_SetSkyRotationSpeed (Level *pLevel, const geFloat Speed);</P>
<P>void Level_SetSkyTextureScale (Level *pLevel, const geFloat Scale);</P>

<P>ModelInfo_Type *Level_GetModelInfo (Level *pLevel);</P>
<P>Model *Level_GetModel (Level *pLevel, int ModelId);</P>
<P>void Level_AddModel (Level *pLevel, Model *pModel);</P>

<P>GroupListType *Level_GetGroups (Level *pLevel);</P>
<P>Group *Level_GetGroup (Level *pLevel, int GroupId);</P>
<P>void Level_AddGroup (Level *pLevel, Group *pGroup);</P>

<P>const char *Level_GetWadPath (const Level *pLevel);</P>
<P>SizeInfo *Level_GetWadSizeInfos (Level *pLevel);</P>
<P>CWadFile *Level_GetWadFile (Level *pLevel);</P>

<P>uint16 Level_GetDibId (const Level *pLevel, const char *Name);</P>
<P>WadFileEntry *Level_GetWadBitmap (Level *pLevel, const char *Name);</P>

<P>CompileParamsType *Level_GetCompileParams (Level *pLevel);</P>

<P>void Level_SetGroupVisibility (Level *pLevel, int Setting);</P>
<P>int Level_GetGroupVisibility (const Level *pLevel);</P>
<P>EntityViewList *Level_GetEntityVisibilityInfo (Level *pLevel);</P>

<P>void Level_SetWadPath (Level *pLevel, const char *NewWad);</P>
<P>geBoolean Level_LoadWad (Level *pLevel);</P>
<P>void Level_UnloadWad (Level *pLevel);</P>

<P>int Level_AddEntity (Level *pLevel, CEntity &amp;Entity);</P>
<P>void Level_AppendBrush (Level *pLevel, Brush *pBrush);</P>
<P>void Level_RemoveBrush (Level *pLevel, Brush *pBrush);</P>

<P>int Level_EnumEntities (Level *pLevel, void *lParam, EntityList_CB Callback);</P>
<P>int Level_EnumBrushes (Level *pLevel, void *lParam, BrushList_CB Callback);</P>
<P>int Level_EnumAllBrushes (Level *pLevel, void *lParam, BrushList_CB Callback);</P>
<P>int Level_EnumLeafBrushes (Level *pLevel, void *lParam, BrushList_CB Callback);</P>

<P>geBoolean Level_FaceFixupCallback (Brush *pBrush, void *lParam);</P>

<P>void Level_TranslateAll (Level *pLevel, const geVec3d *VecXlate);</P>
<P>void Level_CollapseGroups (Level *pLevel, int StartingGroup);</P>
<P>void Level_CollapseModels (Level *pLevel, int StartingModel);</P>

<P>float Level_GetGridSnapSize (const Level *pLevel);</P>
<P>int Level_GetRotationSnap (const Level *pLevel);</P>
<P>int Level_GetGridType (const Level *pLevel);</P>
<P>geBoolean Level_UseGrid (const Level *pLevel);</P>
<P>GridInfo *Level_GetGridInfo (Level *pLevel);</P>

<P>geBoolean Level_RebuildBspAlways (const Level *pLevel);</P>
<P>void Level_SetBspRebuild (Level *pLevel, geBoolean RebuildFlag);</P>

<P>ViewStateInfo *Level_GetViewStateInfo (Level *pLevel, int iView);</P>

<P>BrushTemplate_Arch *Level_GetArchTemplate (Level *pLevel);</P>
<P>BrushTemplate_Box  *Level_GetBoxTemplate (Level *pLevel);</P>
<P>BrushTemplate_Cone *Level_GetConeTemplate (Level *pLevel);</P>
<P>BrushTemplate_Cylinder *Level_GetCylinderTemplate (Level *pLevel);</P>
<P>BrushTemplate_Spheroid *Level_GetSpheroidTemplate (Level *pLevel);</P>
<P>BrushTemplate_Staircase *Level_GetStaircaseTemplate (Level *pLevel);</P>

<P>geVec3d *Level_GetTemplatePos (Level *pLevel);</P>

<P>float Level_GetDrawScale (const Level *pLevel);</P>
<P>float Level_GetLightmapScale (const Level *pLevel);</P>
<P>void Level_SetDrawScale (Level *pLevel, float Scale);</P>
<P>void Level_SetLightmapScale (Level *pLevel, float Scale);</P>

<P>geBoolean Level_LoadEntityDefs (Level *pLevel, const char *HeadersDir);</P>
<P>const char *Level_GetHeadersDirectory (const Level *pLevel);</P>
<P>const EntityTable *Level_GetEntityDefs (const Level *pLevel);</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156792">LevelOptions.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  LevelOptions.h                                                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined(AFX_LEVELOPTIONS_H__BD140A61_2534_11D2_B69D_004005424FA9__INCLUDED_)</P>
<P>#define AFX_LEVELOPTIONS_H__BD140A61_2534_11D2_B69D_004005424FA9__INCLUDED_</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>
<P>// LevelOptions.h : header file</P>
<P>//</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CLevelOptions dialog</P>

<P>class CLevelOptions : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;CLevelOptions(CWnd* pParent = NULL);   // standard constructor</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CLevelOptions)</P>
<P>&#9;enum { IDD = IDD_LEVELOPTIONS };</P>
<P>&#9;float&#9;m_DrawScale;</P>
<P>&#9;float&#9;m_LightmapScale;</P>
<P>&#9;CString&#9;m_TextureLib;</P>
<P>&#9;bool&#9;m_TxlChanged;</P>
<P>&#9;CString&#9;m_HeadersDir;</P>
<P>&#9;bool&#9;m_HeadersChanged;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CLevelOptions)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CLevelOptions)</P>
<P>&#9;afx_msg void OnBrowsetxl();</P>
<P>&#9;afx_msg void OnChangeEdittxl();</P>
<P>&#9;afx_msg void OnChangeEditheadersdir();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>};</P>

<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>#endif // !defined(AFX_LEVELOPTIONS_H__BD140A61_2534_11D2_B69D_004005424FA9__INCLUDED_)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156793">list.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  list.h                                                                              */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef LIST_H</P>
<P>#define LIST_H</P>

<P>#include "basetype.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>#define LIST_INVALID_NODE NULL</P>

<P>typedef struct tag_List List;</P>
<P>typedef struct tag_ListIterator *ListIterator;</P>

<P>typedef void (*List_DestroyCallback)(void *pData);</P>
<P>typedef void (*List_ForEachCallback)(void *pData, void *lParam);</P>
<P>// SearchCallback returns GE_TRUE if the passed item (pData) meets</P>
<P>// the search criteria.  GE_FALSE otherwise.</P>
<P>typedef geBoolean (*List_SearchCallback)(void *pData, void *lParam);</P>

<P>// Create an empty list and return a pointer to it.</P>
<P>// returns NULL if list couldn't be created</P>
<P>List *List_Create (void);</P>

<P>// Destroy a list object.</P>
<P>// Deallocates all memory allocated to the list, and sets *ppList to NULL.</P>
<P>// If DestroyFcn is not NULL, the function is called for each item in the list.</P>
<P>void List_Destroy (List **ppList, List_DestroyCallback DestroyFcn);</P>

<P>// Return pointer to data stored in list node</P>
<P>void *List_GetData (ListIterator pli);</P>

<P>// Append an item to the list (add to the end)</P>
<P>ListIterator List_Append (List *pList, void *pData);</P>

<P>// Prepend (add to the front) an item to the list</P>
<P>ListIterator List_Prepend (List *pList, void *pData);</P>

<P>// Insert an item after an existing item.</P>
<P>// *pli references the node after which the data should be inserted,</P>
<P>// and must have been returned by one of the Get functions,</P>
<P>// or by List_Search.</P>
<P>ListIterator List_InsertAfter (List *pList, ListIterator pli, void *pData);</P>

<P>// Insert an item before an existing item.</P>
<P>// *pli references the node before which the data should be inserted,</P>
<P>// and must have been returned by one of the Get functions,</P>
<P>ListIterator List_InsertBefore (List *pList, ListIterator pli, void *pData);</P>

<P>// Remove the item referenced by *pli.</P>
<P>// If DestroyFcn is not NULL, it will be called with the address of the</P>
<P>// item's data.</P>
<P>geBoolean List_Remove (List *pList, ListIterator pli, List_DestroyCallback DestroyFcn);</P>

<P>// Get a pointer to the data for the first item in the list.</P>
<P>// ListIterator is initialized by this function</P>
<P>void *List_GetFirst (List *pList, ListIterator *pli);</P>

<P>// Retrieve pointer to next item's data.</P>
<P>// ListIterator must have been previously initialized.</P>
<P>void *List_GetNext (List *pList, ListIterator *pli);</P>

<P>// Get a pointer to the data for the last item in the list.</P>
<P>// ListIterator is initialized by this function.</P>
<P>void *List_GetLast (List *pList, ListIterator *pli);</P>

<P>// Retrieve pointer to the previous item's data.</P>
<P>// ListIterator must have been previously initialized.</P>
<P>void *List_GetPrev (List *pList, ListIterator *pli);</P>

<P>// Return number of items in the list</P>
<P>int List_GetNumItems (const List *pList);</P>

<P>// Call the CallbackFcn for each item in the list.</P>
<P>// CallbackFcn will be called with each list item's data, and lParam.</P>
<P>// lParam is a pointer to a user-defined data block.</P>
<P>int List_ForEach (List *pList, List_ForEachCallback CallbackFcn, void *lParam);</P>

<P>// Search for an item in the list.</P>
<P>// For each item in the list, the SearchFcn is called with the item's data,</P>
<P>// and lParam.</P>
<P>// lParam is a pointer to a user-defined data block.</P>
<P>// Returns GE_TRUE if the search is successful.  If GE_TRUE is returned,</P>
<P>// a pointer to the found item's data is returned in *ppData, and</P>
<P>// *pli is initialized to reference the found item.</P>
<P>// Returns GE_FALSE if the search is not successful.</P>
<P>geBoolean List_Search (List *pList, List_SearchCallback SearchFcn, void *lParam, void **ppData, ListIterator *pli);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156794">MainFrm.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  MainFrm.h                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>

<P>#ifndef&#9;MAINFRM_H</P>
<P>#define MAINFRM_H</P>

<P>#include "brush.h"</P>

<P>class CFusionTabControls;</P>
<P>class CModelDialog;</P>
<P>class CFusionDoc;</P>

<P>class CStyleBar : public CToolBar</P>
<P>{</P>
<P>public:</P>
<P>&#9;CComboBox   m_comboBox;</P>
<P>&#9;CFont       m_font;</P>
<P>};</P>

<P>#define MAX_GRID_STRING&#9;16</P>
<P>#define MAX_SNAP_STRING 16</P>

<P>class CMainFrame : public CMDIFrameWnd</P>
<P>{</P>
<P>&#9;DECLARE_DYNAMIC(CMainFrame)</P>

<P>&#9;char&#9;szGridString[MAX_GRID_STRING] ;</P>
<P>&#9;char&#9;szSnapString[MAX_SNAP_STRING] ;</P>

<P>public:</P>
<P>&#9;BOOL&#9;IsDestroyingApp;</P>
<P>&#9;int&#9;&#9;IsStartingApp;</P>
<P>&#9;const char *GetCurrentTexture();</P>

<P>&#9;//&#9;Clipboard registration format numbers...</P>
<P>&#9;UINT m_CB_FUSION_BRUSH_FORMAT;</P>
<P>&#9;UINT m_CB_FUSION_ENTITY_FORMAT;</P>

<P>&#9;CWnd&#9;&#9;&#9;&#9;*GetTabControlWindow();</P>
<P>&#9;CFusionTabControls&#9;*m_wndTabControls;</P>
<P>&#9;CFont&#9;&#9;&#9;&#9;TabFont ;</P>

<P>//&#9;CModelDialog&#9;&#9;*pModelDialog;</P>

<P>&#9;BOOL CreateTabBar();</P>
<P>&#9;void UpdateGridSize(geFloat GridSize, int SnapOn, int snapto, int gunits, int snapunits);</P>
<P>&#9;CFrameWnd* CreateNewGameViewFrame(CRuntimeClass* pViewClass,  CDocTemplate* pTemplate, CDocument* pDoc, CFrameWnd* pOther);</P>
<P>&#9;void MakeNewView( CRuntimeClass* pViewRuntimeClass);</P>
<P>&#9;void LoadComboBox();</P>
<P>&#9;BOOL CreateStyleBar();</P>
<P>&#9;BOOL CreateGroupBar() ;</P>
<P>&#9;CMainFrame();</P>
<P>&#9;void SelectTab( int nTabIndex ) ;</P>
<P>&#9;CFusionDoc *GetCurrentDoc (void);</P>
<P>&#9;void UpdateActiveDoc (void);</P>
<P>&#9;void UpdateModelsDialog (void);</P>
<P>&#9;void UpdateSelectedModel (int MoveRotate, geVec3d const *pVecDelta);</P>
<P>&#9;CModelDialog *GetModelTab (void);</P>
<P>&#9;void DockControlBarLeftOf(CToolBar* Bar,CToolBar* LeftOf) ;</P>

<P>public:</P>
<P>&#9;CStatusBar  m_wndStatusBar;  // s/b protected, but I'm hacking</P>

<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CMainFrame)</P>
<P>&#9;public:</P>
<P>&#9;virtual BOOL PreCreateWindow(CREATESTRUCT&amp; cs);</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>public:</P>
<P>&#9;virtual ~CMainFrame();</P>
<P>#ifdef _DEBUG</P>
<P>&#9;virtual void AssertValid() const;</P>
<P>&#9;virtual void Dump(CDumpContext&amp; dc) const;</P>
<P>#endif</P>

<P>protected:  // control bar embedded members</P>
<P>&#9;CToolBar    m_wndToolBar;</P>
<P>&#9;CStyleBar&#9;m_wndBrushToolBar;</P>
<P>&#9;CStyleBar&#9;m_wndGroupBar ;</P>

<P>&#9;//&#9;CHANGE!&#9;04/03/97&#9;John Moore</P>
<P>&#9;//&#9;This is the dockable control bar for our tabs...</P>
<P>&#9;CDialogBar m_wndTabBar;</P>
<P>&#9;//&#9;End of CHANGE</P>

<P>// Generated message map functions</P>
<P>protected:</P>
<P>&#9;//{{AFX_MSG(CMainFrame)</P>
<P>&#9;afx_msg int OnCreate(LPCREATESTRUCT lpCreateStruct);</P>
<P>&#9;afx_msg void OnWindowNew();</P>
<P>&#9;afx_msg void OnUpdateSLock(CCmdUI *pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateSelInfo(CCmdUI *pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateWorldPos(CCmdUI *pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateCursorInfo(CCmdUI *pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateGridInfo(CCmdUI *pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateSnapInfo(CCmdUI *pCmdUI);</P>
<P>&#9;afx_msg void OnBrushGroupsMakenewgroup();</P>
<P>&#9;afx_msg void OnModebar();</P>
<P>&#9;afx_msg void OnUpdateModebar(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnGroupbar();</P>
<P>&#9;afx_msg void OnUpdateGroupbar(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnTabbar();</P>
<P>&#9;afx_msg void OnUpdateTabbar(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnClose();</P>
<P>&#9;afx_msg void OnViewLeakFinder();</P>
<P>&#9;afx_msg void OnUpdateViewLeakFinder(CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnSelchangeGroupList ();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>&#9;virtual BOOL OnNotify( WPARAM wParam, LPARAM lParam, LRESULT* pResult );</P>

<P>private:</P>
<P>};</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156795">Model.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  model.h                                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef MODEL_H</P>
<P>#define MODEL_H</P>

<P>#include &lt;stdio.h&gt;</P>
<P>#include "brush.h"</P>
<P>#include "motion.h"</P>
<P>#include "parse3dt.h"</P>
<P>#include "list.h"</P>
<P>#include "selbrushlist.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>typedef List ModelList;</P>
<P>typedef struct tag_Model Model;</P>
<P>typedef ListIterator ModelIterator;</P>

<P>struct ModelInfo_Type</P>
<P>{</P>
<P>&#9;int CurrentModel;</P>
<P>&#9;ModelList *Models;</P>
<P>};</P>

<P>// individual model operations</P>
<P>void Model_CopyStuff</P>
<P>&#9;(</P>
<P>&#9;  Model *pDest,</P>
<P>&#9;  Model const *pSrc</P>
<P>&#9;);</P>

<P>Model *Model_Clone </P>
<P>&#9;(</P>
<P>&#9;  Model *OldModel</P>
<P>&#9;);</P>

<P>geMotion *Model_GetMotion</P>
<P>&#9;(</P>
<P>&#9;  Model const *pModel</P>
<P>&#9;);</P>

<P>gePath *Model_GetPath</P>
<P>&#9;(</P>
<P>&#9;  Model *pModel</P>
<P>&#9;);</P>

<P>void Model_AddKeyframe</P>
<P>&#9;(</P>
<P>&#9;  Model *pModel,</P>
<P>&#9;  geFloat Time,</P>
<P>&#9;  geXForm3d const *pXfm</P>
<P>&#9;);</P>

<P>void Model_DeleteKeyframe</P>
<P>&#9;(</P>
<P>&#9;  Model *pModel,</P>
<P>&#9;  geFloat Time</P>
<P>&#9;);</P>

<P>void Model_AddEvent</P>
<P>&#9;(</P>
<P>&#9;  Model *pModel,</P>
<P>&#9;  geFloat Time,</P>
<P>&#9;  char const *EventString</P>
<P>&#9;);</P>

<P>void Model_DeleteEvent</P>
<P>&#9;(</P>
<P>&#9;  Model *pModel,</P>
<P>&#9;  geFloat Time</P>
<P>&#9;);</P>

<P>geXForm3d const * Model_GetObjectToWorldXfm</P>
<P>&#9;(</P>
<P>&#9;  Model const *pModel</P>
<P>&#9;);</P>

<P>void Model_UpdateOrigin </P>
<P>&#9;(</P>
<P>&#9;  Model *pModel, </P>
<P>&#9;  int MoveRotate, </P>
<P>&#9;  geVec3d const *pVecDelta</P>
<P>&#9;);</P>

<P>void Model_Transform</P>
<P>&#9;(</P>
<P>&#9;  Model const *pModel,</P>
<P>&#9;  const geXForm3d *pXfm,</P>
<P>&#9;  BrushList *pList</P>
<P>&#9;);</P>

<P>void Model_TransformFromTo</P>
<P>&#9;(</P>
<P>&#9;  Model const *pModel, </P>
<P>&#9;  geXForm3d const *pXfmFrom,</P>
<P>&#9;  geXForm3d const *pXfmTo,</P>
<P>&#9;  BrushList *pList</P>
<P>&#9;);</P>

<P>void Model_GetCurrentPos</P>
<P>&#9;(</P>
<P>&#9;  Model const *pModel,</P>
<P>&#9;  geVec3d *pVecPos</P>
<P>&#9;);</P>

<P>int Model_GetId</P>
<P>&#9;(</P>
<P>&#9;  Model const *pModel</P>
<P>&#9;);</P>

<P>const char *Model_GetName</P>
<P>&#9;(</P>
<P>&#9;  Model const *pModel</P>
<P>&#9;);</P>

<P>void Model_SetName</P>
<P>&#9;(</P>
<P>&#9;  Model *pModel,</P>
<P>&#9;  const char *pName</P>
<P>&#9;);</P>

<P>void Model_GetCenter</P>
<P>&#9;(</P>
<P>&#9;  Model const *pModel,</P>
<P>&#9;  BrushList *pList,</P>
<P>&#9;  geVec3d *pVecCenter</P>
<P>&#9;);</P>

<P>void Model_AddBrushes</P>
<P>&#9;(</P>
<P>&#9;  Model *pModel,</P>
<P>&#9;  SelBrushList *pSelList</P>
<P>&#9;);</P>

<P>void Model_RemoveBrushes</P>
<P>&#9;(</P>
<P>&#9;  Model *pModel,</P>
<P>&#9;  SelBrushList *pSelList</P>
<P>&#9;);</P>

<P>// gets and sets for the model draw tree</P>
<P>Node *Model_GetModelTree</P>
<P>&#9;(</P>
<P>&#9;  Model const *pModel</P>
<P>&#9;);</P>

<P>void Model_SetModelTree</P>
<P>&#9;(</P>
<P>&#9;  Model *pModel,</P>
<P>&#9;  Node *n</P>
<P>&#9;);</P>

<P>// determine if all of the model's brushes are selected</P>
<P>geBoolean Model_IsSelected</P>
<P>&#9;(</P>
<P>&#9;  Model const *pModel,</P>
<P>&#9;  SelBrushList *pSelList,</P>
<P>&#9;  BrushList *pList</P>
<P>&#9;);</P>

<P>geBoolean Model_IsLocked</P>
<P>&#9;(</P>
<P>&#9;  Model const *pModel</P>
<P>&#9;);</P>

<P>void Model_SetLock</P>
<P>&#9;(</P>
<P>&#9;  Model *pModel,</P>
<P>&#9;  geBoolean Locked</P>
<P>&#9;);</P>

<P>geBoolean Model_IsRotationLocked</P>
<P>&#9;(</P>
<P>&#9;  Model const *pModel</P>
<P>&#9;);</P>

<P>void Model_SetRotationLock</P>
<P>&#9;(</P>
<P>&#9;  Model *pModel,</P>
<P>&#9;  geBoolean Locked</P>
<P>&#9;);</P>

<P>geBoolean Model_IsAnimating</P>
<P>&#9;(</P>
<P>&#9;  Model const *pModel</P>
<P>&#9;);</P>

<P>void Model_SetAnimating</P>
<P>&#9;(</P>
<P>&#9;  Model *pModel, </P>
<P>&#9;  geBoolean Anim</P>
<P>&#9;);</P>

<P>geFloat Model_GetCurrentKeyTime</P>
<P>&#9;(</P>
<P>&#9;  Model *pModel</P>
<P>&#9;);</P>

<P>geBoolean Model_GetKeyframe</P>
<P>&#9;(</P>
<P>&#9;  Model const *pModel,</P>
<P>&#9;  geFloat Time,</P>
<P>&#9;  geXForm3d *pXfm</P>
<P>&#9;);</P>

<P>&nbsp;</P>
<P>int Model_GetNumKeys</P>
<P>&#9;(</P>
<P>&#9;  Model const *pModel</P>
<P>&#9;);</P>

<P>&nbsp;</P>
<P>void Model_SetCurrentKeyTime</P>
<P>&#9;(</P>
<P>&#9;  Model *pModel,</P>
<P>&#9;  geFloat Key</P>
<P>&#9;);</P>

<P>void Model_Scale</P>
<P>&#9;(</P>
<P>&#9;  Model *pModel,</P>
<P>&#9;  geFloat ScaleFactor</P>
<P>&#9;);</P>

<P>// List operations</P>
<P>ModelList *ModelList_Create</P>
<P>&#9;(</P>
<P>&#9;  void</P>
<P>&#9;);</P>

<P>void ModelList_Destroy</P>
<P>&#9;(</P>
<P>&#9;  ModelList **ppModel</P>
<P>&#9;);</P>

<P>// Creates a model from all of the selected brushes</P>
<P>geBoolean ModelList_Add</P>
<P>&#9;(</P>
<P>&#9;  ModelList *pList,</P>
<P>&#9;  char const *Name,</P>
<P>&#9;  SelBrushList *pSelList</P>
<P>&#9;);</P>

<P>Model *ModelList_AddFromBrushList</P>
<P>&#9;(</P>
<P>&#9;  ModelList *pList,</P>
<P>&#9;  char const *Name,</P>
<P>&#9;  BrushList *pBrushList</P>
<P>&#9;);</P>

<P>void ModelList_AddModel</P>
<P>&#9;(</P>
<P>&#9;  ModelList *pList,</P>
<P>&#9;  Model *pModel</P>
<P>&#9;);</P>

<P>void ModelList_Remove</P>
<P>&#9;(</P>
<P>&#9;  ModelList *pList,</P>
<P>&#9;  int ModelId,</P>
<P>&#9;  BrushList *BrushList</P>
<P>&#9;);</P>

<P>Model *ModelList_FindById</P>
<P>&#9;(</P>
<P>&#9;  ModelList const *pList,</P>
<P>&#9;  int ModelId</P>
<P>&#9;);</P>

<P>Model *ModelList_FindByName</P>
<P>&#9;(</P>
<P>&#9;  ModelList const *pList,</P>
<P>&#9;  char const *Name</P>
<P>&#9;);</P>

<P>int ModelList_GetCount</P>
<P>&#9;(</P>
<P>&#9;  ModelList const *pList</P>
<P>&#9;);</P>

<P>Model *ModelList_GetAnimatingModel</P>
<P>&#9;(</P>
<P>&#9;  ModelList const *pList</P>
<P>&#9;);</P>

<P>geBoolean ModelList_Write</P>
<P>&#9;(</P>
<P>&#9;  ModelList const *pList,</P>
<P>&#9;  FILE *f</P>
<P>&#9;);</P>

<P>geBoolean ModelList_Read</P>
<P>&#9;(</P>
<P>&#9;  ModelList *pList,</P>
<P>&#9;  int nModels,&#9;&#9;// so we know how many to read</P>
<P>&#9;  Parse3dt *Parser,</P>
<P>&#9;  int VersionMajor,</P>
<P>&#9;  int VersionMinor,</P>
<P>&#9;  const char **Expected</P>
<P>&#9;);</P>

<P>geBoolean ModelList_WriteToMap</P>
<P>&#9;(</P>
<P>&#9;  ModelList const *pList,</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  BrushList const *BrushList,</P>
<P>&#9;  geBoolean SuppressHidden,</P>
<P>&#9;  geBoolean VisDetail</P>
<P>&#9;);</P>

<P>void ModelList_ScaleAll</P>
<P>&#9;(</P>
<P>&#9;  ModelList *pList,</P>
<P>&#9;  geFloat ScaleFactor</P>
<P>&#9;);</P>

<P>Model *ModelList_GetFirst</P>
<P>&#9;(</P>
<P>&#9;  ModelList const *pList,</P>
<P>&#9;  ModelIterator *mi</P>
<P>&#9;);</P>

<P>Model *ModelList_GetNext</P>
<P>&#9;(</P>
<P>&#9;  ModelList const *pList,</P>
<P>&#9;  ModelIterator *mi</P>
<P>&#9;);</P>

<P>void ModelList_Collapse </P>
<P>&#9;(</P>
<P>&#9;  ModelList *pList,</P>
<P>&#9;  int StartingModel,</P>
<P>&#9;  BrushList *Brushes</P>
<P>&#9;);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>#endif  // __MODEL_H</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156796">ModelDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  ModelDialog.h                                                                       */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined(AFX_MODELDIALOG_H__37D3AF00_BD78_11D1_B69D_004005424FA9__INCLUDED_)</P>
<P>#define AFX_MODELDIALOG_H__37D3AF00_BD78_11D1_B69D_004005424FA9__INCLUDED_</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>
<P>// ModelDialog.h : header file</P>
<P>//</P>
<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CModelDialog dialog</P>

<P>#include "model.h"</P>
<P>#include "resource.h"</P>

<P>class CFusionTabControls;</P>
<P>class CFusionDoc;</P>

<P>class CModelDialog : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;CModelDialog(CWnd* pParent);</P>
<P>&#9;virtual ~CModelDialog (void);</P>
<P>&#9;void Update (CFusionDoc *pDoc, ModelInfo_Type *aModelInfo);</P>
<P>&#9;void UpdateSelectedModel (int MoveRotate, geVec3d const *pVecDelta);</P>
<P>&#9;void GetTranslation (geVec3d *pVec);</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CModelDialog)</P>
<P>&#9;enum { IDD = IDD_MODELKEY };</P>
<P>&#9;CButton&#9;m_SetModelOrigin;</P>
<P>&#9;CButton&#9;m_CloneModel;</P>
<P>&#9;CButton&#9;m_cbLockOrigin;</P>
<P>&#9;CButton&#9;m_Stop;</P>
<P>&#9;CButton&#9;m_rrStart;</P>
<P>&#9;CButton&#9;m_rrFrame;</P>
<P>&#9;CButton&#9;m_Play;</P>
<P>&#9;CButton&#9;m_ffFrame;</P>
<P>&#9;CButton&#9;m_ffEnd;</P>
<P>&#9;CButton&#9;m_Select;</P>
<P>&#9;CButton&#9;m_RemoveBrushes;</P>
<P>&#9;CButton&#9;m_EditModel;</P>
<P>&#9;CButton&#9;m_EditKey;</P>
<P>&#9;CButton&#9;m_EditEvent;</P>
<P>&#9;CButton&#9;m_Deselect;</P>
<P>&#9;CButton&#9;m_DeleteModel;</P>
<P>&#9;CButton&#9;m_DeleteKey;</P>
<P>&#9;CButton&#9;m_DeleteEvent;</P>
<P>&#9;CButton&#9;m_AddModel;</P>
<P>&#9;CButton&#9;m_AddEvent;</P>
<P>&#9;CButton&#9;m_AddBrushes;</P>
<P>&#9;CButton&#9;m_cbLocked;</P>
<P>&#9;CButton&#9;m_AnimateButton;</P>
<P>&#9;CListBox&#9;m_KeysList;</P>
<P>&#9;CComboBox&#9;m_ModelCombo;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CModelDialog)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;virtual void PostNcDestroy();</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CModelDialog)</P>
<P>&#9;afx_msg void OnAddmodel();</P>
<P>&#9;afx_msg void OnDeletemodel();</P>
<P>&#9;afx_msg void OnAddbrushes();</P>
<P>&#9;afx_msg void OnRemovebrushes();</P>
<P>&#9;afx_msg void OnSelectBrushes();</P>
<P>&#9;afx_msg void OnDeselectBrushes();</P>
<P>&#9;afx_msg void OnSelendokModelcombo();</P>
<P>&#9;virtual void OnOK();</P>
<P>&#9;virtual void OnCancel();</P>
<P>&#9;afx_msg void OnAnimate();</P>
<P>&#9;afx_msg void OnDeletekey();</P>
<P>&#9;afx_msg void OnSelchangeKeyslist();</P>
<P>&#9;afx_msg void OnLocked();</P>
<P>&#9;afx_msg void OnClonemodel();</P>
<P>&#9;afx_msg void OnSetmodelorigin();</P>
<P>&#9;afx_msg void OnLockorigin();</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;afx_msg void OnAddevent();</P>
<P>&#9;afx_msg void OnDeleteevent();</P>
<P>&#9;afx_msg void OnEditevent();</P>
<P>&#9;afx_msg void OnEditkey();</P>
<P>&#9;afx_msg void OnEditmodel();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>private:</P>
<P>&#9;CFusionDoc&#9;&#9;&#9;*&#9;pDoc;</P>
<P>&#9;CFusionTabControls&#9;*&#9;m_pParentCtrl;</P>
<P>&#9;ModelInfo_Type&#9;&#9;*&#9;pModelInfo;</P>
<P>&#9;geXForm3d&#9;&#9;&#9;&#9;XfmDelta;</P>

<P>&#9;void PrivateUpdate (void);</P>
<P>&#9;void UpdateModelsList ();</P>
<P>&#9;void UpdateKeysList (Model *pModel);</P>
<P>&#9;void AddKey (void);</P>
<P>&#9;int GetCurrentLbKey (geFloat *pTime, int *pKeyType);</P>
<P>&#9;void AddTheKey (Model *pModel, geFloat Time, geXForm3d const *pXfm);</P>
<P>&#9;void ReverseDeltas (Model *pModel);</P>
<P>&#9;Model *GetCurrentModel (void);</P>
<P>&#9;void SetListboxKeySelection (geFloat KeyTime);</P>
<P>&#9;void EnableControls (BOOL Enable, Model const *pModel);</P>
<P>&#9;geBoolean SelectedBrushesInOtherModels (int ModelId);</P>
<P>&#9;int GetUniqueModelName (CString const &amp;Caption, CString &amp;ModelName);</P>
<P>&#9;geBoolean StartSettingOrigin (Model *pModel);</P>
<P>&#9;void StopSettingOrigin (Model *pModel);</P>

<P>&#9;geBoolean Animating;</P>
<P>&#9;geBoolean SettingOrigin;</P>
<P>&#9;int EntityIndex;</P>
<P>};</P>

<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>#endif // !defined(AFX_MODELDIALOG_H__37D3AF00_BD78_11D1_B69D_004005424FA9__INCLUDED_)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156797">Mydef.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  Mydef.h                                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef MYDEF_H</P>
<P>#define MYDEF_H</P>

<P>#ifndef US_TYPEDEFS</P>
<P>#define US_TYPEDEFS</P>

<P>typedef unsigned char   U8 ;</P>
<P>typedef unsigned short  U16;</P>
<P>typedef unsigned long   U32;</P>
<P>typedef          char   C8 ;</P>
<P>typedef signed   char   S8 ;</P>
<P>typedef signed   short  S16;</P>
<P>typedef signed   long   S32;</P>

<P>typedef          float&#9;MyFloat;</P>
<P>typedef unsigned char&#9;byte;</P>

<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156798">node.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  node.h                                                                              */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef _NODE_H_</P>
<P>#define _NODE_H_</P>

<P>#include "brush.h"</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>typedef struct NodeTag Node;</P>
<P>typedef void (*Node_CB)(Face *f, const Face *OGFace, int Key, geFloat pdist, int RFlags, void *pVoid);</P>

<P>void&#9;Node_ClearBsp(Node *n);</P>
<P>Node&#9;*Node_AddBrushToTree(Node *tree, Brush *b);</P>
<P>void&#9;Node_EnumTreeFaces(Node *tree, geVec3d *pov, int RFlags, void *pVoid, Node_CB NodeCallBack);</P>
<P>void&#9;Node_InvalidateTreeOGFaces(Node *n);</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156799">Parse3dt.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  Parse3dt.h                                                                          */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef PARSE3DT_H</P>
<P>#define PARSE3DT_H</P>

<P>#include "scanner.h"</P>
<P>#include "vec3d.h"</P>
<P>#include "xform3d.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>typedef struct tag_Parse3dt Parse3dt;</P>

<P>typedef enum</P>
<P>{</P>
<P>&#9;P3TK_ERROR = 0,</P>
<P>&#9;P3TK_IDEN,</P>
<P>&#9;P3TK_LITERALSTRING,</P>
<P>&#9;P3TK_ICON,</P>
<P>&#9;P3TK_FCON,</P>
<P>&#9;P3TK_PATH,</P>
<P>&#9;P3TK_EOF</P>
<P>} Parse3dt_TokenKind;</P>

<P>&nbsp;</P>
<P>struct tag_Parse3dt</P>
<P>{</P>
<P>&#9;Scanner *Scanner;</P>
<P>&#9;Iden_HashTable *HashTable;</P>
<P>};</P>

<P>Parse3dt *Parse3dt_Create (const char *Filename);</P>
<P>void Parse3dt_Destroy (Parse3dt **pParser);</P>
<P>char const *Parse3dt_Error (Parse3dt *Parser, char *fmt, ...);</P>

<P>geBoolean Parse3dt_ScanExpecting (Parse3dt *Parser, Scanner_Token *t, Parse3dt_TokenKind kind);</P>
<P>geBoolean Parse3dt_ScanExpectingText (Parse3dt *Parser, char const *idText);</P>

<P>geBoolean Parse3dt_GetIdentifier (Parse3dt *Parser, char const *Tag, char *idText);</P>
<P>geBoolean Parse3dt_GetPath (Parse3dt *Parser, char const *Tag, char *Path);</P>
<P>geBoolean Parse3dt_GetInt (Parse3dt *Parser, char const *Tag, int *Value);</P>
<P>geBoolean Parse3dt_GetFloat (Parse3dt *Parser, char const *Tag, float *Value);</P>
<P>geBoolean Parse3dt_GetLiteral (Parse3dt *Parser, char const *Tag, char *idText);</P>
<P>geBoolean Parse3dt_GetVec3d (Parse3dt *Parser, char const *Tag, geVec3d *pVec);</P>
<P>geBoolean Parse3dt_GetXForm3d (Parse3dt *Parser, char const *Tag, geXForm3d *pXfm);</P>

<P>geBoolean Parse3dt_GetVersion (Parse3dt *Parser, int *VersionMajor, int *VersionMinor);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156800">PreferencesDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  PreferencesDialog.h                                                                 */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined(AFX_PREFERENCESDIALOG_H__14A85704_E5AB_11D1_A2EA_0000E823F3AA__INCLUDED_)</P>
<P>#define AFX_PREFERENCESDIALOG_H__14A85704_E5AB_11D1_A2EA_0000E823F3AA__INCLUDED_</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>
<P>// PreferencesDialog.h : header file</P>
<P>//</P>
<P>#include "colorbtn.h"</P>

<P>&nbsp;</P>
<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CPreferencesDialog dialog</P>

<P>class CPreferencesDialog : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;CPreferencesDialog(CWnd* pParent = NULL);   // standard constructor</P>
<P>&#9;COLORREF&#9;coBackground ;</P>
<P>&#9;COLORREF&#9;coGrid ;</P>
<P>&#9;COLORREF&#9;coSnapGrid ;</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CPreferencesDialog)</P>
<P>&#9;enum { IDD = IDD_PREFERENCES };</P>
<P>&#9;CColorButton&#9;m_SnapGrid;</P>
<P>&#9;CColorButton&#9;m_Grid;</P>
<P>&#9;CColorButton&#9;m_GridBackground;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CPreferencesDialog)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CPreferencesDialog)</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;virtual void OnOK();</P>
<P>&#9;afx_msg void OnPathprefs();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>};</P>

<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>#endif // !defined(AFX_PREFERENCESDIALOG_H__14A85704_E5AB_11D1_A2EA_0000E823F3AA__INCLUDED_)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156801">prefs.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  prefs.h                                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef PREFS_H</P>
<P>#define PREFS_H</P>

<P>#include "basetype.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>typedef struct tag_PathPrefs PathPrefs;</P>
<P>typedef struct tag_Prefs Prefs;</P>

<P>Prefs *Prefs_Create (void);</P>
<P>Prefs *Prefs_Read (const char *IniFilename);</P>
<P>void Prefs_Destroy (Prefs **ppPrefs);</P>

<P>geBoolean Prefs_Save (const Prefs *pPrefs, const char *IniFilename);</P>

<P>int Prefs_GetBackgroundColor (const Prefs *pPrefs);</P>
<P>geBoolean Prefs_SetBackgroundColor (Prefs *pPrefs, int Color);</P>

<P>int Prefs_GetGridColor (const Prefs *pPrefs);</P>
<P>geBoolean Prefs_SetGridColor (Prefs *pPrefs, int Color);</P>

<P>int Prefs_GetSnapGridColor (const Prefs *pPrefs);</P>
<P>geBoolean Prefs_SetSnapGridColor (Prefs *pPrefs, int Color);</P>

<P>const char *Prefs_GetTxlName (const Prefs *pPrefs);</P>
<P>geBoolean Prefs_SetTxlName (Prefs *pPrefs, const char *NewName);</P>

<P>const char *Prefs_GetTxlSearchPath (const Prefs *pPrefs);</P>
<P>geBoolean Prefs_SetTxlSearchPath (Prefs *pPrefs, const char *NewPath);</P>

<P>const char *Prefs_GetPreviewPath (const Prefs *pPrefs);</P>
<P>geBoolean Prefs_SetPreviewPath (Prefs *pPrefs, const char *NewPath);</P>

<P>const char *Prefs_GetHeadersList (const Prefs *pPrefs);</P>
<P>geBoolean Prefs_SetHeadersList (Prefs *pPrefs, const char *NewList);</P>

<P>const char *Prefs_GetObjectsDir (const Prefs *pPrefs);</P>
<P>geBoolean Prefs_SetObjectsDir (Prefs *pPrefs, const char *NewDir);</P>

<P>const char *Prefs_GetProjectDir (const Prefs *pPrefs);</P>
<P>geBoolean Prefs_SetProjectDir (Prefs *pPrefs, const char *NewDir);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156802">render.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  render.h                                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef _RENDER_H_</P>
<P>#define _RENDER_H_</P>

<P>#include "brush.h"</P>
<P>#include "bitmap.h"</P>
<P>#pragma warning(disable : 4201 4214 4115 4514)</P>
<P>#include &lt;windows.h&gt;</P>
<P>#pragma warning(default : 4201 4214 4115)</P>

<P>enum ViewFlags</P>
<P>{</P>
<P>&#9;DIBDONE&#9;=1,</P>
<P>};</P>

<P>enum ViewTypes</P>
<P>{</P>
<P>&#9;VIEWSOLID&#9;=1,</P>
<P>&#9;VIEWTEXTURE&#9;=2,</P>
<P>&#9;VIEWWIRE&#9;=4,</P>
<P>&#9;VIEWTOP&#9;&#9;=8,</P>
<P>&#9;VIEWFRONT&#9;=16,</P>
<P>&#9;VIEWSIDE&#9;=32</P>
<P>};</P>

<P>enum RenderFlags</P>
<P>{</P>
<P>&#9;NORMAL&#9;=1,</P>
<P>&#9;ZFILL&#9;=2,</P>
<P>&#9;ZBUFFER&#9;=4,</P>
<P>&#9;FLIPPED&#9;=8</P>
<P>};</P>

<P>enum</P>
<P>{</P>
<P>&#9;GRID_TYPE_TEXEL,</P>
<P>&#9;GRID_TYPE_METRIC</P>
<P>};</P>

<P>typedef struct ViewVarsTag ViewVars;</P>
<P>typedef struct GradientsTag Gradients;</P>
<P>typedef struct EdgeAsmTag EdgeAsm;</P>

<P>typedef struct SizeInfoTag</P>
<P>{</P>
<P>&#9;long&#9;TexWidth, TexHeight;</P>
<P>&#9;long&#9;ScreenWidth, ScreenHeight;</P>
<P>&#9;uint8&#9;*TexData, *ScreenData;</P>
<P>&#9;uint32&#9;*ZData;</P>
<P>} SizeInfo;</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>geFloat&#9;Render_GetFineGrid(const ViewVars *v, int GridType);</P>
<P>geFloat Render_ComputeGridDist (const ViewVars *v, int GridType);</P>
<P>SizeInfo&#9;*Render_GetWadSizes(const ViewVars *v);</P>
<P>void&#9;&#9;Render_SetWadSizes(ViewVars *v, SizeInfo *ws);</P>
<P>void&#9;&#9;Render_ZoomChange(ViewVars *v, const geFloat factor);</P>
<P>void&#9;&#9;Render_UpdateGridMetric(ViewVars *v);</P>
<P>void&#9;&#9;Render_UpdateGridTexel(ViewVars *v);</P>
<P>int&#9;&#9;&#9;Render_GetInidx(const ViewVars *v);</P>
<P>void&#9;&#9;Render_ViewToWorld(const ViewVars *v, const int x, const int y, geVec3d *wp);</P>
<P>geFloat&#9;&#9;Render_ViewDeltaToRadians( const ViewVars *v, const float dx ) ;</P>
<P>void&#9;&#9;Render_ViewDeltaToRotation(const ViewVars *v, const float dx, geVec3d *VecRotate);</P>
<P>geVec3d&#9;&#9;Render_GetViewCenter (const ViewVars *v);</P>
<P>void&#9;&#9;Render_GetCameraPos(const ViewVars *v, geVec3d *pos);</P>
<P>void&#9;&#9;Render_SetCameraPos(ViewVars *v, const geVec3d *pos);</P>
<P>void&#9;&#9;Render_MoveCamPos(ViewVars *v, const geVec3d *pos);</P>
<P>void&#9;&#9;Render_MoveCamPosOrtho(ViewVars *v, const geVec3d *pos);</P>
<P>void&#9;&#9;Render_IncrementYaw(ViewVars *v, const geFloat incr);</P>
<P>void&#9;&#9;Render_IncrementPitch(ViewVars *v, const geFloat incr);</P>
<P>geFloat&#9;Render_GetXScreenScale(const ViewVars *v);</P>
<P>void&#9;&#9;Render_SetViewType(ViewVars *v, const int vt);</P>
<P>void&#9;&#9;Render_SetZoom(ViewVars *v, const geFloat vt);</P>
<P>void&#9;&#9;Render_ResetSettings(ViewVars *, long vx, long vy);</P>
<P>void&#9;&#9;Render_ResizeView (ViewVars *v, long vx, long vy);</P>
<P>ViewVars&#9;*Render_AllocViewVars(void);</P>
<P>void&#9;&#9;Render_FreeViewVars(ViewVars *v);</P>
<P>int&#9;&#9;&#9;Render_GetWidth(const ViewVars *v);</P>
<P>int&#9;&#9;&#9;Render_GetHeight(const ViewVars *v);</P>
<P>geFloat&#9;Render_GetZoom(const ViewVars *v);</P>
<P>POINT&#9;&#9;Render_OrthoWorldToView(const ViewVars *v, const geVec3d *wp);</P>
<P>geVec3d&#9;&#9;Render_XFormVert(const ViewVars *v, const geVec3d *pin);</P>
<P>void&#9;&#9;Render_UpdateTexInfoId(Plane *p, uint16 TId);</P>
<P>void&#9;&#9;Render_GetPitchRollYaw( const ViewVars * v, geVec3d * pPRY ) ;</P>
<P>void&#9;&#9;Render_SetPitchRollYaw( ViewVars * v, const geVec3d * pPRY ) ;</P>
<P>geBoolean&#9;Render_UpIsDown (const ViewVars *v);</P>
<P>void&#9;&#9;Render_RenderBrushSelFacesOrtho(ViewVars *v, Brush *b, HDC ViewDC);</P>
<P>void&#9;&#9;Render_RenderBrushSheetFacesOrtho(ViewVars *Cam, Brush *b, HDC ViewDC);</P>
<P>void&#9;&#9;Render_RenderOrthoGrid(ViewVars *Cam, HDC ViewDC);</P>
<P>void&#9;&#9;Render_RenderOrthoGrid2(ViewVars *Cam, HDC ViewDC);</P>
<P>void&#9;&#9;Render_RenderTreeHollowOrtho(ViewVars *Cam, Node *n, HDC ViewDC);</P>
<P>void&#9;&#9;Render_RenderOrthoGridFromSize(ViewVars *v, geFloat Interval, HDC ViewDC);</P>
<P>void&#9;&#9;Render_RenderTree(ViewVars *, Node *n, HDC, int RFlags);</P>
<P>void&#9;&#9;Render_RenderTreeOrtho(ViewVars *, Node *n, HDC);</P>
<P>void&#9;&#9;Render_RenderBrushFacesOrtho( const ViewVars *Cam, Brush *b, HDC);</P>
<P>void&#9;&#9;Render_RenderBrushFaces(ViewVars *Cam, Brush *b, uint32 LineColor);</P>
<P>void&#9;&#9;Render_RenderBrushFacesZBuffer(ViewVars *Cam, Brush *b, uint32 LineColor);</P>
<P>void&#9;&#9;Render_RenderBrushSelFaces(ViewVars *Cam, Brush *b, uint32 LineColor);</P>
<P>void&#9;&#9;Render_BackRotateVector(ViewVars *Cam, geVec3d *pin, geVec3d *pout);</P>
<P>BOOL&#9;&#9;Render_PointInFrustum(ViewVars *Cam, geVec3d *v);</P>
<P>BOOL&#9;&#9;Render_CastRay(Node *n, geVec3d *p1, geVec3d *p2);</P>
<P>int&#9;&#9;&#9;Render_GetViewType(const ViewVars *v);</P>
<P>void&#9;&#9;Render_BlitViewDib(ViewVars *v, HDC ViewDC);</P>
<P>void&#9;&#9;Render_ClearViewDib (ViewVars *Cam);</P>
<P>void&#9;&#9;Render_SetUpFrustum(ViewVars *v);</P>
<P>void&#9;&#9;Render_UpdateViewPos(ViewVars *v);</P>
<P>void&#9;&#9;Render_3DTextureZBuffer(ViewVars *Cam, const geVec3d *pos, const geBitmap *bmap);</P>
<P>void&#9;&#9;Render_3DTextureZBufferOutline(ViewVars *Cam, const geVec3d *pos, const geBitmap *bmap, uint32 OutlineColor);</P>
<P>//void&#9;&#9;Render_RenderBrushHintFacesOrtho(ViewVars *Cam, Brush *b, HDC ViewDC);</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156803">resource.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>//{{NO_DEPENDENCIES}}</P>
<P>// Microsoft Developer Studio generated include file.</P>
<P>// Used by FUSION.rc</P>
<P>//</P>
<P>#define ID_DEFAULTS                     3</P>
<P>#define ID_DEFAULT                      3</P>
<P>#define IDC_BROWSE                      3</P>
<P>#define IDD_ABOUTBOX                    100</P>
<P>#define CG_ID_VIEW_DIALOGBAR            103</P>
<P>#define ID_TOOLBAR_COMBOBOX             104</P>
<P>#define IDC_ARROWENTITY                 104</P>
<P>#define ID_INDICATOR_SLOCK              106</P>
<P>#define ID_INDICATOR_SELINFO            107</P>
<P>#define ID_INDICATOR_WORLDPOS           108</P>
<P>#define ID_INDICATOR_CURSORINFO         109</P>
<P>#define ID_INDICATOR_GRID               110</P>
<P>#define ID_INDICATOR_SNAP               111</P>
<P>#define IDR_MAINFRAME                   128</P>
<P>#define IDR_THREDTYPE                   129</P>
<P>#define IDR_FUSIONTYPE                  129</P>
<P>#define IDR_BRUSHTOOLS                  130</P>
<P>#define IDS_LOAD_WARNING                130</P>
<P>#define IDS_NEWGROUP                    131</P>
<P>#define IDD_BRUSHDIALOG                 132</P>
<P>#define IDS_CREATEGROUPFAILED           132</P>
<P>#define IDD_CREATEBOX                   133</P>
<P>#define IDS_DEFAULTGROUPNAME            133</P>
<P>#define IDB_HOLLOWBOX                   134</P>
<P>#define IDS_NOBLANKMODEL                134</P>
<P>#define IDB_SOLIDBOX                    135</P>
<P>#define IDS_MODELEXISTS                 135</P>
<P>#define IDD_CREATE_SPHEROID             136</P>
<P>#define IDS_CAMERAENTITYNAME            136</P>
<P>#define IDB_SOLIDSPHERE                 137</P>
<P>#define IDS_MAPERROR                    137</P>
<P>#define IDB_HOLLOWSPHERE                138</P>
<P>#define IDD_CREATE_CYL                  139</P>
<P>#define IDB_CYLINDERBIT                 140</P>
<P>#define IDD_GRIDSETTINGSDIALOG          141</P>
<P>#define IDD_BSPMANAGERDIALOG            142</P>
<P>#define IDD_ENTITIES                    143</P>
<P>#define IDD_SELECTCLASSNAME             144</P>
<P>#define IDD_GROUPDIALOG                 145</P>
<P>#define IDD_STAIRCASEDIALOG             146</P>
<P>#define IDR_THRED_PALETTE1              147</P>
<P>#define IDD_GLOBALSETTINGS              148</P>
<P>#define IDD_FACEDIALOG                  149</P>
<P>#define IDD_TABDIALOG                   153</P>
<P>#define IDD_BRUSH_ENTITY_DIALOG         158</P>
<P>#define IDI_CUBE_PRIMITIVE              160</P>
<P>#define IDI_SPHEROID_PRIMITIVE          163</P>
<P>#define IDI_CYLINDER_PRIMITIVE          164</P>
<P>#define IDI_STAIRCASE_PRIMITIVE         165</P>
<P>#define IDI_LIGHT_ENTITY                167</P>
<P>#define IDI_PLAYERSTART_ENTITY          168</P>
<P>#define IDI_ACTOR_ENTITY                175</P>
<P>#define IDI_FLIPVERTICAL                176</P>
<P>#define IDI_FLIPHORIZONTAL              177</P>
<P>#define IDD_CREATE_ARCH                 178</P>
<P>#define IDI_ARCH_PRIMITIVE              179</P>
<P>#define IDD_PROGRESSDIALOG              180</P>
<P>#define IDD_CREATE_CONE                 181</P>
<P>#define IDI_CONE_PRIMITIVE              182</P>
<P>#define IDD_COMPILEDIALOG               183</P>
<P>#define IDC_PANCURSOR                   190</P>
<P>#define IDC_ARROWBRUSH                  191</P>
<P>#define IDC_POINTER                     191</P>
<P>#define IDD_CONSOLE                     191</P>
<P>#define IDD_OBJ_NAME_DLG                192</P>
<P>#define IDI_LIBOBJECT                   192</P>
<P>#define IDD_DIALOG1                     193</P>
<P>#define IDD_PROPEDIT                    194</P>
<P>#define IDD_KEYEDIT                     199</P>
<P>#define IDD_POINTKEYEDIT                204</P>
<P>#define IDD_STRUCTEDIT                  205</P>
<P>#define IDD_MODELEDIT                   206</P>
<P>#define IDD_MODELKEY                    207</P>
<P>#define IDI_PLAY                        208</P>
<P>#define IDI_RRSTART                     209</P>
<P>#define IDI_RRFRAME                     210</P>
<P>#define IDI_STOP                        211</P>
<P>#define IDI_FFFRAME                     212</P>
<P>#define IDI_FFEND                       213</P>
<P>#define IDD_ENTITYVISIBILITY            214</P>
<P>#define IDR_GROUPBAR                    219</P>
<P>#define ID_BRUSH_GROUPS_ADDTOGROUP      220</P>
<P>#define IDD_GROUPBAR                    221</P>
<P>#define IDD_PREFERENCES                 224</P>
<P>#define IDD_SKYDIALOG                   225</P>
<P>#define IDD_EVENTEDIT                   226</P>
<P>#define IDD_PATHSDIALOG                 227</P>
<P>#define IDD_PROJECTOPTIONS              228</P>
<P>#define IDC_EYEDROPPER                  229</P>
<P>#define IDD_LEVELOPTIONS                231</P>
<P>#define IDD_BOOLEDIT                    232</P>
<P>#define IDD_DIALOG2                     233</P>
<P>#define IDC_RESET_ALL                   1000</P>
<P>#define IDC_EDIT1                       1001</P>
<P>#define IDC_EDIT10                      1002</P>
<P>#define IDC_EDIT11                      1003</P>
<P>#define IDC_EDIT12                      1004</P>
<P>#define IDC_BOUNCELIMIT                 1006</P>
<P>#define IDC_FACELIGHTINTENSITY          1006</P>
<P>#define IDC_LIGHTSCALE                  1007</P>
<P>#define IDC_PATCHSIZE                   1008</P>
<P>#define IDC_REFLECTSCALE                1009</P>
<P>#define IDC_MINLIGHT                    1010</P>
<P>#define IDC_RESET_POSITION              1011</P>
<P>#define IDC_RESET_ROTATION              1012</P>
<P>#define IDC_RESET_SCALE                 1013</P>
<P>#define IDC_SOLID                       1014</P>
<P>#define IDC_XShear                      1014</P>
<P>#define IDC_HOLLOW                      1015</P>
<P>#define IDC_YSHEAR                      1015</P>
<P>#define IDC_XSIZE                       1016</P>
<P>#define IDC_ZSHEAR                      1016</P>
<P>#define IDC_RING                        1016</P>
<P>#define IDC_YSIZE                       1017</P>
<P>#define IDC_RESET_SHEAR                 1017</P>
<P>#define IDC_ZSIZE                       1018</P>
<P>#define IDC_THICKNESS                   1019</P>
<P>#define IDC_PICTURE                     1020</P>
<P>#define IDC_VERTSTRIPES                 1021</P>
<P>#define IDC_YSIZE2                      1021</P>
<P>#define IDC_HORSTRIPES                  1022</P>
<P>#define IDC_XSIZE2                      1022</P>
<P>#define IDC_RINGLENGTH                  1022</P>
<P>#define IDC_XSIZEBOT                    1023</P>
<P>#define IDC_ZSIZEBOT                    1024</P>
<P>#define IDC_TOPXSIZE                    1025</P>
<P>#define IDC_TOPXOFF                     1026</P>
<P>#define IDC_TOPZOFF                     1027</P>
<P>#define IDC_BOTXSIZE                    1028</P>
<P>#define IDC_BOTZSIZE                    1029</P>
<P>#define IDC_BOTXOFF                     1030</P>
<P>#define IDC_BOTZOFF                     1031</P>
<P>#define IDC_TOPZSIZE                    1032</P>
<P>#define IDC_GRIDSIZE                    1033</P>
<P>#define IDC_RebuildQuick                1035</P>
<P>#define IDC_REBUILDOPTIMAL              1036</P>
<P>#define IDC_ORIGINAL_POLYS              1037</P>
<P>#define IDC_SPLITS                      1038</P>
<P>#define IDC_TOTAL_POLYS                 1039</P>
<P>#define IDC_NODES                       1040</P>
<P>#define IDC_COPLANAR_NODES              1041</P>
<P>#define IDC_Defaults                    1043</P>
<P>#define IDC_PROGRESS1                   1046</P>
<P>#define IDC_PAIRS                       1047</P>
<P>#define IDC_PROPERTIESLIST              1047</P>
<P>#define IDC_SHOWLIGHTS                  1052</P>
<P>#define IDC_NEWKEYVALUE                 1054</P>
<P>#define IDC_KEY_EDIT                    1055</P>
<P>#define IDC_VALUE_EDIT                  1056</P>
<P>#define IDC_ENTITYLIST                  1057</P>
<P>#define IDC_ASSOCIATE_SELECTEDBRUSH     1058</P>
<P>#define IDC_ASSOCIATEGROUP              1059</P>
<P>#define IDC_NEWENTITY                   1060</P>
<P>#define IDC_NEWLIGHT                    1061</P>
<P>#define IDC_DELETEKEYVALUE              1062</P>
<P>#define IDC_DELETEENTITY                1063</P>
<P>#define IDC_LIST1                       1064</P>
<P>#define IDC_COLOURBUTTON                1065</P>
<P>#define IDC_CHECK1                      1066</P>
<P>#define IDC_BRUSHLIST                   1067</P>
<P>#define IDC_SKYRIGHT                    1067</P>
<P>#define IDC_VISDETAIL                   1067</P>
<P>#define IDC_NAME                        1068</P>
<P>#define IDC_CHECK3                      1068</P>
<P>#define IDC_SKYTOP                      1068</P>
<P>#define IDC_HULLSIZE                    1069</P>
<P>#define IDC_CHECK4                      1069</P>
<P>#define IDC_SKYBOTTOM                   1069</P>
<P>#define IDC_SKYFRONT                    1070</P>
<P>#define IDC_XSIZETOP                    1071</P>
<P>#define IDC_SKYBACK                     1071</P>
<P>#define IDC_ZSIZETOP                    1072</P>
<P>#define IDC_HEIGHT                      1073</P>
<P>#define IDC_WIDTH                       1074</P>
<P>#define IDC_LENGTH                      1075</P>
<P>#define IDC_NUMSLITS                    1075</P>
<P>#define IDC_NUMBEROFSTAIRS              1076</P>
<P>#define IDC_RADIUS                      1076</P>
<P>#define IDC_BUILDWATER                  1077</P>
<P>#define IDC_WALLSIZE                    1077</P>
<P>#define IDC_SIZE16                      1078</P>
<P>#define IDC_SIZE32                      1079</P>
<P>#define IDC_SIZE64                      1080</P>
<P>#define IDC_SIZE8                       1081</P>
<P>#define IDC_SHOWCOARSE                  1082</P>
<P>#define IDC_USEROTSNAP                  1083</P>
<P>#define IDC_SNAP15                      1084</P>
<P>#define IDC_SNAP30                      1085</P>
<P>#define IDC_SNAP45                      1086</P>
<P>#define IDC_SNAP60                      1087</P>
<P>#define IDC_SHOWFINE                    1088</P>
<P>#define IDC_SNAP90                      1088</P>
<P>#define IDC_ROTSNAPDEGREES              1089</P>
<P>#define IDC_BROWSEPAL                   1090</P>
<P>#define IDC_SIZE4                       1090</P>
<P>#define IDC_BROWSEWAD                   1091</P>
<P>#define IDC_PALETTEPATH                 1092</P>
<P>#define IDC_WADPATH                     1093</P>
<P>#define IDC_DISASSOCIATE                1094</P>
<P>#define IDC_AVENGERPATH                 1094</P>
<P>#define IDC_BROWSEAVENGER               1095</P>
<P>#define IDC_SBXOFFSET_UNIT              1097</P>
<P>#define IDC_SBYOFFSET_UNIT              1098</P>
<P>#define IDC_SBXSCALE_UNIT               1099</P>
<P>#define IDC_SBYSCALE_UNIT               1100</P>
<P>#define IDC_SBANGLE_UNIT                1101</P>
<P>#define IDC_SBXOFFSET_INCR              1111</P>
<P>#define IDC_CBSKYBACK                   1111</P>
<P>#define IDC_SBYOFFSET_INCR              1112</P>
<P>#define IDC_CBSKYLEFT                   1112</P>
<P>#define IDC_SBXSCALE_INCR               1113</P>
<P>#define IDC_SBYSCALE_INCR               1114</P>
<P>#define IDC_SBANGLE_INCR                1115</P>
<P>#define IDC_APPLY                       1118</P>
<P>#define IDC_RESTORE                     1119</P>
<P>#define IDC_COLOR                       1119</P>
<P>#define IDC_CANCEL                      1120</P>
<P>#define IDC_GROUP1                      1128</P>
<P>#define IDC_TEXTURELIST                 1132</P>
<P>#define IDD_TEXTUREDIALOG               1132</P>
<P>#define IDC_TEXTUREIMAGE                1133</P>
<P>#define IDC_APPLYTEXTURE                1134</P>
<P>#define IDC_CUBE_PRIMITIVE              1138</P>
<P>#define IDC_SPHEROID_PRIMITIVE          1139</P>
<P>#define IDC_CYLINDER_PRIMITIVE          1140</P>
<P>#define IDC_STAIRCASE_PRIMITIVE         1141</P>
<P>#define IDC_LIGHT_ENTITY                1142</P>
<P>#define IDC_BUILDALWAYS                 1142</P>
<P>#define IDC_ENTITIES                    1142</P>
<P>#define IDC_PLAYERSTART_ENTITY          1143</P>
<P>#define IDC_FLIPVERTICAL                1143</P>
<P>#define IDC_ACTOR_ENTITY                1144</P>
<P>#define IDC_FLIPHORIZONTAL              1144</P>
<P>#define IDC_ARCH_PRIMITIVE              1145</P>
<P>#define IDC_CONE_PRIMITIVE              1146</P>
<P>#define IDC_STARTANGLE                  1148</P>
<P>#define IDC_ENDANGLE                    1149</P>
<P>#define IDC_STATUSPROGRESS1             1149</P>
<P>#define IDC_STATUSPROGRESS2             1150</P>
<P>#define IDC_FUNNEL                      1152</P>
<P>#define IDC_VISNONE                     1157</P>
<P>#define IDC_VISLEVEL1                   1158</P>
<P>#define IDC_VISLEVEL2                   1159</P>
<P>#define IDC_VISLEVEL3                   1160</P>
<P>#define IDC_VISLEVEL4                   1161</P>
<P>#define IDC_RUNGBSP                     1162</P>
<P>#define IDC_RUNLIGHT                    1163</P>
<P>#define IDC_RunAvenger                  1164</P>
<P>#define IDC_VISLEVEL0                   1165</P>
<P>#define IDC_VIS                         1165</P>
<P>#define IDC_TCUT                        1166</P>
<P>#define IDC_CONEDIT                     1167</P>
<P>#define IDC_TSHEET                      1167</P>
<P>#define IDC_STATIC2                     1168</P>
<P>#define IDC_MILLIRADIO                  1170</P>
<P>#define IDC_BRUSHEMPTY                  1170</P>
<P>#define IDC_CENTIRADIO                  1171</P>
<P>#define IDC_METERRADIO                  1172</P>
<P>#define IDC_RADBOOL                     1173</P>
<P>#define IDC_8RADIO                      1173</P>
<P>#define IDC_EXSAMPBOOL                  1174</P>
<P>#define IDC_RADIO5                      1174</P>
<P>#define IDC_16RADIO                     1174</P>
<P>#define IDC_FASTPBOOL                   1175</P>
<P>#define IDC_RADIO6                      1175</P>
<P>#define IDC_32RADIO                     1175</P>
<P>#define IDC_BRUSHHOLLOW                 1175</P>
<P>#define IDC_FULLVIS                     1176</P>
<P>#define IDC_1RADIO                      1176</P>
<P>#define IDC_VISVERBOSE                  1177</P>
<P>#define IDC_2RADIO                      1177</P>
<P>#define IDC_BSPVERBOSE                  1178</P>
<P>#define IDC_ENTITYCOMBO                 1178</P>
<P>#define IDC_4RADIO                      1178</P>
<P>#define IDC_ENTITYVERBOSE               1179</P>
<P>#define IDC_USEMINLIGHT                 1180</P>
<P>#define IDC_TJUNCT                      1181</P>
<P>#define IDC_XEDIT                       1182</P>
<P>#define IDC_YEDIT                       1183</P>
<P>#define IDC_ZEDIT                       1184</P>
<P>#define IDC_STRUCTLIST                  1185</P>
<P>#define IDC_SIZETEXT                    1188</P>
<P>#define IDC_MODELLIST                   1189</P>
<P>#define IDC_BRUSHLOCK                   1190</P>
<P>#define IDC_DESELECTBRUSHES             1191</P>
<P>#define IDC_SELECTBRUSHES               1192</P>
<P>#define IDC_SELECTBRUSHES2              1193</P>
<P>#define IDC_SELECTBRUSHES3              1194</P>
<P>#define IDC_ADDTOCURRENT                1194</P>
<P>#define IDC_SELECTBRUSHES4              1195</P>
<P>#define IDC_REMOVEFROMCURRENT           1195</P>
<P>#define IDC_VISIBLE                     1196</P>
<P>#define IDC_SUPPRESSHIDDEN              1197</P>
<P>#define IDC_SELECTBRUSHES5              1197</P>
<P>#define IDC_CREATENEWGROUP              1197</P>
<P>#define IDC_REMOVEGROUP                 1198</P>
<P>#define IDC_DESELECT                    1199</P>
<P>#define IDC_ADDKEY                      1200</P>
<P>#define IDC_ANIMATE                     1200</P>
<P>#define IDC_ADDEVENT                    1201</P>
<P>#define IDC_DELETEKEY                   1202</P>
<P>#define IDC_SELECT                      1203</P>
<P>#define IDC_DELETEEVENT                 1204</P>
<P>#define IDC_DELETEMODEL                 1205</P>
<P>#define IDC_MODELCOMBO                  1206</P>
<P>#define IDC_KEYSLIST                    1207</P>
<P>#define IDC_ADDMODEL                    1208</P>
<P>#define IDC_ADDBRUSHES                  1209</P>
<P>#define IDC_REMOVEBRUSHES               1210</P>
<P>#define IDC_EDITMODEL                   1211</P>
<P>#define IDC_EDITKEY                     1212</P>
<P>#define IDC_EDITEVENT                   1213</P>
<P>#define IDC_TEXELRADIO                  1214</P>
<P>#define IDC_METRICRADIO                 1215</P>
<P>#define IDC_GROUPCOMBO                  1216</P>
<P>#define IDC_METRICGRID                  1217</P>
<P>#define IDC_LOCKED                      1218</P>
<P>#define IDC_TEXELGRID                   1219</P>
<P>#define IDC_SPINROTSNAPDEGREES          1220</P>
<P>#define IDC_BRUSHSOLID                  1221</P>
<P>#define IDC_SETMODELORIGIN              1222</P>
<P>#define IDC_BRUSHWINDOW                 1223</P>
<P>#define IDC_CLONEMODEL                  1224</P>
<P>#define IDC_BRUSHWAVY                   1225</P>
<P>#define IDC_LOCKORIGIN                  1226</P>
<P>#define IDC_BRUSHFLOCKING               1226</P>
<P>#define IDC_BRUSHCLIP                   1227</P>
<P>#define IDC_BRUSHHINT                   1228</P>
<P>#define IDC_FACEMIRROR                  1229</P>
<P>#define IDC_BRUSHSHEET                  1229</P>
<P>#define IDC_BRUSHAREA                   1230</P>
<P>#define IDC_FACEFULLBRIGHT              1231</P>
<P>#define IDC_PREFSGRIDBG                 1232</P>
<P>#define IDC_FACEGOURAUD                 1232</P>
<P>#define IDC_FACESKY                     1233</P>
<P>#define IDC_PREFSGRIDMAJOR              1234</P>
<P>#define IDC_PREFSGRID                   1234</P>
<P>#define IDC_FACEFLAT                    1234</P>
<P>#define IDC_BRUSHSUBTRACT               1235</P>
<P>#define IDC_SKYLEFT                     1236</P>
<P>#define IDC_FACELIGHT                   1237</P>
<P>#define IDC_PREFSGRIDMINOR              1238</P>
<P>#define IDC_PREFSSNAPGRID               1238</P>
<P>#define IDC_CBSKYRIGHT                  1239</P>
<P>#define IDC_PATHPREFS                   1239</P>
<P>#define IDC_BRUSHTRANSLUCENT            1240</P>
<P>#define IDC_CBSKYTOP                    1241</P>
<P>#define IDC_CBSKYBOTTOM                 1242</P>
<P>#define IDC_CBSKYFRONT                  1243</P>
<P>#define IDC_BRUSHDETAIL                 1244</P>
<P>#define IDC_EVENTTIME                   1245</P>
<P>#define IDC_EVENTSTRING                 1246</P>
<P>#define IDC_ENTITIESONLY                1247</P>
<P>#define IDC_EDITXOFFSET                 1248</P>
<P>#define IDC_EDITYOFFSET                 1249</P>
<P>#define IDC_EDITXSCALE                  1250</P>
<P>#define IDC_EDITYSCALE                  1251</P>
<P>#define IDC_EDITANGLE                   1252</P>
<P>#define IDC_CBXOFFSET                   1253</P>
<P>#define IDC_CBYOFFSET                   1254</P>
<P>#define IDC_CBXSCALE                    1255</P>
<P>#define IDC_CBYSCALE                    1256</P>
<P>#define IDC_CBANGLE                     1257</P>
<P>#define IDC_EDITXLIGHTSCALE             1258</P>
<P>#define IDC_EDITYLIGHTSCALE             1259</P>
<P>#define IDC_SBXLIGHTSCALE_UNIT          1260</P>
<P>#define IDC_SBYLIGHTSCALE_UNIT          1261</P>
<P>#define IDC_SBXLIGHTSCALE_INCR          1262</P>
<P>#define IDC_SBYLIGHTSCALE_INCR          1263</P>
<P>#define IDC_CBXLIGHTSCALE               1264</P>
<P>#define IDC_CBYLIGHTSCALE               1265</P>
<P>#define IDC_EDITTRANSLUCENCY            1266</P>
<P>#define IDC_LBLTRANSLUCENCYVALUE        1269</P>
<P>#define IDC_LBLHULLSIZE                 1270</P>
<P>#define IDC_EDITTXLSEARCH               1271</P>
<P>#define IDC_EDITPREVIEW                 1272</P>
<P>#define IDC_EDITHEADERS                 1273</P>
<P>#define IDC_EDITOBJECTSDIR              1274</P>
<P>#define IDC_EDITTXLIB                   1275</P>
<P>#define IDC_PATHS                       1276</P>
<P>#define IDC_COMPILEOPTIONS              1277</P>
<P>#define IDC_SAVE                        1278</P>
<P>#define IDC_LIGHTMAPSCALE               1279</P>
<P>#define IDC_DRAWSCALE                   1280</P>
<P>#define IDC_BOOLLIST                    1281</P>
<P>#define IDC_EDITTXL                     1281</P>
<P>#define IDC_CONTENTSLIST                1282</P>
<P>#define IDC_EDITHEADERSDIR              1282</P>
<P>#define IDC_MIPMAPBIAS                  1283</P>
<P>#define IDC_TEXTURELOCK                 1284</P>
<P>#define IDC_AXISX                       1285</P>
<P>#define IDC_REFLECTIVITY                1285</P>
<P>#define IDC_AXISY                       1286</P>
<P>#define IDC_FACETRANSLUCENCY            1286</P>
<P>#define IDC_AXISZ                       1287</P>
<P>#define IDC_EDITSPEED                   1288</P>
<P>#define IDC_EDITSCALE                   1289</P>
<P>#define IDC_TRANSPARENT                 1289</P>
<P>#define IDC_BROWSETXL                   1290</P>
<P>#define ID_BRUSH_PRIMITIVES_CUBE        32771</P>
<P>#define ID_BRUSH_PRIMITIVES_PYRAMID     32772</P>
<P>#define ID_BRUSH_PRIMITIVES_SPHEROID    32773</P>
<P>#define ID_BRUSH_PRIMITIVES_CONE        32774</P>
<P>#define ID_BRUSH_PRIMITIVES_CYLINDER    32775</P>
<P>#define ID_BRUSH_SUBTRACTFROMWORLD      32776</P>
<P>#define ID_TOOLS_CAMERA                 32777</P>
<P>#define ID_AXIS_X                       32781</P>
<P>#define ID_AXIS_Y                       32782</P>
<P>#define ID_AXIS_Z                       32783</P>
<P>#define ID_TOOLS_BRUSH_MOVEROTATEBRUSH  32784</P>
<P>#define ID_TOOLS_BRUSH_SCALEBRUSH       32785</P>
<P>#define ID_TOOLS_BRUSH_RESETBRUSH       32786</P>
<P>#define ID_TOOLS_BRUSH_ATTRIBUTES       32791</P>
<P>#define ID_TOOLS_BRUSH_SHOWBRUSH        32792</P>
<P>#define ID_FILE_EXPORT                  32799</P>
<P>#define ID_TOOLS_USEGRID                32801</P>
<P>#define ID_TOOLS_GRIDSETTINGS           32802</P>
<P>#define ID_VIEW_3DWIREFRAME             32806</P>
<P>#define ID_VIEW_SOLIDRENDER             32807</P>
<P>#define ID_VIEW_TOPVIEW                 32808</P>
<P>#define ID_VIEW_SIDEVIEW                32809</P>
<P>#define ID_VIEW_FRONTVIEW               32810</P>
<P>#define ID_VIEW_TEXTUREVIEW             32811</P>
<P>#define ID_VIEW_4VIEWS                  32812</P>
<P>#define ID_TOOLS_BSPMANAGER             32813</P>
<P>#define ID_TOOLS_BRUSH_SHEARBRUSH       32814</P>
<P>#define ID_ENTITIES_PLACELIGHT          32817</P>
<P>#define ID_ENTITIES_EDITOR              32819</P>
<P>#define ID_TOOLS_ENTITY                 32823</P>
<P>#define ID_ENTITIES_SHOW                32824</P>
<P>#define ID_GROUPS_MAKENEWGROUP          32833</P>
<P>#define ID_BRUSH_GROUPEDITOR            32834</P>
<P>#define ID_VIEW_SHOW_ALLGROUPS          32836</P>
<P>#define ID_VIEW_SHOW_VISIBLEGROUPS      32837</P>
<P>#define ID_VIEW_SHOW_CURRENTGROUP       32838</P>
<P>#define ID_TOOLS_BRUSH_ADJUSTMENTMODE   32849</P>
<P>#define ID_BRUSH_SELECTED_DELETE        32850</P>
<P>#define ID_BRUSH_SELECTED_COPYTOCURRENT 32853</P>
<P>#define ID_BRUSH_PRIMITIVES_STAIRCASE   32856</P>
<P>#define ID_TOOLS_BRUSH_ROTATE90         32857</P>
<P>#define ID_VIEW_TEXTUREBROWSER          32859</P>
<P>#define ID_FILE_MAPSETTINGS             32860</P>
<P>#define ID_GBSPNOWATER                  32861</P>
<P>#define ID_ENTITIES_COPYCURRENT         32862</P>
<P>#define ID_ENTITIES_HIDENONLIGHTS       32865</P>
<P>#define ID_TOOLS_BRUSH_MOVESELECTEDBRUSHES 32867</P>
<P>#define ID_TOOLS_GROUPMOVEMENTMODE      32870</P>
<P>#define ID_BRUSH_REMOVESELECTEDFROMGROUP 32871</P>
<P>#define ID_TOOLS_FACE_ATTRIBUTES        32876</P>
<P>#define ID_TOOLS_FACE_RESETFACE         32881</P>
<P>#define ID_TOOLS_FACE_ADJUSTMENTMODE    32883</P>
<P>#define ID_CONSTRAINHOLLOWS             32885</P>
<P>#define ID_GENERALSELECT                32886</P>
<P>#define ID_VIEW_OLDVIEW                 32890</P>
<P>#define ID_TOOLS_RESET_THING            32890</P>
<P>#define ID_THING_ATTRIBUTES             32891</P>
<P>#define ID_TOOLS_CARVE                  32892</P>
<P>#define IDC_VIEWTOOLBAR_COMBOBOX        32893</P>
<P>#define ID_VIEW_3DVIEWBARS              32903</P>
<P>#define ID_TOOLS_BRUSH_SHOWASSOCIATEDENTITY 32905</P>
<P>#define ID_ENTITY_CENTERINBRUSH         32906</P>
<P>#define ID_CENTERTHING                  32908</P>
<P>#define ID_COMPILE                      32909</P>
<P>#define ID_TOOLS_TEMPLATE               32910</P>
<P>#define ID_MODEL_NEW                    32913</P>
<P>#define ID_NEW_LIB_OBJECT               32914</P>
<P>#define ID_MODEL_DELETE                 32915</P>
<P>#define ID_MODEL_ADDSELECTEDBRUSHES     32916</P>
<P>#define ID_MODEL_REMOVESELECTEDBRUSHES  32917</P>
<P>#define ID_MODEL_SELECTBRUSHES          32918</P>
<P>#define ID_MODEL_DESELECTMODELBRUSHES   32919</P>
<P>#define ID_MODEL_SELECTMODEL            32920</P>
<P>#define ID_ENTITYVISIBILITY             32922</P>
<P>#define ID_VIEW_NEW                     32923</P>
<P>#define ID_BRUSHINFORMATION             32924</P>
<P>#define IDC_PLACE_OBJECT_BUTTON         32925</P>
<P>#define IDS_CANT_OPEN_FILE              32925</P>
<P>#define IDC_OBJECT_SELECT_COMBO         32926</P>
<P>#define IDC_ENTITY_COMBO                32927</P>
<P>#define IDM_MODEBAR                     32928</P>
<P>#define IDM_TABBAR                      32929</P>
<P>#define IDM_GROUPBAR                    32933</P>
<P>#define ID_GROUPBAR_SEP                 32934</P>
<P>#define ID_GROUPBAR_COM                 32935</P>
<P>#define ID_ADDTOCURRENT                 32937</P>
<P>#define ID_REMOVEFROMCURRENT            32938</P>
<P>#define ID_DESELECTALL                  32941</P>
<P>#define ID_SELECTALL                    32942</P>
<P>#define IDM_REBUILD_BSP                 32943</P>
<P>#define ID_VIEWLEAKFINDER               32944</P>
<P>#define IDM_PREFERENCES                 32945</P>
<P>#define ID_VIEW_SHOW_CLIP               32947</P>
<P>#define ID_VIEW_SHOW_HINT               32949</P>
<P>#define ID_VIEW_SHOW_DETAIL             32950</P>
<P>#define ID_TOOLS_SCALEWORLD             32951</P>
<P>#define ID_TOOLS_BRUSH_MAKENEWEST       32952</P>
<P>#define ID_TOOLS_SETTEXTURESCALE        32953</P>
<P>#define ID_EDIT_DELETE                  32954</P>
<P>#define ID_BRUSH_PRIMITIVES_ARCH        32955</P>
<P>#define ID_TOOLS_NEXTBRUSH              32956</P>
<P>#define ID_TOOLS_PREVBRUSH              32957</P>
<P>#define ID_TOOLS_ADDTOLEVEL             32958</P>
<P>#define ID_TOOLS_TOGGLEADJUSTMODE       32959</P>
<P>#define ID_VIEW_ZOOMIN                  32960</P>
<P>#define ID_VIEW_ZOOMOUT                 32961</P>
<P>#define ID_FILE_IMPORT                  32962</P>
<P>#define ID_HELP_HOWDOI                  32965</P>
<P>#define IDM_LEVELOPTIONS                32966</P>
<P>#define IDS_CANTLOADTXL                 32967</P>
<P>#define IDS_ENTITY_WARNING              32968</P>

<P>// Next default values for new objects</P>
<P>// </P>
<P>#ifdef APSTUDIO_INVOKED</P>
<P>#ifndef APSTUDIO_READONLY_SYMBOLS</P>
<P>#define _APS_3D_CONTROLS                     1</P>
<P>#define _APS_NEXT_RESOURCE_VALUE        234</P>
<P>#define _APS_NEXT_COMMAND_VALUE         32967</P>
<P>#define _APS_NEXT_CONTROL_VALUE         1291</P>
<P>#define _APS_NEXT_SYMED_VALUE           112</P>
<P>#endif</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156804">SelBrushList.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  SelBrushList.h                                                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef SELBRUSHLIST_H</P>
<P>#define SELBRUSHLIST_H</P>

<P>#include "brush.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>typedef struct tag_SelBrushList SelBrushList;</P>
<P>typedef geBoolean (*SelBrushList_Callback)(Brush *pBrush, void *lParam);</P>

<P>SelBrushList *SelBrushList_Create (void);</P>
<P>void SelBrushList_Destroy (SelBrushList **ppList);</P>

<P>geBoolean SelBrushList_Add (SelBrushList *pList, Brush *pBrush);</P>
<P>geBoolean SelBrushList_Find (SelBrushList *pList, const Brush *pBrush);</P>
<P>geBoolean SelBrushList_Remove (SelBrushList *pList, Brush *pBrush);</P>
<P>void SelBrushList_RemoveAll (SelBrushList *pList);</P>
<P>int SelBrushList_GetSize (SelBrushList *pList);</P>
<P>Brush *SelBrushList_GetBrush (SelBrushList *pList, int BrushIndex);</P>

<P>void SelBrushList_Enum (SelBrushList *pList, SelBrushList_Callback Callback, void *lParam);</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156805">SelFaceList.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  SelFaceList.h                                                                       */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef SELFACELIST_H</P>
<P>#define SELFACELIST_H</P>

<P>#include "face.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>typedef struct tag_SelFaceList SelFaceList;</P>
<P>typedef geBoolean (*SelFaceList_Callback)(Face *pFace, void *lParam);</P>

<P>&nbsp;</P>
<P>SelFaceList *SelFaceList_Create (void);</P>
<P>void SelFaceList_Destroy (SelFaceList **ppList);</P>

<P>geBoolean SelFaceList_Add (SelFaceList *pList, Face *pFace);</P>
<P>geBoolean SelFaceList_Remove (SelFaceList *pList, Face *pFace);</P>
<P>void SelFaceList_RemoveAll (SelFaceList *pList);</P>
<P>int SelFaceList_GetSize (SelFaceList *pList);</P>
<P>Face *SelFaceList_GetFace (SelFaceList *pList, int FaceIndex);</P>

<P>void SelFaceList_Enum (SelFaceList *pList, SelFaceList_Callback Callback, void *lParam);</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156806">SkyDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  SkyDialog.h                                                                         */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined(AFX_SKYDIALOG_H__EDBC3365_E973_11D1_B69D_004005424FA9__INCLUDED_)</P>
<P>#define AFX_SKYDIALOG_H__EDBC3365_E973_11D1_B69D_004005424FA9__INCLUDED_</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>
<P>// SkyDialog.h : header file</P>
<P>//</P>

<P>#include "resource.h"</P>
<P>class CFusionDoc;</P>
<P>class CFusionTabControls;</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CSkyDialog dialog</P>

<P>class CSkyDialog : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;CSkyDialog(CFusionTabControls *pParent, CFusionDoc *pDoc);</P>
<P>&#9;~CSkyDialog (void);</P>
<P>&#9;void Update (CFusionDoc *pDoc);</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CSkyDialog)</P>
<P>&#9;enum { IDD = IDD_SKYDIALOG };</P>
<P>&#9;CEdit&#9;m_EditSpeed;</P>
<P>&#9;CButton&#9;m_SkyTop;</P>
<P>&#9;CButton&#9;m_SkyRight;</P>
<P>&#9;CButton&#9;m_SkyLeft;</P>
<P>&#9;CButton&#9;m_SkyFront;</P>
<P>&#9;CButton&#9;m_SkyBottom;</P>
<P>&#9;CButton&#9;m_SkyBack;</P>
<P>&#9;CComboBox&#9;m_SkyTopCombo;</P>
<P>&#9;CComboBox&#9;m_SkyRightCombo;</P>
<P>&#9;CComboBox&#9;m_SkyLeftCombo;</P>
<P>&#9;CComboBox&#9;m_SkyFrontCombo;</P>
<P>&#9;CComboBox&#9;m_SkyBottomCombo;</P>
<P>&#9;CComboBox&#9;m_SkyBackCombo;</P>
<P>&#9;int&#9;&#9;m_RotationAxis;</P>
<P>&#9;float&#9;m_RotationSpeed;</P>
<P>&#9;float&#9;m_TextureScale;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CSkyDialog)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CSkyDialog)</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;afx_msg void OnSkyback();</P>
<P>&#9;afx_msg void OnSkybottom();</P>
<P>&#9;afx_msg void OnSkyfront();</P>
<P>&#9;afx_msg void OnSkyleft();</P>
<P>&#9;afx_msg void OnSkyright();</P>
<P>&#9;afx_msg void OnSkytop();</P>
<P>&#9;afx_msg void OnSelchangeCbskyleft();</P>
<P>&#9;afx_msg void OnSelchangeCbskyright();</P>
<P>&#9;afx_msg void OnSelchangeCbskytop();</P>
<P>&#9;afx_msg void OnSelchangeCbskybottom();</P>
<P>&#9;afx_msg void OnSelchangeCbskyfront();</P>
<P>&#9;afx_msg void OnSelchangeCbskyback();</P>
<P>&#9;afx_msg void OnKillfocusEditspeed();</P>
<P>&#9;afx_msg void OnAxisButton();</P>
<P>&#9;afx_msg void OnKillfocusEditscale();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>private:</P>
<P>&#9;CFusionTabControls&#9;*m_pParentCtrl;</P>
<P>&#9;CFusionDoc&#9;&#9;&#9;*m_pFusionDoc;</P>
<P>&#9;void UpdateSkyFaceUI (CButton &amp;FaceButton, CComboBox &amp;FaceCombo, int FaceIndex);</P>
<P>&#9;void UpdateSkyFaceInfo (CButton &amp;FaceButton, CComboBox &amp;FaceCombo, int FaceIndex);</P>
<P>&#9;void SetSkyFaceUI (CButton &amp;FaceButton, CComboBox &amp;FaceCombo, int FaceIndex);</P>
<P>&#9;int FaceNameInCombo (char const *TextureName, CComboBox &amp;FaceCombo);</P>
<P>&#9;void UpdateFaceTextureName (CComboBox &amp;FaceCombo, int FaceIndex);</P>
<P>};</P>

<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>#endif // !defined(AFX_SKYDIALOG_H__EDBC3365_E973_11D1_B69D_004005424FA9__INCLUDED_)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156807">stack.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  stack.h                                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef STACK_H</P>
<P>#define STACK_H</P>

<P>#include "list.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>typedef struct tag_Stack Stack;</P>
<P>typedef List_DestroyCallback Stack_DestroyCallback;</P>

<P>// Create a stack that is initially empty.</P>
<P>// On success, returns a pointer to the stack.</P>
<P>// Returns NULL on error.</P>
<P>Stack *Stack_Create (void);</P>

<P>// Destroy a stack.</P>
<P>void Stack_Destroy (Stack **ppStack, Stack_DestroyCallback DestroyCallback);</P>

<P>// Push an item onto the stack.</P>
<P>//Returns GE_TRUE if the item was pushed successfully.</P>
<P>geBoolean Stack_Push (Stack *pStack, void *Data);</P>

<P>// Pop an item from the stack.</P>
<P>// It is an error to try to</P>
<P>// pop when there's nothing on the stack.</P>
<P>void *Stack_Pop (Stack *pStack);</P>

<P>// returns GE_TRUE if the stack is empty (has no items)</P>
<P>geBoolean Stack_IsEmpty (const Stack *pStack);</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156808">StdAfx.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  StdAfx.h                                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>// stdafx.h : include file for standard system include files,</P>
<P>//  or project specific include files that are used frequently, but</P>
<P>//      are changed infrequently</P>
<P>//</P>
<P>#ifndef STDAFX_H</P>
<P>#define STDAFX_H</P>

<P>#define VC_EXTRALEAN&#9;&#9;// Exclude rarely-used stuff from Windows headers</P>

<P>/*</P>
<P>  Disable warnings for Windows headers</P>
<P>&#9;4201 - nonstandard extension used : nameless struct/union</P>
<P>&#9;4214 - nonstandard extension used : bit field types other than int</P>
<P>&#9;4115 - 'type' : named type definition in parentheses</P>
<P>&#9;4514 - unreferenced inline/local function has been removed</P>
<P>*/</P>
<P>#pragma warning(disable : 4201 4214 4115 4514)</P>

<P>#include &lt;afxwin.h&gt;         // MFC core and standard components</P>
<P>#include &lt;afxext.h&gt;         // MFC extensions</P>
<P>#include &lt;afxtempl.h&gt;&#9;&#9;// Support for templates.</P>

<P>#ifndef _AFX_NO_AFXCMN_SUPPORT</P>
<P>#include &lt;afxcmn.h&gt;&#9;&#9;&#9;// MFC support for Windows 95 Common Controls</P>
<P>#endif // _AFX_NO_AFXCMN_SUPPORT</P>

<P>// re-enable warnings except 4514</P>
<P>#pragma warning(default : 4201 4214 4115)</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156809">TextureDialog.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  TextureDialog.h                                                                     */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>

<P>#ifndef TEXTUREDIALOG_H</P>
<P>#define TEXTUREDIALOG_H</P>

<P>#include "resource.h"</P>
<P>#include "brush.h"</P>

<P>class CFusionDoc;</P>
<P>class CFusionTabControls;</P>

<P>// CTextureDialog dialog</P>

<P>class CTextureDialog : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;const char&#9;*GetCurrentTexture();</P>
<P>&#9;void Update( CFusionDoc* pDoc );</P>
<P>&#9;CTextureDialog(CFusionTabControls* pParent = NULL, CFusionDoc* pDoc = NULL);   // standard constructor</P>
<P>&#9;void&#9;SelectTexture(int SelNum);</P>
<P>&#9;~CTextureDialog();</P>
<P>&#9;bool m_TxlibChanged;</P>
<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CTextureDialog)</P>
<P>&#9;enum { IDD = IDD_TEXTUREDIALOG };</P>
<P>&#9;CStatic&#9;m_SizeText;</P>
<P>&#9;CButton&#9;m_ApplyButton;</P>
<P>&#9;CStatic&#9;m_TextureImage;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CTextureDialog)</P>
<P>&#9;public:</P>
<P>&#9;virtual BOOL OnCmdMsg(UINT nID, int nCode, void* pExtra, AFX_CMDHANDLERINFO* pHandlerInfo);</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;virtual&#9;BOOL OnInitDialog();</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CTextureDialog)</P>
<P>&#9;afx_msg void OnApply();</P>
<P>&#9;afx_msg void OnSelchangetexturelist();</P>
<P>&#9;afx_msg void OnPaint();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>private:</P>
<P>&#9;void UpdateSize();</P>
<P>&#9;void ClearTextureImage(CDC *pDC);</P>
<P>&#9;RECT m_TextureRect;</P>
<P>&#9;void UpdateBitmap();</P>
<P>&#9;void FillTheListbox();</P>

<P>&#9;CString&#9;&#9;&#9;&#9;m_CurrentTexture;</P>
<P>&#9;CListBox&#9;&#9;&#9;m_TextureList;</P>
<P>&#9;CFusionTabControls&#9;*m_pParentCtrl;</P>
<P>&#9;CFusionDoc&#9;&#9;&#9;*m_pDoc;</P>
<P>};</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156810">typeio.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  typeio.h                                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef __TypeIO_H</P>
<P>#define __TypeIO_H</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>#include &lt;stdio.h&gt;</P>
<P>#include "basetype.h"</P>
<P>#include "XForm3d.h"</P>

<P>// writing</P>

<P>/*</P>
<P>  Write an untyped block.  Why?  Because we may want to compress</P>
<P>  blocks at some point.</P>
<P>*/</P>
<P>geBoolean TypeIO_WriteBlock</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  void const *b,</P>
<P>&#9;  int cb</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_WriteInt</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  int i</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_WriteIntText</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  int i</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_WriteUint</P>
<P>    (</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  unsigned int i</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_WriteUintText</P>
<P>    (</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  unsigned int i</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_WriteFloat</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  float n</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_WriteFloatText</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  float n</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_WriteString</P>
<P>    (</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  char const *s</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_WriteStringText</P>
<P>    (</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  char const *s</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_WriteVec3d</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  geVec3d const *v</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_WriteVec3dText</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  geVec3d const *v</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_WriteXFormm3d</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  geXForm3d const *pXfm</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_WriteXForm3dText</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  geXForm3d const *pXfm</P>
<P>&#9;);</P>

<P>// reading</P>
<P>geBoolean TypeIO_ReadBlock</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  void *b,</P>
<P>&#9;  int BytesToRead</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_ReadInt</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  int * pi</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_ReadIntText</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  int * pi</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_ReadUint</P>
<P>    (</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  unsigned int * pu</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_ReadUintText</P>
<P>    (</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  unsigned int * pu</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_ReadFloat</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  float * pf</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_ReadFloatText</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  float * pf</P>
<P>&#9;);</P>

<P>/*</P>
<P>  Reads a string into the passed buffer.</P>
<P>  Buffer must be large enough to hold the string.</P>
<P>  cb must be &gt; 0.</P>

<P>  On success, the buffer will be filled with the nul-terminated string,</P>
<P>  and *pRequired will contain the length of the string, including the</P>
<P>  nul terminator (i.e. strlen (s) + 1).</P>

<P>  If a read error occurs, the routine will return GE_FALSE </P>
<P>  and *pRequired will be set to 0.</P>

<P>  If the buffer is too small (i.e. cb &lt;= length) then the function</P>
<P>  returns GE_FALSE and *pRequired contains the required buffer size.</P>
<P>  In this case the file position is not moved.</P>

<P>  If the length is negative, then the function returns GE_FALSE and</P>
<P>  *pRequired contains the length.</P>
<P>*/</P>
<P>geBoolean TypeIO_ReadString</P>
<P>    (</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  char *s,</P>
<P>&#9;  int cb,</P>
<P>&#9;  int * pRequired</P>
<P>&#9;);</P>
<P>/*</P>
<P>  Reads a string into the passed buffer.</P>
<P>  Buffer must be large enough to hold the string.</P>
<P>  cb must be &gt; 0.</P>

<P>  On success, the buffer will be filled with the nul-terminated string,</P>
<P>  and *pRequired will contain the length of the string.</P>

<P>  If a read error occurs, the routine will return GE_FALSE </P>
<P>  and *pRequired will be set to 0.</P>

<P>  If the buffer is too small (i.e. cb &lt;= length) then the function</P>
<P>  returns GE_FALSE, the buffer is filled to capacity (cb-1 characters),</P>
<P>  *pRequired contains the amount of text remaining.</P>
<P>*/</P>
<P>geBoolean TypeIO_ReadStringText</P>
<P>    (</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  char *s,</P>
<P>&#9;  int cb,</P>
<P>&#9;  int *pRequired</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_ReadVec3d</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  geVec3d *pv</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_ReadVec3dText</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  geVec3d *pv</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_ReadXFormm3d</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  geXForm3d *pXfm</P>
<P>&#9;);</P>

<P>geBoolean TypeIO_ReadXForm3dText</P>
<P>&#9;(</P>
<P>&#9;  FILE *f,</P>
<P>&#9;  geXForm3d *pXfm</P>
<P>&#9;);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156811">Undostack.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  undostack.h                                                                         */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef UNDOSTACK_H</P>
<P>#define UNDOSTACK_H</P>

<P>#include "entity.h"</P>
<P>#include "brush.h"</P>
<P>#include "array.h"</P>

<P>typedef struct tag_UndoStack UndoStack;</P>
<P>typedef struct tag_UndoStackEntry UndoStackEntry;</P>

<P>typedef enum</P>
<P>{</P>
<P>&#9;UNDO_MOVE,</P>
<P>&#9;UNDO_ROTATE,</P>
<P>&#9;UNDO_SCALE,</P>
<P>&#9;UNDO_SHEAR,</P>
<P>&#9;UNDO_DELETE,</P>
<P>&#9;UNDO_ADD</P>
<P>} UndoEntryType;</P>

<P>&nbsp;</P>
<P>typedef struct</P>
<P>{</P>
<P>&#9;Array&#9;&#9;&#9;*BrushArray;</P>
<P>&#9;Array&#9;&#9;&#9;*EntityArray;</P>
<P>&#9;geVec3d&#9;&#9;&#9;MoveDelta;</P>
<P>} UndoMoveEntry;</P>

<P>&nbsp;</P>
<P>UndoStack *UndoStack_Create (void);</P>
<P>void UndoStack_Destroy (UndoStack **ppUndo);</P>

<P>geBoolean UndoStack_IsEmpty (const UndoStack *pUndo);</P>

<P>geBoolean UndoStack_Move (UndoStack *pUndo, const geVec3d *MoveVec, int nBrushes, Brush **pBrushes, CEntityArray *Entities);</P>

<P>UndoStackEntry *UndoStack_Pop (UndoStack *pUndo);</P>

<P>&nbsp;</P>
<P>void UndoStackEntry_Destroy (UndoStackEntry **ppEntry);</P>

<P>UndoEntryType UndoStackEntry_GetType (const UndoStackEntry *pEntry);</P>

<P>UndoMoveEntry *UndoStackEntry_GetMoveInfo (UndoStackEntry *pEntry);</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156812">units.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  units.h                                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef UNITS_H</P>
<P>#define UNITS_H</P>

<P>#include "basetype.h"</P>
<P>#include &lt;math.h&gt;</P>
<P> </P>
<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#ifndef M_PI</P>
<P>&#9;#define&#9;M_PI&#9;&#9;((geFloat)3.14159265358979323846f)</P>
<P>#endif</P>

<P>#define PI2&#9;&#9;&#9;&#9;((geFloat)(2.0f * (M_PI)))</P>
<P>#define ONE_OVER_2PI&#9;((geFloat)(1.0f/(PI2)))</P>

<P>// some useful unit conversions</P>
<P>#define UNITS_DEGREES_TO_RADIANS(d) Units_DegreesToRadians(d)</P>
<P>#define UNITS_RADIANS_TO_DEGREES(r) Units_RadiansToDegrees(r)</P>

<P>#define Units_DegreesToRadians(d) ((((geFloat)(d)) * M_PI) / 180.0f)</P>
<P>#define Units_RadiansToDegrees(r) ((((geFloat)(r)) * 180.0f) / M_PI)</P>

<P>// Engine &lt;--&gt; Centimeter conversions</P>
<P>#define Units_CentimetersToEngine(c) (((float)(c)) / 2.54f)</P>
<P>#define Units_EngineToCentimeters(i) (((float)(i)) * 2.54f)</P>

<P>&nbsp;</P>
<P>#define CENTIMETERS_TO_ENGINE(c) Units_CentimetersToEngine(c)</P>
<P>#define ENGINE_TO_CENTIMETERS(e) Units_EngineToCentimeters(e)</P>

<P>#define Units_Round(n) ((int)Units_FRound((n)))</P>
<P>#define Units_Trunc(n) ((int)(n))</P>
<P>#define Units_FRound(n)&#9;((geFloat)floor((n)+0.5f))</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>#endif</P>
<P> </P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454156813">util.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  util.h                                                                              */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef UTIL_H</P>
<P>#define UTIL_H</P>

<P>#include "basetype.h"</P>
<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>char *Util_Strdup (const char *s);</P>
<P>geBoolean Util_SetString (char **ppString, const char *NewValue);</P>

<P>geBoolean Util_IsValidInt (char const *Text, int *TheVal);</P>
<P>geBoolean Util_IsValidFloat (const char *Text, float *TheFloat);</P>
<P>unsigned int Util_htoi (const char *s);</P>
<P>void Util_QuoteString (const char *s, char *d);</P>

<P>// Obtain the integer at the end of a string.</P>
<P>// For example, foo123 will return the value 123 in *pVal</P>
<P>// pLastChar points to the last non-numeric character (possibly end of string)</P>
<P>geBoolean Util_GetEndStringValue( const char *psz, int32 *pVal, int32 *pLastChar) ;</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156814">WadFile.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  WadFile.h                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Author:       Jim Mischel, Ken Baird, Jeff Lomax                                    */</P>
<P>/*  Description:  Genesis world editor header file                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef WADFILE_H</P>
<P>#define WADFILE_H</P>

<P>#include "bitmap.h"</P>

<P>struct WadFileEntry</P>
<P>{</P>
<P>&#9;geBitmap *bmp;</P>
<P>&#9;char *Name;</P>
<P>&#9;int Width, Height;</P>
<P>&#9;geBitmap *LockedBitmap;</P>
<P>&#9;void *BitsPtr;</P>
<P>};</P>

<P>class CWadFile </P>
<P>{</P>
<P>public:</P>
<P>&#9;int&#9;&#9;&#9;mBitmapCount;</P>

<P>&#9;WadFileEntry *mBitmaps;</P>

<P>&#9;CWadFile();</P>
<P>&#9;~CWadFile();</P>
<P>&#9;geBoolean Setup(const char *Filename);</P>
<P>private:</P>
<P>&#9;DestroyBitmapArray ();</P>
<P>};</P>
<P>#endif</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<I><P><A NAME="_Toc454156815">OpenSource/Tools/Fusion2/TypeParser Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>The TypeParser subdirectory contains code used to parse incoming data files to create the visible 3D level.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156816">Cparser.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  CPARSER.H                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Eli Boling                                                                  */</P>
<P>/*  Description: Interface for partial parser for C code.                               */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef&#9;CPARSER_H</P>
<P>#define&#9;CPARSER_H</P>

<P>#ifdef&#9;__cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>#include&#9;"iden.h"</P>
<P>#include&#9;"type.h"</P>

<P>typedef&#9;struct&#9;CParser&#9;CParser;</P>

<P>typedef&#9;struct&#9;StructIter</P>
<P>{</P>
<P>&#9;Type *&#9;siType;</P>
<P>}&#9;StructIter;</P>

<P>typedef struct&#9;FieldIter</P>
<P>{</P>
<P>&#9;TypeField *&#9;fiCurrentField;</P>
<P>}&#9;FieldIter;</P>

<P>/*</P>
<P>&#9;Error function gets a filename, line number and error string.</P>
<P>*/</P>
<P>typedef&#9;void&#9;(*CParser_ErrFunc)(const char *, int, const char *);</P>

<P>CParser *&#9;CParser_Init(CParser_ErrFunc errFunc);</P>
<P>void&#9;&#9;CParser_Destroy (CParser *p);</P>
<P>void&#9;&#9;CParser_ParseFile(CParser *p, const char *file);</P>
<P>void&#9;&#9;CParser_ParseMemoryBlock (CParser *p, const char *Block, int length, const char *Name);</P>

<P>const char *CParser_GetTypeName(const Type *tp);</P>
<P>Type *&#9;&#9;CParser_GetFirstStruct(StructIter *iter, CParser *p);</P>
<P>Type *&#9;&#9;CParser_GetNextStruct(StructIter *iter);</P>
<P>int&#9;&#9;&#9;CParser_GetFirstField(FieldIter *fi,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;  Type *tp,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;  TopType *tt,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;  const char **tpName,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;  const char **fieldName,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;  int *published,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;  const char **defaultValue);</P>
<P>int&#9;&#9;&#9;CParser_GetNextField(FieldIter *fi,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9; TopType *tt,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9; const char **tpName,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9; const char **fieldName,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9; int *published,</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9; const char **defaultValue);</P>

<P>int&#9;CParser_WriteTypesToMap(CParser *p, FILE *fp);</P>
<P>const char *&#9;CParser_GetOriginFieldName(Type *tp);</P>
<P>const char *&#9;CParser_GetRadiusFieldName(Type *tp);</P>
<P>const char *&#9;CParser_GetAnglesFieldName(Type *tp);</P>
<P>const char *&#9;CParser_GetArcFieldName(Type *tp);</P>
<P>const char *&#9;CParser_GetTypeFieldDocumentation(CParser *p, Type *tp, const char *FieldName);</P>
<P>int&#9;&#9;&#9;&#9;CParser_GetContentsCount(const CParser *p);</P>
<P>void&#9;&#9;&#9;CParser_GetContentsNameAndValue(const CParser *p, int idx, const char **Name, unsigned long *Value);</P>
<P>const char *&#9;CParser_GetIconName (Type *pType);</P>

<P>#ifdef&#9;__cplusplus</P>
<P>}</P>
<P>#endif</P>
<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156817">cscanner.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  CSCANNER.C                                                                          */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Eli Boling                                                                  */</P>
<P>/*  Description: C Language specific scanner tokens                                     */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef&#9;CSCANNER_H</P>
<P>#define&#9;CSCANNER_H</P>

<P>#include "scanner.h"</P>

<P>typedef&#9;enum</P>
<P>{</P>
<P>&#9;TK_ERROR = 0,&#9;&#9;/* Must be zero */</P>

<P>&#9;TK_EOF,</P>
<P>&#9;TK_IDEN,</P>
<P>&#9;TK_ICON,</P>
<P>&#9;TK_FCON,</P>

<P>&#9;TK_SEMI,</P>

<P>&#9;TK_LPAREN,</P>
<P>&#9;TK_RPAREN,</P>
<P>&#9;TK_LBRACE,</P>
<P>&#9;TK_RBRACE,</P>

<P>&#9;TK_SHARP,</P>

<P>&#9;TK_PLUS,</P>
<P>&#9;TK_HYPHEN,</P>
<P>&#9;TK_STAR,</P>
<P>&#9;TK_SLASH,</P>
<P>&#9;TK_BACKSLASH,</P>

<P>&#9;TK_TILDE,</P>
<P>&#9;TK_BANG,</P>
<P>&#9;TK_MOD,</P>
<P>&#9;TK_HAT,</P>
<P>&#9;TK_AMPER,</P>
<P>&#9;TK_EQUAL,</P>
<P>&#9;TK_DOT,</P>
<P>&#9;TK_COMMA,</P>

<P>&#9;TK_LITERALSTRING,</P>

<P>}&#9;CScanner_TokenKind;</P>

<P>Scanner *CScanner_Create (void);</P>

<P>&nbsp;</P>
<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454156818">Hash.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  HASH.H                                                                              */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Eli Boling                                                                  */</P>
<P>/*  Description: Simple character hashing function                                      */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef&#9;HASH_H</P>
<P>#define&#9;HASH_H</P>

<P>unsigned int&#9;hash(const char *, int);</P>
<P>void&#9;&#9;&#9;Hash_Init(void);</P>

<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156819">iden.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  IDEN.H                                                                              */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Eli Boling                                                                  */</P>
<P>/*  Description: Text identifier hash table interface                                   */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef IDEN_H</P>
<P>#define&#9;IDEN_H</P>

<P>#ifdef __cplusplus</P>
<P>    extern "C" {</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>typedef struct&#9;Iden_HashTable Iden_HashTable;</P>

<P>typedef struct&#9;Iden</P>
<P>{</P>
<P>&#9;char *&#9;&#9;&#9;idenSpelling;</P>
<P>&#9;int&#9;&#9;&#9;&#9;idenKeyword;</P>
<P>&#9;struct&#9;Iden *&#9;idenNext;</P>
<P>}&#9;Iden;</P>

<P>Iden_HashTable *&#9;Iden_CreateHashTable(void);</P>
<P>Iden *&#9;&#9;Iden_HashName(Iden_HashTable *ht, const char *s, int len);</P>
<P>void&#9;Iden_DestroyHashTable(Iden_HashTable *ht);</P>

<P>#ifdef __cplusplus</P>
<P>    }</P>
<P>#endif</P>

<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156820">scanner.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  SCANNER.H                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Eli Boling                                                                  */</P>
<P>/*  Description: Generic token scanner interface                                        */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef SCANNER_H</P>
<P>#define SCANNER_H</P>

<P>#include "basetype.h"</P>
<P>#include "iden.h"</P>
<P>#include &lt;stdio.h&gt;</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>typedef struct&#9;Scanner&#9;Scanner;</P>

<P>#define SCANNER_MAXDATA&#9;1024</P>

<P>typedef struct&#9;Scanner_Token</P>
<P>{</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;tKind;</P>
<P>&#9;char&#9;&#9;&#9;&#9;tTokenData[SCANNER_MAXDATA];</P>
<P>&#9;char *&#9;&#9;&#9;&#9;tTokenDataPtr;</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;tICONValue;</P>
<P>&#9;float&#9;&#9;&#9;&#9;tFCONValue;</P>
<P>&#9;Iden *&#9;&#9;&#9;&#9;tIden;</P>
<P>}&#9;Scanner_Token;</P>

<P>&nbsp;</P>
<P>typedef&#9;int&#9;(*ScannerAction)(Scanner *s, Scanner_Token *t, int c);</P>

<P>typedef struct Scanner_CharMap</P>
<P>{</P>
<P>&#9;struct Scanner_CharMap *&#9;cmNextState;</P>
<P>&#9;ScannerAction&#9;&#9;cmAction;</P>
<P>&#9;unsigned short&#9;&#9;cmFlags;</P>
<P>}&#9;Scanner_CharMap;</P>

<P>#define&#9;F_CM_PUSHBACKCHAR&#9;0x0001</P>
<P>#define&#9;F_CM_BUMPLINENUMBER&#9;0x0002</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;cmiStartChar;</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;cmiEndChar;</P>
<P>&#9;struct Scanner_CharMap *&#9;cmiNextState;</P>
<P>&#9;ScannerAction&#9;&#9;cmiAction;</P>
<P>&#9;unsigned short&#9;&#9;cmiFlags;</P>
<P>}&#9;Scanner_CharMapInitializer;</P>

<P>&nbsp;</P>
<P>enum</P>
<P>{</P>
<P>&#9;SCANNER_FILE_TEXT,</P>
<P>&#9;SCANNER_FILE_BINARY</P>
<P>};</P>

<P>#define&#9;STATEINITIALIZER(s,i) { (s), (i), sizeof(i) / sizeof((i)[0]) }</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;Scanner_CharMap *&#9;&#9;&#9;&#9;siMap;</P>
<P>&#9;Scanner_CharMapInitializer *&#9;siMapInitializer;</P>
<P>&#9;int&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;siInitializerCount;</P>
<P>} Scanner_StateInitializer;</P>

<P>Scanner *&#9;&#9;Scanner_Create </P>
<P>&#9;(</P>
<P>&#9;  const Scanner_StateInitializer StateInitializers[], </P>
<P>&#9;  int nInitializers,</P>
<P>&#9;  const Scanner_CharMap *NullState</P>
<P>&#9;);</P>

<P>geBoolean&#9;&#9;Scanner_InitMemory (Scanner *pScanner, const char * DataBlock, int length, const char * Name, Iden_HashTable *ht);</P>
<P>geBoolean&#9;&#9;Scanner_InitFile (Scanner *pScanner, const char *file, int FileType, Iden_HashTable *ht);</P>
<P>geBoolean&#9;&#9;Scanner_Uninit (Scanner *pScanner);</P>
<P>void&#9;&#9;&#9;Scanner_Destroy(Scanner *s);</P>
<P>void&#9;&#9;&#9;Scanner_Scan(Scanner *s, Scanner_Token *t);</P>
<P>Iden *&#9;&#9;&#9;Scanner_GenerateIdentifier (Scanner *s, const char *str, int len);</P>

<P>int&#9;&#9;&#9;&#9;Scanner_GetLineNo(const Scanner *s);</P>
<P>const char *&#9;Scanner_GetFileName(const Scanner *s);</P>
<P>FILE *&#9;&#9;&#9;Scanner_GetFile (Scanner *s);</P>
<P>int&#9;&#9;&#9;&#9;Scanner_GetOffset (Scanner *s);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156821">symtab.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  SYMTAB.H                                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Eli Boling                                                                  */</P>
<P>/*  Description: Symbol table for C Language parser support                             */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef&#9;SYMTAB_H</P>
<P>#define&#9;SYMTAB_H</P>

<P>#ifdef __cplusplus</P>
<P>    extern "C" {</P>
<P>#endif</P>

<P>typedef struct&#9;SymTab_Symbol</P>
<P>{</P>
<P>&#9;Iden *&#9;&#9;&#9;&#9;&#9;symName;</P>
<P>&#9;Type *&#9;&#9;&#9;&#9;&#9;symType;</P>
<P>&#9;struct SymTab_Symbol *&#9;symNext;</P>
<P>&#9;struct SymTab_Symbol *&#9;symScopeNext;</P>
<P>}&#9;SymTab_Symbol;</P>

<P>typedef&#9;struct&#9;SymTab_Scope</P>
<P>{</P>
<P>&#9;struct SymTab_Scope *&#9;scpOuter;</P>
<P>&#9;struct SymTab_Scope *&#9;scpInner;</P>
<P>&#9;struct SymTab_Scope *&#9;scpNext;</P>
<P>&#9;unsigned short&#9;&#9;&#9;scpFlags;</P>
<P>&#9;SymTab_Symbol *&#9;&#9;&#9;scpSymbols;</P>
<P>}&#9;SymTab_Scope;</P>

<P>#define&#9;F_SCP_TAG&#9;0x0001</P>
<P>#define&#9;F_SCP_FILE&#9;0x0002</P>

<P>typedef&#9;struct&#9;SymTab</P>
<P>{</P>
<P>&#9;SymTab_Symbol *&#9;&#9;&#9;stSymbols;</P>
<P>}&#9;SymTab;</P>

<P>SymTab *&#9;SymTab_Create(void);</P>

<P>void&#9;&#9;SymTab_Destroy(SymTab *st);</P>

<P>SymTab_Symbol * SymTab_CreateSymbol(</P>
<P>&#9;SymTab *&#9;&#9;st,</P>
<P>&#9;SymTab_Scope *&#9;scp,</P>
<P>&#9;Iden *&#9;&#9;&#9;name,</P>
<P>&#9;Type *&#9;&#9;&#9;tp);</P>

<P>SymTab_Scope *&#9;SymTab_CreateScope(</P>
<P>&#9;SymTab *&#9;&#9;st,</P>
<P>&#9;SymTab_Scope *&#9;parent,</P>
<P>&#9;unsigned short&#9;scpFlags);</P>

<P>SymTab_Symbol *&#9;SymTab_FindSymbolInScope(SymTab *st, SymTab_Scope *scp, Iden *name);</P>

<P>void SymTab_DestroyScope(SymTab_Scope *scp);</P>

<P>#ifdef __cplusplus</P>
<P>    }</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>

<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454156822">type.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  TYPE.H                                                                              */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Eli Boling                                                                  */</P>
<P>/*  Description: C Language typedef parsing support                                     */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef&#9;TYPE_H</P>
<P>#define&#9;TYPE_H</P>

<P>typedef&#9;enum</P>
<P>{</P>
<P>&#9;T_INT,</P>
<P>&#9;T_FLOAT,</P>
<P>&#9;T_COLOR,</P>
<P>&#9;T_POINT,</P>
<P>&#9;T_STRING,</P>
<P>&#9;T_MODEL,</P>
<P>&#9;T_PTR,</P>
<P>&#9;T_STRUCT,</P>
<P>&#9;T_VOID,</P>
<P>&#9;T_BOOLEAN,</P>
<P>}&#9;TopType;</P>

<P>typedef&#9;struct&#9;Type&#9;&#9;&#9;Type;</P>
<P>typedef struct&#9;SymTab_Symbol&#9;SymTab_Symbol;</P>
<P>typedef struct&#9;SymTab_Scope&#9;SymTab_Scope;</P>

<P>typedef&#9;struct&#9;TypeField</P>
<P>{</P>
<P>&#9;SymTab_Symbol *&#9;&#9;tfSymbol;</P>
<P>&#9;unsigned short&#9;&#9;tfFlags;</P>
<P>&#9;char *&#9;&#9;&#9;&#9;tfDefaultValue;</P>
<P>&#9;char *&#9;&#9;&#9;&#9;tfDocumentation;</P>
<P>&#9;struct TypeField *&#9;tfNext;</P>
<P>&#9;struct TypeField *&#9;tfPrev;</P>
<P>}&#9;TypeField;</P>

<P>#define&#9;F_TF_PUBLISHED&#9;0x0001</P>

<P>typedef&#9;struct&#9;Type</P>
<P>{</P>
<P>&#9;TopType&#9;&#9;&#9;tpTopType;</P>
<P>&#9;union</P>
<P>&#9;{</P>
<P>&#9;&#9;struct</P>
<P>&#9;&#9;{</P>
<P>&#9;&#9;&#9;TypeField *&#9;&#9;tpFields;</P>
<P>&#9;&#9;&#9;char *&#9;&#9;&#9;tpIcon;</P>
<P>&#9;&#9;}&#9;s;</P>
<P>&#9;&#9;struct</P>
<P>&#9;&#9;{</P>
<P>&#9;&#9;&#9;Type *&#9;&#9;&#9;tpPtrType;</P>
<P>&#9;&#9;}&#9;p;</P>
<P>&#9;}&#9;t;</P>
<P>&#9;Iden *&#9;&#9;&#9;tpName;</P>
<P>&#9;TypeField *&#9;&#9;tpOriginField;</P>
<P>&#9;TypeField *&#9;&#9;tpAnglesField;</P>
<P>&#9;TypeField *&#9;&#9;tpArcField;</P>
<P>&#9;TypeField *&#9;&#9;tpRadiusField;</P>
<P>&#9;SymTab_Scope *&#9;tpScope;</P>
<P>&#9;unsigned short&#9;tpFlags;</P>
<P>&#9;struct Type *&#9;tpNext;</P>
<P>&#9;struct Type *&#9;tpPrev;</P>
<P>}&#9;Type;</P>

<P>#define&#9;F_TYPE_READONLY&#9;&#9;0x0001</P>

<P>Type *&#9;&#9;Type_InitTypeList(Iden_HashTable *ht);</P>
<P>Type *&#9;&#9;Type_CreateType(Type **tl, Iden *name, unsigned short flags);</P>
<P>Type *&#9;&#9;Type_CreatePtrType(Type **tl, Type *tp);</P>
<P>Type *&#9;&#9;Type_FindTypeByName(Type *tl, const Iden *name);</P>
<P>void&#9;&#9;Type_DestroyTypeList(Type *tp);</P>
<P>void&#9;&#9;Type_AddTypeField(Type *tp, SymTab_Symbol *fieldName, unsigned short flags);</P>
<P>TypeField *&#9;Type_GetTypeField(Type *tp, const Iden *name);</P>

<P>void&#9;&#9;Type_DumpType(const Type *tp, int descend);</P>

<P>const char *Type_GetName(Type *tp);</P>
<P>const char *Type_GetFieldDocumentation(Type *tp, const Iden *FieldName);</P>

<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<I><P><A NAME="_Toc454156823">OpenSource/Tools/GBSPLib Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>GBSPLib is the library which handles the creation and partitioning of the visible portions of the world.  Using Binary Space partitioning it divides the world into visible segments which the users character traverses.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156824">Brush2.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  Brush2.h                                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: John Pollard                                                                */</P>
<P>/*  Description: Code to load, csg, and split brushes, etc...                           */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef BRUSH2_H</P>
<P>#define BRUSH2_H</P>

<P>#include &lt;Windows.h&gt;</P>

<P>#include "Mathlib.h"</P>
<P>#include "Map.h"</P>

<P>#include "VFile.h"</P>
<P>#include "Vec3d.h"</P>

<P>#define&#9;NUM_BRUSH_DEFAULT_SIDES&#9;&#9;6</P>

<P>typedef struct MAP_Brush</P>
<P>{</P>
<P>&#9;MAP_Brush&#9;*Next;</P>

<P>&#9;int32&#9;&#9;EntityNum;</P>
<P>&#9;int32&#9;&#9;BrushNum;</P>

<P>&#9;int32&#9;&#9;Contents;</P>

<P>&#9;geVec3d&#9;&#9;Mins, Maxs;</P>

<P>&#9;int32&#9;&#9;OrderID;</P>

<P>&#9;int32&#9;&#9;NumSides;</P>
<P>&#9;GBSP_Side&#9;OriginalSides[NUM_BRUSH_DEFAULT_SIDES];&#9;</P>
<P>} MAP_Brush;</P>

<P>typedef struct GBSP_Brush</P>
<P>{</P>
<P>&#9;GBSP_Brush&#9;*Next;</P>
<P>&#9;geVec3d&#9;&#9;Mins, Maxs;</P>
<P>&#9;int32&#9;&#9;Side, TestSide;&#9;</P>
<P>&#9;MAP_Brush&#9;*Original;</P>
<P>&#9;int32&#9;&#9;NumSides;</P>
<P>&#9;GBSP_Side&#9;Sides[NUM_BRUSH_DEFAULT_SIDES];</P>

<P>} GBSP_Brush;</P>

<P>extern int32&#9;gTotalBrushes;</P>
<P>extern int32&#9;gPeekBrushes;</P>

<P>MAP_Brush&#9;*AllocMapBrush(int32 NumSides);</P>
<P>void&#9;&#9;FreeMapBrush(MAP_Brush *Brush);</P>
<P>MAP_Brush&#9;*LoadMapBrush(geVFile *VFile);</P>
<P>void&#9;&#9;FreeMapBrushList(MAP_Brush *Brushes);</P>
<P>geBoolean&#9;MakeMapBrushPolys(MAP_Brush *ob);</P>
<P>MAP_Brush&#9;*CopyMapBrush(MAP_Brush *Brush);</P>
<P>int32&#9;&#9;CountMapBrushList(MAP_Brush *Brushes);</P>

<P>GBSP_Brush&#9;*AllocBrush(int32 NumSides);</P>
<P>void&#9;&#9;FreeBrush(GBSP_Brush *Brush);</P>
<P>void&#9;&#9;FreeBrushList(GBSP_Brush *Brushes);</P>
<P>void&#9;&#9;ShowBrushHeap(void);</P>
<P>GBSP_Brush&#9;*CopyBrush(GBSP_Brush *Brush);</P>
<P>void&#9;&#9;BoundBrush(GBSP_Brush *Brush);</P>
<P>GBSP_Brush&#9;*AddBrushListToTail(GBSP_Brush *List, GBSP_Brush *Tail);</P>
<P>int32&#9;&#9;CountBrushList(GBSP_Brush *Brushes);</P>
<P>GBSP_Brush&#9;*RemoveBrushList(GBSP_Brush *List, GBSP_Brush *Remove);</P>
<P>geFloat&#9;&#9;BrushVolume (GBSP_Brush *Brush);</P>
<P>void&#9;&#9;CreateBrushPolys(GBSP_Brush *Brush);</P>
<P>GBSP_Brush&#9;*BrushFromBounds (geVec3d *Mins, geVec3d *Maxs);</P>
<P>geBoolean&#9;CheckBrush(GBSP_Brush *Brush);</P>
<P>void&#9;&#9;SplitBrush(GBSP_Brush *Brush, int32 PNum, int32 PSide, uint8 MidFlags, geBoolean Visible, GBSP_Brush **Front, GBSP_Brush **Back);</P>
<P>GBSP_Brush&#9;*SubtractBrush(GBSP_Brush *a, GBSP_Brush *b);</P>
<P>GBSP_Brush&#9;*CSGBrushes(GBSP_Brush *Head);</P>

<P>geBoolean&#9;OutputBrushes(char *FileName, GBSP_Brush *Brushes);</P>
<P>geBoolean&#9;OutputMapBrushes(char *FileName, MAP_Brush *Brushes);</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454156825">BSP.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  BSP.h                                                                               */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: John Pollard                                                                */</P>
<P>/*  Description: Module distributes code to all the other modules                       */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef BSP_H</P>
<P>#define BSP_H</P>

<P>#include &lt;Windows.h&gt;</P>

<P>#include "GBSPLib.h"</P>

<P>//====================================================================================</P>
<P>//&#9;Global defines</P>
<P>//====================================================================================</P>
<P>#define MAX_BSP_MODELS&#9;&#9;&#9;2048</P>

<P>#define&#9;PSIDE_FRONT&#9;&#9;&#9;&#9;1</P>
<P>#define&#9;PSIDE_BACK&#9;&#9;&#9;&#9;2</P>
<P>#define&#9;PSIDE_BOTH&#9;&#9;&#9;&#9;(PSIDE_FRONT|PSIDE_BACK)</P>
<P>#define&#9;PSIDE_FACING&#9;&#9;&#9;4</P>

<P>#define PLANENUM_LEAF&#9;&#9;&#9;-1</P>

<P>#define MAX_BSP_PLANES&#9;&#9;&#9;32000</P>

<P>#define&#9;DIST_EPSILON&#9;&#9;&#9;(geFloat)0.01</P>
<P>#define&#9;ANGLE_EPSILON&#9;&#9;&#9;(geFloat)0.00001</P>

<P>//====================================================================================</P>
<P>//&#9;Global sructures</P>
<P>//====================================================================================</P>

<P>struct _GBSP_Portal;</P>

<P>typedef struct GBSP_Brush&#9;GBSP_Brush;</P>
<P>typedef struct GBSP_Side&#9;GBSP_Side;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;&#9;NumVerts;</P>
<P>&#9;geVec3d&#9;&#9;*Verts;</P>
<P>} GBSP_Poly;</P>

<P>&nbsp;</P>
<P>typedef struct _GBSP_Face</P>
<P>{</P>
<P>&#9;_GBSP_Face&#9;*Next;</P>
<P>&#9;_GBSP_Face&#9;*Original;</P>
<P>&#9;GBSP_Poly&#9;*Poly;</P>
<P>&#9;int32&#9;&#9;Contents[2];</P>
<P>&#9;int32&#9;&#9;TexInfo;</P>
<P>&#9;int32&#9;&#9;PlaneNum;</P>
<P>&#9;int32&#9;&#9;PlaneSide;</P>

<P>&#9;int32&#9;&#9;Entity;&#9;&#9;&#9;&#9;&#9;// Originating entity</P>

<P>&#9;uint8&#9;&#9;Visible;&#9;&#9;&#9;</P>

<P>&#9;// For GFX file saving</P>
<P>&#9;int32&#9;&#9;OutputNum;&#9;</P>

<P>&#9;int32&#9;&#9;*IndexVerts;</P>
<P>&#9;int32&#9;&#9;FirstIndexVert;</P>
<P>&#9;int32&#9;&#9;NumIndexVerts;</P>

<P>&#9;_GBSP_Portal *Portal;</P>
<P>&#9;_GBSP_Face&#9;*Split[2];</P>
<P>&#9;_GBSP_Face&#9;*Merged;</P>
<P>} GBSP_Face;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;geVec3d&#9;&#9;Normal;</P>
<P>&#9;geFloat&#9;&#9;Dist;</P>
<P>&#9;int32&#9;&#9;Type;</P>
<P>} GBSP_Plane;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;Contents;&#9;&#9;&#9;&#9;&#9;// Contents of leaf</P>
<P>} GBSP_Leaf;</P>

<P>typedef struct _GBSP_Node</P>
<P>{</P>
<P>&#9;// Info for this node as a node or leaf</P>
<P>&#9;int32&#9;&#9;&#9;PlaneNum;&#9;&#9;&#9;// -1 if a leaf</P>
<P>&#9;int32&#9;&#9;&#9;PlaneSide;&#9;&#9;&#9;// CHANGE1!!!</P>
<P>&#9;int32&#9;&#9;&#9;Contents;&#9;&#9;&#9;// Contents node/leaf</P>
<P>&#9;GBSP_Face&#9;&#9;*Faces;&#9;&#9;&#9;&#9;// Faces on this node</P>
<P>&#9;_GBSP_Node&#9;&#9;*Children[2];&#9;&#9;// Front and back child</P>
<P>&#9;_GBSP_Node&#9;&#9;*Parent;&#9;&#9;&#9;// Parent of this node</P>
<P>&#9;geVec3d&#9;&#9;&#9;Mins;&#9;&#9;&#9;&#9;// Current BBox of node</P>
<P>&#9;geVec3d&#9;&#9;&#9;Maxs;</P>

<P>&#9;// Info for this node as a leaf</P>
<P>&#9;_GBSP_Portal&#9;*Portals;&#9;&#9;&#9;// Portals on this leaf</P>
<P>&#9;int32&#9;&#9;&#9;NumLeafFaces;&#9;&#9;// Number of faces touching this leaf</P>
<P>&#9;GBSP_Face&#9;&#9;**LeafFaces;&#9;&#9;// Pointer to Faces touching this leaf</P>
<P>&#9;int32&#9;&#9;&#9;CurrentFill;&#9;&#9;// For the outside filling stage</P>
<P>&#9;int32&#9;&#9;&#9;Entity;&#9;&#9;&#9;&#9;// 1 if entity touching leaf</P>
<P>&#9;int32&#9;&#9;&#9;Occupied;&#9;&#9;&#9;// FIXME:  Can use Entity!!!</P>
<P>&#9;int32&#9;&#9;&#9;PortalLeafNum;&#9;&#9;// For portal saving</P>

<P>&#9;geBoolean&#9;&#9;Detail;</P>
<P>&#9;int32&#9;&#9;&#9;Cluster;</P>
<P>&#9;int32&#9;&#9;&#9;Area;&#9;&#9;&#9;&#9;// Area number, 0 == invalid area</P>

<P>&#9;GBSP_Brush&#9;&#9;*Volume;</P>
<P>&#9;GBSP_Side&#9;&#9;*Side;</P>
<P>&#9;GBSP_Brush&#9;&#9;*BrushList;</P>

<P>&#9;// For GFX file saving</P>
<P>&#9;int32&#9;&#9;&#9;ChildrenID[2];</P>
<P>&#9;int32&#9;&#9;&#9;FirstFace;</P>
<P>&#9;int32&#9;&#9;&#9;NumFaces;</P>
<P>&#9;int32&#9;&#9;&#9;FirstPortal;</P>
<P>&#9;int32&#9;&#9;&#9;NumPortals;</P>

<P>&#9;int32&#9;&#9;&#9;FirstSide;&#9;&#9;&#9;// For bevel bbox clipping</P>
<P>&#9;int32&#9;&#9;&#9;NumSides;</P>

<P>} GBSP_Node;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;PlaneNum;</P>
<P>&#9;int32&#9;PlaneSide;</P>
<P>} GBSP_LeafSide;</P>

<P>typedef struct _GBSP_Node2</P>
<P>{</P>
<P>&#9;_GBSP_Node2&#9;&#9;*Children[2];</P>
<P>&#9;int32&#9;&#9;&#9;PlaneNum;&#9;&#9;&#9;// -1 == Leaf</P>
<P>&#9;</P>
<P>&#9;// For leafs</P>
<P>&#9;int32&#9;&#9;&#9;Contents;</P>
<P>} GBSP_Node2;</P>

<P>// Side flags...</P>
<P>#define SIDE_HINT&#9;&#9;(1&lt;&lt;0)&#9;&#9;// Side is a hint side</P>
<P>#define SIDE_SHEET&#9;&#9;(1&lt;&lt;1)&#9;&#9;// Side is a sheet (only visible face in a sheet contents)</P>
<P>#define SIDE_VISIBLE&#9;(1&lt;&lt;2)&#9;&#9;// </P>
<P>#define SIDE_TESTED&#9;&#9;(1&lt;&lt;3)&#9;&#9;// </P>
<P>#define SIDE_NODE&#9;&#9;(1&lt;&lt;4)&#9;&#9;// </P>

<P>typedef struct GBSP_Side</P>
<P>{</P>
<P>&#9;GBSP_Poly&#9;*Poly;</P>

<P>&#9;int32&#9;&#9;PlaneNum;</P>
<P>&#9;uint8&#9;&#9;PlaneSide;</P>

<P>&#9;int32&#9;&#9;TexInfo;</P>

<P>&#9;uint8&#9;&#9;Flags;</P>
<P>} GBSP_Side;</P>

<P>typedef struct _GBSP_Portal</P>
<P>{</P>
<P>&#9;GBSP_Poly&#9;&#9;*Poly;&#9;&#9;&#9;&#9;// Convex poly that holds the shape of the portal</P>
<P>&#9;GBSP_Node&#9;&#9;*Nodes[2];&#9;&#9;&#9;// Node on each side of the portal</P>
<P>&#9;_GBSP_Portal&#9;*Next[2];&#9;&#9;&#9;// Next portal for each node</P>
<P>&#9;int32&#9;&#9;&#9;PlaneNum;</P>

<P>&#9;GBSP_Node&#9;&#9;*OnNode;</P>
<P>&#9;GBSP_Face&#9;&#9;*Face[2];</P>
<P>&#9;GBSP_Side&#9;&#9;*Side;</P>
<P>&#9;uint8&#9;&#9;&#9;SideFound;</P>
<P>} GBSP_Portal;</P>

<P>typedef struct MAP_Brush&#9;MAP_Brush;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;GBSP_Node&#9;*RootNode[2];&#9;&#9;// 0 = DrawHull, 1 = Bevel ClipHull</P>

<P>&#9;geVec3d&#9;&#9;Origin;</P>

<P>&#9;GBSP_Node&#9;OutsideNode;&#9;&#9;// So each model can have it's own outside node</P>

<P>&#9;geVec3d&#9;&#9;Mins;</P>
<P>&#9;geVec3d&#9;&#9;Maxs;</P>

<P>&#9;// For GFX File saving</P>
<P>&#9;int32&#9;&#9;RootNodeID[2];</P>
<P>&#9;int32&#9;&#9;FirstFace;</P>
<P>&#9;int32&#9;&#9;NumFaces;</P>
<P>&#9;int32&#9;&#9;FirstLeaf;</P>
<P>&#9;int32&#9;&#9;NumLeafs;</P>
<P>&#9;int32&#9;&#9;FirstCluster;</P>
<P>&#9;int32&#9;&#9;NumClusters;</P>
<P>&#9;int32&#9;&#9;NumSolidLeafs;&#9;&#9;// So we can skip over solid leafs for vis stuff</P>

<P>&#9;// Temorary area portal stuff</P>
<P>&#9;geBoolean&#9;IsAreaPortal;</P>
<P>&#9;int32&#9;&#9;Areas[2];&#9;&#9;&#9;// Used when this model is an area sperator (AreaPortal)</P>

<P>} GBSP_Model;</P>

<P>//====================================================================================</P>
<P>//&#9;Globals</P>
<P>//====================================================================================</P>
<P>extern GBSP_Model&#9;BSPModels[MAX_BSP_MODELS];</P>
<P>extern int32&#9;&#9;NumBSPModels;</P>

<P>extern geBoolean&#9;Verbose;</P>
<P>extern geBoolean&#9;OriginalVerbose;</P>
<P>extern geBoolean&#9;EntityVerbose;</P>

<P>#define MAX_WELDED_VERTS&#9;&#9;&#9;64000</P>

<P>// Defined in TJunct.cpp</P>
<P>extern int32&#9;&#9;NumWeldedVerts;</P>
<P>extern int32&#9;&#9;TotalIndexVerts;</P>
<P>extern geVec3d&#9;&#9;WeldedVerts[MAX_WELDED_VERTS];</P>

<P>geBoolean&#9;&#9;&#9;FixModelTJunctions(void);</P>

<P>//====================================================================================</P>
<P>//&#9;Global functions</P>
<P>//====================================================================================</P>
<P>geBoolean&#9;CreateBSP(char *FileName, BspParms *Parms);&#9;</P>
<P>geBoolean&#9;UpdateEntities(char *MapName, char *BSPName);</P>

<P>GBSP_Node&#9;*AllocNode(void);</P>
<P>void&#9;&#9;FreeNode(GBSP_Node *Node);</P>

<P>geBoolean&#9;FreeAllGBSPData(void);</P>
<P>void&#9;&#9;CleanupGBSP(void);</P>

<P>//</P>
<P>//&#9;Planes</P>
<P>//</P>

<P>extern GBSP_Plane&#9;Planes[MAX_BSP_PLANES];</P>
<P>extern int32&#9;&#9;NumPlanes;</P>

<P>void&#9;&#9;PlaneFromVerts(geVec3d *Verts, GBSP_Plane *Plane);</P>
<P>void&#9;&#9;SidePlane(GBSP_Plane *Plane, int32 *Side);</P>
<P>geBoolean&#9;PlaneEqual(GBSP_Plane *Plane1, GBSP_Plane *Plane2);</P>
<P>geBoolean&#9;PlaneCompare(GBSP_Plane *Plane1, GBSP_Plane *Plane2);</P>
<P>void&#9;&#9;SnapVector(geVec3d *Normal);</P>
<P>geFloat&#9;&#9;RoundInt(geFloat In);</P>
<P>void&#9;&#9;SnapPlane(geVec3d *Normal, geFloat *Dist);</P>
<P>void&#9;&#9;PlaneInverse(GBSP_Plane *Plane);</P>
<P>int32&#9;&#9;FindPlane(GBSP_Plane *Plane, int32 *Side);</P>
<P>void&#9;&#9;PlaneInverse(GBSP_Plane *Plane);</P>
<P>float&#9;&#9;_fastcall Plane_PointDistanceFast(GBSP_Plane *Plane, geVec3d *Point);</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156826">Fill.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  Fill.h                                                                              */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: John Pollard                                                                */</P>
<P>/*  Description: Does the flood filling of the leafs, and removes untouchable leafs     */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef FILL_H</P>
<P>#define FILL_H</P>

<P>#include &lt;Windows.h&gt;</P>

<P>#include "BSP.h"</P>

<P>int32&#9;RemoveHiddenLeafs(GBSP_Node *RootNode, GBSP_Node *ONode);</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156827">GBSPFILE.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  GBSPFile.h                                                                          */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: John Pollard                                                                */</P>
<P>/*  Description: Loads a BSP                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GBSPFILE_H</P>
<P>#define GBSPFILE_H</P>

<P>#include &lt;Windows.h&gt;</P>
<P>#include &lt;Stdio.h&gt;</P>

<P>#include "DCommon.h"</P>
<P>#include "MathLib.h"</P>
<P>#include "vfile.h"</P>
<P>#include "motion.h"</P>
<P>#include "Vec3d.h"</P>

<P>#define GBSP_VERSION&#9;&#9;&#9;&#9;15</P>

<P>#define GBSP_CHUNK_HEADER&#9;&#9;&#9;0</P>

<P>#define GBSP_CHUNK_MODELS&#9;&#9;&#9;1</P>
<P>#define GBSP_CHUNK_NODES&#9;&#9;&#9;2</P>
<P>#define GBSP_CHUNK_BNODES&#9;&#9;&#9;3</P>
<P>#define GBSP_CHUNK_LEAFS&#9;&#9;&#9;4</P>
<P>#define GBSP_CHUNK_CLUSTERS&#9;&#9;&#9;5&#9;</P>
<P>#define GBSP_CHUNK_AREAS&#9;&#9;&#9;6&#9;</P>
<P>#define GBSP_CHUNK_AREA_PORTALS&#9;&#9;7&#9;</P>
<P>#define GBSP_CHUNK_LEAF_SIDES&#9;&#9;8</P>
<P>#define GBSP_CHUNK_PORTALS&#9;&#9;&#9;9</P>
<P>#define GBSP_CHUNK_PLANES&#9;&#9;&#9;10</P>
<P>#define GBSP_CHUNK_FACES&#9;&#9;&#9;11</P>
<P>#define GBSP_CHUNK_LEAF_FACES&#9;&#9;12</P>
<P>#define GBSP_CHUNK_VERT_INDEX&#9;&#9;13</P>
<P>#define GBSP_CHUNK_VERTS&#9;&#9;&#9;14</P>
<P>#define GBSP_CHUNK_RGB_VERTS&#9;&#9;15</P>
<P>#define GBSP_CHUNK_ENTDATA&#9;&#9;&#9;16</P>

<P>#define GBSP_CHUNK_TEXINFO&#9;&#9;&#9;17</P>
<P>#define GBSP_CHUNK_TEXTURES&#9;&#9;&#9;18 </P>
<P>#define GBSP_CHUNK_TEXDATA&#9;&#9;&#9;19</P>

<P>#define GBSP_CHUNK_LIGHTDATA&#9;&#9;20</P>
<P>#define GBSP_CHUNK_VISDATA&#9;&#9;&#9;21</P>

<P>#define GBSP_CHUNK_SKYDATA&#9;&#9;&#9;22</P>

<P>#define GBSP_CHUNK_PALETTES&#9;&#9;&#9;23</P>

<P>#define GBSP_CHUNK_MOTIONS&#9;&#9;&#9;24</P>

<P>#define GBSP_CHUNK_END&#9;&#9;&#9;&#9;0xffff</P>

<P>#define MAX_GBSP_ENTDATA&#9;&#9;&#9;200000</P>

<P>//*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=</P>
<P>//&#9;IF THESE FLAGS CHANGE, THEY MUST CHANGE IN GBSPFILE.H in Genesis AND GBSPLIB!!!!!</P>
<P>//*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=</P>
<P>#define BSP_CONTENTS_SOLID2&#9;&#9;&#9;(1&lt;&lt;0)&#9;&#9;// Solid (Visible)</P>
<P>#define BSP_CONTENTS_WINDOW2&#9;&#9;(1&lt;&lt;1)&#9;&#9;// Window (Visible)</P>
<P>#define BSP_CONTENTS_EMPTY2&#9;&#9;&#9;(1&lt;&lt;2)&#9;&#9;// Empty but Visible (water, lava, etc...)</P>

<P>#define BSP_CONTENTS_TRANSLUCENT2&#9;(1&lt;&lt;3)&#9;&#9;// Vis will see through it</P>
<P>#define BSP_CONTENTS_WAVY2&#9;&#9;&#9;(1&lt;&lt;4)&#9;&#9;// Wavy (Visible)</P>
<P>#define BSP_CONTENTS_DETAIL2&#9;&#9;(1&lt;&lt;5)&#9;&#9;// Won't be included in vis oclusion</P>

<P>#define BSP_CONTENTS_CLIP2&#9;&#9;&#9;(1&lt;&lt;6)&#9;&#9;// Structural but not visible</P>
<P>#define BSP_CONTENTS_HINT2&#9;&#9;&#9;(1&lt;&lt;7)&#9;&#9;// Primary splitter (Non-Visible)</P>
<P>#define BSP_CONTENTS_AREA2&#9;&#9;&#9;(1&lt;&lt;8)&#9;&#9;// Area seperator leaf (Non-Visible)</P>

<P>#define BSP_CONTENTS_FLOCKING&#9;&#9;(1&lt;&lt;9)&#9;&#9;// flocking flag.  Not really a contents type</P>
<P>#define BSP_CONTENTS_SHEET&#9;&#9;&#9;(1&lt;&lt;10)</P>
<P>#define RESERVED3&#9;&#9;&#9;&#9;&#9;(1&lt;&lt;11)</P>
<P>#define RESERVED4&#9;&#9;&#9;&#9;&#9;(1&lt;&lt;12)</P>
<P>#define RESERVED5&#9;&#9;&#9;&#9;&#9;(1&lt;&lt;13)</P>
<P>#define RESERVED6&#9;&#9;&#9;&#9;&#9;(1&lt;&lt;14)</P>
<P>#define RESERVED7&#9;&#9;&#9;&#9;&#9;(1&lt;&lt;15)</P>

<P>// 16-31 reserved for user contents</P>
<P>#define BSP_CONTENTS_USER1&#9;&#9;&#9;(1&lt;&lt;16)</P>
<P>#define BSP_CONTENTS_USER2&#9;&#9;&#9;(1&lt;&lt;17)</P>
<P>#define BSP_CONTENTS_USER3&#9;&#9;&#9;(1&lt;&lt;18)</P>
<P>#define BSP_CONTENTS_USER4&#9;&#9;&#9;(1&lt;&lt;19)</P>
<P>#define BSP_CONTENTS_USER5&#9;&#9;&#9;(1&lt;&lt;20)</P>
<P>#define BSP_CONTENTS_USER6&#9;&#9;&#9;(1&lt;&lt;21)</P>
<P>#define BSP_CONTENTS_USER7&#9;&#9;&#9;(1&lt;&lt;22)</P>
<P>#define BSP_CONTENTS_USER8&#9;&#9;&#9;(1&lt;&lt;23)</P>
<P>#define BSP_CONTENTS_USER9&#9;&#9;&#9;(1&lt;&lt;24)</P>
<P>#define BSP_CONTENTS_USER10&#9;&#9;&#9;(1&lt;&lt;25)</P>
<P>#define BSP_CONTENTS_USER11&#9;&#9;&#9;(1&lt;&lt;26)</P>
<P>#define BSP_CONTENTS_USER12&#9;&#9;&#9;(1&lt;&lt;27)</P>
<P>#define BSP_CONTENTS_USER13&#9;&#9;&#9;(1&lt;&lt;28)</P>
<P>#define BSP_CONTENTS_USER14&#9;&#9;&#9;(1&lt;&lt;29)</P>
<P>#define BSP_CONTENTS_USER15&#9;&#9;&#9;(1&lt;&lt;30)</P>
<P>#define BSP_CONTENTS_USER16&#9;&#9;&#9;(1&lt;&lt;31)</P>
<P>// 16-31 reserved for user contents</P>

<P>&nbsp;</P>
<P>// These contents are all solid types</P>
<P>#define BSP_CONTENTS_SOLID_CLIP&#9;&#9;(BSP_CONTENTS_SOLID2 | BSP_CONTENTS_WINDOW2 | BSP_CONTENTS_CLIP2)</P>

<P>// These contents are all visible types</P>
<P>#define BSP_VISIBLE_CONTENTS&#9;&#9;(&#9;BSP_CONTENTS_SOLID2 | \</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;BSP_CONTENTS_EMPTY2 | \</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;BSP_CONTENTS_WINDOW2 | \</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;BSP_CONTENTS_SHEET | \</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;BSP_CONTENTS_WAVY2)</P>

<P>// These contents define where faces are NOT allowed to merge across</P>
<P>#define BSP_MERGE_SEP_CONTENTS&#9;&#9;(&#9;BSP_CONTENTS_WAVY2 | \</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;BSP_CONTENTS_HINT2 | \</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;BSP_CONTENTS_AREA2)</P>
<P>//*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=</P>
<P>//*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;&#9;&#9;Type;&#9;&#9;&#9;&#9;&#9;&#9;// Type of chunk</P>
<P>&#9;int32&#9;&#9;&#9;Size;&#9;&#9;&#9;&#9;&#9;&#9;// Size of each element</P>
<P>&#9;int32&#9;&#9;&#9;Elements;&#9;&#9;&#9;&#9;&#9;// Number of elements</P>
<P>} GBSP_Chunk;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;&#9;&#9;Type;</P>
<P>&#9;int32&#9;&#9;&#9;Size;</P>
<P>&#9;int32&#9;&#9;&#9;Elements;</P>
<P>&#9;void&#9;&#9;&#9;*Data;</P>
<P>} GBSP_ChunkData;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;char&#9;&#9;&#9;TAG[5];&#9;&#9;&#9;&#9;&#9;&#9;// 'G','B','S','P','0'</P>
<P>&#9;int32&#9;&#9;&#9;Version;</P>
<P>&#9;SYSTEMTIME&#9;&#9;BSPTime;&#9;&#9;&#9;&#9;&#9;// Time at which the BSP data was created...</P>
<P>} GBSP_Header;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;geVec3d&#9;&#9;&#9;Axis;&#9;&#9;&#9;&#9;&#9;&#9;// Axis of rotation</P>
<P>&#9;float&#9;&#9;&#9;Dpm;&#9;&#9;&#9;&#9;&#9;&#9;// Degres per minute</P>
<P>&#9;int32&#9;&#9;&#9;Textures[6];&#9;&#9;&#9;&#9;// Texture indexes for all six sides...</P>
<P>&#9;float&#9;&#9;&#9;DrawScale;</P>
<P>} GFX_SkyData;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;geVec3d&#9;&#9;&#9;Normal;</P>
<P>&#9;geFloat&#9;&#9;&#9;Dist;</P>
<P>&#9;int32&#9;&#9;&#9;Type;&#9;&#9;&#9;&#9;&#9;&#9;// Defined in MathLib.h (PLANE_X, PLANE_Y, etc...)</P>
<P>} GFX_Plane;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;&#9;&#9;Children[2];&#9;&#9;&#9;&#9;// Children, indexed into GFXNodes, &lt; 0 = Leaf</P>
<P>&#9;int32&#9;&#9;&#9;NumFaces;&#9;&#9;&#9;&#9;&#9;// Num faces</P>
<P>&#9;int32&#9;&#9;&#9;FirstFace;&#9;&#9;&#9;&#9;&#9;// First face</P>
<P>&#9;int32&#9;&#9;&#9;PlaneNum;&#9;&#9;&#9;&#9;&#9;// </P>
<P>&#9;geVec3d&#9;&#9;&#9;Mins;&#9;&#9;&#9;&#9;&#9;&#9;// For BBox frustum culling</P>
<P>&#9;geVec3d&#9;&#9;&#9;Maxs;</P>
<P>} GFX_Node;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;&#9;&#9;Children[2];&#9;&#9;&#9;&#9;// Children, indexed into GFXBNodes, &lt; 0 = Contents</P>
<P>&#9;int32&#9;&#9;&#9;PlaneNum;&#9;&#9;&#9;&#9;&#9;// </P>
<P>} GFX_BNode;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;&#9;&#9;PlaneNum;</P>
<P>&#9;int32&#9;&#9;&#9;PlaneSide;</P>
<P>} GFX_LeafSide;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;ModelNum;</P>
<P>&#9;int32&#9;Area;</P>
<P>} GFX_AreaPortal;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;NumAreaPortals;</P>
<P>&#9;int32&#9;FirstAreaPortal;</P>
<P>} GFX_Area;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;&#9;&#9;Contents;&#9;&#9;&#9;&#9;&#9;// Contents of leaf</P>
<P>&#9;geVec3d&#9;&#9;&#9;Mins;&#9;&#9;&#9;&#9;&#9;&#9;// For BBox vis testing</P>
<P>&#9;geVec3d&#9;&#9;&#9;Maxs;</P>
<P>&#9;int32&#9;&#9;&#9;FirstFace;&#9;&#9;&#9;&#9;&#9;// First face in GFXLeafFaces </P>
<P>&#9;int32&#9;&#9;&#9;NumFaces;</P>

<P>&#9;int32&#9;&#9;&#9;FirstPortal;&#9;&#9;&#9;&#9;// Number of portals</P>
<P>&#9;int32&#9;&#9;&#9;NumPortals;&#9;&#9;&#9;&#9;&#9;// First portal</P>

<P>&#9;int32&#9;&#9;&#9;Cluster;&#9;&#9;&#9;&#9;&#9;// CHANGE: CLUSTER</P>
<P>&#9;int32&#9;&#9;&#9;Area;</P>

<P>&#9;int32&#9;&#9;&#9;FirstSide;&#9;&#9;&#9;&#9;&#9;// Planes (plus bevels) pointing out of leaf</P>
<P>&#9;int32&#9;&#9;&#9;NumSides;&#9;&#9;&#9;&#9;&#9;// (For axial bounding box collisions)</P>
<P>} GFX_Leaf;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;&#9;&#9;VisOfs;</P>
<P>} GFX_Cluster;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;&#9;&#9;FirstVert;&#9;&#9;&#9;&#9;&#9;// First vertex indexed in GFXVertices</P>
<P>&#9;int32&#9;&#9;&#9;NumVerts;&#9;&#9;&#9;&#9;&#9;// Number of vertices in face</P>
<P>&#9;int32&#9;&#9;&#9;PlaneNum;&#9;&#9;&#9;&#9;&#9;// PlaneNum </P>
<P>&#9;int32&#9;&#9;&#9;PlaneSide;&#9;&#9;&#9;&#9;&#9;// 0 = Same direction of plane normal</P>
<P>&#9;int32&#9;&#9;&#9;TexInfo;</P>
<P>&#9;int32&#9;&#9;&#9;LightOfs;&#9;&#9;&#9;&#9;&#9;// Offset info GFXLightData, -1 = No light</P>
<P>&#9;int32&#9;&#9;&#9;LWidth;</P>
<P>&#9;int32&#9;&#9;&#9;LHeight;</P>
<P>&#9;uint8&#9;&#9;&#9;LTypes[4];</P>
<P>} GFX_Face;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;&#9;&#9;RootNode[2];&#9;&#9;&#9;&#9;// Top level Node in GFXNodes/GFXBNodes</P>
<P>&#9;geVec3d&#9;&#9;&#9;Mins;</P>
<P>&#9;geVec3d&#9;&#9;&#9;Maxs;</P>
<P>&#9;geVec3d&#9;&#9;&#9;Origin;&#9;&#9;&#9;&#9;&#9;&#9;// Center of model</P>
<P>&#9;int32&#9;&#9;&#9;FirstFace;&#9;&#9;&#9;&#9;&#9;// First face in GFXFaces</P>
<P>&#9;int32&#9;&#9;&#9;NumFaces;&#9;&#9;&#9;&#9;&#9;// Number of faces</P>
<P>&#9;int32&#9;&#9;&#9;FirstLeaf;&#9;&#9;&#9;&#9;&#9;// First leaf in GFXLeafs;</P>
<P>&#9;int32&#9;&#9;&#9;NumLeafs;&#9;&#9;&#9;&#9;&#9;// Number of leafs (not including solid leaf)</P>
<P>&#9;int32&#9;&#9;&#9;FirstCluster;</P>
<P>&#9;int32&#9;&#9;&#9;NumClusters;</P>
<P>&#9;int32&#9;&#9;&#9;Areas[2];&#9;&#9;&#9;&#9;&#9;// Area on each side of the model</P>
<P>&#9;geMotion *&#9;&#9;Motion;</P>
<P>} GFX_Model;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;uint8&#9;&#9;&#9;RGB[256*3];</P>
<P>} GFX_Palette;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;char&#9;&#9;&#9;Name[32];</P>
<P>&#9;uint32&#9;&#9;&#9;Flags;</P>
<P>&#9;int32&#9;&#9;&#9;Width;</P>
<P>&#9;int32&#9;&#9;&#9;Height;</P>
<P>&#9;int32&#9;&#9;&#9;Offset;</P>
<P>&#9;int32&#9;&#9;&#9;PaletteIndex;</P>
<P>} GFX_Texture;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;geVec3d&#9;&#9;&#9;Vecs[2];</P>
<P>&#9;float&#9;&#9;&#9;Shift[2];</P>
<P>&#9;float&#9;&#9;&#9;DrawScale[2];</P>
<P>&#9;int32&#9;&#9;&#9;Flags;</P>
<P>&#9;float&#9;&#9;&#9;FaceLight;</P>
<P>&#9;float&#9;&#9;&#9;ReflectiveScale;</P>
<P>&#9;float&#9;&#9;&#9;Alpha;</P>
<P>&#9;float&#9;&#9;&#9;MipMapBias;</P>
<P>&#9;int32&#9;&#9;&#9;Texture;</P>
<P>} GFX_TexInfo;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;geVec3d&#9;&#9;&#9;Origin;&#9;&#9;&#9;&#9;&#9;&#9;// Center of portal</P>
<P>&#9;int32&#9;&#9;&#9;LeafTo;&#9;&#9;&#9;&#9;&#9;&#9;// Leaf looking into</P>
<P>} GFX_Portal;</P>

<P>extern GBSP_Header&#9;&#9;GBSPHeader;&#9;&#9;&#9;&#9;&#9;// Header</P>
<P>extern GFX_SkyData&#9;&#9;GFXSkyData;</P>
<P>extern GFX_Model&#9;&#9;*GFXModels;&#9;&#9;&#9;&#9;&#9;// Model data</P>
<P>extern GFX_Node&#9;&#9;&#9;*GFXNodes;&#9;&#9;&#9;&#9;&#9;// Nodes</P>
<P>extern GFX_BNode&#9;&#9;*GFXBNodes;&#9;&#9;&#9;&#9;&#9;// Bevel Clip Nodes</P>
<P>extern GFX_Leaf&#9;&#9;&#9;*GFXLeafs;&#9;&#9;&#9;&#9;&#9;// Leafs</P>
<P>extern GFX_Cluster&#9;&#9;*GFXClusters;&#9;&#9;&#9;&#9;// CHANGE: CLUSTER</P>
<P>extern GFX_Area&#9;&#9;&#9;*GFXAreas;&#9;&#9;&#9;</P>
<P>extern GFX_AreaPortal&#9;*GFXAreaPortals;</P>
<P>extern GFX_Plane&#9;&#9;*GFXPlanes;&#9;&#9;&#9;&#9;&#9;// Planes</P>
<P>extern GFX_Face&#9;&#9;&#9;*GFXFaces;&#9;&#9;&#9;&#9;&#9;// Faces</P>
<P>extern int32&#9;&#9;&#9;*GFXLeafFaces;</P>
<P>extern GFX_LeafSide&#9;&#9;*GFXLeafSides;</P>
<P>extern geVec3d&#9;&#9;&#9;*GFXVerts;&#9;&#9;&#9;&#9;&#9;// Verts</P>
<P>extern int32&#9;&#9;&#9;*GFXVertIndexList;&#9;&#9;&#9;// Index list</P>
<P>extern geVec3d&#9;&#9;&#9;*GFXRGBVerts;</P>

<P>extern uint8&#9;&#9;&#9;*GFXEntData;</P>
<P>extern GFX_Texture&#9;&#9;*GFXTextures;&#9;&#9;&#9;&#9;// Textures</P>
<P>extern GFX_TexInfo&#9;&#9;*GFXTexInfo;&#9;&#9;&#9;&#9;// TexInfo</P>
<P>extern uint8&#9;&#9;&#9;*GFXTexData;&#9;&#9;&#9;&#9;// TexData</P>
<P>extern DRV_Palette&#9;&#9;*GFXPalettes;&#9;&#9;&#9;&#9;// Palettes</P>

<P>extern uint8&#9;&#9;&#9;*GFXMotionData;&#9;&#9;&#9;&#9;// Model motion keyframe data</P>

<P>extern uint8&#9;&#9;&#9;*GFXLightData;&#9;&#9;&#9;&#9;// Lightmap data</P>
<P>extern uint8&#9;&#9;&#9;*GFXVisData;&#9;&#9;&#9;&#9;// Vis data</P>
<P>extern GFX_Portal&#9;&#9;*GFXPortals;&#9;&#9;&#9;&#9;// Portal data</P>

<P>extern int32&#9;&#9;NumGFXModels;</P>
<P>extern int32&#9;&#9;NumGFXNodes;</P>
<P>extern int32&#9;&#9;NumGFXBNodes;</P>
<P>extern int32&#9;&#9;NumGFXLeafs;</P>
<P>extern int32&#9;&#9;NumGFXClusters;&#9;&#9;&#9;&#9;// CHANGE: CLUSTER</P>
<P>extern int32&#9;&#9;NumGFXAreas; </P>
<P>extern int32&#9;&#9;NumGFXAreaPortals;</P>
<P>extern int32&#9;&#9;NumGFXPlanes;</P>
<P>extern int32&#9;&#9;NumGFXFaces;</P>
<P>extern int32&#9;&#9;NumGFXLeafFaces;</P>
<P>extern int32&#9;&#9;NumGFXLeafSides;</P>
<P>extern int32&#9;&#9;NumGFXVerts;</P>
<P>extern int32&#9;&#9;NumGFXVertIndexList;&#9;&#9;// For RGB verts, and regular verts</P>
<P>extern int32&#9;&#9;NumGFXRGBVerts;</P>

<P>extern int32&#9;&#9;NumGFXEntData;</P>
<P>extern int32&#9;&#9;NumGFXTextures;</P>
<P>extern int32&#9;&#9;NumGFXTexInfo;</P>
<P>extern int32&#9;&#9;NumGFXTexData;</P>
<P>extern int32&#9;&#9;NumGFXPalettes;</P>

<P>extern int32&#9;&#9;NumGFXLightData;</P>
<P>extern int32&#9;&#9;&#9;NumGFXVisData;</P>
<P>extern int32&#9;&#9;NumGFXPortals;</P>

<P>extern int32&#9;&#9;NumGFXMotionBytes;</P>

<P>geBoolean LoadGBSPFile(char *FileName);</P>
<P>geBoolean SaveGBSPFile(char *FileName);</P>
<P>geBoolean FreeGBSPFile(void);</P>
<P>geBoolean WriteChunk(GBSP_Chunk *Chunk, void *Data, geVFile *f);</P>

<P>geBoolean WriteChunks(GBSP_ChunkData *Data, int32 NumChunkData, geVFile *f);</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156828">Gbsplib.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  GBSPLib.h                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: John Pollard                                                                */</P>
<P>/*  Description: API to GBSPLIB                                                         */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GBSPLIB_H</P>
<P>#define GBSPLIB_H</P>

<P>#include &lt;Windows.h&gt;</P>

<P>#include "MathLib.h"</P>

<P>#include "Vec3d.h"</P>

<P>#define GBSP_VERSION_MAJOR&#9;6</P>
<P>#define GBSP_VERSION_MINOR&#9;0</P>

<P>//#define SHOW_DEBUG_STATS</P>

<P>//====================================================================================</P>
<P>//&#9;Main driver interfaces</P>
<P>//====================================================================================</P>
<P>#define DllImport&#9;extern "C" __declspec( dllimport )</P>
<P>#define DllExport&#9;extern "C" __declspec( dllexport )</P>

<P>typedef void ERROR_CB(char *String, ...);</P>
<P>typedef void PRINTF_CB(char *String, ...);</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;geBoolean&#9;Verbose;</P>
<P>&#9;geBoolean&#9;EntityVerbose;</P>

<P>} BspParms;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;geBoolean&#9;Verbose;</P>
<P>&#9;geBoolean&#9;ExtraSamples;</P>
<P>&#9;float&#9;&#9;LightScale;</P>
<P>&#9;geBoolean&#9;Radiosity;</P>
<P>&#9;int32&#9;&#9;NumBounce;</P>
<P>&#9;float&#9;&#9;PatchSize;</P>
<P>&#9;geBoolean&#9;FastPatch;</P>
<P>&#9;float&#9;&#9;ReflectiveScale;</P>

<P>&#9;geVec3d&#9;MinLight;&#9;&#9;&#9;// R,G,B (XYZ) min color for each faces lightmap</P>

<P>} LightParms;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;geBoolean&#9;Verbose;</P>
<P>&#9;geBoolean&#9;FullVis;</P>
<P>&#9;geBoolean&#9;SortPortals;</P>

<P>} VisParms;</P>

<P>typedef enum</P>
<P>{</P>
<P>&#9;GBSP_ERROR,</P>
<P>&#9;GBSP_OK,</P>
<P>&#9;GBSP_CANCEL</P>
<P>} GBSP_RETVAL;</P>

<P>extern geBoolean&#9;CancelRequest;&#9;&#9;// Global cancel request...</P>

<P>typedef GBSP_RETVAL GBSP_CREATE_BSP(char *MapText, BspParms *Parms);</P>
<P>typedef GBSP_RETVAL GBSP_S_FILE(char *FileName);</P>
<P>typedef void GBSP_FREE_BSP(void);</P>
<P>typedef GBSP_RETVAL GBSP_VIS_FILE(char *FileName, VisParms *Parms);</P>
<P>typedef GBSP_RETVAL GBSP_LIGHT_FILE(char *FileName, LightParms *Parms);</P>
<P>typedef geBoolean GBSP_CANCEL_COMPILE(void);</P>
<P>typedef geBoolean GBSP_UPDATE_ENTITIES(char *MapName, char *BSPName);</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;ERROR_CB&#9;&#9;*Error;&#9;&#9;&#9;// This must be set by caller</P>
<P>&#9;PRINTF_CB&#9;&#9;*Printf;&#9;&#9;// This too</P>

<P>} GBSP_Hook;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;&#9;&#9;&#9;&#9;VersionMajor;&#9;&#9;&#9;// Major changes, like function parms...</P>
<P>&#9;int32&#9;&#9;&#9;&#9;&#9;VersionMinor;&#9;&#9;&#9;// Internal changes, that do not effect caller</P>
<P>&#9;GBSP_CREATE_BSP&#9;&#9;&#9;*GBSP_CreateBSP;</P>
<P>&#9;GBSP_S_FILE&#9;&#9;&#9;&#9;*GBSP_SaveGBSPFile;</P>
<P>&#9;GBSP_FREE_BSP&#9;&#9;&#9;*GBSP_FreeBSP;</P>
<P>&#9;GBSP_VIS_FILE&#9;&#9;&#9;*GBSP_VisGBSPFile;</P>
<P>&#9;GBSP_LIGHT_FILE&#9;&#9;&#9;*GBSP_LightGBSPFile;</P>
<P>&#9;GBSP_CANCEL_COMPILE&#9;&#9;*GBSP_Cancel;</P>
<P>&#9;GBSP_UPDATE_ENTITIES&#9;*GBSP_UpdateEntities;</P>
<P>} GBSP_FuncHook;</P>

<P>extern GBSP_Hook GHook;</P>

<P>typedef GBSP_FuncHook *GBSP_INIT(GBSP_Hook *Hook);</P>

<P>#endif</P>

<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156829">GBSPPrep.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  GBSPPrep.h                                                                          */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: John Pollard                                                                */</P>
<P>/*  Description: Saves non GFX data to GFX data (GFX data is data on disk)              */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef GBSPPREP_H</P>
<P>#define GBSPPREP_H</P>

<P>#include &lt;Windows.h&gt;</P>
<P>#include &lt;Stdio.h&gt;</P>

<P>#include "BSP.h"</P>

<P>void&#9;&#9;BeginGBSPModels(void);</P>
<P>geBoolean&#9;PrepGBSPModel(GBSP_Model *Model, geBoolean SaveVis);</P>
<P>geBoolean&#9;PrepAllGBSPModels(void);</P>
<P>geBoolean&#9;ConvertGBSPToFile(char *FileName);</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156830">Leaf.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  Leaf.h                                                                              */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: John Pollard                                                                */</P>
<P>/*  Description: Creates leaf collision hulls, areas, etc...                            */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef LEAF_H</P>
<P>#define LEAF_H</P>

<P>#include &lt;Windows.h&gt;</P>

<P>#include "BSP.h"</P>

<P>#define MAX_LEAF_SIDES&#9;64000*2</P>

<P>&nbsp;</P>
<P>extern int32&#9;&#9;&#9;&#9;NumLeafClusters;</P>
<P>extern int32&#9;&#9;&#9;&#9;NumLeafSides;</P>
<P>extern int32&#9;&#9;&#9;&#9;NumLeafBevels;</P>

<P>extern GBSP_LeafSide&#9;LeafSides[MAX_LEAF_SIDES];</P>

<P>geBoolean CreateLeafClusters(GBSP_Node *RootNode);</P>
<P>geBoolean CreateLeafSides(GBSP_Node *RootNode);</P>
<P>geBoolean CreateAreas(GBSP_Node *RootNode);</P>
<P>GBSP_Node *FindLeaf(GBSP_Node *Node, geVec3d *Origin);</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156831">Light.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  Light.h                                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: John Pollard                                                                */</P>
<P>/*  Description: Lights a BSP                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef LIGHT_H</P>
<P>#define LIGHT_H</P>

<P>#include &lt;Windows.h&gt;</P>
<P>#include &lt;Stdio.h&gt;</P>

<P>#include "GBSPfile.h"</P>
<P>#include "GBSPLib.h"&#9;&#9;&#9;&#9;// Lightparms</P>
<P>#include "BSP.h"</P>

<P>#define MAX_PATCHES&#9;&#9;65000&#9;&#9;// Any higher and 16 bit overflow will result</P>

<P>#define MAX_LTYPES&#9;&#9;4</P>
<P>#define MAX_LTYPE_INDEX&#9;12</P>

<P>#define LGRID_SIZE&#9;&#9;16&#9;&#9;&#9;// Must be multiple of 2</P>
<P>//#define&#9;MAX_LMAP_SIZE&#9;128&#9;&#9;&#9;// In lightmap pexels (This will allow the face to be 128*16 in floating units at lmap scale of 1.0f)</P>
<P>//#define&#9;MAX_LMAP_SIZE&#9;64&#9;&#9;&#9;// In lightmap pexels (This will allow the face to be 64*16 in floating units at lmap scale of 1.0f)</P>
<P>#define&#9;MAX_LMAP_SIZE&#9;18&#9;&#9;&#9;// In lightmap pexels</P>

<P>extern float&#9;&#9;LightScale;</P>
<P>extern float&#9;&#9;EntityScale;</P>
<P>extern float&#9;&#9;MaxLight;</P>
<P>extern int32&#9;&#9;NumSamples;</P>

<P>extern geBoolean&#9;LVerbose;</P>
<P>extern geBoolean&#9;DoRadiosity;</P>
<P>extern float&#9;&#9;PatchSize;</P>
<P>extern int32&#9;&#9;NumBounce;</P>
<P>extern geBoolean&#9;FastPatch;</P>
<P>extern float&#9;&#9;ReflectiveScale;</P>

<P>extern geVec3d&#9;&#9;MinLight;</P>

<P>int32 FindGFXLeaf(int32 Node, geVec3d *Vert);</P>
<P>geBoolean RayCollision(geVec3d *Front, geVec3d *Back, geVec3d *I);</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;geVec3d&#9;&#9;*RGBLData[MAX_LTYPE_INDEX];</P>
<P>&#9;int32&#9;&#9;NumLTypes;</P>
<P>&#9;geBoolean&#9;RGB;</P>
<P>&#9;float&#9;&#9;Mins[2];</P>
<P>&#9;float&#9;&#9;Maxs[2];</P>
<P>&#9;int32&#9;&#9;LMaxs[2];</P>
<P>&#9;int32&#9;&#9;LMins[2];</P>
<P>&#9;int32&#9;&#9;LSize[2];</P>
<P>} LInfo;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;&#9;Face;</P>
<P>&#9;GFX_Plane&#9;Plane;</P>
<P>&#9;geVec3d&#9;&#9;T2WVecs[2];</P>
<P>&#9;geVec3d&#9;&#9;TexOrg;</P>
<P>&#9;geVec3d&#9;&#9;*Points;</P>
<P>&#9;int32&#9;&#9;NumPoints;</P>

<P>&#9;geVec3d&#9;&#9;Center;</P>
<P>&#9;geFloat&#9;&#9;Radius;</P>
<P>} FInfo;</P>

<P>extern LInfo&#9;*Lightmaps;</P>
<P>extern FInfo&#9;*FaceInfo;</P>

<P>geBoolean LightGBSPFile(char *FileName, LightParms *Parms);</P>

<P>void CleanupLight(void);</P>

<P>//====================================================================================</P>
<P>//&#9;Radiosity stuff</P>
<P>//====================================================================================</P>
<P>struct _RAD_Receiver;</P>

<P>typedef struct _RAD_Patch</P>
<P>{</P>
<P>&#9;_RAD_Patch&#9;&#9;*Next;&#9;&#9;&#9;&#9;// Next patch in list</P>

<P>&#9;GBSP_Poly&#9;&#9;*Poly;&#9;&#9;&#9;&#9;// Poly for patch&#9;(Not used thoughout entire life)</P>
<P>&#9;geVec3d&#9;&#9;&#9;Origin;&#9;&#9;&#9;&#9;// Origin</P>
<P>&#9;int32&#9;&#9;&#9;Leaf;&#9;&#9;&#9;&#9;// Leaf patch is looking into</P>
<P>&#9;float&#9;&#9;&#9;Area;&#9;&#9;&#9;&#9;// Area of patch</P>
<P>&#9;GBSP_Plane&#9;&#9;Plane;&#9;&#9;&#9;&#9;// Plane</P>
<P>&#9;uint16&#9;&#9;&#9;NumReceivers;</P>
<P>&#9;_RAD_Receiver&#9;*Receivers;&#9;&#9;&#9;// What patches this patch emits to</P>
<P>&#9;int32&#9;&#9;&#9;NumSamples;&#9;&#9;&#9;// Number of samples lightmaps has contributed</P>

<P>&#9;geVec3d&#9;&#9;&#9;RadStart;&#9;&#9;&#9;// Power of patch from original lightmap</P>
<P>&#9;geVec3d&#9;&#9;&#9;RadSend;&#9;&#9;&#9;// How much to send each bounce</P>
<P>&#9;geVec3d&#9;&#9;&#9;RadReceive;&#9;&#9;&#9;// How much received from current bounce</P>
<P>&#9;geVec3d&#9;&#9;&#9;RadFinal;&#9;&#9;&#9;// How much received from all bounces (what to add back to the lightmap)</P>

<P>&#9;geVec3d&#9;&#9;&#9;Reflectivity;</P>

<P>&#9;geVec3d&#9;&#9;&#9;Mins;&#9;&#9;&#9;&#9;// Mins/ Max of patch</P>
<P>&#9;geVec3d&#9;&#9;&#9;Maxs;</P>
<P>} RAD_Patch, *pRAD_Patch;</P>

<P>typedef struct _RAD_Receiver</P>
<P>{</P>
<P>&#9;//_RAD_Receiver&#9;*Next;&#9;&#9;&#9;&#9;// Next Receiver for patch</P>
<P>&#9;//RAD_Patch&#9;&#9;*Patch;&#9;&#9;&#9;&#9;// Patch this Receiver emits ti</P>
<P>&#9;//float&#9;&#9;&#9;Amount;&#9;&#9;&#9;&#9;// How much to the receiving patch gets</P>
<P>&#9;uint16&#9;&#9;&#9;Patch;</P>
<P>&#9;uint16&#9;&#9;&#9;Amount;</P>
<P>} RAD_Receiver;</P>

<P>extern pRAD_Patch&#9;*FacePatches;</P>
<P>extern pRAD_Patch&#9;*PatchList;</P>
<P>extern float&#9;&#9;*RecAmount;</P>

<P>extern int32&#9;&#9;NumPatches;</P>
<P>extern int32&#9;&#9;NumReceivers;</P>

<P>geBoolean BuildPatches(void);</P>
<P>void FreePatches(void);</P>
<P>geBoolean CalcReceivers(char *FileName);</P>
<P>void FreeReceivers(void);</P>
<P>geBoolean BouncePatches(void);</P>
<P>geBoolean AbsorbPatches(void);</P>

<P>typedef struct Tri_Edge</P>
<P>{</P>
<P>&#9;int32&#9;&#9;&#9;&#9;p0, p1;</P>
<P>&#9;geVec3d&#9;&#9;&#9;&#9;normal;</P>
<P>&#9;float&#9;&#9;&#9;&#9;dist;</P>
<P>&#9;struct Tri&#9;&#9;&#9;*tri;</P>
<P>} Tri_Edge;</P>

<P>typedef struct Tri</P>
<P>{</P>
<P>&#9;Tri_Edge&#9;&#9;&#9;*Edges[3];</P>
<P>} Tri;</P>

<P>#define&#9;MAX_TRI_POINTS&#9;&#9;1024</P>
<P>#define&#9;MAX_TRI_EDGES&#9;&#9;(MAX_TRI_POINTS*6)</P>
<P>#define&#9;MAX_TRI_TRIS&#9;&#9;(MAX_TRI_POINTS*2)</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int&#9;&#9;&#9;NumPoints;</P>
<P>&#9;int&#9;&#9;&#9;NumEdges;</P>
<P>&#9;int&#9;&#9;&#9;NumTris;</P>
<P>&#9;GBSP_Plane&#9;*Plane;</P>
<P>&#9;Tri_Edge&#9;*EdgeMatrix[MAX_TRI_POINTS][MAX_TRI_POINTS];</P>
<P>&#9;RAD_Patch&#9;*Points[MAX_TRI_POINTS];</P>
<P>&#9;Tri_Edge&#9;Edges[MAX_TRI_EDGES];</P>
<P>&#9;Tri&#9;&#9;&#9;TriList[MAX_TRI_TRIS];</P>
<P>} Tri_Patch;</P>

<P>Tri_Patch&#9;*Tri_PatchCreate(GBSP_Plane *Plane);</P>
<P>void&#9;&#9;Tri_PatchDestroy(Tri_Patch *tr);</P>
<P>Tri_Edge&#9;*FindEdge (Tri_Patch *TriPatch, int p0, int p1);</P>
<P>Tri&#9;&#9;&#9;*AllocTriangle(Tri_Patch *TriPatch);</P>
<P>geBoolean&#9;Tri_Edge_r(Tri_Patch *TriPatch, Tri_Edge *e);</P>
<P>geBoolean&#9;TriangulatePoints(Tri_Patch *TriPatch);</P>
<P>geBoolean&#9;AddPointToTriangulation (RAD_Patch *patch, Tri_Patch *TriPatch);</P>
<P>void&#9;&#9;LerpTriangle (Tri_Patch *TriPatch, Tri *t, geVec3d *Point, geVec3d *Color);</P>
<P>geBoolean&#9;Tri_PointInside(Tri *Tri, geVec3d *Point);</P>
<P>geBoolean&#9;SampleTriangulation(geVec3d *Point, Tri_Patch *TriPatch, geVec3d *Color);</P>
<P>geBoolean&#9;FindClosestTriPoint(geVec3d *Point, Tri_Patch *Tri, geVec3d *Color);</P>

<P>&nbsp;</P>
<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156832">Map.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  Map.h                                                                               */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: John Pollard                                                                */</P>
<P>/*  Description: Module for loading a .map file.                                        */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef MAP_H</P>
<P>#define MAP_H</P>

<P>#include &lt;Windows.h&gt;</P>

<P>#include "BSP.h"</P>
<P>#include "Motion.h"</P>

<P>#define MAX_MAP_ENTITIES&#9;&#9;&#9;2048</P>
<P>#define MAX_MAP_TEXINFO&#9;&#9;&#9;&#9;2048</P>
<P>#define MAX_MAP_TEXTURES&#9;&#9;&#9;128</P>

<P>#pragma pack(1)</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;&#9;Version;</P>
<P>&#9;char&#9;&#9;TAG[4];</P>
<P>&#9;int32&#9;&#9;NumEntities;</P>
<P>} MAP_BrushFileHeader;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;&#9;Flags;</P>
<P>&#9;int32&#9;&#9;NumFaces;</P>
<P>} MAP_BrushHeader;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;&#9;Flags;</P>
<P>&#9;float&#9;&#9;MipMapBias;</P>
<P>&#9;float&#9;&#9;Alpha;&#9;&#9;&#9;&#9;&#9;// Alpha for brush</P>
<P>&#9;float&#9;&#9;FaceLight;&#9;&#9;&#9;&#9;// Light intensity for face light</P>
<P>&#9;float&#9;&#9;ReflectiveScale;</P>
<P>&#9;char&#9;&#9;TexName[32];</P>
<P>&#9;float&#9;&#9;uVecX, uVecY, uVecZ;</P>
<P>&#9;float&#9;&#9;DrawScaleX, OffsetX;</P>
<P>&#9;float&#9;&#9;vVecX, vVecY, vVecZ;</P>
<P>&#9;float&#9;&#9;DrawScaleY, OffsetY;</P>

<P>} MAP_FaceHeader;</P>

<P>#pragma pack()</P>

<P>typedef struct _MAP_Epair</P>
<P>{</P>
<P>&#9;_MAP_Epair&#9;*Next;</P>
<P>&#9;char&#9;&#9;*Key;</P>
<P>&#9;char&#9;&#9;*Value;</P>

<P>} MAP_Epair;</P>

<P>#define ENTITY_HAS_ORIGIN&#9;&#9;(1&lt;&lt;0)</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;MAP_Brush&#9;&#9;*Brushes2;</P>

<P>&#9;geMotion&#9;&#9;*Motion;&#9;&#9;&#9;// Temp motion data for entity if it contains a model</P>

<P>&#9;MAP_Epair&#9;&#9;*Epairs;</P>

<P>&#9;int32&#9;&#9;&#9;ModelNum;&#9;&#9;&#9;// If brushes != NULL, entity will have a model num</P>

<P>&#9;// For light stage</P>
<P>&#9;char&#9;&#9;&#9;ClassName[64];</P>
<P>&#9;geVec3d&#9;&#9;&#9;Origin;&#9;&#9;&#9;&#9;// Well, this is used everywhere...</P>
<P>&#9;float&#9;&#9;&#9;Angle;</P>
<P>&#9;int32&#9;&#9;&#9;Light;</P>
<P>&#9;int32&#9;&#9;&#9;LType;</P>
<P>&#9;char&#9;&#9;&#9;Target[32];</P>
<P>&#9;char&#9;&#9;&#9;TargetName[32];</P>

<P>&#9;uint32&#9;&#9;&#9;Flags;</P>
<P>} MAP_Entity;</P>

<P>extern&#9;int32&#9;&#9;NumEntities;</P>
<P>extern&#9;MAP_Entity&#9;Entities[MAX_MAP_ENTITIES];</P>

<P>//=====================================================================================</P>
<P>//&#9;Entity parsing functions</P>
<P>//=====================================================================================</P>
<P>char&#9;&#9;*ValueForKey(MAP_Entity *Ent, char *Key);</P>
<P>void&#9;&#9;SetKeyValue(MAP_Entity *Ent, char *Key, char *Value);</P>
<P>float&#9;&#9;FloatForKey(MAP_Entity *Ent, char *Key);</P>
<P>void&#9;&#9;GetVectorForKey(MAP_Entity *Ent, char *Key, geVec3d *Vec);</P>
<P>geBoolean&#9;GetVectorForKey2(MAP_Entity *Ent, char *Key, geVec3d *Vec);</P>
<P>void&#9;&#9;GetColorForKey(MAP_Entity *Ent, char *Key, geVec3d *Vec);</P>
<P>char&#9;&#9;*NewString(char *Str);</P>

<P>//=====================================================================================</P>
<P>//&#9;Misc functions</P>
<P>//=====================================================================================</P>
<P>geBoolean&#9;SaveEntityData(geVFile *VFile);</P>
<P>geBoolean&#9;LoadEntityData(geVFile *VFile);</P>
<P>geBoolean&#9;ConvertGFXEntDataToEntities(void);</P>
<P>geBoolean&#9;ConvertEntitiesToGFXEntData(void);</P>
<P>void&#9;&#9;FreeAllEntities(void);</P>
<P>geBoolean&#9;LoadBrushFile(char *FileName);</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156833">Mathlib.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  MathLib.h                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: John Pollard                                                                */</P>
<P>/*  Description: Various math functions not included in Vec3d.h, etc...                 */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef MATHLIB_H</P>
<P>#define MATHLIB_H</P>

<P>#include "Vec3d.h"</P>

<P>//#define&#9;ON_EPSILON&#9;&#9;&#9;(geFloat)0.05</P>
<P>#define&#9;&#9;ON_EPSILON&#9;&#9;&#9;(geFloat)0.1</P>
<P>//#define&#9;ON_EPSILON&#9;&#9;&#9;0.05f</P>
<P>#define&#9;&#9;VCOMPARE_EPSILON&#9;ON_EPSILON </P>

<P>//#define&#9;MIN_MAX_BOUNDS&#9;&#9;8192.0f</P>
<P>#define&#9;&#9;MIN_MAX_BOUNDS&#9;&#9;15192.0f</P>
<P>#define&#9;&#9;MIN_MAX_BOUNDS2&#9;&#9;MIN_MAX_BOUNDS*2</P>

<P>#define&#9;&#9;VectorToSUB(a, b)&#9;(*(((geFloat*)&amp;a) + b) )</P>

<P>#define&#9;&#9;PLANE_X&#9;&#9;&#9;&#9;0</P>
<P>#define&#9;&#9;PLANE_Y&#9;&#9;&#9;&#9;1</P>
<P>#define&#9;&#9;PLANE_Z&#9;&#9;&#9;&#9;2</P>
<P>#define&#9;&#9;PLANE_ANYX&#9;&#9;&#9;3</P>
<P>#define&#9;&#9;PLANE_ANYY&#9;&#9;&#9;4</P>
<P>#define&#9;&#9;PLANE_ANYZ&#9;&#9;&#9;5</P>
<P>#define&#9;&#9;PLANE_ANY&#9;&#9;&#9;6&#9;&#9;</P>

<P>extern&#9;&#9;geVec3d&#9;&#9;&#9;&#9;VecOrigin;</P>

<P>void&#9;&#9;ClearBounds(geVec3d *Mins, geVec3d *Maxs);</P>
<P>void&#9;&#9;AddPointToBounds(geVec3d *v, geVec3d *Mins, geVec3d *Maxs);</P>

<P>geFloat&#9;&#9;ColorNormalize(geVec3d *C1, geVec3d *C2);</P>
<P>geFloat&#9;&#9;ColorClamp(geVec3d *C1, geFloat Clamp, geVec3d *C2);</P>

<P>int32&#9;&#9;geVec3d_PlaneType(geVec3d *V1);</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156834">Poly.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  Poly.h                                                                              */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: John Pollard                                                                */</P>
<P>/*  Description: Various Poly routines (clipping, splitting, etc)                       */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef POLY_H</P>
<P>#define POLY_H</P>

<P>#include &lt;Windows.h&gt;</P>

<P>#include "BSP.h"</P>
<P>#include "MathLib.h"</P>

<P>extern geBoolean&#9;gCountVerts;</P>
<P>extern int32&#9;&#9;gTotalVerts;</P>
<P>extern int32&#9;&#9;gPeekVerts;&#9;</P>

<P>//</P>
<P>//&#9;Polys</P>
<P>//</P>
<P>GBSP_Poly&#9;*AllocPoly(int32 NumVerts);</P>
<P>void&#9;&#9;FreePoly(GBSP_Poly *Poly);</P>
<P>GBSP_Poly&#9;*CreatePolyFromPlane(GBSP_Plane *Plane);</P>
<P>geBoolean&#9;ClipPoly(GBSP_Poly *InPoly, GBSP_Plane *Plane, geBoolean FlipTest, GBSP_Poly **OutPoly);</P>
<P>geBoolean&#9;ClipPolyEpsilon(GBSP_Poly *InPoly, geFloat Epsilon, GBSP_Plane *Plane, geBoolean FlipTest, GBSP_Poly **OutPoly);</P>
<P>geBoolean&#9;SplitPoly(GBSP_Poly *InPoly, GBSP_Plane *Plane, GBSP_Poly **Front, GBSP_Poly **Back, </P>
<P>&#9;&#9;&#9;   geBoolean FlipTest);</P>
<P>geBoolean&#9;SplitPolyEpsilon(GBSP_Poly *InPoly, geFloat Epsilon, GBSP_Plane *Plane, GBSP_Poly **Front, GBSP_Poly **Back, </P>
<P>&#9;&#9;&#9;   geBoolean FlipTest);</P>
<P>float&#9;&#9;PolyArea(GBSP_Poly *Poly);</P>
<P>geBoolean&#9;CopyPoly(GBSP_Poly *In, GBSP_Poly **Out);</P>
<P>GBSP_Poly&#9;*CopyPoly2(GBSP_Poly *In);</P>
<P>geBoolean&#9;ReversePoly(GBSP_Poly *In, GBSP_Poly **Out);</P>
<P>void&#9;&#9;RemoveDegenerateEdges(GBSP_Poly *Poly);</P>
<P>geBoolean&#9;RemoveDegenerateEdges2(GBSP_Poly *Poly);</P>
<P>void&#9;&#9;PolyCenter(GBSP_Poly *Poly, geVec3d *Center);</P>
<P>geBoolean&#9;PolyIsTiny (GBSP_Poly *Poly);</P>

<P>//</P>
<P>//&#9;Faces</P>
<P>//</P>

<P>GBSP_Face&#9;*AllocFace(int32 NumVerts);</P>
<P>void&#9;&#9;FreeFace(GBSP_Face *Face);</P>
<P>geBoolean&#9;SplitFace(GBSP_Face *In, GBSP_Plane *Split, GBSP_Face **Front, GBSP_Face **Back, geBoolean FlipTest);</P>
<P>void&#9;&#9;FreeFaceList(GBSP_Face *List);</P>
<P>int32&#9;&#9;MergeFaceList(GBSP_Face *In, GBSP_Face **Out, geBoolean Mirror);</P>
<P>int32&#9;&#9;EdgeExist(geVec3d *Edge1, GBSP_Poly *Poly, int32 *EdgeIndexOut);</P>
<P>GBSP_Face&#9;*MergeFace(GBSP_Face *Face1, GBSP_Face *Face2);</P>
<P>geBoolean&#9;CheckFace(GBSP_Face *Face, geBoolean Verb);</P>
<P>void&#9;&#9;GetFaceListBOX(GBSP_Face *Faces, geVec3d *Mins, geVec3d *Maxs);</P>

<P>extern int32&#9;NumSubdivides;</P>
<P>extern float&#9;SubdivideSize;</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156835">Portals.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  Portals.h                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: John Pollard                                                                */</P>
<P>/*  Description: Creates and manages portals (passages from leaf-to-leaf)               */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef PORTALS_H</P>
<P>#define PORTALS_H</P>

<P>#include &lt;Windows.h&gt;</P>

<P>#include "BSP.h"</P>

<P>extern GBSP_Node&#9;*OutsideNode;&#9;&#9;&#9;&#9;// Current outside node being used</P>

<P>geBoolean CreatePortals(GBSP_Node *RootNode, GBSP_Model *Model, geBoolean Vis);</P>
<P>geBoolean FreePortals(GBSP_Node *RootNode);</P>

<P>geBoolean GetLeafBBoxFromPortals(GBSP_Node *Node, geVec3d *Mins, geVec3d *Maxs);</P>

<P>geBoolean PartitionPortals_r(GBSP_Node *Node);</P>

<P>// This function actually lives in PortFile.cpp</P>
<P>geBoolean SavePortalFile(GBSP_Model *Model, char *FileName);</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156836">Texture.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  Texture.h                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: John Pollard                                                                */</P>
<P>/*  Description: This code keeps a list of shared textures.                             */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef TEXTURE_H</P>
<P>#define TEXTURE_H</P>

<P>//#include &lt;Windows.h&gt;</P>

<P>#include &lt;Stdio.h&gt;</P>
<P>#include "Map.h"</P>
<P>#include "DCommon.h"</P>
<P>#include "GBSPFile.h"</P>
<P>#include "VFile.h"</P>

<P>#define TEXTURE_SKYBOX&#9;&#9;(1&lt;&lt;0)</P>

<P>// Don't let this naming convention full you.  TEXINFO is just everything about a face, that could be</P>
<P>// shared with another face or more...</P>
<P>#define TEXINFO_MIRROR&#9;&#9;(1&lt;&lt;0)&#9;&#9;&#9;&#9;&#9;// This face is a mirror face</P>
<P>#define TEXINFO_FULLBRIGHT&#9;(1&lt;&lt;1)&#9;&#9;&#9;&#9;&#9;// This face is fully bright</P>
<P>#define TEXINFO_SKY&#9;&#9;&#9;(1&lt;&lt;2)&#9;&#9;&#9;&#9;&#9;// This face is a sky portal</P>
<P>#define TEXINFO_LIGHT&#9;&#9;(1&lt;&lt;3)&#9;&#9;&#9;&#9;&#9;// This face emits light</P>
<P>#define TEXINFO_TRANS&#9;&#9;(1&lt;&lt;4)&#9;&#9;&#9;&#9;&#9;// A hint to the engine, that this face is not solid </P>
<P>#define TEXINFO_GOURAUD&#9;&#9;(1&lt;&lt;5)&#9;&#9;&#9;&#9;&#9;// This face is gouraud shaded</P>
<P>#define TEXINFO_FLAT&#9;&#9;(1&lt;&lt;6)&#9;&#9;&#9;&#9;&#9;// This face is flat shaded</P>
<P>#define TEXINFO_NO_LIGHTMAP&#9;(1&lt;&lt;15)&#9;&#9;&#9;&#9;&#9;// This face does not have a lightmap</P>

<P>geBoolean InitTextureLib(char *File);</P>
<P>void ShutdownTextureLib(void);</P>
<P>geBoolean GetTexture(char *Name, uint8 *Data, int32 *Size, int32 *Width, int32 *Height, geVFile *f);</P>
<P>geBoolean GetTexturePalette(const char *Name, DRV_Palette Palette);</P>

<P>extern int32&#9;&#9;NumTextures;</P>
<P>extern GFX_Texture&#9;Textures[MAX_MAP_TEXTURES];</P>
<P>extern int32&#9;&#9;NumTexInfo;</P>
<P>extern GFX_TexInfo&#9;TexInfo[MAX_MAP_TEXINFO];</P>

<P>int32 FindTextureIndex(char *Name, uint32 Flags);</P>
<P>int32 FindTexInfo(GFX_TexInfo *Tex2);</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156837">Utils.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  Utils.h                                                                             */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: John Pollard                                                                */</P>
<P>/*  Description: Various handy functions                                                */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef UTILS_H</P>
<P>#define UTILS_H</P>

<P>#include &lt;StdIo.h&gt;</P>

<P>#define PATH_SEPERATOR   '/'</P>

<P>//</P>
<P>//&#9;File name manipulation</P>
<P>//</P>
<P>void DefaultExtension (char *Path, char *Ext);</P>
<P>void StripFilename (char *Path);</P>
<P>void StripExtension (char *Path);</P>
<P>void ExtractFilePath (char *Path, char *Dest);</P>
<P>void ExtractFileBase (char *Path, char *Dest);</P>
<P>void ExtractFileExtension (char *Path, char *Dest);</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156838">Vis.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  Vis.h                                                                               */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: John Pollard                                                                */</P>
<P>/*  Description: Vises a BSP                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef VIS_H</P>
<P>#define VIS_H</P>

<P>#include &lt;Windows.h&gt;</P>
<P>#include &lt;Stdio.h&gt;</P>

<P>#include "BSP.h"</P>
<P>#include "GBSPFile.h"</P>

<P>&nbsp;</P>
<P>typedef struct _VIS_Portal</P>
<P>{</P>
<P>&#9;_VIS_Portal&#9;*Next;&#9;&#9;&#9;&#9;&#9;// Next portal in list</P>

<P>&#9;GBSP_Poly&#9;*Poly;&#9;&#9;&#9;&#9;&#9;// Convex poly shape of portal</P>
<P>&#9;GBSP_Plane&#9;Plane;&#9;&#9;&#9;&#9;&#9;// Plane of portal</P>
<P>&#9;geVec3d&#9;&#9;Center;&#9;&#9;&#9;&#9;&#9;// Center of portal</P>
<P>&#9;float&#9;&#9;Radius;&#9;&#9;&#9;&#9;&#9;// Radius of portal (Fromt Center to a vert)</P>

<P>&#9;uint8&#9;&#9;*VisBits;&#9;&#9;&#9;&#9;// What leafs portal might can see (byte compressed)</P>
<P>&#9;uint8&#9;&#9;*FinalVisBits;&#9;&#9;&#9;// What leafs portal really can see (byte compressed)</P>
<P>&#9;int32&#9;&#9;Leaf;&#9;&#9;&#9;&#9;&#9;// What leaf portal is looking directly into</P>
<P>&#9;int32&#9;&#9;MightSee;</P>
<P>&#9;int32&#9;&#9;CanSee;</P>
<P>&#9;geBoolean&#9;Done;</P>

<P>} VIS_Portal, *pVIS_Portal;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;VIS_Portal&#9;*Portals;&#9;&#9;&#9;&#9;// List of portals for this leaf</P>
<P>&#9;int32&#9;&#9;MightSee;</P>
<P>&#9;int32&#9;&#9;CanSee;</P>
<P>} VIS_Leaf;</P>

<P>&nbsp;</P>
<P>#define MAX_TEMP_PORTALS&#9;&#9;25000</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;uint8&#9;&#9;VisBits[MAX_TEMP_PORTALS/8];</P>
<P>&#9;GBSP_Poly&#9;*Source;</P>
<P>&#9;GBSP_Poly&#9;*Pass;</P>
<P>} VIS_PStack;</P>

<P>geBoolean VisGBSPFile(char *FileName, VisParms *Parms);</P>

<P>void CleanupVis(void);</P>

<P>geBoolean VisAllLeafs(void);</P>
<P>geBoolean CollectLeafVisBits(int32 LeafNum);</P>
<P>void FloodPortalsFast_r(VIS_Portal *SrcPortal, VIS_Portal *DestPortal);</P>
<P>void FloodLeafPortalsFast(int32 LeafNum);</P>
<P>geBoolean PortalCanSeePortal(VIS_Portal *Portal1, VIS_Portal *Portal2);</P>
<P>geBoolean LoadPortalFile(char *FileName);</P>

<P>geBoolean FloodLeafPortalsSlow(int32 LeafNum);</P>
<P>geBoolean FloodPortalsSlow(void);</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<I><P><A NAME="_Toc454156839">OpenSource/Tools/GBSPLib/SDKShare/Include Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>This library is a duplicate of the regular outer include library which all the other tools use with the exception that it uses one different header file, dcommon.h.  That file is documented below.  In addition, the model headers, Actor.h, body.h and Extbox.h are not referenced or found in this subdirectory.  With these exceptions all the other headers files are the same.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156840">Dcommon.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  DCommon.h                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: John Pollard                                                                */</P>
<P>/*  Description: Header file for all driver modules.                                    */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef DCOMMON_H</P>
<P>#define DCOMMON_H</P>

<P>//#include &lt;Windows.h&gt;&#9;// {} CB commented out windows</P>
<P>// If you include Windows it MUST be before dcommon!</P>

<P>// FIXME:  What should we do with these?</P>
<P>#include "XForm3d.h"</P>
<P>#include "Vec3d.h"</P>
<P>#include "PixelFormat.h"</P>
<P>#include "geTypes.h"&#9;&#9;// This is a no no</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>#pragma pack(push)</P>
<P>#pragma pack(8)</P>

<P>#ifndef WINVER</P>
<P>#ifdef STRICT</P>
<P>typedef struct HWND__ * HWND;</P>
<P>typedef struct HBITMAP__ * HBITMAP;</P>
<P>#else // STRICT</P>
<P>typedef void * HWND;</P>
<P>typedef void * HBITMAP;</P>
<P>#endif // STRICT</P>

<P>#ifndef VOID</P>
<P>#define VOID void</P>
<P>typedef char CHAR;</P>
<P>typedef short SHORT;</P>
<P>typedef long LONG;</P>
<P>#endif</P>

<P>#ifndef BASETYPES</P>
<P>#define BASETYPES</P>
<P>typedef unsigned long ULONG;</P>
<P>typedef ULONG *PULONG;</P>
<P>typedef unsigned short USHORT;</P>
<P>typedef USHORT *PUSHORT;</P>
<P>typedef unsigned char UCHAR;</P>
<P>typedef UCHAR *PUCHAR;</P>
<P>typedef char *PSZ;</P>
<P>#endif  /* !BASETYPES */</P>

<P>typedef unsigned long       DWORD;</P>
<P>typedef int                 geBoolean;</P>
<P>typedef unsigned char       BYTE;</P>
<P>typedef unsigned short      WORD;</P>
<P>typedef float               FLOAT;</P>

<P>typedef struct tagRECT</P>
<P>{</P>
<P>    LONG    left;</P>
<P>    LONG    top;</P>
<P>    LONG    right;</P>
<P>    LONG    bottom;</P>
<P>} RECT;</P>

<P>#endif // WINVER</P>

<P>#define&#9;DRIVERCC _fastcall</P>

<P>#ifndef __cplusplus</P>
<P>&#9;#define DllImport&#9;__declspec( dllimport )</P>
<P>&#9;#define DllExport&#9;__declspec( dllexport )</P>
<P>#else</P>
<P>&#9;#define DllImport&#9;extern "C" __declspec( dllimport )</P>
<P>&#9;#define DllExport&#9;extern "C" __declspec( dllexport )</P>
<P>#endif</P>

<P>#define DRV_VERSION_MAJOR&#9;&#9;100&#9;&#9;&#9;// Genesis 1.0</P>
<P>#define DRV_VERSION_MINOR&#9;&#9;2</P>
<P>#define DRV_VMAJS&#9;&#9;&#9;&#9;"100"</P>
<P>#define DRV_VMINS&#9;&#9;&#9;&#9;"2"</P>

<P>#ifndef US_TYPEDEFS</P>
<P>#define US_TYPEDEFS</P>

<P>&#9;typedef uint8&#9;U8;</P>
<P>&#9;typedef uint16&#9;U16;</P>
<P>&#9;typedef uint32&#9;U32;</P>
<P>&#9;typedef char&#9;C8;</P>
<P>&#9;typedef int8&#9;S8;</P>
<P>&#9;typedef int16&#9;S16;</P>
<P>&#9;typedef int32&#9;S32;</P>
<P>#endif</P>

<P>//===</P>
<P>typedef struct geRDriver_THandle&#9;geRDriver_THandle;</P>

<P>// DriverFormat flags</P>
<P>#define RDRIVER_PF_2D_SHIFT&#9;&#9;&#9;&#9;&#9;(0)&#9;&#9;&#9;// Supports being used as a 2d decal surface</P>
<P>#define RDRIVER_PF_3D_SHIFT&#9;&#9;&#9;&#9;&#9;(1)&#9;&#9;&#9;// Supports being used as a 3d poly surface</P>
<P>#define RDRIVER_PF_LIGHTMAP_SHIFT&#9;&#9;&#9;(2)&#9;&#9;&#9;// Surface is a lightmap surface</P>
<P>#define RDRIVER_PF_PALETTE_SHIFT&#9;&#9;&#9;(3)&#9;&#9;&#9;// Surface is a palette</P>
<P>#define RDRIVER_PF_ALPHA_SHIFT&#9;&#9;&#9;&#9;(4)&#9;&#9;&#9;// Surface is an alpha map</P>
<P>#define RDRIVER_PF_OPTIONAL_SHIFT&#9;&#9;&#9;(16)</P>
<P>#define RDRIVER_PF_HAS_ALPHA_SHIFT&#9;&#9;&#9;(RDRIVER_PF_OPTIONAL_SHIFT + 0)&#9;&#9;// Surface can take an alpha map</P>
<P>#define RDRIVER_PF_CAN_DO_COLORKEY_SHIFT&#9;(RDRIVER_PF_OPTIONAL_SHIFT + 1)&#9;&#9;// Surface supports colorkeying</P>
<P>#define RDRIVER_PF_COMBINE_LIGHTMAP_SHIFT&#9;(RDRIVER_PF_OPTIONAL_SHIFT + 2)&#9;&#9;&#9;// Supports being rendered with a lightmap (3d will be set as well)</P>

<P>#define RDRIVER_PF_2D&#9;&#9;&#9;&#9;&#9;(1&lt;&lt;RDRIVER_PF_2D_SHIFT)&#9;&#9;&#9;&#9;</P>
<P>#define RDRIVER_PF_3D&#9;&#9;&#9;&#9;&#9;(1&lt;&lt;RDRIVER_PF_3D_SHIFT)&#9;&#9;&#9;&#9;</P>
<P>#define RDRIVER_PF_LIGHTMAP&#9;&#9;&#9;&#9;(1&lt;&lt;RDRIVER_PF_LIGHTMAP_SHIFT)&#9;&#9;&#9;</P>
<P>#define RDRIVER_PF_COMBINE_LIGHTMAP&#9;&#9;(1&lt;&lt;RDRIVER_PF_COMBINE_LIGHTMAP_SHIFT)&#9;</P>
<P>#define RDRIVER_PF_PALETTE&#9;&#9;&#9;&#9;(1&lt;&lt;RDRIVER_PF_PALETTE_SHIFT)&#9;&#9;&#9;</P>
<P>#define RDRIVER_PF_ALPHA&#9;&#9;&#9;&#9;(1&lt;&lt;RDRIVER_PF_ALPHA_SHIFT)&#9;&#9;&#9;</P>
<P>#define RDRIVER_PF_CAN_DO_COLORKEY&#9;&#9;(1&lt;&lt;RDRIVER_PF_CAN_DO_COLORKEY_SHIFT)</P>
<P>#define RDRIVER_PF_HAS_ALPHA&#9;&#9;&#9;(1&lt;&lt;RDRIVER_PF_HAS_ALPHA_SHIFT)&#9;&#9;</P>
<P>#define RDRIVER_PF_MAJOR_MASK&#9;&#9;&#9;((1&lt;&lt;RDRIVER_PF_OPTIONAL_SHIFT)-1)</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;gePixelFormat&#9;PixelFormat;</P>
<P>&#9;uint32&#9;&#9;&#9;Flags;&#9;&#9;&#9;&#9;</P>
<P>} geRDriver_PixelFormat;</P>

<P>#define RDRIVER_THANDLE_HAS_COLORKEY&#9;(1&lt;&lt;0)&#9;&#9;// The thandle is using color keying</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;&#9;&#9;&#9;&#9;Width;</P>
<P>&#9;int32&#9;&#9;&#9;&#9;&#9;Height;</P>
<P>&#9;int32&#9;&#9;&#9;&#9;&#9;Stride;</P>
<P>&#9;uint32&#9;&#9;&#9;&#9;&#9;ColorKey;</P>
<P>&#9;uint32&#9;&#9;&#9;&#9;&#9;Flags;</P>
<P>&#9;geRDriver_PixelFormat&#9;PixelFormat;</P>

<P>} geRDriver_THandleInfo;</P>

<P>//===</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;S32&#9;LMapCount[16][4];&#9;&#9;&#9;&#9;// LMap size / MipLevel</P>
<P>} DRV_Debug;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;int32&#9;&#9;CacheFull;</P>
<P>&#9;int32&#9;&#9;CacheRemoved;</P>
<P>&#9;int32&#9;&#9;CacheFlushes;</P>
<P>&#9;int32&#9;&#9;TexMisses;</P>
<P>&#9;int32&#9;&#9;LMapMisses;</P>
<P>} DRV_CacheInfo;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;HWND&#9;&#9;hWnd;</P>
<P>&#9;</P>
<P>&#9;U8&#9;&#9;&#9;*Buffer;</P>

<P>&#9;S32&#9;&#9;&#9;Width;</P>
<P>&#9;S32&#9;&#9;&#9;Height;</P>

<P>&#9;S32&#9;&#9;&#9;PixelPitch;</P>
<P>&#9;S32&#9;&#9;&#9;BytesPerPixel;</P>

<P>&#9;S32&#9;&#9;&#9;R_shift;</P>
<P>&#9;S32&#9;&#9;&#9;G_shift;</P>
<P>&#9;S32&#9;&#9;&#9;B_shift;</P>

<P>&#9;U32&#9;&#9;&#9;R_mask;</P>
<P>&#9;U32&#9;&#9;&#9;G_mask;</P>
<P>&#9;U32&#9;&#9;&#9;B_mask;</P>

<P>&#9;S32&#9;&#9;&#9;R_width;</P>
<P>&#9;S32&#9;&#9;&#9;G_width;</P>
<P>&#9;S32&#9;&#9;&#9;B_width;</P>
<P>} DRV_Window;</P>

<P>typedef struct </P>
<P>{</P>
<P>    U8 r, g, b;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// RGB components for RGB lightmaps</P>
<P>} DRV_RGB;</P>

<P>//===========================================================================================</P>
<P>// FIXME:  Get palette stuff, and bitmap out of dcommon</P>
<P>#define&#9;DRV_PALETTE_ENTRIES&#9;256</P>
<P>typedef&#9;DRV_RGB&#9;DRV_Palette[DRV_PALETTE_ENTRIES];</P>

<P>// Bitmap hook into the drivers (engine uses these explicitly as is)</P>
<P>typedef struct</P>
<P>{</P>
<P>&#9;char&#9;Name[32];&#9;&#9;&#9;&#9;&#9;&#9;// Duh, name of bitmap...</P>
<P>&#9;U32&#9;&#9;Flags;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Flags</P>
<P>&#9;S32&#9;&#9;Width;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Width of bitmap</P>
<P>&#9;S32&#9;&#9;Height;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Height of bitmap</P>
<P>&#9;U8&#9;&#9;MipLevels;</P>
<P>&#9;U8&#9;&#9;*BitPtr[4];&#9;&#9;&#9;&#9;&#9;&#9;// Pointer to location of bits (up to 4 miplevels)</P>
<P>&#9;DRV_RGB *Palette;</P>

<P>&#9;// Driver sets these in register functions</P>
<P>&#9;//S32&#9;&#9;Id;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Bitmap handle for hardware...</P>
<P>&#9;geRDriver_THandle&#9;*THandle;</P>
<P>} DRV_Bitmap;</P>
<P>//===========================================================================================</P>

<P>#define LMAP_TYPE_LIGHT&#9;&#9;&#9;0</P>
<P>#define LMAP_TYPE_FOG&#9;&#9;&#9;1</P>

<P>// Lightmap hook into the drivers (Engine uses these exlicitly as is...)</P>
<P>// Lightmap info</P>
<P>typedef struct</P>
<P>{</P>
<P>&#9;S16&#9;&#9;&#9;&#9;&#9;Width, Height;&#9;&#9;&#9;&#9;// lightmap width/height / 16 +1</P>
<P>    S32&#9;&#9;&#9;&#9;&#9;MinU, MinV;&#9;&#9;&#9;&#9;&#9;// Min U,V values</P>
<P>    DRV_RGB&#9;&#9;&#9;&#9;*RGBLight[2];&#9;&#9;&#9;&#9;// Pointer to RGB light map data</P>

<P>&#9;S32&#9;&#9;&#9;&#9;&#9;Face;&#9;&#9;&#9;&#9;&#9;&#9;// Face that this map belongs too</P>
<P>&#9;geRDriver_THandle&#9;*THandle;</P>
<P>} DRV_LInfo;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;float&#9;&#9;ShiftU;&#9;&#9;&#9;&#9;&#9;&#9;// How much to shift right before draw</P>
<P>&#9;float&#9;&#9;ShiftV;</P>

<P>&#9;float&#9;&#9;DrawScaleU;&#9;&#9;&#9;&#9;&#9;&#9;// How much to scale right before draw</P>
<P>&#9;float&#9;&#9;DrawScaleV;</P>
<P>} DRV_TexInfo;</P>
<P>    </P>
<P>// Render Flags for ALL render functions</P>
<P>#define DRV_RENDER_ALPHA&#9;&#9;(1&lt;&lt;0)&#9;// Render function should expect alpha set in vertices</P>
<P>#define DRV_RENDER_FLUSH&#9;&#9;(1&lt;&lt;1)&#9;// Render function should gaurentee that this render happens NOW</P>
<P>#define DRV_RENDER_NO_ZMASK&#9;&#9;(1&lt;&lt;2)&#9;// No zbuffering should be performed</P>
<P>#define DRV_RENDER_NO_ZWRITE&#9;(1&lt;&lt;3)&#9;// No z writing will be performed</P>
<P>#define DRV_RENDER_CLAMP_UV&#9;&#9;(1&lt;&lt;4)&#9;// Clamp UV in both directions</P>

<P>//</P>
<P>//  PolyMode flags&#9;(A method to override how polys are drawn for debugging purposes...)</P>
<P>//</P>
<P>// Put these in the poly flags!!!  They are currently not used right now...</P>
<P>#define DRV_POLYMODE_NORMAL&#9;&#9;1&#9;&#9;&#9;// Draw as is</P>
<P>#define DRV_POLYMODE_GOURAUD&#9;2&#9;&#9;&#9;// Gouraud only</P>
<P>#define DRV_POLYMODE_LINES&#9;&#9;3&#9;&#9;&#9;// Outlines only</P>

<P>&nbsp;</P>
<P>typedef struct</P>
<P>{</P>
<P>&#9;float&#9;x,y,z;&#9;&#9;&#9;&#9;&#9;&#9;// float 3d z value</P>
<P>&#9;float&#9;u,v;&#9;&#9;&#9;&#9;&#9;&#9;// float texture coords</P>
<P>&#9;float&#9;r,g,b,a;&#9;&#9;&#9;&#9;&#9;// Color of point, and Alpha</P>
<P>} DRV_TLVertex;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;char&#9;&#9;&#9;&#9;AppName[512];</P>
<P>&#9;S32&#9;&#9;&#9;&#9;&#9;Driver;</P>
<P>&#9;char&#9;&#9;&#9;&#9;DriverName[512];</P>
<P>&#9;S32&#9;&#9;&#9;&#9;&#9;Mode;</P>
<P>&#9;char&#9;&#9;&#9;&#9;ModeName[512];</P>
<P>&#9;S32&#9;&#9;&#9;&#9;&#9;Width;</P>
<P>&#9;S32&#9;&#9;&#9;&#9;&#9;Height;</P>
<P>&#9;HWND&#9;&#9;&#9;&#9;hWnd;</P>
<P>} DRV_DriverHook;</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;// Texture info</P>
<P>&#9;geVec3d&#9;&#9;VecU;</P>
<P>&#9;geVec3d&#9;&#9;VecV;</P>
<P>&#9;int32&#9;&#9;TexMinsX;</P>
<P>&#9;int32&#9;&#9;TexMinsY;</P>
<P>&#9;int32&#9;&#9;TexWidth;</P>
<P>&#9;int32&#9;&#9;TexHeight;</P>
<P>&#9;float&#9;&#9;TexShiftX;</P>
<P>&#9;float&#9;&#9;TexShiftY;</P>

<P>&#9;// Camera info</P>
<P>&#9;geXForm3d&#9;CXForm;</P>
<P>&#9;geVec3d&#9;&#9;CPov;</P>

<P>&#9;float&#9;&#9;XCenter;</P>
<P>&#9;float&#9;&#9;YCenter;</P>

<P>&#9;float&#9;&#9;XScale;</P>
<P>&#9;float&#9;&#9;YScale;</P>
<P>&#9;float&#9;&#9;XScaleInv;&#9;&#9;&#9;// 1 / XScale</P>
<P>&#9;float&#9;&#9;YScaleInv;&#9;&#9;&#9;// 1 / YScale;</P>
<P>&#9;float&#9;&#9;ZScale;&#9;&#9;&#9;&#9;// camera z scale</P>

<P>&nbsp;</P>
<P>&#9;geVec3d&#9;&#9;PlaneNormal;&#9;&#9;// Face normal</P>
<P>&#9;float&#9;&#9;PlaneDist;</P>
<P>&#9;geVec3d&#9;&#9;RPlaneNormal;&#9;&#9;// Rotated Face normal</P>
<P>&#9;geVec3d&#9;&#9;Pov;</P>
<P>} GInfo;</P>

<P>// What the driver can support as far as texture mapping is concerned</P>
<P>#define DRV_SUPPORT_ALPHA&#9;&#9;&#9;&#9;&#9;(1&lt;&lt;0)&#9;&#9;// Driver can do alpha blending</P>
<P>#define DRV_SUPPORT_COLORKEY&#9;&#9;&#9;&#9;(1&lt;&lt;1)&#9;&#9;// Driver can do pixel masking</P>
<P>#define DRV_SUPPORT_GAMMA&#9;&#9;&#9;&#9;&#9;(1&lt;&lt;2)&#9;&#9;// Gamma function works with the driver</P>

<P>// A hint to the engine as far as what to turn on and off...</P>
<P>#define DRV_PREFERENCE_NO_MIRRORS&#9;&#9;&#9;(1&lt;&lt;0)&#9;&#9;// Engine should NOT render mirrors</P>
<P>#define DRV_PREFERENCE_SORT_WORLD_FB&#9;&#9;(1&lt;&lt;1)&#9;&#9;// Sort world Front to Back</P>
<P>#define DRV_PREFERENCE_SORT_WORLD_BF&#9;&#9;(1&lt;&lt;2)&#9;&#9;// Sort world Back to Front</P>
<P>#define DRV_PREFERENCE_DRAW_WALPHA_IN_BSP&#9;(1&lt;&lt;3)&#9;&#9;// Draw world alphas in BSP sort</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;U32&#9;&#9;&#9;CanSupportFlags;</P>
<P>&#9;U32&#9;&#9;&#9;PreferenceFlags;</P>
<P>&#9;U32&#9;&#9;&#9;Reserved1;</P>
<P>&#9;U32&#9;&#9;&#9;Reserved2;</P>
<P>} DRV_EngineSettings;</P>

<P>// Enumeration defines</P>
<P>typedef geBoolean DRV_ENUM_MODES_CB( S32 Mode, char *ModeName, S32 Width, S32 Height, void *Context);</P>
<P>typedef geBoolean DRV_ENUM_DRV_CB( S32 Driver, char *DriverName, void *Context);</P>

<P>typedef geBoolean DRIVERCC DRV_ENUM_DRIVER(DRV_ENUM_DRV_CB *Cb, void *Context); </P>
<P>typedef geBoolean DRIVERCC DRV_ENUM_MODES(S32 Driver, char *DriverName, DRV_ENUM_MODES_CB *Cb, void *Context); </P>

<P>typedef geBoolean DRV_ENUM_PFORMAT_CB(geRDriver_PixelFormat *Format, void *Context);</P>
<P>typedef geBoolean DRIVERCC DRV_ENUM_PFORMAT(DRV_ENUM_PFORMAT_CB *Cb, void *Context); </P>

<P>// Create/Destroy/Etc Driver functions</P>
<P>typedef geBoolean DRIVERCC DRV_INIT(DRV_DriverHook *Hook);</P>
<P>typedef geBoolean DRIVERCC DRV_SHUTDOWN(void);</P>
<P>typedef geBoolean DRIVERCC DRV_RESET(void);</P>
<P>typedef geBoolean DRIVERCC DRV_UPDATE_WINDOW(void);</P>
<P>typedef geBoolean DRIVERCC DRV_SET_ACTIVE(geBoolean active);</P>

<P>// Texture surface functions</P>
<P>typedef geRDriver_THandle *DRIVERCC CREATE_TEXTURE(int32 Width, int32 Height, int32 NumMipLevels, const geRDriver_PixelFormat *PixelFormat);</P>
<P>typedef geBoolean DRIVERCC DESTROY_TEXTURE(geRDriver_THandle *THandle);</P>

<P>typedef geBoolean DRIVERCC LOCK_THANDLE(geRDriver_THandle *THandle, int32 MipLevel, void **Data);</P>
<P>typedef geBoolean DRIVERCC UNLOCK_THANDLE(geRDriver_THandle *THandle, int32 MipLevel);</P>

<P>typedef geBoolean DRIVERCC SET_PALETTE(geRDriver_THandle *THandle, geRDriver_THandle *PalHandle);</P>
<P>typedef geRDriver_THandle *DRIVERCC GET_PALETTE(geRDriver_THandle *THandle);</P>

<P>typedef geBoolean DRIVERCC SET_ALPHA(geRDriver_THandle *THandle, geRDriver_THandle *PalHandle);</P>
<P>typedef geRDriver_THandle *DRIVERCC GET_ALPHA(geRDriver_THandle *THandle);</P>

<P>typedef geBoolean DRIVERCC THANDLE_GET_INFO(geRDriver_THandle *THandle, int32 MipLevel, geRDriver_THandleInfo *Info);</P>

<P>// Scene management functions</P>
<P>typedef geBoolean DRIVERCC BEGIN_SCENE(geBoolean Clear, geBoolean ClearZ, RECT *WorldRect);</P>
<P>typedef geBoolean DRIVERCC END_SCENE(void);</P>
<P>typedef geBoolean DRIVERCC BEGIN_WORLD(void);</P>
<P>typedef geBoolean DRIVERCC END_WORLD(void);</P>
<P>typedef geBoolean DRIVERCC BEGIN_MESHES(void);</P>
<P>typedef geBoolean DRIVERCC END_MESHES(void);</P>
<P>typedef geBoolean DRIVERCC BEGIN_MODELS(void);</P>
<P>typedef geBoolean DRIVERCC END_MODELS(void);</P>

<P>// Render functions</P>
<P>typedef geBoolean DRIVERCC RENDER_G_POLY(DRV_TLVertex *Pnts, S32 NumPoints, U32 Flags);</P>
<P>typedef geBoolean DRIVERCC RENDER_W_POLY(DRV_TLVertex *Pnts, S32 NumPoints, geRDriver_THandle *THandle, DRV_TexInfo *TexInfo, DRV_LInfo *LInfo, U32 Flags);</P>
<P>typedef geBoolean DRIVERCC RENDER_MT_POLY(DRV_TLVertex *Pnts, S32 NumPoints, geRDriver_THandle *THandle, U32 Flags);</P>

<P>typedef geBoolean DRIVERCC DRAW_DECAL(geRDriver_THandle *THandle, RECT *SRect, int32 x, int32 y);</P>

<P>typedef geBoolean DRIVERCC SCREEN_SHOT(const char *Name);</P>

<P>typedef geBoolean DRIVERCC SET_GAMMA(float Gamma);</P>
<P>typedef geBoolean DRIVERCC GET_GAMMA(float *Gamma);</P>

<P>typedef void SETUP_LIGHTMAP_CB(DRV_LInfo *LInfo, geBoolean *Dynamic);</P>

<P>typedef struct</P>
<P>{</P>
<P>&#9;char&#9;&#9;&#9;&#9;*Name;</P>
<P>&#9;S32&#9;&#9;&#9;&#9;&#9;VersionMajor;</P>
<P>&#9;S32&#9;&#9;&#9;&#9;&#9;VersionMinor;</P>

<P>&#9;// Error handling hooks set by driver</P>
<P>&#9;S32&#9;&#9;&#9;&#9;&#9;LastError;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// Last error driver made</P>
<P>&#9;char&#9;&#9;&#9;&#9;*LastErrorStr;&#9;&#9;&#9;&#9;&#9;&#9;// NULL terminated error string</P>
<P>&#9;</P>
<P>&#9;// Enum Modes/Drivers</P>
<P>&#9;DRV_ENUM_DRIVER&#9;&#9;*EnumSubDrivers;</P>
<P>&#9;DRV_ENUM_MODES&#9;&#9;*EnumModes;</P>
<P>&#9;</P>
<P>&#9;DRV_ENUM_PFORMAT&#9;*EnumPixelFormats;</P>

<P>&#9;// Init/DeInit functions</P>
<P>&#9;DRV_INIT&#9;&#9;&#9;&#9;&#9;*Init;</P>
<P>&#9;DRV_SHUTDOWN&#9;&#9;&#9;&#9;*Shutdown;</P>
<P>&#9;DRV_RESET&#9;&#9;&#9;&#9;&#9;*Reset;</P>
<P>&#9;DRV_UPDATE_WINDOW&#9;&#9;&#9;*UpdateWindow;</P>
<P>&#9;DRV_SET_ACTIVE&#9;&#9;&#9;&#9;*SetActive;</P>
<P>&#9;</P>
<P>&#9;// Create/Destroy texture functions</P>
<P>&#9;CREATE_TEXTURE&#9;&#9;*THandle_Create;</P>
<P>&#9;DESTROY_TEXTURE&#9;&#9;*THandle_Destroy;</P>

<P>&#9;// Texture manipulation functions</P>
<P>&#9;LOCK_THANDLE&#9;&#9;*THandle_Lock;</P>
<P>&#9;UNLOCK_THANDLE&#9;&#9;*THandle_UnLock;</P>

<P>&#9;// Palette access functions</P>
<P>&#9;SET_PALETTE&#9;&#9;&#9;*THandle_SetPalette;</P>
<P>&#9;GET_PALETTE&#9;&#9;&#9;*THandle_GetPalette;</P>

<P>&#9;// Palette access functions</P>
<P>&#9;SET_ALPHA&#9;&#9;&#9;*THandle_SetAlpha;</P>
<P>&#9;GET_ALPHA  &#9;&#9;&#9;*THandle_GetAlpha;</P>

<P>&#9;THANDLE_GET_INFO&#9;*THandle_GetInfo;</P>

<P>&#9;// Scene management functions</P>
<P>&#9;BEGIN_SCENE&#9;&#9;&#9;*BeginScene;</P>
<P>&#9;END_SCENE&#9;&#9;&#9;*EndScene;</P>
<P>&#9;BEGIN_WORLD&#9;&#9;&#9;*BeginWorld;</P>
<P>&#9;END_WORLD&#9;&#9;&#9;*EndWorld;</P>
<P>&#9;BEGIN_MESHES&#9;&#9;*BeginMeshes;</P>
<P>&#9;END_MESHES&#9;&#9;&#9;*EndMeshes;</P>
<P>&#9;BEGIN_MODELS&#9;&#9;*BeginModels;</P>
<P>&#9;END_MODELS&#9;&#9;&#9;*EndModels;</P>
<P>&#9;</P>
<P>&#9;// Render functions</P>
<P>&#9;RENDER_G_POLY&#9;&#9;*RenderGouraudPoly;</P>
<P>&#9;RENDER_W_POLY&#9;&#9;*RenderWorldPoly;</P>
<P>&#9;RENDER_MT_POLY&#9;&#9;*RenderMiscTexturePoly;</P>

<P>&#9;//Decal functions</P>
<P>&#9;DRAW_DECAL&#9;&#9;&#9;*DrawDecal;</P>

<P>&#9;S32&#9;&#9;&#9;&#9;&#9;NumWorldPixels;</P>
<P>&#9;S32&#9;&#9;&#9;&#9;&#9;NumWorldSpans;</P>
<P>&#9;S32&#9;&#9;&#9;&#9;&#9;NumRenderedPolys;</P>
<P>&#9;DRV_CacheInfo&#9;&#9;*CacheInfo;</P>

<P>&#9;SCREEN_SHOT&#9;&#9;&#9;*ScreenShot;</P>

<P>&#9;SET_GAMMA&#9;&#9;&#9;*SetGamma;</P>
<P>&#9;GET_GAMMA&#9;&#9;&#9;*GetGamma;</P>
<P>&#9;</P>
<P>&#9;// Driver preferences</P>
<P>&#9;DRV_EngineSettings&#9;*EngineSettings;</P>

<P>&#9;// The engine supplies these for the drivers misc use</P>
<P>&#9;SETUP_LIGHTMAP_CB&#9;*SetupLightmap;</P>

<P>&#9;// Temp hack global</P>
<P>&#9;GInfo&#9;&#9;&#9;&#9;*GlobalInfo;</P>
<P>} DRV_Driver;</P>

<P>typedef geBoolean DRV_Hook(DRV_Driver **Hook);</P>

<P>//</P>
<P>//&#9;Error defines set by the driver.  These will be in the LastError member of DRV_Driver</P>
<P>//&#9;structure.  LastErrorStr will contain a NULL terminated detail error string set by the driver</P>
<P>//</P>
<P>#define DRV_ERROR_NONE&#9;&#9;&#9;&#9;&#9;0&#9;// No error has occured</P>
<P>#define DRV_ERROR_INVALID_PARMS&#9;&#9;&#9;1&#9;// invalid parameters passed</P>
<P>#define DRV_ERROR_NULL_WINDOW&#9;&#9;&#9;2&#9;// Null window supplied</P>
<P>#define DRV_ERROR_INIT_ERROR&#9;&#9;&#9;3&#9;// Error intitializing</P>
<P>#define DRV_ERROR_INVALID_REGISTER_MODE&#9;4&#9;// Invalid register mode</P>
<P>#define DRV_ERROR_NO_MEMORY&#9;&#9;&#9;&#9;5&#9;// Not enough ram</P>
<P>#define DRV_ERROR_MAX_TEXTURES&#9;&#9;&#9;6&#9;// Max texture capacity has been exceeded...</P>
<P>#define DRV_ERROR_GENERIC&#9;&#9;&#9;&#9;7&#9;// Generic error&#9; </P>
<P>#define DRV_ERROR_UNDEFINED&#9;&#9;&#9;&#9;8&#9;// An undefined error has occured</P>
<P>#define DRV_ERROR_INVALID_WINDOW_MODE&#9;9&#9;// Requested window/full not supported</P>

<P>typedef enum</P>
<P>{</P>
<P>&#9;RENDER_NONE,</P>
<P>&#9;RENDER_WORLD,</P>
<P>&#9;RENDER_MESHES,</P>
<P>&#9;RENDER_MODELS</P>
<P>} DRV_RENDER_MODE;</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#pragma pack(pop)</P>

<P>#endif</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<I><P><A NAME="_Toc454156841">OpenSource/Tools/GPreview/ Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>This library is a duplicate of the regular outer include library which all the other tools use with the exception that it uses one different header file, dcommon.h.  That file is documented below.  In addition, the model headers, Actor.h, body.h and Extbox.h are not referenced or found in this subdirectory.  With these exceptions all the other headers files are the same.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156842">drvlist.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>#ifndef&#9;DRVLIST_H</P>
<P>#define DRVLIST_H</P>
<P>extern char SelectedDriverString[];</P>
<P>void&#9;DrvList_PickDriver(HANDLE hInstance, HWND hwndParent, geEngine *Engine, geDriver **Driver, geDriver_Mode **Mode);</P>

<P>#endif</P>
</FONT><FONT FACE="Arial"><P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156843">function.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>#ifndef&#9;FUNCTION_H</P>
<P>#define&#9;FUNCTION_H</P>

<P>typedef&#9;struct&#9;Function_TriangleOscillator&#9;Function_TriangleOscillator;</P>
<P>typedef&#9;struct&#9;Function_Ramp&#9;&#9;&#9;&#9;Function_Ramp;</P>
<P>typedef struct&#9;Function_Sampled&#9;&#9;&#9;Function_Sampled;</P>

<P>typedef struct&#9;Function_RTFunction&#9;&#9;&#9;Function_RTFunction;</P>

<P>Function_RTFunction *&#9;Function_RTFunctionCreateTriangleOscillator(</P>
<P>&#9;float&#9;Period,</P>
<P>&#9;float&#9;RangeMin,</P>
<P>&#9;float&#9;RangeMax</P>
<P>&#9;);</P>

<P>Function_RTFunction *&#9;Function_RTFunctionCreateLinearRamp(</P>
<P>&#9;float&#9;Duration,</P>
<P>&#9;float&#9;RangeMin,</P>
<P>&#9;float&#9;RangeMax</P>
<P>&#9;);</P>

<P>Function_RTFunction *&#9;Function_RTFunctionCreateSampled(</P>
<P>&#9;float *&#9;SampledValues,</P>
<P>&#9;int&#9;&#9;SampledValueCount,</P>
<P>&#9;float&#9;Duration,</P>
<P>&#9;float&#9;RangeMin,</P>
<P>&#9;float&#9;RangeMax</P>
<P>&#9;);</P>

<P>void&#9;Function_RTFunctionDestroy(Function_RTFunction *Func);</P>

<P>int&#9;&#9;Function_RTFunctionHasDecayed(Function_RTFunction *Func);</P>

<P>void&#9;Function_RTFunctionReset(Function_RTFunction *Func);</P>

<P>float&#9;Function_RTFunctionValue(Function_RTFunction *Func);</P>

<P>Function_Ramp *&#9;Function_RampCreate(void);</P>

<P>void&#9;Function_RampDestroy(Function_Ramp *ramp);</P>

<P>void&#9;Function_RampSetRange(Function_Ramp *ramp, long range);</P>

<P>void&#9;Function_RampReset(Function_Ramp *ramp);</P>

<P>float&#9;Function_RampValue(Function_Ramp *ramp);</P>

<P>int&#9;&#9;Function_RampIsClamped(Function_Ramp *ramp);</P>

<P>Function_TriangleOscillator *Function_TriangleOscillatorCreate(void);</P>

<P>void Function_TriangleOscillatorDestroy(Function_TriangleOscillator *osc);</P>

<P>float Function_TriangleOscillatorValue(Function_TriangleOscillator *osc);</P>

<P>void Function_TriangleOscillatorSetPeriod(</P>
<P>&#9;Function_TriangleOscillator *&#9;osc,</P>
<P>&#9;long &#9;&#9;&#9;&#9;&#9;&#9;&#9;milliseconds);</P>

<P>void Function_TriangleOscillatorReset(Function_TriangleOscillator *osc);</P>

<P>Function_Sampled *&#9;Function_SampledCreate(</P>
<P>&#9;float *&#9;SampledValues,</P>
<P>&#9;int &#9;SampledValueCount);</P>

<P>void Function_SampledDestroy(Function_Sampled *Func);</P>

<P>void Function_SampledSetDomain(Function_Sampled *Func, float DomainMin, float DomainMax);</P>
<P>void Function_SampledSetRange(Function_Sampled *Func, float RangeMin, float RangeMax);</P>
<P>float Function_SampledValue(Function_Sampled *Func, float X);</P>
<P>int&#9;Function_SampledInDomain(Function_Sampled *sf, float X);</P>

<P>#endif</P>

</FONT><FONT FACE="Arial"><P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156844">resource.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>//{{NO_DEPENDENCIES}}</P>
<P>// Microsoft Developer Studio generated include file.</P>
<P>// Used by gpreview.rc</P>
<P>//</P>
<P>#define IDD_DRIVERDIALOG                101</P>
<P>#define IDC_DRIVERLIST                  1000</P>
<P>#define IDC_STATIC                      -1</P>
<P>#define&#9;IDR_CURSOR&#9;&#9;&#9;&#9;&#9;&#9;1</P>
<P>#define IDR_SPOT&#9;&#9;&#9;&#9;&#9;&#9;2</P>
<P>#define IDR_DATA1&#9;&#9;&#9;&#9;&#9;&#9;107</P>

<P>// Next default values for new objects</P>
<P>// </P>
<P>#ifdef APSTUDIO_INVOKED</P>
<P>#ifndef APSTUDIO_READONLY_SYMBOLS</P>
<P>#define _APS_NEXT_RESOURCE_VALUE        102</P>
<P>#define _APS_NEXT_COMMAND_VALUE         40001</P>
<P>#define _APS_NEXT_CONTROL_VALUE         1001</P>
<P>#define _APS_NEXT_SYMED_VALUE           101</P>
<P>#endif</P>
<P>#endif</P>
</FONT><FONT FACE="Arial">
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<I><P><A NAME="_Toc454156845">OpenSource/Tools/mkactor/ActBuild Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>The mkactor subdirectory actually contains routines for both the DOS based ActBuild and Windows based Astudio programs.  ActBuild is the manual batch file conversion utility for taking 3D Studio max files and creating Genesis 3D ACT files.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156846">ActBuild.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  ACTBUILD.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Actor builder main module.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef ACTBUILD_H</P>
<P>#define ACTBUILD_H</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>#include "Mkutil.h"&#9;&#9;&#9;//ReturnCode</P>

<P>typedef struct ActBuild_Options ActBuild_Options;</P>

<P>ActBuild_Options*&#9;ActBuild_OptionsCreate    (void);</P>
<P>void&#9;&#9;&#9;&#9;ActBuild_OptionsDestroy   (ActBuild_Options** ppOptions);</P>
<P>ReturnCode&#9;&#9;&#9;ActBuild_ParseOptionString(ActBuild_Options* options, const char* string, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;MK_Boolean InScript,MkUtil_Printf PrintfCallback);</P>
<P>void&#9;&#9;&#9;&#9;ActBuild_OutputUsage&#9;  (MkUtil_Printf PrintfCallback);</P>
<P>ReturnCode&#9;&#9;&#9;ActBuild_DoMake&#9;&#9;      (ActBuild_Options* options,MkUtil_Printf PrintfCallback);</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<I><P><A NAME="_Toc454156847">OpenSource/Tools/mkactor/AStudio Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>Astudio is a Windows based program for converting 3D Studio max files into  Genesis 3D ACT files.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156848">AOptions.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  AOPTIONS.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Actor studio/builder INI file options API.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef AOPTIONS_H</P>
<P>#define AOPTIONS_H</P>

<P>#include "basetype.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>typedef struct tag_AOptions AOptions;</P>

<P>AOptions *AOptions_Create (void);</P>

<P>AOptions *AOptions_CreateFromFile (const char *IniFilename);</P>
<P>void AOptions_Destroy (AOptions **pOptions);</P>
<P>geBoolean AOptions_WriteToFile (const AOptions *Options, const char *IniFilename);</P>

<P>const char *AOptions_GetViewerPath (const AOptions *Options);</P>
<P>geBoolean AOptions_SetViewerPath (AOptions *Options, const char *ViewerPath);</P>

<P>const char *AOptions_Get3DSMaxPath (const AOptions *Options);</P>
<P>geBoolean AOptions_Set3DSMaxPath (AOptions *Options, const char *MaxPath);</P>

<P>geBoolean AOptions_GetMotionOptimizationFlag (const AOptions *Options);</P>
<P>geBoolean AOptions_SetMotionOptimizationFlag (AOptions *Options, geBoolean Flag);</P>

<P>int AOptions_GetMotionOptimizationLevel (const AOptions *Options);</P>
<P>geBoolean AOptions_SetMotionOptimizationLevel (AOptions *Options, int OptLevel);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156849">AProject.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  APROJECT.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Actor studio/builder project file API.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef AProject_H</P>
<P>#define AProject_H</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#include "genesis.h"</P>

<P>typedef struct tag_AProject&#9;AProject;</P>

<P>// Create and destroy</P>
<P>AProject *AProject_Create (const char *OutputName);</P>
<P>void AProject_Destroy (AProject **ppProject);</P>

<P>// file i/o</P>
<P>AProject *AProject_CreateFromFile (geVFile *FS);</P>
<P>AProject *AProject_CreateFromFilename (const char *Filename);</P>

<P>geBoolean AProject_WriteToFile (const AProject *pProject, geVFile *FS);</P>
<P>geBoolean AProject_WriteToFilename (const AProject *pProject, const char *Filename);</P>

<P>// Paths section</P>
<P>geBoolean AProject_GetForceRelativePaths (const AProject *pProject);</P>
<P>geBoolean AProject_SetForceRelativePaths (AProject *pProject, const geBoolean Flag);</P>

<P>const char *AProject_GetMaterialsPath (const AProject *pProject);</P>
<P>geBoolean AProject_SetMaterialsPath (AProject *pProject, const char *Path);</P>

<P>//Need a directory for 'temporary' or 'obj' files:</P>
<P>const char *AProject_GetObjPath (const AProject *pProject);</P>
<P>geBoolean AProject_SetObjPath (AProject *pProject, const char *Path);</P>
<P>&#9;&#9;</P>
<P>// Output file section</P>
<P>typedef enum</P>
<P>{</P>
<P>&#9;ApjOutput_Text = 0,</P>
<P>&#9;ApjOutput_Binary = 1</P>
<P>} ApjOutputFormat;</P>

<P>const char *AProject_GetOutputFilename (const AProject *pProject);</P>
<P>geBoolean AProject_SetOutputFilename (AProject *pProject, const char *Filename);</P>

<P>ApjOutputFormat AProject_GetOutputFormat (const AProject *pProject);</P>
<P>geBoolean AProject_SetOutputFormat (AProject *pProject, const ApjOutputFormat Fmt);</P>

<P>&nbsp;</P>
<P>// Body section</P>
<P>typedef enum</P>
<P>{</P>
<P>&#9;ApjBody_Invalid = 0,</P>
<P>&#9;ApjBody_Max = 1,</P>
<P>&#9;ApjBody_Nfo = 2,</P>
<P>&#9;ApjBody_Bdy = 3,</P>
<P>&#9;ApjBody_Act = 4</P>
<P>} ApjBodyFormat;</P>

<P>ApjBodyFormat AProject_GetBodyFormatFromFilename (const char *Name);</P>

<P>const char *AProject_GetBodyFilename (const AProject *pProject);</P>
<P>geBoolean AProject_SetBodyFilename (AProject *pProject, const char *Filename);</P>

<P>ApjBodyFormat AProject_GetBodyFormat (const AProject *pProject);</P>
<P>geBoolean AProject_SetBodyFormat (AProject *pProject, ApjBodyFormat Fmt);</P>

<P>&nbsp;</P>
<P>// Materials section</P>
<P>typedef enum</P>
<P>{</P>
<P>&#9;ApjMaterial_Color = 0,</P>
<P>&#9;ApjMaterial_Texture = 1</P>
<P>} ApjMaterialFormat;</P>

<P>int AProject_GetMaterialsCount (const AProject *pProject);</P>

<P>geBoolean AProject_AddMaterial</P>
<P>&#9;(</P>
<P>&#9;  AProject *pProject,</P>
<P>&#9;  const char *MaterialName,</P>
<P>&#9;  const ApjMaterialFormat Fmt,</P>
<P>&#9;  const char *TextureFilename,</P>
<P>&#9;  const float Red, const float Green, const float Blue, const float Alpha,</P>
<P>&#9;  int *pIndex&#9;&#9;// returned index</P>
<P>&#9;);</P>

<P>geBoolean AProject_RemoveMaterial (AProject *pProject, const int Index);</P>

<P>int AProject_GetMaterialIndex (const AProject *pProject, const char *MaterialName);</P>

<P>ApjMaterialFormat AProject_GetMaterialFormat (const AProject *pProject, const int Index);</P>
<P>geBoolean AProject_SetMaterialFormat (AProject *pProject, const int Index, const ApjMaterialFormat Fmt);</P>

<P>const char *AProject_GetMaterialName (const AProject *pProject, const int Index);</P>
<P>geBoolean AProject_SetMaterialName (AProject *pProject, const int Index, const char *MaterialName);</P>

<P>const char *AProject_GetMaterialTextureFilename (const AProject *pProject, const int Index);</P>
<P>geBoolean AProject_SetMaterialTextureFilename (AProject *pProject, const int Index, const char *TextureFilename);</P>

<P>GE_RGBA AProject_GetMaterialTextureColor (const AProject *pProject, const int Index);</P>
<P>geBoolean AProject_SetMaterialTextureColor (AProject *pProject, const int Index, </P>
<P>&#9;const float Red, const float Green, const float Blue, const float Alpha);</P>

<P>&nbsp;</P>
<P>// Motions section</P>
<P>typedef enum</P>
<P>{</P>
<P>&#9;ApjMotion_Invalid = 0,</P>
<P>&#9;ApjMotion_Max = 1,</P>
<P>&#9;ApjMotion_Key = 2,</P>
<P>&#9;ApjMotion_Mot = 3,</P>
<P>// Actor motions not yet supported</P>
<P>//&#9;ApjMotion_Act = 4,</P>
<P>&#9;// enter new types before this line</P>
<P>&#9;ApjMotion_TypeCount</P>
<P>} ApjMotionFormat;</P>

<P>ApjMotionFormat AProject_GetMotionFormatFromFilename (const char *Filename);</P>

<P>int AProject_GetMotionsCount (const AProject *pProject);</P>

<P>geBoolean AProject_AddMotion</P>
<P>&#9;(</P>
<P>&#9;  AProject *pProject,</P>
<P>&#9;  const char *MotionName,</P>
<P>&#9;  const char *Filename,</P>
<P>&#9;  const ApjMotionFormat Fmt,</P>
<P>&#9;  const geBoolean OptFlag,</P>
<P>&#9;  const int OptLevel,</P>
<P>&#9;  const char *BoneName,</P>
<P>&#9;  int *pIndex&#9;// returned index</P>
<P>&#9;);</P>

<P>geBoolean AProject_RemoveMotion (AProject *pProject, const int Index);</P>

<P>int AProject_GetMotionIndex (const AProject *pProject, const char *MotionName);</P>

<P>ApjMotionFormat AProject_GetMotionFormat (const AProject *pProject, const int Index);</P>
<P>geBoolean AProject_SetMotionFormat (AProject *pProject, const int Index, const ApjMotionFormat Fmt);</P>

<P>const char *AProject_GetMotionName (const AProject *pProject, const int Index);</P>
<P>geBoolean AProject_SetMotionName (AProject *pProject, const int Index, const char *MotionName);</P>

<P>const char *AProject_GetMotionFilename (const AProject *pProject, const int Index);</P>
<P>geBoolean AProject_SetMotionFilename (AProject *pProject, const int Index, const char *Filename);</P>

<P>geBoolean AProject_GetMotionOptimizationFlag (const AProject *pProject, const int Index);</P>
<P>geBoolean AProject_SetMotionOptimizationFlag (AProject *pProject, const int Index, const geBoolean Flag);</P>

<P>int AProject_GetMotionOptimizationLevel (const AProject *pProject, const int Index);</P>
<P>geBoolean AProject_SetMotionOptimizationLevel (AProject *pProject, const int Index, const int OptLevel);</P>

<P>const char *AProject_GetMotionBone (const AProject *pProject, const int Index);</P>
<P>geBoolean AProject_SetMotionBone (AProject *pProject, const int Index, const char *BoneName);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156850">AStudio.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  ASTUDIO.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Actor Studio application main module.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>

<P>#if !defined(AFX_ASTUDIO_H__B89225E5_6368_11D2_B69D_004005424FA9__INCLUDED_)</P>
<P>#define AFX_ASTUDIO_H__B89225E5_6368_11D2_B69D_004005424FA9__INCLUDED_</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>

<P>#ifndef __AFXWIN_H__</P>
<P>&#9;#error include 'stdafx.h' before including this file for PCH</P>
<P>#endif</P>

<P>#include "resource.h"&#9;&#9;// main symbols</P>
<P>#include "AProject.h"</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CAStudioApp:</P>
<P>// See AStudio.cpp for the implementation of this class</P>
<P>//</P>

<P>class CAStudioApp : public CWinApp</P>
<P>{</P>
<P>public:</P>
<P>&#9;CAStudioApp();</P>

<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CAStudioApp)</P>
<P>&#9;public:</P>
<P>&#9;virtual BOOL InitInstance();</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>

<P>&#9;//{{AFX_MSG(CAStudioApp)</P>
<P>&#9;&#9;// NOTE - the ClassWizard will add and remove member functions here.</P>
<P>&#9;&#9;//    DO NOT EDIT what you see in these blocks of generated code !</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>private:</P>
<P>&#9;AProject *pProject;&#9;&#9;// the current project...</P>
<P>};</P>

<P>&nbsp;</P>
<P>/////////////////////////////////////////////////////////////////////////////</P>

<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>#endif // !defined(AFX_ASTUDIO_H__B89225E5_6368_11D2_B69D_004005424FA9__INCLUDED_)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156851">BodyDlg.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  BODYDLG.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Actor Studio's body dialog handler.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined(AFX_BODYDLG_H__8A56D843_640F_11D2_B69D_004005424FA9__INCLUDED_)</P>
<P>#define AFX_BODYDLG_H__8A56D843_640F_11D2_B69D_004005424FA9__INCLUDED_</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>
<P>// BodyDlg.h : header file</P>
<P>//</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CBodyDlg dialog</P>

<P>#include "PropPage.h"</P>
<P>#include "resource.h"</P>

<P>class CBodyDlg : public CAStudioPropPage</P>
<P>{</P>
<P>&#9;DECLARE_DYNCREATE(CBodyDlg)</P>

<P>// Construction</P>
<P>public:</P>
<P>&#9;CBodyDlg();</P>
<P>&#9;~CBodyDlg();</P>

<P>&#9;virtual void SetProjectPointer (AProject *Project);</P>
<P>&#9;virtual void GetDialogData ();</P>
<P>&#9;virtual void SetCompileStatus (bool Status);</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CBodyDlg)</P>
<P>&#9;enum { IDD = IDD_BODY };</P>
<P>&#9;CEdit&#9;m_EditBody;</P>
<P>&#9;CString&#9;m_BodyName;</P>
<P>&#9;int&#9;&#9;m_BodyFormat;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generate virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CBodyDlg)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>
<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CBodyDlg)</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;afx_msg void OnChangeEditbody();</P>
<P>&#9;afx_msg void OnBrowsebody();</P>
<P>&#9;afx_msg void OnBodyBtn();</P>
<P>&#9;afx_msg void OnKillfocusEditbody();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>

<P>&#9;virtual BOOL OnSetActive ();</P>
<P>&#9;virtual BOOL OnKillActive ();</P>

<P>private:</P>
<P>&#9;bool&#9;m_FilenameChanged;</P>

<P>&#9;void SetDialogData (void);</P>
<P>&#9;void SetBodyTypeFromFilename ();</P>
<P>&#9;void EnableControls ();</P>
<P>};</P>

<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>#endif // !defined(AFX_BODYDLG_H__8A56D843_640F_11D2_B69D_004005424FA9__INCLUDED_)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156852">LogoPage.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  LOGOPAGE.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Actor Studio's "about" dialog page.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined(AFX_LOGOPAGE_H__DEEE3842_6CB5_11D2_B69D_004005424FA9__INCLUDED_)</P>
<P>#define AFX_LOGOPAGE_H__DEEE3842_6CB5_11D2_B69D_004005424FA9__INCLUDED_</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>
<P>// LogoPage.h : header file</P>
<P>//</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CLogoPage dialog</P>

<P>class CLogoPage : public CPropertyPage</P>
<P>{</P>
<P>&#9;DECLARE_DYNCREATE(CLogoPage)</P>

<P>// Construction</P>
<P>public:</P>
<P>&#9;CLogoPage();</P>
<P>&#9;~CLogoPage();</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CLogoPage)</P>
<P>&#9;enum { IDD = IDD_LOGOPAGE };</P>
<P>&#9;&#9;// NOTE - ClassWizard will add data members here.</P>
<P>&#9;&#9;//    DO NOT EDIT what you see in these blocks of generated code !</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generate virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CLogoPage)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>
<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CLogoPage)</P>
<P>&#9;&#9;// NOTE: the ClassWizard will add member functions here</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>

<P>};</P>

<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>#endif // !defined(AFX_LOGOPAGE_H__DEEE3842_6CB5_11D2_B69D_004005424FA9__INCLUDED_)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156853">make.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  MAKE.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Mike Sandige&#9;                                                            */</P>
<P>/*  Description: Actor make process main module.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef MAKE_H</P>
<P>#define MAKE_H</P>

<P>#include "basetype.h"</P>
<P>#include "mkutil.h"</P>
<P>#include "AProject.h"</P>
<P>#include "AOptions.h"</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>geBoolean Make_Body(AProject *Prj, AOptions *Options, MkUtil_Printf Printf);</P>

<P>geBoolean Make_Motion(AProject *Prj, AOptions *Options, </P>
<P>&#9;&#9;&#9;&#9;&#9;int Count, int *MotionIndexArray, MkUtil_Printf Printf);</P>

<P>geBoolean Make_Actor(AProject *Prj, AOptions *Options, MkUtil_Printf Printf);</P>

<P>geBoolean Make_Clean(AProject *Prj, AOptions *Options, MkUtil_Printf Printf);</P>

<P>void Make_SetInterruptFlag (geBoolean State);</P>

<P>geBoolean Make_ActorSummary(AProject *Prj, MkUtil_Printf Printf);</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156854">MakeHelp.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  MAKEHELP.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Helper functions for interface between GUI and actor make subsystem.&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef MAKEHELP_H</P>
<P>#define MAKEHELP_H</P>

<P>#include "MkUtil.h"</P>
<P>#include "AProject.h"</P>
<P>#include "AOptions.h"</P>

<P>#define MAKEHELP_PROCESSID 0x12345678</P>
<P>// User messages seem to not work unless they're even numbers.</P>
<P>// Is this an MFC thing?</P>
<P>#define WM_USER_COMPILE_DONE (WM_USER + 100)</P>
<P>#define WM_USER_COMPILE_MESSAGE (WM_USER + 104)</P>

<P>void MakeHelp_SetMessagesWindow (CWnd *MsgWindow);</P>
<P>bool MakeHelp_GetRelativePath (const AProject *Project, const char *NewPath, char *Dest);</P>

<P>bool MakeHelp_StartCompile (AProject *Project, AOptions *Options, CWnd *Parent);</P>

<P>void MakeHelp_CancelCompile (void);</P>

<P>extern "C" void MakeHelp_Printf (const char *Fmt, ...);</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156855">MaterialsDlg.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  MATERIALSDLG.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Actor studio materials dialog handler.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined(AFX_MATERIALSDLG_H__8A56D844_640F_11D2_B69D_004005424FA9__INCLUDED_)</P>
<P>#define AFX_MATERIALSDLG_H__8A56D844_640F_11D2_B69D_004005424FA9__INCLUDED_</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>
<P>// MaterialsDlg.h : header file</P>
<P>//</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CMaterialsDlg dialog</P>
<P>#include "PropPage.h"</P>
<P>#include "resource.h"</P>

<P>&nbsp;</P>
<P>class CMaterialsDlg : public CAStudioPropPage</P>
<P>{</P>
<P>&#9;DECLARE_DYNCREATE(CMaterialsDlg)</P>

<P>// Construction</P>
<P>public:</P>
<P>&#9;CMaterialsDlg();</P>
<P>&#9;~CMaterialsDlg();</P>

<P>&#9;virtual void SetProjectPointer (AProject *Project);</P>
<P>&#9;virtual void GetDialogData ();</P>
<P>&#9;virtual void SetCompileStatus (bool Status);</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CMaterialsDlg)</P>
<P>&#9;enum { IDD = IDD_MATERIALS };</P>
<P>&#9;CButton&#9;m_BrowseTexture;</P>
<P>&#9;CButton&#9;m_MaterialDefault;</P>
<P>&#9;CButton&#9;m_ChooseColor;</P>
<P>&#9;CEdit&#9;m_EditTextureFilename;</P>
<P>&#9;CButton&#9;m_CheckColor;</P>
<P>&#9;CListBox&#9;m_MaterialsList;</P>
<P>&#9;BOOL&#9;m_ColorFlag;</P>
<P>&#9;CString&#9;m_TextureFilename;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generate virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CMaterialsDlg)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>
<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CMaterialsDlg)</P>
<P>&#9;afx_msg void OnSelchangeMaterialslist();</P>
<P>&#9;afx_msg void OnAddmaterial();</P>
<P>&#9;afx_msg void OnBrowsetexture();</P>
<P>&#9;afx_msg void OnCheckcolor();</P>
<P>&#9;afx_msg void OnChoosecolor();</P>
<P>&#9;afx_msg void OnChangeEdittexture();</P>
<P>&#9;afx_msg void OnMaterialdefault();</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;afx_msg void OnDropFiles( HDROP hDropInfo );</P>
<P>&#9;afx_msg void OnRenamematerial();</P>
<P>&#9;afx_msg void OnDeletematerial();</P>
<P>&#9;afx_msg void OnKillfocusEdittexture();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>

<P>&#9;virtual BOOL OnSetActive ();</P>
<P>&#9;virtual BOOL OnKillActive ();</P>

<P>private:</P>
<P>&#9;GE_RGBA m_Color;</P>
<P>&#9;bool&#9;m_FilenameChanged;</P>
<P>&#9;int&#9;&#9;m_CurrentIndex;</P>

<P>&#9;void&#9;FillListBox ();</P>
<P>&#9;void&#9;SetupCurrentItem (int Item);</P>
<P>&#9;int&#9;&#9;GetCurrentMaterialIndex ();</P>
<P>&#9;void&#9;SetMaterialFromDialog ();</P>
<P>&#9;void&#9;EnableControls ();</P>
<P>};</P>

<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>#endif // !defined(AFX_MATERIALSDLG_H__8A56D844_640F_11D2_B69D_004005424FA9__INCLUDED_)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156856">MotionsDlg.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  MOTIONSDLG.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Actor studio motions dialog handler.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined(AFX_MOTIONSDLG_H__8A56D845_640F_11D2_B69D_004005424FA9__INCLUDED_)</P>
<P>#define AFX_MOTIONSDLG_H__8A56D845_640F_11D2_B69D_004005424FA9__INCLUDED_</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>
<P>// MotionsDlg.h : header file</P>
<P>//</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CMotionsDlg dialog</P>
<P>#include "PropPage.h"</P>
<P>#include "resource.h"</P>

<P>&nbsp;</P>
<P>class CMotionsDlg : public CAStudioPropPage</P>
<P>{</P>
<P>&#9;DECLARE_DYNCREATE(CMotionsDlg)</P>

<P>// Construction</P>
<P>public:</P>
<P>&#9;CMotionsDlg();</P>
<P>&#9;~CMotionsDlg();</P>

<P>&#9;virtual void SetProjectPointer (AProject *Project);</P>
<P>&#9;virtual void GetDialogData ();</P>
<P>&#9;virtual void SetCompileStatus (bool Status);</P>
<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CMotionsDlg)</P>
<P>&#9;enum { IDD = IDD_MOTIONS };</P>
<P>&#9;CEdit&#9;m_EditBone;</P>
<P>&#9;CSpinButtonCtrl&#9;m_SpinOptLevel;</P>
<P>&#9;CEdit&#9;m_EditOptLevel;</P>
<P>&#9;CEdit&#9;m_EditMotionFilename;</P>
<P>&#9;CButton&#9;m_BrowseMotion;</P>
<P>&#9;CButton&#9;m_MotionDefault;</P>
<P>&#9;CButton&#9;m_DeleteMotion;</P>
<P>&#9;CListBox&#9;m_MotionsList;</P>
<P>&#9;CString&#9;m_MotionFilename;</P>
<P>&#9;int&#9;&#9;m_MotionFormat;</P>
<P>&#9;int&#9;&#9;m_OptLevel;</P>
<P>&#9;BOOL&#9;m_Optimize;</P>
<P>&#9;CString&#9;m_BoneName;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generate virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CMotionsDlg)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>
<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CMotionsDlg)</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;afx_msg void OnSelchangeMotionslist();</P>
<P>&#9;afx_msg void OnAddmotion();</P>
<P>&#9;afx_msg void OnDeletemotion();</P>
<P>&#9;afx_msg void OnMotiondefault();</P>
<P>&#9;afx_msg void OnChangeEditmotion();</P>
<P>&#9;afx_msg void OnBrowsemotion();</P>
<P>&#9;afx_msg void OnMotionType();</P>
<P>&#9;afx_msg void OnDeltaposSpinoptimize(NMHDR* pNMHDR, LRESULT* pResult);</P>
<P>&#9;afx_msg void OnOptimize();</P>
<P>&#9;afx_msg void OnKillfocusEditmotion();</P>
<P>&#9;afx_msg void OnDropFiles( HDROP hDropInfo );</P>
<P>&#9;afx_msg void OnChangeEditbone();</P>
<P>&#9;afx_msg void OnRenamemotion();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>

<P>&#9;virtual BOOL OnSetActive ();</P>
<P>&#9;virtual BOOL OnKillActive ();</P>

<P>private:</P>
<P>&#9;bool&#9;m_FilenameChanged;</P>
<P>&#9;int&#9;&#9;m_CurrentIndex;</P>

<P>&#9;void&#9;FillListBox ();</P>
<P>&#9;void&#9;SetupCurrentItem (int Item);</P>
<P>&#9;int&#9;&#9;GetCurrentMotionIndex ();</P>
<P>&#9;void&#9;SetMotionFromDialog ();</P>
<P>&#9;void&#9;SetMotionTypeFromFilename ();</P>
<P>&#9;void&#9;EnableControls ();</P>
<P>};</P>

<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>#endif // !defined(AFX_MOTIONSDLG_H__8A56D845_640F_11D2_B69D_004005424FA9__INCLUDED_)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156857">mxscript.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  MXSCRIPT.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Mike Sandige&#9;                                                            */</P>
<P>/*  Description: 3DS MAX script maintenance and execution for actor make process.&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef MXSCRIPT_H</P>
<P>#define MXSCRIPT_H</P>

<P>#include "mkutil.h"</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>typedef struct MXScript MXScript;</P>

<P>geBoolean MXScript_ArePluginsInstalled( const char *MaxExeName, MkUtil_Printf Printf );</P>

<P>MXScript *MXScript_StartScript(const char *TempDir, MkUtil_Printf Printf);</P>

<P>geBoolean MXScript_AddExport(MXScript *Script,const char *LoadFilename, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;const char *ExportFilename,MkUtil_Printf Printf);</P>

<P>geBoolean MXScript_EndScript(MXScript *Script,MkUtil_Printf Printf);</P>

<P>void MXScript_Destroy(MXScript *Script);</P>
<P>geBoolean MXScript_RunScript(MXScript *Script, const char *MaxExeName, MkUtil_Printf Printf);</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156858">MyFileDlg.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  MYFILEDLG.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Custom CFileDialog.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef MYFILEDLG_H</P>
<P>#define MYFILEDLG_H</P>

<P>&nbsp;</P>
<P>CFileDialog *MyFileDialog_Create</P>
<P>&#9;(</P>
<P>&#9;  BOOL bOpenFileDialog,</P>
<P>&#9;  int nTitleId,</P>
<P>&#9;  int nDefExtId,</P>
<P>&#9;  int nFilterId,</P>
<P>&#9;  const char *lpszFileName,</P>
<P>&#9;  DWORD dwFlags,</P>
<P>&#9;  CWnd *pParentWnd</P>
<P>&#9;);</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156859">NewPrjDlg.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  NEWPRJDLG.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Actor Studio new project dialog.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined(AFX_NEWPRJDLG_H__D1299EE6_6D76_11D2_B69D_004005424FA9__INCLUDED_)</P>
<P>#define AFX_NEWPRJDLG_H__D1299EE6_6D76_11D2_B69D_004005424FA9__INCLUDED_</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>
<P>// CNewPrjDlg.h : header file</P>
<P>//</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CNewPrjDlg dialog</P>

<P>class CNewPrjDlg : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;CNewPrjDlg(CWnd* pParent = NULL);   // standard constructor</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CNewPrjDlg)</P>
<P>&#9;enum { IDD = IDD_NEWPROJECT };</P>
<P>&#9;CString&#9;m_ProjectName;</P>
<P>&#9;BOOL&#9;m_UseProjectDir;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CNewPrjDlg)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CNewPrjDlg)</P>
<P>&#9;afx_msg void OnBrowseproject();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>};</P>

<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>#endif // !defined(AFX_CNEWPRJDLG_H__D1299EE6_6D76_11D2_B69D_004005424FA9__INCLUDED_)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156860">PathsDlg.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  PATHSDLG.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Actor Studio paths dialog.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined(AFX_PATHSDLG_H__8A56D846_640F_11D2_B69D_004005424FA9__INCLUDED_)</P>
<P>#define AFX_PATHSDLG_H__8A56D846_640F_11D2_B69D_004005424FA9__INCLUDED_</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>
<P>// PathsDlg.h : header file</P>
<P>//</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CPathsDlg dialog</P>
<P>#include "PropPage.h"</P>
<P>#include "resource.h"</P>

<P>class CPathsDlg : public CAStudioPropPage</P>
<P>{</P>
<P>&#9;DECLARE_DYNCREATE(CPathsDlg)</P>

<P>// Construction</P>
<P>public:</P>
<P>&#9;CPathsDlg();</P>
<P>&#9;~CPathsDlg();</P>
<P>&#9;virtual void SetProjectPointer (AProject *Project);</P>
<P>&#9;virtual void GetDialogData ();</P>
<P>&#9;virtual void SetCompileStatus (bool Status);</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CPathsDlg)</P>
<P>&#9;enum { IDD = IDD_PATHS };</P>
<P>&#9;CString&#9;m_MaterialsPath;</P>
<P>&#9;CString&#9;m_TempFilesDir;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generate virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CPathsDlg)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>
<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CPathsDlg)</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;afx_msg void OnChangeEditmaterialspath();</P>
<P>&#9;afx_msg void OnChangeEdittempfilesdir();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>

<P>&#9;virtual BOOL OnSetActive ();</P>
<P>&#9;virtual BOOL OnKillActive ();</P>

<P>private:</P>
<P>&#9;void SetDialogData ();</P>
<P>&#9;void EnableControls ();</P>
<P>};</P>

<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>#endif // !defined(AFX_PATHSDLG_H__8A56D846_640F_11D2_B69D_004005424FA9__INCLUDED_)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156861">PropPage.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  PROPPAGE.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Actor Studio property page parent class.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined(PROPPAGE_H)</P>
<P>#define PROPPAGE_H</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CAStudioPropPage</P>
<P>#include "AProject.h"</P>
<P>#include "AOptions.h"</P>

<P>class CAStudioPropPage : public CPropertyPage</P>
<P>{</P>
<P>&#9;DECLARE_DYNCREATE(CAStudioPropPage)</P>

<P>// Construction</P>
<P>public:</P>
<P>&#9;~CAStudioPropPage();</P>
<P>&#9;CAStudioPropPage (UINT nIDTemplate, UINT nIDCaption = 0);</P>
<P>&#9;CAStudioPropPage (LPCSTR lpszTemplateName, UINT nIDCaption = 0);</P>

<P>&#9;virtual bool WasModified () { return m_Modified; }</P>
<P>&#9;void SetModifiedFlag (bool Flag);</P>
<P>&#9;virtual void SetProjectPointer (AProject *Project) {m_Project = Project;}</P>
<P>&#9;void SetOptionsPointer (const AOptions *Options) {m_Options = Options;}</P>
<P>&#9;virtual void GetDialogData () {};</P>
<P>&#9;virtual void SetCompileStatus (bool Status) { m_Compiling = Status; }</P>
<P>// Implementation</P>
<P>protected:</P>
<P>&#9;// available only to inherited classes and friends</P>
<P>&#9;bool&#9;&#9;m_Modified;</P>
<P>&#9;bool&#9;&#9;m_Compiling;</P>
<P>&#9;AProject&#9;*m_Project;</P>
<P>&#9;const AOptions *m_Options;</P>
<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CAStudioPropPage)</P>
<P>&#9;virtual void OnMessages ();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>

<P>private:</P>
<P>&#9;CAStudioPropPage();&#9;&#9;// declared private so it can't be used!</P>
<P>&#9;void CommonInit (void);</P>
<P>};</P>

<P>#endif // !defined(PROPPAGE_H)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156862">PropSheet.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  PROPSHEET.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Actor Studio main dialog.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef PROPSHEET_H</P>
<P>#define PROPSHEET_H</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>

<P>#include "TargetDlg.h"</P>
<P>#include "BodyDlg.h"</P>
<P>#include "MaterialsDlg.h"</P>
<P>#include "MotionsDlg.h"</P>
<P>#include "PathsDlg.h"</P>
<P>#include "AProject.h"</P>
<P>#include "SettingsDlg.h"</P>
<P>#include "AOptions.h"</P>
<P>#include "LogoPage.h"</P>

<P>class CAStudioPropSheet : public CPropertySheet</P>
<P>{</P>
<P>public:</P>
<P>&#9;DECLARE_DYNAMIC(CAStudioPropSheet)</P>
<P>&#9;CAStudioPropSheet(CWnd* pWndParent, AProject **pProject, AOptions *pOptions, const char *ProjectFilename);</P>
<P>&#9;~CAStudioPropSheet ();</P>

<P>// Overrides</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;virtual BOOL PreTranslateMessage(MSG* pMsg);</P>
<P>// Message Handlers</P>
<P>protected:</P>
<P>&#9;//{{AFX_MSG(CAStudioPropSheet)</P>
<P>&#9;afx_msg int OnCreate (LPCREATESTRUCT lpCreateStruct);</P>
<P>&#9;afx_msg void OnDestroy ();</P>
<P>&#9;afx_msg void OnPaint ();</P>
<P>&#9;afx_msg HCURSOR OnQueryDragIcon();</P>
<P>&#9;afx_msg void OnSysCommand( UINT nID, LPARAM lParam );</P>
<P>&#9;afx_msg void OnFileNew ();</P>
<P>&#9;afx_msg void OnFileOpen ();</P>
<P>&#9;afx_msg void OnFileSave ();</P>
<P>&#9;afx_msg void OnProjectBuild ();</P>
<P>&#9;afx_msg void OnProjectBuildAll ();</P>
<P>&#9;afx_msg void OnProjectClean ();</P>
<P>&#9;afx_msg void OnProjectActorSummary ();</P>
<P>&#9;afx_msg void OnFileExit ();</P>
<P>&#9;afx_msg void OnDummyEsc ();</P>
<P>&#9;afx_msg void OnMessages ();</P>
<P>&#9;afx_msg void OnCompileMessage (UINT wParam, LONG lParam);</P>
<P>&#9;afx_msg void OnCompileDone (UINT wParam, LONG lParam);</P>
<P>&#9;// Update UI handlers</P>
<P>&#9;afx_msg void OnUpdateFileNew (CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateFileOpen (CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateFileSave (CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateProjectBuild (CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateProjectBuildAll (CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateProjectClean (CCmdUI* pCmdUI);</P>
<P>&#9;afx_msg void OnUpdateProjectActorSummary (CCmdUI* pCmdUI);</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>

<P>private:</P>
<P>&#9;HICON&#9;&#9;&#9;m_hIcon;&#9;// program icon</P>
<P>&#9;HACCEL&#9;&#9;&#9;m_hAccel;&#9;// menu accelerators</P>

<P>&#9;bool&#9;&#9;&#9;m_FileLoaded;&#9;// false at program startup until file</P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;// loaded or new file created</P>
<P>&#9;bool&#9;&#9;&#9;m_Compiling;&#9;// true if currently compiling</P>
<P>&#9;// Property sheet pages.</P>
<P>&#9;// Automatically constructed</P>
<P>&#9;CTargetDlg&#9;&#9;m_TargetPage;</P>
<P>&#9;CBodyDlg&#9;&#9;m_BodyPage;</P>
<P>&#9;CMaterialsDlg&#9;m_MaterialsPage;</P>
<P>&#9;CMotionsDlg&#9;&#9;m_MotionsPage;</P>
<P>&#9;CPathsDlg&#9;&#9;m_PathsPage;</P>
<P>&#9;CSettingsDlg&#9;m_SettingsPage;</P>
<P>&#9;CLogoPage&#9;&#9;m_LogoPage;</P>

<P>&#9;bool&#9;&#9;&#9;m_Modified;</P>
<P>&#9;bool&#9;&#9;&#9;m_NewFile;</P>
<P>&#9;bool&#9;&#9;&#9;m_MessagesVisible;</P>
<P>&#9;CString&#9;&#9;&#9;m_Filename;</P>
<P>&#9;CButton&#9;&#9;&#9;m_MessagesBtn;</P>
<P>&#9;CButton&#9;&#9;&#9;m_BuildBtn;</P>

<P>&#9;CEdit&#9;&#9;&#9;m_EditMessages;&#9;&#9;// messages window</P>
<P>&#9;int&#9;&#9;&#9;&#9;m_Width;&#9;&#9;&#9;// dialog width</P>
<P>&#9;int&#9;&#9;&#9;&#9;m_NormalHeight;</P>
<P>&#9;int&#9;&#9;&#9;&#9;m_ExpandedHeight;</P>

<P>&#9;// Parent passes a pointer-to-pointer to structure so we can return it.</P>
<P>&#9;// But we use m_Project.</P>
<P>&#9;AProject&#9;&#9;**m_pProject;&#9;// For communication to parent</P>
<P>&#9;AProject&#9;&#9;*m_Project;&#9;&#9;// Project options structure</P>
<P>&#9;AOptions&#9;&#9;*m_Options;</P>

<P>&#9;void&#9;AddAButton (int ButtonTextId, int ButtonId, CButton &amp;TheButton, const RECT &amp;BtnRect);</P>
<P>&#9;void&#9;ReplaceAButton (int ButtonTextId, int ReplaceButtonId, int ButtonId, CButton &amp;TheButton);</P>
<P>&#9;bool&#9;CanClose ();</P>
<P>&#9;bool&#9;WasModified ();</P>
<P>&#9;void&#9;SetModifiedFlag (bool flag);</P>
<P>&#9;void&#9;SetupTitle ();</P>
<P>&#9;int&#9;&#9;PromptForSave ();</P>
<P>&#9;bool&#9;PromptForSaveFileName (CString &amp;OutputFilename);</P>
<P>&#9;bool&#9;SaveFileAs (const CString &amp;OutputFilename);</P>
<P>&#9;bool&#9;SaveFile ();</P>
<P>&#9;bool&#9;WriteTheDamnFileAlready (const CString &amp;Filename);</P>
<P>&#9;void&#9;AddPropertyPages ();</P>

<P>&#9;void&#9;ForcePageUpdates ();</P>
<P>&#9;void&#9;SetProjectPointer (AProject *Project);</P>
<P>&#9;void&#9;UpdateCurrentPage ();</P>
<P>&#9;void&#9;EnableMessagesWindow (bool Enabled);</P>
<P>&#9;void&#9;SetWorkingDirectory ();</P>
<P>&#9;void&#9;SetCompilingStatus (bool CompileFlag);</P>
<P>};</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156863">resource.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>//{{NO_DEPENDENCIES}}</P>
<P>// Microsoft Developer Studio generated include file.</P>
<P>// Used by AStudio.rc</P>
<P>//</P>
<P>#define IDM_ABOUTBOX                    0x0010</P>
<P>#define IDD_ABOUTBOX                    100</P>
<P>#define IDS_ABOUTBOX                    101</P>
<P>#define IDD_ASTUDIO_DIALOG              102</P>
<P>#define IDD_TARGET                      102</P>
<P>#define IDD_PATHS                       106</P>
<P>#define IDR_MAINFRAME                   128</P>
<P>#define IDR_MENU1                       129</P>
<P>#define IDB_LOGO                        130</P>
<P>#define IDR_ACCELERATOR1                131</P>
<P>#define IDD_BODY                        132</P>
<P>#define IDD_MATERIALS                   133</P>
<P>#define IDD_MOTIONS                     134</P>
<P>#define IDD_TEXTINPUT                   135</P>
<P>#define IDD_SETTINGS                    136</P>
<P>#define IDD_MESSAGES                    137</P>
<P>#define IDD_LOGOPAGE                    137</P>
<P>#define IDD_NEWPROJECT                  138</P>
<P>#define IDC_EDITBODY                    1000</P>
<P>#define IDC_BROWSE                      1001</P>
<P>#define IDC_BROWSEBODY                  1001</P>
<P>#define IDC_MATERIALSLIST               1002</P>
<P>#define IDC_EDITTEXTURE                 1003</P>
<P>#define IDC_BROWSETEXTURE               1004</P>
<P>#define IDC_CHECKCOLOR                  1005</P>
<P>#define IDC_EDITRED                     1006</P>
<P>#define IDC_EDITGREEN                   1007</P>
<P>#define IDC_EDITBLUE                    1008</P>
<P>#define IDC_MATERIALDEFAULT             1009</P>
<P>#define IDC_MOTIONSLIST                 1010</P>
<P>#define IDC_CHOOSECOLOR                 1010</P>
<P>#define IDC_EDITMOTION                  1011</P>
<P>#define IDC_EDITBODYPATH                1011</P>
<P>#define IDC_BROWSEMOTION                1012</P>
<P>#define IDC_FORCERELATIVE               1012</P>
<P>#define IDC_EDITTEXTURE2                1013</P>
<P>#define IDC_ADDMATERIAL                 1013</P>
<P>#define IDC_BROWSEVIEWER                1013</P>
<P>#define IDC_EDITOPTIMIZE                1013</P>
<P>#define IDC_MOTIONDEFAULT               1014</P>
<P>#define IDC_EDITMATERIALSPATH           1014</P>
<P>#define IDC_BROWSE3DSMAX                1014</P>
<P>#define IDC_ADDMOTION                   1015</P>
<P>#define IDC_EDITMOTIONSPATH             1015</P>
<P>#define IDC_EDITOPTLEVEL                1015</P>
<P>#define IDC_DELETEMOTION                1016</P>
<P>#define IDC_EDITVIEWERPATH              1016</P>
<P>#define IDC_EDITTEMPFILESDIR            1016</P>
<P>#define IDC_SPINOPTIMIZE                1017</P>
<P>#define IDC_COMBOBONE                   1018</P>
<P>#define IDC_EDITTARGET                  1019</P>
<P>#define IDC_BROWSETARGET                1020</P>
<P>#define IDC_FORMATBINARY                1021</P>
<P>#define IDC_FORMATTEXT                  1022</P>
<P>#define IDC_MATERIALSFROMBODY           1022</P>
<P>#define IDC_MOTIONSFROMBODY             1024</P>
<P>#define IDC_RESETPAGE                   1025</P>
<P>#define IDC_BODYMAX                     1026</P>
<P>#define IDS_COMPILEFAILED               1026</P>
<P>#define IDC_BODYNFO                     1027</P>
<P>#define IDS_COMPILESUCCESS              1027</P>
<P>#define IDC_BODYBDY                     1028</P>
<P>#define IDS_NEWFILEPROMPT               1028</P>
<P>#define IDC_BODYACT                     1029</P>
<P>#define IDC_EDIT1                       1030</P>
<P>#define IDC_MOTIONMAX                   1031</P>
<P>#define IDC_MOTIONKEY                   1032</P>
<P>#define IDC_MOTIONMOT                   1033</P>
<P>#define IDC_MOTIONACT                   1034</P>
<P>#define IDC_EDIT3DSMAXPATH              1035</P>
<P>#define IDC_MESSAGES                    1036</P>
<P>#define IDC_OPTIMIZE                    1039</P>
<P>#define IDC_BROWSEPROJECT               1040</P>
<P>#define IDC_USEPROJECTDIR               1041</P>
<P>#define IDC_EDITPROJECTNAME             1042</P>
<P>#define IDC_EDITBONE                    1043</P>
<P>#define IDC_RENAMEMOTION                1044</P>
<P>#define IDC_RENAMEMATERIAL              1045</P>
<P>#define IDC_DELETEMATERIAL              1046</P>
<P>#define IDC_OPTCHECK                    1049</P>
<P>#define IDC_SPINOPTLEVEL                1050</P>
<P>#define ID_FILEOPEN                     32771</P>
<P>#define ID_FILECLOSE                    32772</P>
<P>#define IDS_UNTITLED                    32773</P>
<P>#define ID_FILEEXIT                     32774</P>
<P>#define ID_FILENEW                      32775</P>
<P>#define ID_HELPABOUT                    32776</P>
<P>#define ID_FILESAVE                     32777</P>
<P>#define ID_FILESAVEAS                   32778</P>
<P>#define ID_BUILDBUILD                   32779</P>
<P>#define ID_BUILDALL                     32780</P>
<P>#define IDS_MODIFIED                    32781</P>
<P>#define ID_BUILDCLEAN                   32782</P>
<P>#define ID_BUILDSETTINGS                32783</P>
<P>#define ID_PROJECTSETTINGS              32784</P>
<P>#define ID_PROJECTBUILD                 32785</P>
<P>#define ID_PROJECTBUILDALL              32786</P>
<P>#define ID_PROJECTCLEAN                 32787</P>
<P>#define ID_DUMMYESC                     32788</P>
<P>#define IDS_CAPTION                     32788</P>
<P>#define IDS_UNTITLEDFILE                32789</P>
<P>#define IDS_ACTFILEFILTER               32790</P>
<P>#define IDS_ACTFILEEXT                  32791</P>
<P>#define IDS_ACTFILEFILTERDESC           32792</P>
<P>#define IDS_BDYFILEFILTER               32793</P>
<P>#define IDS_BDYFILEEXT                  32794</P>
<P>#define IDS_BDYFILEFILTERDESC           32795</P>
<P>#define IDS_BMPFILEFILTER               32796</P>
<P>#define IDS_BMPFILEEXT                  32797</P>
<P>#define IDS_BMPFILEFILTERDESC           32798</P>
<P>#define IDS_MOTFILEFILTER               32799</P>
<P>#define IDS_MOTFILEEXT                  32800</P>
<P>#define IDS_MOTFILEFILTERDESC           32801</P>
<P>#define IDS_INIFILE_NAME                32802</P>
<P>#define IDS_WRITEERROR                  32803</P>
<P>#define IDS_ASPFILEFILTER               32804</P>
<P>#define IDS_ASPFILEEXT                  32805</P>
<P>#define IDS_READERROR                   32806</P>
<P>#define IDS_SAVEPROJECTPROMPT           32807</P>
<P>#define IDS_OPENPROJECTPROMPT           32808</P>
<P>#define IDS_TARGETPROMPT                32809</P>
<P>#define IDS_BODYPROMPT                  32810</P>
<P>#define IDS_TEXTUREPROMPT               32811</P>
<P>#define IDS_MATERIALPROMPT              32812</P>
<P>#define IDS_OUTOFMEMORY                 32813</P>
<P>#define IDS_3DSMAXPROMPT                32814</P>
<P>#define IDS_VIEWERPROMPT                32815</P>
<P>#define IDS_EXEFILEEXT                  32816</P>
<P>#define IDS_EXEFILEFILTER               32817</P>
<P>#define IDS_MOTIONFILEPROMPT            32818</P>
<P>#define IDS_MOTIONPROMPT                32819</P>
<P>#define IDS_ERRORADDMATERIAL            32820</P>
<P>#define IDS_ERRORADDMOTION              32821</P>
<P>#define IDS_ERRORDELMOTION              32822</P>
<P>#define IDS_MESSAGESHIDE                32823</P>
<P>#define IDS_MESSAGESSHOW                32824</P>
<P>#define IDS_CREATEERROR                 32825</P>
<P>#define IDS_PROJECTNAMEPROMPT           32826</P>
<P>#define IDS_OVERWRITEPROJECT            32827</P>
<P>#define IDS_PROJECTFILECREATEERROR      32828</P>
<P>#define IDS_BUILD                       32829</P>
<P>#define IDS_OPTIONSERR                  32830</P>
<P>#define IDS_RELATIVEPATH                32831</P>
<P>#define IDS_CANTSTARTCOMPILE            32832</P>
<P>#define IDS_STOPBUILD                   32833</P>
<P>#define IDS_BUILDING                    32834</P>
<P>#define IDS_CLEANING                    32835</P>
<P>#define IDS_CANCELREQUESTED             32836</P>
<P>#define IDS_NEWNAMEPROMPT               32837</P>
<P>#define IDS_MOTIONEXISTS                32838</P>
<P>#define IDS_CANTDROPMOTION              32839</P>
<P>#define IDS_ERRORDROPMOTION             32840</P>
<P>#define IDS_MATERIALEXISTS              32841</P>
<P>#define IDS_ERRORDELMATERIAL            32842</P>
<P>#define IDS_CANTDROPMATERIAL            32843</P>
<P>#define IDS_ERRORDROPMATERIAL           32844</P>
<P>#define ID_PROJECTACTORSUMMARY          32845</P>
<P>#define IDS_SUMMARYFAILED               32845</P>

<P>// Next default values for new objects</P>
<P>// </P>
<P>#ifdef APSTUDIO_INVOKED</P>
<P>#ifndef APSTUDIO_READONLY_SYMBOLS</P>
<P>#define _APS_NEXT_RESOURCE_VALUE        140</P>
<P>#define _APS_NEXT_COMMAND_VALUE         32846</P>
<P>#define _APS_NEXT_CONTROL_VALUE         1051</P>
<P>#define _APS_NEXT_SYMED_VALUE           101</P>
<P>#endif</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156864">SettingsDlg.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  SETTINGSDLG.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Actor Studio project settings dialog.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined(AFX_SETTINGSDLG_H__8CB97C20_69BC_11D2_B69D_004005424FA9__INCLUDED_)</P>
<P>#define AFX_SETTINGSDLG_H__8CB97C20_69BC_11D2_B69D_004005424FA9__INCLUDED_</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>
<P>// SettingsDlg.h : header file</P>
<P>//</P>
<P>#include "AOptions.h"</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CSettingsDlg dialog</P>

<P>class CSettingsDlg : public CPropertyPage</P>
<P>{</P>
<P>&#9;DECLARE_DYNCREATE(CSettingsDlg)</P>

<P>// Construction</P>
<P>public:</P>
<P>&#9;CSettingsDlg();</P>
<P>&#9;~CSettingsDlg();</P>

<P>&#9;void SetOptionsPointer (AOptions *pOptions) {Options = pOptions;}</P>
<P>&#9;void SetCompileStatus (bool Status);</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CSettingsDlg)</P>
<P>&#9;enum { IDD = IDD_SETTINGS };</P>
<P>&#9;CSpinButtonCtrl&#9;m_SpinOptLevel;</P>
<P>&#9;CEdit&#9;m_EditOptLevel;</P>
<P>&#9;CString&#9;m_3DSMaxPath;</P>
<P>&#9;CString&#9;m_ViewerPath;</P>
<P>&#9;int&#9;&#9;m_OptLevel;</P>
<P>&#9;BOOL&#9;m_OptCheck;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generate virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CSettingsDlg)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>
<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CSettingsDlg)</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;afx_msg void OnBrowse3dsmax();</P>
<P>&#9;afx_msg void OnBrowseviewer();</P>
<P>&#9;afx_msg void OnDestroy();</P>
<P>&#9;afx_msg void OnOptcheck();</P>
<P>&#9;afx_msg void OnDeltaposSpinoptlevel(NMHDR* pNMHDR, LRESULT* pResult);</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>

<P>&#9;virtual BOOL OnSetActive ();</P>
<P>&#9;virtual BOOL OnKillActive ();</P>

<P>private :</P>
<P>&#9;AOptions&#9;*Options;</P>
<P>&#9;bool&#9;&#9;m_Compiling;</P>
<P>&#9;void&#9;&#9;EnableControls ();</P>
<P>};</P>

<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>#endif // !defined(AFX_SETTINGSDLG_H__8CB97C20_69BC_11D2_B69D_004005424FA9__INCLUDED_)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454156865">StdAfx.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  STDAFX.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Standard MFC includes.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>// stdafx.h : include file for standard system include files,</P>
<P>//  or project specific include files that are used frequently, but</P>
<P>//      are changed infrequently</P>
<P>//</P>

<P>#if !defined(AFX_STDAFX_H__B89225E9_6368_11D2_B69D_004005424FA9__INCLUDED_)</P>
<P>#define AFX_STDAFX_H__B89225E9_6368_11D2_B69D_004005424FA9__INCLUDED_</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>

<P>#define VC_EXTRALEAN&#9;&#9;// Exclude rarely-used stuff from Windows headers</P>

<P>#include &lt;afxwin.h&gt;         // MFC core and standard components</P>
<P>#include &lt;afxext.h&gt;         // MFC extensions</P>
<P>#ifndef _AFX_NO_AFXCMN_SUPPORT</P>
<P>#include &lt;afxcmn.h&gt;&#9;&#9;&#9;// MFC support for Windows Common Controls</P>
<P>#endif // _AFX_NO_AFXCMN_SUPPORT</P>

<P>&nbsp;</P>
<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>#endif // !defined(AFX_STDAFX_H__B89225E9_6368_11D2_B69D_004005424FA9__INCLUDED_)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156866">TargetDlg.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  TARGETDLG.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Actor Studio build target dialog.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined(AFX_TARGETDLG_H__8A56D847_640F_11D2_B69D_004005424FA9__INCLUDED_)</P>
<P>#define AFX_TARGETDLG_H__8A56D847_640F_11D2_B69D_004005424FA9__INCLUDED_</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>
<P>// TargetDlg.h : header file</P>
<P>//</P>

<P>#include "PropPage.h"</P>
<P>#include "resource.h"</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CTargetDlg dialog</P>

<P>class CTargetDlg : public CAStudioPropPage</P>
<P>{</P>
<P>&#9;DECLARE_DYNCREATE(CTargetDlg)</P>

<P>// Construction</P>
<P>public:</P>
<P>&#9;CTargetDlg();</P>
<P>&#9;~CTargetDlg();</P>

<P>&#9;virtual void SetProjectPointer (AProject *Project);</P>
<P>&#9;virtual void GetDialogData ();</P>
<P>&#9;virtual void SetCompileStatus (bool bStatus);</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CTargetDlg)</P>
<P>&#9;enum { IDD = IDD_TARGET };</P>
<P>&#9;CEdit&#9;m_EditTarget;</P>
<P>&#9;CString&#9;m_TargetName;</P>
<P>&#9;int&#9;&#9;m_OutputFormat;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generate virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CTargetDlg)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>
<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CTargetDlg)</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;afx_msg void OnBrowsetarget();</P>
<P>&#9;afx_msg void OnChangeEdittarget();</P>
<P>&#9;afx_msg void OnFormatChanged();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>

<P>&#9;virtual BOOL OnSetActive ();</P>
<P>&#9;virtual BOOL OnKillActive ();</P>

<P>private:</P>
<P>&#9;bool&#9;m_FilenameChanged;</P>
<P>&#9;void&#9;SetDialogData (void);</P>
<P>&#9;void&#9;EnableControls ();</P>
<P>};</P>

<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>#endif // !defined(AFX_TARGETDLG_H__8A56D847_640F_11D2_B69D_004005424FA9__INCLUDED_)</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156867">TextInputDlg.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  TEXTINPUTDLG.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Simple text input dialog box.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#if !defined(AFX_TEXTINPUTDLG_H__1D3F8523_68E4_11D2_B69D_004005424FA9__INCLUDED_)</P>
<P>#define AFX_TEXTINPUTDLG_H__1D3F8523_68E4_11D2_B69D_004005424FA9__INCLUDED_</P>

<P>#if _MSC_VER &gt;= 1000</P>
<P>#pragma once</P>
<P>#endif // _MSC_VER &gt;= 1000</P>
<P>// TextInputDlg.h : header file</P>
<P>//</P>

<P>/////////////////////////////////////////////////////////////////////////////</P>
<P>// CTextInputDlg dialog</P>

<P>class CTextInputDlg : public CDialog</P>
<P>{</P>
<P>// Construction</P>
<P>public:</P>
<P>&#9;CTextInputDlg(int TitleId, const CString &amp;Text, CWnd* pParent = NULL);   // standard constructor</P>

<P>// Dialog Data</P>
<P>&#9;//{{AFX_DATA(CTextInputDlg)</P>
<P>&#9;enum { IDD = IDD_TEXTINPUT };</P>
<P>&#9;CString&#9;m_Text;</P>
<P>&#9;//}}AFX_DATA</P>

<P>&nbsp;</P>
<P>// Overrides</P>
<P>&#9;// ClassWizard generated virtual function overrides</P>
<P>&#9;//{{AFX_VIRTUAL(CTextInputDlg)</P>
<P>&#9;protected:</P>
<P>&#9;virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support</P>
<P>&#9;//}}AFX_VIRTUAL</P>

<P>// Implementation</P>
<P>protected:</P>

<P>&#9;// Generated message map functions</P>
<P>&#9;//{{AFX_MSG(CTextInputDlg)</P>
<P>&#9;virtual void OnOK();</P>
<P>&#9;virtual BOOL OnInitDialog();</P>
<P>&#9;//}}AFX_MSG</P>
<P>&#9;DECLARE_MESSAGE_MAP()</P>
<P>private:</P>
<P>&#9;int m_TitleId;</P>
<P>};</P>

<P>//{{AFX_INSERT_LOCATION}}</P>
<P>// Microsoft Developer Studio will insert additional declarations immediately before the previous line.</P>

<P>#endif // !defined(AFX_TEXTINPUTDLG_H__1D3F8523_68E4_11D2_B69D_004005424FA9__INCLUDED_)</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<I><P><A NAME="_Toc454156868">OpenSource/Tools/mkactor/AStudio/Util Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>This subdirectory contains utility routines used by the Actor Stuio Windows program.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156869">Array.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  ARRAY.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Lightweight dynamic array.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef ARRAY_H</P>
<P>#define ARRAY_H</P>

<P>#include "basetype.h"</P>
<P>#include &lt;string.h&gt;</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>typedef struct tag_Array Array;</P>
<P>struct tag_Array</P>
<P>{</P>
<P>&#9;int ItemsAllocated;&#9;&#9;// number of items currently allocated</P>
<P>&#9;int ItemSize;</P>
<P>&#9;void *Items;&#9;&#9;&#9;// array of data</P>
<P>};</P>

<P>&nbsp;</P>
<P>// Initialize an allocated array object</P>
<P>geBoolean Array_Init (Array *pArray, int InitialSize, int ItemSize);</P>

<P>// Free memory allocated by an array's items</P>
<P>void Array_Uninit (Array *pArray);</P>

<P>// Create an array object with given initial size (possibly 0).</P>
<P>// The array contains items of size ItemSize (must be &gt; 0)</P>
<P>Array *Array_Create (int InitialSize, int ItemSize);</P>

<P>// Destroy an array object</P>
<P>void Array_Destroy (Array **ppArray);</P>

<P>// Size the array to contain NewSize items.</P>
<P>// returns new size in items.</P>
<P>int Array_Resize (Array *pArray, int NewSize);</P>

<P>#ifdef _DEBUG</P>
<P>&#9;// Returns the array's current size.</P>
<P>&#9;int Array_GetSize (const Array *pArray);</P>

<P>&#9;// Return size of items held by the array</P>
<P>&#9;int Array_GetItemSize (const Array *pArray);</P>

<P>&#9;// Returns a pointer to the item's data.</P>
<P>&#9;void *Array_ItemPtr (Array *pArray, int Index);</P>

<P>&#9;// Copies DataSize bytes from pData to array[Index]</P>
<P>&#9;void Array_PutAt (Array *pArray, int Index, void *pData, int DataSize);</P>

<P>&#9;// Inserts an item at the given position, moving all other items</P>
<P>&#9;// down by 1.  The last item in the array is lost...</P>
<P>&#9;void Array_InsertAt (Array *pArray, int Index, void *pData, int DataSize);</P>

<P>&#9;// Deletes the item at and moves all following items in the array up</P>
<P>&#9;// to fill in the empty spot.</P>
<P>&#9;void Array_DeleteAt (Array *pArray, int Index);</P>

<P>#else</P>
<P>&#9;#define Array_GetSize(a) ((a)-&gt;ItemsAllocated)</P>
<P>&#9;#define Array_GetItemSize(a) ((a)-&gt;ItemSize)</P>
<P>&#9;#define Array_ItemPtr(a,i) ((void *)(((long)((a)-&gt;Items))+((i)*(a)-&gt;ItemSize)))</P>
<P>&#9;#define Array_PutAt(a,i,d,s) (memcpy (Array_ItemPtr((a),(i)),(d),(s)))</P>
<P>&#9;#define Array_InsertAt(a,i,d,s) \</P>
<P>&#9;&#9;(memmove(Array_ItemPtr((a),(i)+1),Array_ItemPtr((a),(i)),((a)-&gt;ItemsAllocated-(i)-1)*(a)-&gt;ItemSize), \</P>
<P>&#9;&#9; memcpy(Array_ItemPtr((a),(i)),(d),(s)))</P>
<P>&#9;#define Array_DeleteAt(a,i) \</P>
<P>&#9;&#9;(memcpy (Array_ItemPtr((a),(i)),Array_ItemPtr((a),(i+1)),((a)-&gt;ItemsAllocated-(i)-1)*(a)-&gt;ItemSize))</P>
<P>#endif</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156870">FilePath.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  FILEPATH.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Useful file and pathname functions.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef FILEPATH_H</P>

<P>#define FILEPATH_H</P>

<P>#include "basetype.h"</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>// Extract drive (d:\) from pPath and place in pDrive</P>
<P>geBoolean FilePath_GetDrive (char const *pPath, char *pDrive);</P>

<P>// Extract directory from pPath and place in pDir</P>
<P>geBoolean FilePath_GetDir (char const *pPath, char *pDir);</P>

<P>// Extract Name from pPath and place in pName</P>
<P>geBoolean FilePath_GetName (char const *pPath, char *pName);</P>

<P>// Extract Extension from pPath and place in pExt</P>
<P>geBoolean FilePath_GetExt (char const *pPath, char *pExt);</P>

<P>// Extract drive and directory from pPath and place in pDriveDir</P>
<P>// pDriveDir may be the same as pPath</P>
<P>geBoolean FilePath_GetDriveAndDir (char const *pPath, char *pDriveDir);</P>

<P>// Extract Name and extension from pPath and place in pName</P>
<P>// pName may be the same as pPath</P>
<P>geBoolean FilePath_GetNameAndExt (char const *pPath, char *pName);</P>

<P>// set extension of pSourceFile to pExt and place result in pDestFile</P>
<P>// pDestFile may be the same as pSourceFile</P>
<P>geBoolean FilePath_SetExt (char const *pSourceFile, char const *pExt, char *pDestFile);</P>

<P>// Terminate pPath with a slash (by appending if necessary), and return result in pDest.</P>
<P>// pPath and pDest may be the same.</P>
<P>geBoolean FilePath_SlashTerminate (const char *pPath, char *pDest);</P>

<P>// Append pName to pPath and return result in pDest.</P>
<P>// pDest may be the same as pPath or pName.</P>
<P>geBoolean FilePath_AppendName (char const *pPath, char const *pName, char *pDest);</P>

<P>// Search for a Filename in the semicolon-separated paths specified in SearchPath.</P>
<P>// If found, returns GE_TRUE and the full path name of the file in FoundPath.</P>
<P>// Returns GE_FALSE if unsuccessful.</P>
<P>geBoolean FilePath_SearchForFile (const char *Filename, const char *SearchPath, char *FoundPath);</P>

<P>&nbsp;</P>
<P>geBoolean FilePath_AppendSearchDir (char *SearchList, const char *NewDir);</P>
<P>geBoolean FilePath_ResolveRelativePath (const char *Relative, char *Resolved);</P>
<P>geBoolean FilePath_ResolveRelativePathList (const char *RelativeList, char *ResolvedList);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156871">RcString.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  RCSTRING.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Resource string loading API.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef RCSTRING_H</P>
<P>#define RCSTRING_H</P>

<P>#pragma warning(disable : 4201 4214 4115)</P>
<P>#include &lt;windows.h&gt;</P>
<P>#pragma warning(default : 4201 4214 4115)</P>

<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>/*</P>
<P>  Gets a resource string and returns a pointer to it.</P>
<P>  This function maintains a static array of strings into which the resource strings</P>
<P>  are placed.  This function returns pointers to items in that static array.</P>
<P>  The array is maintained as a circular queue, so if you want to keep the contents </P>
<P>  of a resource string around, you should make a copy of it yourself after loading </P>
<P>  it.</P>
<P>*/</P>
<P>const char *rcstring_Load</P>
<P>&#9;(</P>
<P>&#9;  HINSTANCE hinst,</P>
<P>&#9;  int StringID</P>
<P>&#9;);</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156872">Util.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  UTIL.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Jim Mischel&#9;&#9;                                                            */</P>
<P>/*  Description: Various useful utility functions.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef UTIL_H</P>
<P>#define UTIL_H</P>

<P>#include "basetype.h"</P>
<P>#ifdef __cplusplus</P>
<P>&#9;extern "C" {</P>
<P>#endif</P>

<P>char *Util_Strdup (const char *s);</P>
<P>geBoolean Util_SetString (char **ppString, const char *NewValue);</P>

<P>geBoolean Util_IsValidInt (char const *Text, int *TheVal);</P>
<P>geBoolean Util_IsValidFloat (const char *Text, float *TheFloat);</P>
<P>unsigned int Util_htoi (const char *s);</P>
<P>void Util_QuoteString (const char *s, char *d);</P>

<P>// Obtain the integer at the end of a string.</P>
<P>// For example, foo123 will return the value 123 in *pVal</P>
<P>// pLastChar points to the last non-numeric character (possibly end of string)</P>
<P>geBoolean Util_GetEndStringValue( const char *psz, int32 *pVal, int32 *pLastChar) ;</P>

<P>geBoolean Util_FileExists (const char *Filename);</P>

<P>#ifdef __cplusplus</P>
<P>&#9;}</P>
<P>#endif</P>

<P>#endif</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<I><P><A NAME="_Toc454156873">OpenSource/Tools/mkactor/common Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>This subdirectory contains common routines used by both the AStudio Windows program and the ActBuild Dos batch file program.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156874">Maxmath.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  MAXMATH.H                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Stephen Balkum&#9;                                                            */</P>
<P>/*  Description:  3DS MAX compatible transformation functions.                          */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef MAXMATH_H</P>
<P>#define MAXMATH_H</P>

<P>#ifdef __cplusplus</P>
<P>extern "C"</P>
<P>{</P>
<P>#endif</P>

<P>void MaxMath_Transform(const geXForm3d* M, const geVec3d* v, geVec3d* r);</P>
<P>void MaxMath_GetInverse(const geXForm3d* A, geXForm3d* Inv);</P>
<P>void MaxMath_InverseMultiply(const geXForm3d* A, const geXForm3d* B, geXForm3d* M);</P>
<P>void MaxMath_Multiply(const geXForm3d* M1, const geXForm3d* M2, geXForm3d* MProduct);</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif // MAXMATH_H</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156875">mkutil.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  MKUTIL.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Mike Sandige&#9;                                                            */</P>
<P>/*  Description: Actor make process utility functions.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef __MKUTIL_H__</P>
<P>#define __MKUTIL_H__</P>

<P>#include &lt;stdio.h&gt;</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>typedef void (*MkUtil_Printf)(const char *Fmt, ...);</P>

<P>// These are the return codes for command line apps as defined by Eli</P>
<P>typedef enum</P>
<P>{</P>
<P>&#9;RETURN_SUCCESS = 0,</P>
<P>&#9;RETURN_WARNING = 1,</P>
<P>&#9;RETURN_ERROR = 2,</P>
<P>&#9;RETURN_USAGE = 999, // SLB added this</P>
<P>&#9;RETURN_NOACTION = 9999, // SLB added this</P>
<P>} ReturnCode;</P>

<P>void MkUtil_AdjustReturnCode(ReturnCode* pToAdjust, ReturnCode AdjustBy);</P>
<P>int MkUtil_Interrupt(void);</P>

<P>// Gotta have my booleans</P>
<P>typedef unsigned char MK_Boolean;</P>
<P>#define MK_TRUE (MK_Boolean)1</P>
<P>#define MK_FALSE (MK_Boolean)0</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif // __MKUTIL_H__</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454156876">TDBody.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  TDBODY.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Stephen Balkum&#9;                                                            */</P>
<P>/*  Description: Build-time internal body hierarchy format.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef TDBODY_H</P>
<P>#define TDBODY_H</P>

<P>#include "body.h"</P>

<P>typedef struct tag_TopDownBody</P>
<P>{</P>
<P>&#9;int BoneIndex;</P>
<P>&#9;int NumChildren;</P>
<P>&#9;struct tag_TopDownBody* pChildren;</P>
<P>} TopDownBody;</P>

<P>typedef enum </P>
<P>{</P>
<P>&#9;TDBODY_IS_NOT_DESCENDENT,</P>
<P>&#9;TDBODY_IS_DESCENDENT,</P>
<P>} TDBodyHeritage;</P>

<P>TopDownBody* TopDownBody_CreateFromBody(geBody* pBody);</P>

<P>void TopDownBody_Destroy(TopDownBody** ppTDBody);</P>

<P>TDBodyHeritage TopDownBody_IsDescendentOf(const TopDownBody* pTDBody, int ParentIndex, int Index);</P>

<P>#endif // TDBODY_H</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<I><P><A NAME="_Toc454156877">OpenSource/Tools/mkactor/fmtactor Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>This subdirectory contains routines used to format or create the actor.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156878">Fmtactor.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  FMTACTOR.H                                                                          */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef FORMAT_H</P>
<P>#define FORMAT_H</P>

<P>#include "Mkutil.h"&#9;&#9;&#9;//ReturnCode, PrintfCallback</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>typedef struct FmtActor_Options FmtActor_Options;</P>

<P>FmtActor_Options*&#9;FmtActor_OptionsCreate    (void);</P>
<P>void&#9;&#9;&#9;&#9;FmtActor_OptionsDestroy   (FmtActor_Options** ppOptions);</P>
<P>ReturnCode&#9;&#9;&#9;FmtActor_ParseOptionString(FmtActor_Options* options, const char* string, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;MK_Boolean InScript,MkUtil_Printf PrintfCallback);</P>
<P>void&#9;&#9;&#9;&#9;FmtActor_OutputUsage&#9;  (MkUtil_Printf PrintfCallback);</P>
<P>ReturnCode&#9;&#9;&#9;FmtActor_DoMake&#9;&#9;&#9;  (FmtActor_Options* options,MkUtil_Printf PrintfCallback);</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>

</FONT><FONT FACE="Arial"><P>&nbsp;</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156879">OpenSource/Tools/mkactor/GenesisSDK Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>This library is a duplicate of the regular outer include library which all the other tools use.  It is not documented here for that reason. </P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156880">OpenSource/Tools/mkactor/GenesisSDK/Include Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>This library is a duplicate of the regular outer include library which all the other tools use with the exception that it uses one different header file, dcommon.h.  That file is documented below.  In addition, the model headers, Actor.h, body.h and Extbox.h are not referenced or found in this subdirectory.  With these exceptions all the other headers files are the same.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156881">OpenSource/Tools/mkactor/mkactor Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>This subdirectory contains the basic routines for actor creation.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156882">Mkactor.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  MKACTOR.H                                                                           */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Stephen Balkum&#9;                                                            */</P>
<P>/*  Description: Actor construction from body and motions.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef MKACTOR_H</P>
<P>#define MKACTOR_H</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>#include "Mkutil.h"&#9;&#9;&#9;//ReturnCode</P>

<P>typedef struct MkActor_Options MkActor_Options;</P>

<P>MkActor_Options*&#9;MkActor_OptionsCreate    (void);</P>
<P>void&#9;&#9;&#9;&#9;MkActor_OptionsDestroy   (MkActor_Options** ppOptions);</P>
<P>ReturnCode&#9;&#9;&#9;MkActor_ParseOptionString(MkActor_Options* options, const char* string, </P>
<P>&#9;&#9;&#9;&#9;&#9;MK_Boolean InScript,MkUtil_Printf PrintfCallback);</P>
<P>void&#9;&#9;&#9;&#9;MkActor_OutputUsage&#9;     (MkUtil_Printf PrintfCallback);</P>
<P>ReturnCode&#9;&#9;&#9;MkActor_DoMake&#9;&#9;&#9; (MkActor_Options* options,MkUtil_Printf PrintfCallback);</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<I><P><A NAME="_Toc454156883">OpenSource/Tools/mkactor/mkbody Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>This subdirectory contains the basic routines for body creation.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4>
<P>Mkbody.h</P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  MKBODY.H&#9;                                                                        */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Stephen Balkum&#9;                                                            */</P>
<P>/*  Description: Body construction from MAX export and textures.&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef MKBODY_H</P>
<P>#define MKBODY_H</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>#include "Mkutil.h"&#9;&#9;&#9;//ReturnCode</P>

<P>typedef struct MkBody_Options MkBody_Options;</P>

<P>MkBody_Options*&#9;&#9;MkBody_OptionsCreate    (void);</P>
<P>void&#9;&#9;&#9;&#9;MkBody_OptionsDestroy   (MkBody_Options** ppOptions);</P>
<P>ReturnCode&#9;&#9;&#9;MkBody_ParseOptionString(MkBody_Options* options, const char* string, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9; MK_Boolean InScript,MkUtil_Printf PrintfCallback);</P>
<P>void&#9;&#9;&#9;&#9;MkBody_OutputUsage&#9;    (MkUtil_Printf PrintfCallback);</P>
<P>ReturnCode&#9;&#9;&#9;MkBody_DoMake&#9;&#9;&#9;(MkBody_Options* options,MkUtil_Printf PrintfCallback);</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>

</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P>vph.h</P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  VPH.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Stephen Balkum&#9;                                                            */</P>
<P>/*  Description: 3DS MAX Physique file parsing.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef VPH_H</P>
<P>#define VPH_H</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>int vphmain( const char* vphfile, const char* outfile );</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif // VPH_H</P>
</FONT><I><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<B><P><A NAME="_Toc454156884">OpenSource/Tools/mkactor/mkmotion Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>This subdirectory contains the basic routines for body creation.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156885">Mkmotion.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  MKMOTION.H&#9;                                                                        */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Stephen Balkum&#9;                                                            */</P>
<P>/*  Description: Motion construction from MAX export.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef MKMOTION_H</P>
<P>#define MKMOTION_H</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>#include "Mkutil.h"&#9;&#9;&#9;//ReturnCode</P>

<P>typedef struct MkMotion_Options MkMotion_Options;</P>

<P>MkMotion_Options*&#9;MkMotion_OptionsCreate    (void);</P>
<P>void&#9;&#9;&#9;&#9;MkMotion_OptionsDestroy   (MkMotion_Options** ppOptions);</P>
<P>ReturnCode&#9;&#9;&#9;MkMotion_ParseOptionString(MkMotion_Options* options, const char* string, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;MK_Boolean InScript,MkUtil_Printf PrintfCallback);</P>
<P>void&#9;&#9;&#9;&#9;MkMotion_OutputUsage&#9;  (MkUtil_Printf PrintfCallback);</P>
<P>ReturnCode&#9;&#9;&#9;MkMotion_DoMake&#9;&#9;      (MkMotion_Options* options,MkUtil_Printf PrintfCallback);</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156886">OpenSource/Tools/mkactor/mkmop Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>This subdirectory contains the basic routines for body creation.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156887">Log.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  LOG.H                                                                               */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Mike Sandige&#9;                                                            */</P>
<P>/*  Description:  Event logging API.&#9;                                                */</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef __LOG_H__</P>
<P>#define __LOG_H__</P>
<P> </P>
<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>
<P> </P>
<P>typedef enum </P>
<P>{ </P>
<P>&#9;LOG_NOWHERE, </P>
<P>&#9;LOG_TO_FILE, </P>
<P>&#9;LOG_TO_NOTEPAD, </P>
<P>&#9;LOG_TO_OPEN_NOTEPAD </P>
<P>} Log_DestinationType;</P>

<P>typedef enum </P>
<P>{ </P>
<P>&#9;LOG_RESET, </P>
<P>&#9;LOG_APPEND </P>
<P>} Log_OpenType;</P>

<P>&nbsp;</P>
<P>typedef struct _LogType LogType; </P>

<P>//#ifndef NDEBUG</P>
<P>&#9;#define DEBUG_LOGGING // comment out if dont want logging code in exe</P>
<P>//#endif</P>

<P>#ifdef DEBUG_LOGGING</P>

<P>LogType *Log_Open(Log_DestinationType DestinationType,</P>
<P>&#9;&#9;&#9;&#9;char *Filename,Log_OpenType ResetOrAppend);</P>
<P>&#9;// open a log (filename is nessary)</P>
<P> </P>
<P>void Log_Close(LogType **log);</P>
<P>&#9;// close a log&#9;(not nessary except to free some memory)</P>
<P> </P>
<P>void Log_Output(LogType *log, char *format, ... );</P>
<P>&#9;// output to a log. use printf format.</P>
<P> </P>
<P>void Log_Timestamp(LogType *log);</P>
<P>&#9;// dumps a time/date stamp into log.</P>

<P>#else</P>
<P>&#9;// Disable logging functions</P>
<P>#define Log_Open(dest,filename, mode)  0</P>
<P>#define Log_Close(log)</P>
<P>#define Log_Output&#9;if (0)</P>
<P>#define Log_Timestamp(log)</P>
<P>#endif</P>

<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P> </P>
<P>#endif</P>
<P> </P>
<P> </P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156888">mopshell.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  MOPSHELL.H&#9;                                                                        */</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Mike Sandige&#9;                                                            */</P>
<P>/*  Description: Motion optimizer.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef MOPSHELL_H</P>
<P>#define MOPSHELL_H</P>

<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>#include "Mkutil.h"&#9;&#9;&#9;//ReturnCode</P>

<P>typedef struct MopShell_Options MopShell_Options;</P>

<P>MopShell_Options*&#9;MopShell_OptionsCreate    (void);</P>
<P>void&#9;&#9;&#9;&#9;MopShell_OptionsDestroy   (MopShell_Options** ppOptions);</P>
<P>ReturnCode&#9;&#9;&#9;MopShell_ParseOptionString(MopShell_Options* options, const char* string, </P>
<P>&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;MK_Boolean InScript,MkUtil_Printf PrintfCallback);</P>
<P>void&#9;&#9;&#9;&#9;MopShell_OutputUsage&#9;  (MkUtil_Printf PrintfCallback);</P>
<P>ReturnCode&#9;&#9;&#9;MopShell_DoMake&#9;&#9;      (MopShell_Options* options,MkUtil_Printf PrintfCallback);</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>#endif</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156889">pop.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>/****************************************************************************************/</P>
<P>/*  POP.H&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  Author: Mike Sandige&#9;                                                            */</P>
<P>/*  Description: Path optimizer.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/</P>
<P>/*                                                                                      */</P>
<P>/*  The contents of this file are subject to the Genesis3D Public License               */</P>
<P>/*  Version 1.01 (the "License"); you may not use this file except in                   */</P>
<P>/*  compliance with the License. You may obtain a copy of the License at                */</P>
<P>/*  http://www.genesis3d.com                                                            */</P>
<P>/*                                                                                      */</P>
<P>/*  Software distributed under the License is distributed on an "AS IS"                 */</P>
<P>/*  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See                */</P>
<P>/*  the License for the specific language governing rights and limitations              */</P>
<P>/*  under the License.                                                                  */</P>
<P>/*                                                                                      */</P>
<P>/*  The Original Code is Genesis3D, released March 25, 1999.                            */</P>
<P>/*  Copyright (C) 1996-1999 Eclipse Entertainment, L.L.C. All Rights Reserved           */</P>
<P>/*                                                                                      */</P>
<P>/****************************************************************************************/</P>
<P>#ifndef POP_H</P>
<P>#define POP_H</P>

<P>&nbsp;</P>
<P>#include "path.h"</P>

<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>extern "C" {</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>gePath *Pop_PathOptimize(gePath *P, geFloat Tolerance);</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>#ifdef __cplusplus</P>
<P>}</P>
<P>#endif</P>

<P>&nbsp;</P>
<P>#endif</P>
</FONT><B><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<I><P><A NAME="_Toc454156890">OpenSource/Tools/tpack/GenesisSDK/Include Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>This library is a duplicate of the regular outer include library which all the other tools use with the exception that it uses one different header file, dcommon.h.  That file is documented below.  In addition, the model headers, Actor.h, body.h and Extbox.h are not referenced or found in this subdirectory.  With these exceptions all the other headers files are the same.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156891">OpenSource/Tools/tpack/GenesisSDK Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>This library is a duplicate of the regular outer include library which all the other tools use.  It is not documented here for that reason. </P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P>&nbsp;</P>
<P><A NAME="_Toc454156892">OpenSource/Tools/tpack/Source Subdirectory</A></P>
</B></I></FONT><FONT FACE="Arial"><P>This subdirectory contains the basic routines for the Texture packing utility.</P>
</FONT><B><I><FONT FACE="Arial Black" SIZE=4><P><A NAME="_Toc454156893">Resource.h</A></P>
</B></I></FONT><FONT FACE="Arial" SIZE=2><P>//{{NO_DEPENDENCIES}}</P>
<P>// Microsoft Developer Studio generated include file.</P>
<P>// Used by TPack.rc</P>
<P>//</P>
<P>#define IDS_CLASSNAME                   1</P>
<P>#define IDS_PROGRAMNAME                 2</P>
<P>#define IDS_UNIQUEMESSAGE               3</P>
<P>#define IDS_DEFAULTPOSE                 4</P>
<P>#define IDS_BLENDEDMOTION               5</P>
<P>#define IDR_MENU1                       101</P>
<P>#define IDD_DRIVERDIALOG                102</P>
<P>#define IDD_ACTOR                       103</P>
<P>#define IDD_TEXTUREPACKER               103</P>
<P>#define IDD_BLENDER                     105</P>
<P>#define IDI_FRAME                       106</P>
<P>#define IDI_MAINICON                    107</P>
<P>#define IDI_ZOOM                        108</P>
<P>#define IDS_CANTCREATEENGINE            109</P>
<P>#define IDS_CANTCREATECAMERA            110</P>
<P>#define IDI_PAN                         111</P>
<P>#define IDS_CANTCREATEWORLD             111</P>
<P>#define IDS_CANTLOADDRIVER              112</P>
<P>#define IDI_ROTATE                      113</P>
<P>#define IDS_CANTINITENGINE              113</P>
<P>#define IDS_CANTLOADACTOR               114</P>
<P>#define IDR_ACCELERATOR1                115</P>
<P>#define IDD_ABOUT                       116</P>
<P>#define IDS_BEGINFRAMEFAIL              116</P>
<P>#define IDS_RENDERFAIL                  117</P>
<P>#define IDS_INIFILENAME                 118</P>
<P>#define IDS_ENDFRAMEFAIL                119</P>
<P>#define IDS_HELPFILENAME                120</P>
<P>#define IDS_PROGRAMBASENAME             121</P>
<P>#define IDS_ACTFILEFILTER               122</P>
<P>#define IDS_ACTFILEEXT                  123</P>
<P>#define IDS_ACTFILEFILTERDESC           124</P>
<P>#define IDS_UNNAMED                     125</P>
<P>#define IDB_TPACK                       126</P>
<P>#define IDD_NEWDIALOG                   127</P>
<P>#define IDI_BLEND                       128</P>
<P>#define IDC_DRIVERLIST                  1000</P>
<P>#define IDC_MOTIONLIST                  1000</P>
<P>#define IDC_PAN                         1001</P>
<P>#define IDC_ROTATE                      1002</P>
<P>#define IDC_ZOOM                        1003</P>
<P>#define IDI_PLAY                        1004</P>
<P>#define IDI_PAUSE                       1005</P>
<P>#define IDI_RRSTART                     1006</P>
<P>#define IDI_RRFRAME                     1007</P>
<P>#define IDI_STOP                        1008</P>
<P>#define IDI_FFFRAME                     1009</P>
<P>#define IDI_FFEND                       1010</P>
<P>#define IDC_FRONT                       1011</P>
<P>#define IDC_MOTIONCOMBO                 1012</P>
<P>#define IDC_EDITSCALE                   1013</P>
<P>#define IDC_BACK                        1014</P>
<P>#define IDC_SLIDERTIME                  1015</P>
<P>#define IDC_EDITSPEED                   1016</P>
<P>#define IDC_LEFT                        1017</P>
<P>#define IDC_STATICSCALE                 1018</P>
<P>#define IDC_STATICMOTION                1019</P>
<P>#define IDC_RENDERWIN                   1020</P>
<P>#define IDC_STATICSPEED                 1021</P>
<P>#define IDC_RIGHT                       1022</P>
<P>#define IDC_SPINSCALE                   1023</P>
<P>#define IDC_SPINSPEED                   1024</P>
<P>#define IDC_EDITFRAMETIME               1025</P>
<P>#define IDC_SPINFRAMETIME               1026</P>
<P>#define IDC_STATICFRAME                 1027</P>
<P>#define IDC_TOP                         1028</P>
<P>#define IDC_BOTTOM                      1029</P>
<P>#define IDC_STATICEND                   1030</P>
<P>#define IDC_STATICSTART                 1031</P>
<P>#define IDS_STATICSTART                 1031</P>
<P>#define IDC_STATICCURRENTTIME           1032</P>
<P>#define IDC_LOOPED                      1033</P>
<P>#define IDC_CENTER                      1034</P>
<P>#define IDC_EDITDIR                     1035</P>
<P>#define IDC_STATICMOTION2               1035</P>
<P>#define IDC_TAB1                        1036</P>
<P>#define IDC_LIST1                       1037</P>
<P>#define IDC_MOTIONSLIST                 1037</P>
<P>#define IDC_TEXTURELIST                 1037</P>
<P>#define IDC_LIST2                       1038</P>
<P>#define IDC_BLENDLIST                   1038</P>
<P>#define IDC_BUTTON1                     1039</P>
<P>#define IDC_BLEND                       1039</P>
<P>#define IDC_ADD                         1039</P>
<P>#define IDC_BUTTON2                     1040</P>
<P>#define IDC_MOVEUP                      1040</P>
<P>#define IDC_BUTTON3                     1041</P>
<P>#define IDC_REMOVE                      1041</P>
<P>#define IDC_BUTTON4                     1042</P>
<P>#define IDC_MOVEDOWN                    1042</P>
<P>#define IDC_EDITTIMEOFFSET              1043</P>
<P>#define IDC_SLIDERTIMEOFFSET            1044</P>
<P>#define IDC_EDITTIMESCALE               1045</P>
<P>#define IDC_EDITSTARTTIME               1046</P>
<P>#define IDC_SLIDERSTARTTIME             1047</P>
<P>#define IDC_EDITENDTIME                 1048</P>
<P>#define IDC_SLIDERENDTIME               1049</P>
<P>#define IDC_EDITSTARTBLEND              1050</P>
<P>#define IDC_EDITENDBLEND                1051</P>
<P>#define IDC_SPINSTARTBLEND              1052</P>
<P>#define IDC_SPINENDBLEND                1053</P>
<P>#define IDC_CHECKSMOOTHBLEND            1054</P>
<P>#define IDC_BLENDPATH                   1055</P>
<P>#define IDC_STATICMOTIONEND             1056</P>
<P>#define IDC_TESTOUT                     1057</P>
<P>#define IDC_STATICBLEND                 1060</P>
<P>#define IDC_STATICSUBMOTION             1061</P>
<P>#define IDC_TEXTURESIZE                 1062</P>
<P>#define IDC_PREVIEW                     1063</P>
<P>#define ID_FILE_EXIT                    40001</P>
<P>#define ID_FILE_OPEN                    40002</P>
<P>#define ID_MOTION_SELECT                40003</P>
<P>#define ID_START                        40004</P>
<P>#define ID_OPTIONS_FRONT                40005</P>
<P>#define ID_HELP_CONTENTS                40006</P>
<P>#define ID_HELP_ABOUT                   40007</P>
<P>#define ID_OPTIONS_FRAMERATE            40008</P>
<P>#define IDS_CANTADDWORLD                40009</P>
<P>#define IDS_CANTSTARTTIMER              40010</P>
<P>#define IDC_NOTHING                     40011</P>
<P>#define ID_FILE_SAVE                    40012</P>
<P>#define ID_FILE_SAVEAS                  40013</P>
<P>#define IDC_STATIC                      -1</P>

<P>// Next default values for new objects</P>
<P>// </P>
<P>#ifdef APSTUDIO_INVOKED</P>
<P>#ifndef APSTUDIO_READONLY_SYMBOLS</P>
<P>#define _APS_NO_MFC                     1</P>
<P>#define _APS_NEXT_RESOURCE_VALUE        131</P>
<P>#define _APS_NEXT_COMMAND_VALUE         40014</P>
<P>#define _APS_NEXT_CONTROL_VALUE         1064</P>
<P>#define _APS_NEXT_SYMED_VALUE           101</P>
<P>#endif</P>
<P>#endif</A></P></FONT></BODY>
</HTML>
